import"./chunks/36BQJYSV.js";import"./chunks/EF5GRFCD.js";import"./chunks/I2XYMP7X.js";import"./chunks/VV54QQJA.js";import"./chunks/WZUFDNVB.js";import"./chunks/5T4V74FX.js";import"./chunks/KSWBD2TZ.js";import"./chunks/RF7QDMRO.js";import"./chunks/ABULMT32.js";import"./chunks/MKFZQTYG.js";import"./chunks/4SC7XEKB.js";import"./chunks/23DIE7BK.js";import"./chunks/ON4Q5ESC.js";import"./chunks/REMB6LXX.js";import{y as r}from"./chunks/BK6QTIUI.js";import{O as i}from"./chunks/VYGUKUEK.js";import"./chunks/X6PP3PBE.js";import"./chunks/JS22TWPO.js";import"./chunks/BR2YNKDZ.js";import"./chunks/BIAB2ZEP.js";import"./chunks/O5NYTI7P.js";var c=new r("ContentScript/CheckIsLogin"),s=new i({runtime:"client"}),u=t=>{let a=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(window.atob(a).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)},p=async()=>{let o=`UseChatGPTAuthServiceProvider.${window.localStorage.getItem("UseChatGPTAuthServiceProvider.email")}`,a=window.localStorage.getItem(o+".accessToken"),e=window.localStorage.getItem(o+".refreshToken");if(e){let n=u(e);n.exp*1e3>Date.now()&&(c.info("not expired"),await s.postMessage({event:"Client_updateUseChatGPTAuthInfo",data:{accessToken:a,refreshToken:e,userInfo:n}}))}else c.info("expired"),await s.postMessage({event:"Client_updateUseChatGPTAuthInfo",data:{}}),await s.postMessage({event:"Client_destroyWithLogout",data:{}})};p();var l=location.pathname,d=new MutationObserver(function(t){t.forEach(function(o){l!==location.pathname&&(l=location.pathname,p())})});d.observe(document.querySelector("body"),{attributes:!0,childList:!0,subtree:!0});
