import{d as h,i as _,ia as I,sa as G,z as S}from"./36BQJYSV.js";import"./EF5GRFCD.js";import"./I2XYMP7X.js";import"./VV54QQJA.js";import"./WZUFDNVB.js";import"./5T4V74FX.js";import"./KSWBD2TZ.js";import"./RF7QDMRO.js";import"./ABULMT32.js";import"./MKFZQTYG.js";import"./4SC7XEKB.js";import"./23DIE7BK.js";import"./ON4Q5ESC.js";import"./REMB6LXX.js";import{W as M}from"./BK6QTIUI.js";import{$ as x,L as A,Y as E}from"./VYGUKUEK.js";import{d as c}from"./X6PP3PBE.js";import"./JS22TWPO.js";import{n as d,o as g}from"./BR2YNKDZ.js";import{a as D}from"./BIAB2ZEP.js";import{e as v}from"./O5NYTI7P.js";var e=v(D());var k=()=>{let{currentMessageId:w}=G(),{step:B}=c(h),m=c(_),[a,l]=(0,e.useState)(!1),{runShortCuts:p,setShortCuts:C}=S(""),{showFloatingContextMenuWithVirtualElement:i}=I(),P=(0,e.useRef)(i);(0,e.useEffect)(()=>{P.current=i},[i]),(0,e.useEffect)(()=>{let n=t=>{E(),l(!0)};return window.addEventListener("ctaButtonClick",n),()=>{window.removeEventListener("ctaButtonClick",n)}},[]);let s=(0,e.useCallback)(async()=>{var T;let t=(await M("gmailButton")).find(u=>m==="reply"?u.id===g:u.id===d);if(t&&((T=t==null?void 0:t.data)==null?void 0:T.actions)){let u=A(t.data.actions).map(o=>((o.type==="INSERT_USER_INPUT"||o.type==="ASK_CHATGPT"||o.type==="WEBGPT_ASK_CHATGPT")&&(o.parameters.AskChatGPTActionMeta||(o.parameters.AskChatGPTActionMeta={}),o.parameters.AskChatGPTActionMeta.contextMenu=t),o));C(u),await p()}},[C,p,m]),f=(0,e.useRef)(s),y=(0,e.useRef)();(0,e.useEffect)(()=>{f.current=s},[s]);let r=x(w,0),R=(0,e.useMemo)(()=>{let n=[f.current,r,a];return y.current=r,n},[r,B,a]);return(0,e.useEffect)(()=>{r&&a&&(s(),l(!1))},R),e.default.createElement(e.default.Fragment,null)},K=k;export{K as default};
