import{a as P}from"../../chunks/4LKVI2HJ.js";import{a as E,b as x}from"../../chunks/SCWZBJFE.js";import{d as L,i as f,j as O,k as T}from"../../chunks/WZUFDNVB.js";import{b as k}from"../../chunks/5T4V74FX.js";import{a as w}from"../../chunks/KSWBD2TZ.js";import"../../chunks/RF7QDMRO.js";import{a as C}from"../../chunks/ABULMT32.js";import{d as S}from"../../chunks/MKFZQTYG.js";import"../../chunks/4SC7XEKB.js";import{D as h,a,r as p}from"../../chunks/23DIE7BK.js";import"../../chunks/ON4Q5ESC.js";import"../../chunks/REMB6LXX.js";import{Z as b}from"../../chunks/BK6QTIUI.js";import{ba as u}from"../../chunks/VYGUKUEK.js";import{a as g}from"../../chunks/X6PP3PBE.js";import{a as M}from"../../chunks/JS22TWPO.js";import{I as y}from"../../chunks/BR2YNKDZ.js";import{a as _}from"../../chunks/BIAB2ZEP.js";import{e as s}from"../../chunks/O5NYTI7P.js";var W=s(E()),t=s(_());var A=s(O());var I=s(L()),e=s(M());var D=(0,W.createRoot)(document.getElementById("root")),F=o=>{let{isSpecialPage:i}=o,[n,r]=(0,t.useState)(""),[m,v]=(0,t.useState)(),z=async()=>{var d;let c=await e.default.commands.getAll()||[];r(((d=c.find(B=>B.name==="_execute_action"))==null?void 0:d.shortcut)||"unset");let l=await e.default.tabs.query({active:!0,currentWindow:!0});l&&l[0]&&v(l[0].id)};return C(()=>{z()}),t.default.createElement(a,{minWidth:400,spacing:2,p:1},t.default.createElement(a,{boxSizing:"border-box",direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between"},t.default.createElement(h,{sx:{flexShrink:0,textDecoration:"none!important"},href:y,target:"_blank"},t.default.createElement(a,{direction:"row",alignItems:"center",gap:1},t.default.createElement(k,{sx:{fontSize:28,color:"inherit"}}),t.default.createElement(p,{color:"text.primary",component:"h1",fontSize:20,fontWeight:800},"Welcome to MaxAI.me!"))),t.default.createElement(T,{title:"Settings",size:"small",variant:"text",sx:{width:32,height:32,color:"inherit",minWidth:"unset"},onClick:c=>{c.stopPropagation(),c.preventDefault(),u({key:"options"})}},t.default.createElement(A.default,{sx:{fontSize:16,color:"text.primary"}}))),i?t.default.createElement(f,{severity:"info"},t.default.createElement(p,{fontSize:14,color:"text.primary",mb:1},"For security reasons, the extension only works on actual websites and PDF files, excluding ChatGPT's webpage. So it won't work on"),t.default.createElement(P,{textProps:{fontSize:14},textList:["New tabs without loaded websites","Chrome pages","Chrome Web Store pages","chat.openai.com"]})):t.default.createElement(f,{severity:"info"},t.default.createElement(p,{fontSize:14,color:"text.primary"},"Refresh this page to activate the extension on this page.")),!i&&t.default.createElement(S,{fullWidth:!0,color:"primary",variant:"contained",startIcon:t.default.createElement(I.default,{sx:{fontSize:16,color:"inherit"}}),onClick:async()=>{m&&(await e.default.tabs.reload(m),window.close())}},"Refresh this page"),t.default.createElement(a,null,t.default.createElement(p,{fontSize:14,color:"text.secondary"},t.default.createElement("span",null,"Press "),t.default.createElement(w,{sx:{p:"0 4px",display:"inline-block",minWidth:"40px",textAlign:"center",bgcolor:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.16)",borderRadius:"4px",color:"text.primary"},component:"span"},n),t.default.createElement("span",null," to toggle the extension sidebar. You can also "),t.default.createElement(h,{href:"#",onClick:async()=>{await u({key:"shortcuts"})}},"change the shortcut"),t.default.createElement("span",null," anytime."))))},G=async()=>{let o=await e.default.tabs.query({active:!0,currentWindow:!0});setTimeout(async()=>{let i=!1;try{let n=o&&o[0]&&o[0].id,r=o&&o[0]&&o[0].url||"chrome://";if(i=r.startsWith("chrome")||r.startsWith("https://chrome.google.com/webstore")||r.startsWith("https://chat.openai.com"),i&&!(r.includes("pages/pdf/web")&&r.includes(e.default.runtime.id)))throw new Error("isSpecialPage");if(n)if(await e.default.tabs.sendMessage(n,{}),await b(n,"Client_listenOpenChatMessageBox",{type:"shortcut"}))e.default.action.setPopup({popup:""}),window.close();else throw new Error("no result")}catch(n){D.render(t.default.createElement(t.default.StrictMode,null,t.default.createElement(g,null,t.default.createElement(x,null,t.default.createElement(F,{isSpecialPage:i})))))}},100)};G();
