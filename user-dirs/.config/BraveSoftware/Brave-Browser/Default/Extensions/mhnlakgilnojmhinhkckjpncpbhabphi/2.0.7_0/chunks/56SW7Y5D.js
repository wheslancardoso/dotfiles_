import{d as ku,e as Eu,f as Su,g as Cu,j as Zo,na as Tu}from"./36BQJYSV.js";import"./EF5GRFCD.js";import{T as Cs,a as xu}from"./I2XYMP7X.js";import{A as Iu,E as Au}from"./VV54QQJA.js";import"./WZUFDNVB.js";import{g as yu,h as wu}from"./5T4V74FX.js";import"./KSWBD2TZ.js";import"./RF7QDMRO.js";import{a as Du}from"./ABULMT32.js";import"./MKFZQTYG.js";import"./4SC7XEKB.js";import"./23DIE7BK.js";import"./ON4Q5ESC.js";import"./REMB6LXX.js";import{W as vu,a as Xo}from"./BK6QTIUI.js";import{M as gu,Z as Ss}from"./VYGUKUEK.js";import{e as hu,f as Qo}from"./X6PP3PBE.js";import"./JS22TWPO.js";import{n as mu,o as _u,r as bu}from"./BR2YNKDZ.js";import{a as pu}from"./BIAB2ZEP.js";import{a as Ki,b as gd,e as Es}from"./O5NYTI7P.js";var Ou=gd((Mu,Is)=>{(function(ht){typeof Mu=="object"&&typeof Is<"u"?Is.exports=ht():typeof define=="function"&&define.amd?define([],ht):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).InboxSDK=ht()})(function(){var ht;return function e(v,i,t){function n(c,s){if(!i[c]){if(!v[c]){var o=typeof Ki=="function"&&Ki;if(!s&&o)return o(c,!0);if(u)return u(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var a=i[c]={exports:{}};v[c][0].call(a.exports,function(p){return n(v[c][1][p]||p)},a,a.exports,e,v,i,t)}return i[c].exports}for(var u=typeof Ki=="function"&&Ki,r=0;r<t.length;r++)n(t[r]);return n}({1:[function(e,v,i){v.exports=function(t,n){(n==null||n>t.length)&&(n=t.length);for(var u=0,r=new Array(n);u<n;u++)r[u]=t[u];return r},v.exports.__esModule=!0,v.exports.default=v.exports},{}],2:[function(e,v,i){v.exports=function(t){if(Array.isArray(t))return t},v.exports.__esModule=!0,v.exports.default=v.exports},{}],3:[function(e,v,i){v.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},v.exports.__esModule=!0,v.exports.default=v.exports},{}],4:[function(e,v,i){v.exports=function(t,n){return n.get?n.get.call(t):n.value},v.exports.__esModule=!0,v.exports.default=v.exports},{}],5:[function(e,v,i){v.exports=function(t,n,u){if(n.set)n.set.call(t,u);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=u}},v.exports.__esModule=!0,v.exports.default=v.exports},{}],6:[function(e,v,i){v.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},v.exports.__esModule=!0,v.exports.default=v.exports},{}],7:[function(e,v,i){v.exports=function(t,n,u){if(!n.has(t))throw new TypeError("attempted to "+u+" private field on non-instance");return n.get(t)},v.exports.__esModule=!0,v.exports.default=v.exports},{}],8:[function(e,v,i){var t=e("./classApplyDescriptorGet.js"),n=e("./classExtractFieldDescriptor.js");v.exports=function(u,r){var c=n(u,r,"get");return t(u,c)},v.exports.__esModule=!0,v.exports.default=v.exports},{"./classApplyDescriptorGet.js":4,"./classExtractFieldDescriptor.js":7}],9:[function(e,v,i){var t=e("./classApplyDescriptorSet.js"),n=e("./classExtractFieldDescriptor.js");v.exports=function(u,r,c){var s=n(u,r,"set");return t(u,s,c),c},v.exports.__esModule=!0,v.exports.default=v.exports},{"./classApplyDescriptorSet.js":5,"./classExtractFieldDescriptor.js":7}],10:[function(e,v,i){var t=e("./toPropertyKey.js");function n(u,r){for(var c=0;c<r.length;c++){var s=r[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,t(s.key),s)}}v.exports=function(u,r,c){return r&&n(u.prototype,r),c&&n(u,c),Object.defineProperty(u,"prototype",{writable:!1}),u},v.exports.__esModule=!0,v.exports.default=v.exports},{"./toPropertyKey.js":26}],11:[function(e,v,i){var t=e("./toPropertyKey.js");v.exports=function(n,u,r){return(u=t(u))in n?Object.defineProperty(n,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[u]=r,n},v.exports.__esModule=!0,v.exports.default=v.exports},{"./toPropertyKey.js":26}],12:[function(e,v,i){function t(){return v.exports=t=Object.assign?Object.assign.bind():function(n){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(n[c]=r[c])}return n},v.exports.__esModule=!0,v.exports.default=v.exports,t.apply(this,arguments)}v.exports=t,v.exports.__esModule=!0,v.exports.default=v.exports},{}],13:[function(e,v,i){function t(n){return v.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},v.exports.__esModule=!0,v.exports.default=v.exports,t(n)}v.exports=t,v.exports.__esModule=!0,v.exports.default=v.exports},{}],14:[function(e,v,i){var t=e("./setPrototypeOf.js");v.exports=function(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(u&&u.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),u&&t(n,u)},v.exports.__esModule=!0,v.exports.default=v.exports},{"./setPrototypeOf.js":23}],15:[function(e,v,i){v.exports=function(t){return t&&t.__esModule?t:{default:t}},v.exports.__esModule=!0,v.exports.default=v.exports},{}],16:[function(e,v,i){var t=e("./typeof.js").default;function n(u){if(typeof WeakMap!="function")return null;var r=new WeakMap,c=new WeakMap;return(n=function(s){return s?c:r})(u)}v.exports=function(u,r){if(!r&&u&&u.__esModule)return u;if(u===null||t(u)!=="object"&&typeof u!="function")return{default:u};var c=n(r);if(c&&c.has(u))return c.get(u);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var a=o?Object.getOwnPropertyDescriptor(u,d):null;a&&(a.get||a.set)?Object.defineProperty(s,d,a):s[d]=u[d]}return s.default=u,c&&c.set(u,s),s},v.exports.__esModule=!0,v.exports.default=v.exports},{"./typeof.js":27}],17:[function(e,v,i){v.exports=function(t,n){var u=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(u!=null){var r,c,s,o,d=[],a=!0,p=!1;try{if(s=(u=u.call(t)).next,n===0){if(Object(u)!==u)return;a=!1}else for(;!(a=(r=s.call(u)).done)&&(d.push(r.value),d.length!==n);a=!0);}catch(f){p=!0,c=f}finally{try{if(!a&&u.return!=null&&(o=u.return(),Object(o)!==o))return}finally{if(p)throw c}}return d}},v.exports.__esModule=!0,v.exports.default=v.exports},{}],18:[function(e,v,i){v.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},v.exports.__esModule=!0,v.exports.default=v.exports},{}],19:[function(e,v,i){var t=e("./defineProperty.js");v.exports=function(n){for(var u=1;u<arguments.length;u++){var r=arguments[u]!=null?Object(arguments[u]):{},c=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&c.push.apply(c,Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),c.forEach(function(s){t(n,s,r[s])})}return n},v.exports.__esModule=!0,v.exports.default=v.exports},{"./defineProperty.js":11}],20:[function(e,v,i){var t=e("./objectWithoutPropertiesLoose.js");v.exports=function(n,u){if(n==null)return{};var r,c,s=t(n,u);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(c=0;c<o.length;c++)r=o[c],u.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s},v.exports.__esModule=!0,v.exports.default=v.exports},{"./objectWithoutPropertiesLoose.js":21}],21:[function(e,v,i){v.exports=function(t,n){if(t==null)return{};var u,r,c={},s=Object.keys(t);for(r=0;r<s.length;r++)u=s[r],n.indexOf(u)>=0||(c[u]=t[u]);return c},v.exports.__esModule=!0,v.exports.default=v.exports},{}],22:[function(e,v,i){var t=e("./typeof.js").default,n=e("./assertThisInitialized.js");v.exports=function(u,r){if(r&&(t(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(u)},v.exports.__esModule=!0,v.exports.default=v.exports},{"./assertThisInitialized.js":3,"./typeof.js":27}],23:[function(e,v,i){function t(n,u){return v.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,c){return r.__proto__=c,r},v.exports.__esModule=!0,v.exports.default=v.exports,t(n,u)}v.exports=t,v.exports.__esModule=!0,v.exports.default=v.exports},{}],24:[function(e,v,i){var t=e("./arrayWithHoles.js"),n=e("./iterableToArrayLimit.js"),u=e("./unsupportedIterableToArray.js"),r=e("./nonIterableRest.js");v.exports=function(c,s){return t(c)||n(c,s)||u(c,s)||r()},v.exports.__esModule=!0,v.exports.default=v.exports},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":17,"./nonIterableRest.js":18,"./unsupportedIterableToArray.js":28}],25:[function(e,v,i){var t=e("./typeof.js").default;v.exports=function(n,u){if(t(n)!=="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var c=r.call(n,u||"default");if(t(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(n)},v.exports.__esModule=!0,v.exports.default=v.exports},{"./typeof.js":27}],26:[function(e,v,i){var t=e("./typeof.js").default,n=e("./toPrimitive.js");v.exports=function(u){var r=n(u,"string");return t(r)==="symbol"?r:String(r)},v.exports.__esModule=!0,v.exports.default=v.exports},{"./toPrimitive.js":25,"./typeof.js":27}],27:[function(e,v,i){function t(n){return v.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},v.exports.__esModule=!0,v.exports.default=v.exports,t(n)}v.exports=t,v.exports.__esModule=!0,v.exports.default=v.exports},{}],28:[function(e,v,i){var t=e("./arrayLikeToArray.js");v.exports=function(n,u){if(n){if(typeof n=="string")return t(n,u);var r=Object.prototype.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,u):void 0}},v.exports.__esModule=!0,v.exports.default=v.exports},{"./arrayLikeToArray.js":1}],29:[function(e,v,i){"use strict";var t=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(i,"__esModule",{value:!0}),i._62To10=i._36To10=i._32To10=i._16To10=i._8To10=i._2To10=i._10To62=i._10To36=i._10To32=i._10To16=i._10To8=i._10To2=i.convertBase=void 0;var n=t(e("decimal.js"));n.default.set({precision:1e9}),n.default.set({toExpPos:9e15});var u=function(r,c,s){var o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if(typeof r!="number"&&typeof r!="string"||typeof r=="number"&&!isFinite(r))throw new Error("First augument must be a number or string.");if(typeof r=="number"&&(r=r.toString()),typeof c!="number"&&typeof c!="string")throw new Error("Second augument must be a number or string.");if(typeof c=="number"){if(!Number.isInteger(c))throw new Error("Second augument must be integer.");if(!(2<=c&&c<=62))throw new Error("Second augument must be between 2 and 62.");c=o.substr(0,c)}if(c.length<=1)throw new Error("Second augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(c.length!==new Set(c).size)throw new Error("Second augument must not contain the same characters.");if(!new RegExp("^["+c+"]+$").test(r))throw new Error("First augument must consist of second augument.");if(typeof s!="number"&&typeof s!="string")throw new Error("Third augument must be a number or string.");if(typeof s=="number"){if(!Number.isInteger(s))throw new Error("Third augument must be integer.");if(!(2<=s&&s<=62))throw new Error("Third augument must be between 2 and 62.");s=o.substr(0,s)}if(s.length<=1)throw new Error("Third augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(s.length!==new Set(s).size)throw new Error("Third augument must not contain the same characters.");var d=function(a,p){for(var f={},b=0;b<p.length;b++)f[p.substr(b,1)]=new n.default(b);var _=new n.default(p.length),y=new n.default(0);for(b=0;b<a.length;b++){var g=f[a.substr(-1*(b+1),1)],m=n.default.pow(_,b),w=g.times(m);y=y.plus(w)}return y.toString()}(r,c);return function(a,p){for(var f=[],b=new n.default(a),_=new n.default(p.length);!b.isZero();){var y=b.mod(_).toNumber();b=b.dividedToIntegerBy(_),f.unshift(p.substr(y,1))}return f.length===0&&f.unshift("0"),f.join("")}(d,s)};i.convertBase=u,i._10To2=function(r){return u(r,10,2)},i._10To8=function(r){return u(r,10,8)},i._10To16=function(r){return u(r,10,16)},i._10To32=function(r){return u(r,10,32)},i._10To36=function(r){return u(r,10,36)},i._10To62=function(r){return u(r,10,62)},i._2To10=function(r){return u(r,2,10)},i._8To10=function(r){return u(r,8,10)},i._16To10=function(r){return u(r,16,10)},i._32To10=function(r){return u(r,32,10)},i._36To10=function(r){return u(r,36,10)},i._62To10=function(r){return u(r,62,10)}},{"decimal.js":134}],30:[function(e,v,i){v.exports=function(t,n){var u=typeof t=="number",r=typeof n=="number";u&&!r?(n=t,t=0):u||r||(t=0,n=0);var c=(n|=0)-(t|=0);if(c<0)throw new Error("array length must be positive");for(var s=new Array(c),o=0,d=t;o<c;o++,d++)s[o]=d;return s}},{}],31:[function(e,v,i){"use strict";var t=e("./raw"),n=[],u=[],r=t.makeRequestCallFromTimer(function(){if(u.length)throw u.shift()});function c(o){var d;(d=n.length?n.pop():new s).task=o,t(d)}function s(){this.task=null}v.exports=c,s.prototype.call=function(){try{this.task.call()}catch(o){c.onerror?c.onerror(o):(u.push(o),r())}finally{this.task=null,n[n.length]=this}}},{"./raw":32}],32:[function(e,v,i){(function(t){(function(){"use strict";function n(y){r.length||u(),r[r.length]=y}v.exports=n;var u,r=[],c=0,s=1024;function o(){for(;c<r.length;){var y=c;if(c+=1,r[y].call(),c>s){for(var g=0,m=r.length-c;g<m;g++)r[g]=r[g+c];r.length-=c,c=0}}r.length=0,c=0}var d,a,p,f=t!==void 0?t:self,b=f.MutationObserver||f.WebKitMutationObserver;function _(y){return function(){var g=setTimeout(w,0),m=setInterval(w,50);function w(){clearTimeout(g),clearInterval(m),y()}}}typeof b=="function"?(d=1,a=new b(o),p=document.createTextNode(""),a.observe(p,{characterData:!0}),u=function(){d=-d,p.data=d}):u=_(o),n.requestFlush=u,n.makeRequestCallFromTimer=_}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],33:[function(e,v,i){(function(t){(function(){"use strict";var n=e("object-assign");function u(E,D){if(E===D)return 0;for(var P=E.length,j=D.length,k=0,M=Math.min(P,j);k<M;++k)if(E[k]!==D[k]){P=E[k],j=D[k];break}return P<j?-1:j<P?1:0}function r(E){return t.Buffer&&typeof t.Buffer.isBuffer=="function"?t.Buffer.isBuffer(E):!(E==null||!E._isBuffer)}var c=e("util/"),s=Object.prototype.hasOwnProperty,o=Array.prototype.slice,d=function(){}.name==="foo";function a(E){return Object.prototype.toString.call(E)}function p(E){return!r(E)&&typeof t.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):!!E&&(E instanceof DataView||!!(E.buffer&&E.buffer instanceof ArrayBuffer)))}var f=v.exports=w,b=/\s*function\s+([^\(\s]*)\s*/;function _(E){if(c.isFunction(E)){if(d)return E.name;var D=E.toString().match(b);return D&&D[1]}}function y(E,D){return typeof E=="string"?E.length<D?E:E.slice(0,D):E}function g(E){if(d||!c.isFunction(E))return c.inspect(E);var D=_(E);return"[Function"+(D?": "+D:"")+"]"}function m(E,D,P,j,k){throw new f.AssertionError({message:P,actual:E,expected:D,operator:j,stackStartFunction:k})}function w(E,D){E||m(E,!0,D,"==",f.ok)}function C(E,D,P,j){if(E===D)return!0;if(r(E)&&r(D))return u(E,D)===0;if(c.isDate(E)&&c.isDate(D))return E.getTime()===D.getTime();if(c.isRegExp(E)&&c.isRegExp(D))return E.source===D.source&&E.global===D.global&&E.multiline===D.multiline&&E.lastIndex===D.lastIndex&&E.ignoreCase===D.ignoreCase;if(E!==null&&typeof E=="object"||D!==null&&typeof D=="object"){if(p(E)&&p(D)&&a(E)===a(D)&&!(E instanceof Float32Array||E instanceof Float64Array))return u(new Uint8Array(E.buffer),new Uint8Array(D.buffer))===0;if(r(E)!==r(D))return!1;var k=(j=j||{actual:[],expected:[]}).actual.indexOf(E);return k!==-1&&k===j.expected.indexOf(D)||(j.actual.push(E),j.expected.push(D),function(M,R,V,T){if(M==null||R==null)return!1;if(c.isPrimitive(M)||c.isPrimitive(R))return M===R;if(V&&Object.getPrototypeOf(M)!==Object.getPrototypeOf(R))return!1;var U=I(M),W=I(R);if(U&&!W||!U&&W)return!1;if(U)return C(M=o.call(M),R=o.call(R),V);var Q,X,oe=A(M),J=A(R);if(oe.length!==J.length)return!1;for(oe.sort(),J.sort(),X=oe.length-1;X>=0;X--)if(oe[X]!==J[X])return!1;for(X=oe.length-1;X>=0;X--)if(!C(M[Q=oe[X]],R[Q],V,T))return!1;return!0}(E,D,P,j))}return P?E===D:E==D}function I(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function S(E,D){if(!E||!D)return!1;if(Object.prototype.toString.call(D)=="[object RegExp]")return D.test(E);try{if(E instanceof D)return!0}catch{}return!Error.isPrototypeOf(D)&&D.call({},E)===!0}function O(E,D,P,j){var k;if(typeof D!="function")throw new TypeError('"block" argument must be a function');typeof P=="string"&&(j=P,P=null),k=function(V){var T;try{V()}catch(U){T=U}return T}(D),j=(P&&P.name?" ("+P.name+").":".")+(j?" "+j:"."),E&&!k&&m(k,P,"Missing expected exception"+j);var M=typeof j=="string",R=!E&&k&&!P;if((!E&&c.isError(k)&&M&&S(k,P)||R)&&m(k,P,"Got unwanted exception"+j),E&&k&&P&&!S(k,P)||!E&&k)throw k}f.AssertionError=function(E){this.name="AssertionError",this.actual=E.actual,this.expected=E.expected,this.operator=E.operator,E.message?(this.message=E.message,this.generatedMessage=!1):(this.message=function(V){return y(g(V.actual),128)+" "+V.operator+" "+y(g(V.expected),128)}(this),this.generatedMessage=!0);var D=E.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var P=new Error;if(P.stack){var j=P.stack,k=_(D),M=j.indexOf(`
`+k);if(M>=0){var R=j.indexOf(`
`,M+1);j=j.substring(R+1)}this.stack=j}}},c.inherits(f.AssertionError,Error),f.fail=m,f.ok=w,f.equal=function(E,D,P){E!=D&&m(E,D,P,"==",f.equal)},f.notEqual=function(E,D,P){E==D&&m(E,D,P,"!=",f.notEqual)},f.deepEqual=function(E,D,P){C(E,D,!1)||m(E,D,P,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(E,D,P){C(E,D,!0)||m(E,D,P,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(E,D,P){C(E,D,!1)&&m(E,D,P,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function E(D,P,j){C(D,P,!0)&&m(D,P,j,"notDeepStrictEqual",E)},f.strictEqual=function(E,D,P){E!==D&&m(E,D,P,"===",f.strictEqual)},f.notStrictEqual=function(E,D,P){E===D&&m(E,D,P,"!==",f.notStrictEqual)},f.throws=function(E,D,P){O(!0,E,D,P)},f.doesNotThrow=function(E,D,P){O(!1,E,D,P)},f.ifError=function(E){if(E)throw E},f.strict=n(function E(D,P){D||m(D,!0,P,"==",E)},f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var A=Object.keys||function(E){var D=[];for(var P in E)s.call(E,P)&&D.push(P);return D}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":366,"util/":459}],34:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){var r=new Array(2*u.length-1);r[0]=u[0];for(var c=0,s=arguments.length<=1?0:arguments.length-1;c<s;c++){var o=c+1<1||arguments.length<=c+1?void 0:arguments[c+1];r[2*c+1]=o&&Object.prototype.hasOwnProperty.call(o,"__html")?o.__html:(0,n.default)(o),r[2*c+2]=u[c+1]}return r.join("")};var t,n=(t=e("lodash/escape"))&&t.__esModule?t:{default:t};v.exports=i.default,v.exports.default=i.default},{"lodash/escape":313}],35:[function(e,v,i){v.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":91}],36:[function(e,v,i){v.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":92}],37:[function(e,v,i){v.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":93}],38:[function(e,v,i){v.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":94}],39:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},{}],40:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("../core-js/object/define-property"),u=(t=n)&&t.__esModule?t:{default:t};i.default=function(){function r(c,s){for(var o=0;o<s.length;o++){var d=s[o];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),(0,u.default)(c,d.key,d)}}return function(c,s,o){return s&&r(c.prototype,s),o&&r(c,o),c}}()},{"../core-js/object/define-property":37}],41:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("../core-js/object/assign"),u=(t=n)&&t.__esModule?t:{default:t};i.default=u.default||function(r){for(var c=1;c<arguments.length;c++){var s=arguments[c];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r}},{"../core-js/object/assign":36}],42:[function(e,v,i){"use strict";i.byteLength=function(a){var p=o(a),f=p[0],b=p[1];return 3*(f+b)/4-b},i.toByteArray=function(a){var p,f,b=o(a),_=b[0],y=b[1],g=new u(function(C,I,S){return 3*(I+S)/4-S}(0,_,y)),m=0,w=y>0?_-4:_;for(f=0;f<w;f+=4)p=n[a.charCodeAt(f)]<<18|n[a.charCodeAt(f+1)]<<12|n[a.charCodeAt(f+2)]<<6|n[a.charCodeAt(f+3)],g[m++]=p>>16&255,g[m++]=p>>8&255,g[m++]=255&p;return y===2&&(p=n[a.charCodeAt(f)]<<2|n[a.charCodeAt(f+1)]>>4,g[m++]=255&p),y===1&&(p=n[a.charCodeAt(f)]<<10|n[a.charCodeAt(f+1)]<<4|n[a.charCodeAt(f+2)]>>2,g[m++]=p>>8&255,g[m++]=255&p),g},i.fromByteArray=function(a){for(var p,f=a.length,b=f%3,_=[],y=16383,g=0,m=f-b;g<m;g+=y)_.push(d(a,g,g+y>m?m:g+y));return b===1?(p=a[f-1],_.push(t[p>>2]+t[p<<4&63]+"==")):b===2&&(p=(a[f-2]<<8)+a[f-1],_.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),_.join("")};for(var t=[],n=[],u=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,s=r.length;c<s;++c)t[c]=r[c],n[r.charCodeAt(c)]=c;function o(a){var p=a.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=a.indexOf("=");return f===-1&&(f=p),[f,f===p?0:4-f%4]}function d(a,p,f){for(var b,_,y=[],g=p;g<f;g+=3)b=(a[g]<<16&16711680)+(a[g+1]<<8&65280)+(255&a[g+2]),y.push(t[(_=b)>>18&63]+t[_>>12&63]+t[_>>6&63]+t[63&_]);return y.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],43:[function(e,v,i){(function(t){"use strict";var n,u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,c=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",d=1e14,a=14,p=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],b=1e7,_=1e9;function y(O){var A=0|O;return O>0||O===A?A:A-1}function g(O){for(var A,E,D=1,P=O.length,j=O[0]+"";D<P;){for(A=O[D++]+"",E=a-A.length;E--;A="0"+A);j+=A}for(P=j.length;j.charCodeAt(--P)===48;);return j.slice(0,P+1||1)}function m(O,A){var E,D,P=O.c,j=A.c,k=O.s,M=A.s,R=O.e,V=A.e;if(!k||!M)return null;if(E=P&&!P[0],D=j&&!j[0],E||D)return E?D?0:-M:k;if(k!=M)return k;if(E=k<0,D=R==V,!P||!j)return D?0:!P^E?1:-1;if(!D)return R>V^E?1:-1;for(M=(R=P.length)<(V=j.length)?R:V,k=0;k<M;k++)if(P[k]!=j[k])return P[k]>j[k]^E?1:-1;return R==V?0:R>V^E?1:-1}function w(O,A,E,D){if(O<A||O>E||O!==c(O))throw Error(s+(D||"Argument")+(typeof O=="number"?O<A||O>E?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function C(O){var A=O.c.length-1;return y(O.e/a)==A&&O.c[A]%2!=0}function I(O,A){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(A<0?"e":"e+")+A}function S(O,A,E){var D,P;if(A<0){for(P=E+".";++A;P+=E);O=P+O}else if(++A>(D=O.length)){for(P=E,A-=D;--A;P+=E);O+=P}else A<D&&(O=O.slice(0,A)+"."+O.slice(A));return O}n=function O(A){var E,D,P,j,k,M,R,V,T,U,W=$.prototype={constructor:$,toString:null,valueOf:null},Q=new $(1),X=20,oe=4,J=-7,he=21,ae=-1e7,ue=1e7,ge=!1,N=1,F=0,K={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function $(re,le){var ve,De,xe,Se,Ee,ye,Ne,Ue,de=this;if(!(de instanceof $))return new $(re,le);if(le==null){if(re&&re._isBigNumber===!0)return de.s=re.s,void(!re.c||re.e>ue?de.c=de.e=null:re.e<ae?de.c=[de.e=0]:(de.e=re.e,de.c=re.c.slice()));if((ye=typeof re=="number")&&0*re==0){if(de.s=1/re<0?(re=-re,-1):1,re===~~re){for(Se=0,Ee=re;Ee>=10;Ee/=10,Se++);return void(Se>ue?de.c=de.e=null:(de.e=Se,de.c=[re]))}Ue=String(re)}else{if(!u.test(Ue=String(re)))return P(de,Ue,ye);de.s=Ue.charCodeAt(0)==45?(Ue=Ue.slice(1),-1):1}(Se=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(Ee=Ue.search(/e/i))>0?(Se<0&&(Se=Ee),Se+=+Ue.slice(Ee+1),Ue=Ue.substring(0,Ee)):Se<0&&(Se=Ue.length)}else{if(w(le,2,H.length,"Base"),le==10)return $e(de=new $(re),X+de.e+1,oe);if(Ue=String(re),ye=typeof re=="number"){if(0*re!=0)return P(de,Ue,ye,le);if(de.s=1/re<0?(Ue=Ue.slice(1),-1):1,$.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(o+re)}else de.s=Ue.charCodeAt(0)===45?(Ue=Ue.slice(1),-1):1;for(ve=H.slice(0,le),Se=Ee=0,Ne=Ue.length;Ee<Ne;Ee++)if(ve.indexOf(De=Ue.charAt(Ee))<0){if(De=="."){if(Ee>Se){Se=Ne;continue}}else if(!xe&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){xe=!0,Ee=-1,Se=0;continue}return P(de,String(re),ye,le)}ye=!1,(Se=(Ue=D(Ue,le,10,de.s)).indexOf("."))>-1?Ue=Ue.replace(".",""):Se=Ue.length}for(Ee=0;Ue.charCodeAt(Ee)===48;Ee++);for(Ne=Ue.length;Ue.charCodeAt(--Ne)===48;);if(Ue=Ue.slice(Ee,++Ne)){if(Ne-=Ee,ye&&$.DEBUG&&Ne>15&&(re>p||re!==c(re)))throw Error(o+de.s*re);if((Se=Se-Ee-1)>ue)de.c=de.e=null;else if(Se<ae)de.c=[de.e=0];else{if(de.e=Se,de.c=[],Ee=(Se+1)%a,Se<0&&(Ee+=a),Ee<Ne){for(Ee&&de.c.push(+Ue.slice(0,Ee)),Ne-=a;Ee<Ne;)de.c.push(+Ue.slice(Ee,Ee+=a));Ee=a-(Ue=Ue.slice(Ee)).length}else Ee-=Ne;for(;Ee--;Ue+="0");de.c.push(+Ue)}}else de.c=[de.e=0]}function se(re,le,ve,De){var xe,Se,Ee,ye,Ne;if(ve==null?ve=oe:w(ve,0,8),!re.c)return re.toString();if(xe=re.c[0],Ee=re.e,le==null)Ne=g(re.c),Ne=De==1||De==2&&(Ee<=J||Ee>=he)?I(Ne,Ee):S(Ne,Ee,"0");else if(Se=(re=$e(new $(re),le,ve)).e,ye=(Ne=g(re.c)).length,De==1||De==2&&(le<=Se||Se<=J)){for(;ye<le;Ne+="0",ye++);Ne=I(Ne,Se)}else if(le-=Ee,Ne=S(Ne,Se,"0"),Se+1>ye){if(--le>0)for(Ne+=".";le--;Ne+="0");}else if((le+=Se-ye)>0)for(Se+1==ye&&(Ne+=".");le--;Ne+="0");return re.s<0&&xe?"-"+Ne:Ne}function pe(re,le){for(var ve,De=1,xe=new $(re[0]);De<re.length;De++){if(!(ve=new $(re[De])).s){xe=ve;break}le.call(xe,ve)&&(xe=ve)}return xe}function Te(re,le,ve){for(var De=1,xe=le.length;!le[--xe];le.pop());for(xe=le[0];xe>=10;xe/=10,De++);return(ve=De+ve*a-1)>ue?re.c=re.e=null:ve<ae?re.c=[re.e=0]:(re.e=ve,re.c=le),re}function $e(re,le,ve,De){var xe,Se,Ee,ye,Ne,Ue,de,qe=re.c,tt=f;if(qe){e:{for(xe=1,ye=qe[0];ye>=10;ye/=10,xe++);if((Se=le-xe)<0)Se+=a,Ee=le,de=(Ne=qe[Ue=0])/tt[xe-Ee-1]%10|0;else if((Ue=r((Se+1)/a))>=qe.length){if(!De)break e;for(;qe.length<=Ue;qe.push(0));Ne=de=0,xe=1,Ee=(Se%=a)-a+1}else{for(Ne=ye=qe[Ue],xe=1;ye>=10;ye/=10,xe++);de=(Ee=(Se%=a)-a+xe)<0?0:Ne/tt[xe-Ee-1]%10|0}if(De=De||le<0||qe[Ue+1]!=null||(Ee<0?Ne:Ne%tt[xe-Ee-1]),De=ve<4?(de||De)&&(ve==0||ve==(re.s<0?3:2)):de>5||de==5&&(ve==4||De||ve==6&&(Se>0?Ee>0?Ne/tt[xe-Ee]:0:qe[Ue-1])%10&1||ve==(re.s<0?8:7)),le<1||!qe[0])return qe.length=0,De?(le-=re.e+1,qe[0]=tt[(a-le%a)%a],re.e=-le||0):qe[0]=re.e=0,re;if(Se==0?(qe.length=Ue,ye=1,Ue--):(qe.length=Ue+1,ye=tt[a-Se],qe[Ue]=Ee>0?c(Ne/tt[xe-Ee]%tt[Ee])*ye:0),De)for(;;){if(Ue==0){for(Se=1,Ee=qe[0];Ee>=10;Ee/=10,Se++);for(Ee=qe[0]+=ye,ye=1;Ee>=10;Ee/=10,ye++);Se!=ye&&(re.e++,qe[0]==d&&(qe[0]=1));break}if(qe[Ue]+=ye,qe[Ue]!=d)break;qe[Ue--]=0,ye=1}for(Se=qe.length;qe[--Se]===0;qe.pop());}re.e>ue?re.c=re.e=null:re.e<ae&&(re.c=[re.e=0])}return re}function He(re){var le,ve=re.e;return ve===null?re.toString():(le=g(re.c),le=ve<=J||ve>=he?I(le,ve):S(le,ve,"0"),re.s<0?"-"+le:le)}return $.clone=O,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(re){var le,ve;if(re!=null){if(typeof re!="object")throw Error(s+"Object expected: "+re);if(re.hasOwnProperty(le="DECIMAL_PLACES")&&(w(ve=re[le],0,_,le),X=ve),re.hasOwnProperty(le="ROUNDING_MODE")&&(w(ve=re[le],0,8,le),oe=ve),re.hasOwnProperty(le="EXPONENTIAL_AT")&&((ve=re[le])&&ve.pop?(w(ve[0],-_,0,le),w(ve[1],0,_,le),J=ve[0],he=ve[1]):(w(ve,-_,_,le),J=-(he=ve<0?-ve:ve))),re.hasOwnProperty(le="RANGE"))if((ve=re[le])&&ve.pop)w(ve[0],-_,-1,le),w(ve[1],1,_,le),ae=ve[0],ue=ve[1];else{if(w(ve,-_,_,le),!ve)throw Error(s+le+" cannot be zero: "+ve);ae=-(ue=ve<0?-ve:ve)}if(re.hasOwnProperty(le="CRYPTO")){if((ve=re[le])!==!!ve)throw Error(s+le+" not true or false: "+ve);if(ve){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw ge=!ve,Error(s+"crypto unavailable");ge=ve}else ge=ve}if(re.hasOwnProperty(le="MODULO_MODE")&&(w(ve=re[le],0,9,le),N=ve),re.hasOwnProperty(le="POW_PRECISION")&&(w(ve=re[le],0,_,le),F=ve),re.hasOwnProperty(le="FORMAT")){if(typeof(ve=re[le])!="object")throw Error(s+le+" not an object: "+ve);K=ve}if(re.hasOwnProperty(le="ALPHABET")){if(typeof(ve=re[le])!="string"||/^.?$|[+\-.\s]|(.).*\1/.test(ve))throw Error(s+le+" invalid: "+ve);H=ve}}return{DECIMAL_PLACES:X,ROUNDING_MODE:oe,EXPONENTIAL_AT:[J,he],RANGE:[ae,ue],CRYPTO:ge,MODULO_MODE:N,POW_PRECISION:F,FORMAT:K,ALPHABET:H}},$.isBigNumber=function(re){if(!re||re._isBigNumber!==!0)return!1;if(!$.DEBUG)return!0;var le,ve,De=re.c,xe=re.e,Se=re.s;e:if({}.toString.call(De)=="[object Array]"){if((Se===1||Se===-1)&&xe>=-_&&xe<=_&&xe===c(xe)){if(De[0]===0){if(xe===0&&De.length===1)return!0;break e}if((le=(xe+1)%a)<1&&(le+=a),String(De[0]).length==le){for(le=0;le<De.length;le++)if((ve=De[le])<0||ve>=d||ve!==c(ve))break e;if(ve!==0)return!0}}}else if(De===null&&xe===null&&(Se===null||Se===1||Se===-1))return!0;throw Error(s+"Invalid BigNumber: "+re)},$.maximum=$.max=function(){return pe(arguments,W.lt)},$.minimum=$.min=function(){return pe(arguments,W.gt)},$.random=(j=9007199254740992,k=Math.random()*j&2097151?function(){return c(Math.random()*j)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(re){var le,ve,De,xe,Se,Ee=0,ye=[],Ne=new $(Q);if(re==null?re=X:w(re,0,_),xe=r(re/a),ge)if(crypto.getRandomValues){for(le=crypto.getRandomValues(new Uint32Array(xe*=2));Ee<xe;)(Se=131072*le[Ee]+(le[Ee+1]>>>11))>=9e15?(ve=crypto.getRandomValues(new Uint32Array(2)),le[Ee]=ve[0],le[Ee+1]=ve[1]):(ye.push(Se%1e14),Ee+=2);Ee=xe/2}else{if(!crypto.randomBytes)throw ge=!1,Error(s+"crypto unavailable");for(le=crypto.randomBytes(xe*=7);Ee<xe;)(Se=281474976710656*(31&le[Ee])+1099511627776*le[Ee+1]+4294967296*le[Ee+2]+16777216*le[Ee+3]+(le[Ee+4]<<16)+(le[Ee+5]<<8)+le[Ee+6])>=9e15?crypto.randomBytes(7).copy(le,Ee):(ye.push(Se%1e14),Ee+=7);Ee=xe/7}if(!ge)for(;Ee<xe;)(Se=k())<9e15&&(ye[Ee++]=Se%1e14);for(xe=ye[--Ee],re%=a,xe&&re&&(Se=f[a-re],ye[Ee]=c(xe/Se)*Se);ye[Ee]===0;ye.pop(),Ee--);if(Ee<0)ye=[De=0];else{for(De=-1;ye[0]===0;ye.splice(0,1),De-=a);for(Ee=1,Se=ye[0];Se>=10;Se/=10,Ee++);Ee<a&&(De-=a-Ee)}return Ne.e=De,Ne.c=ye,Ne}),$.sum=function(){for(var re=1,le=arguments,ve=new $(le[0]);re<le.length;)ve=ve.plus(le[re++]);return ve},D=function(){var re="0123456789";function le(ve,De,xe,Se){for(var Ee,ye,Ne=[0],Ue=0,de=ve.length;Ue<de;){for(ye=Ne.length;ye--;Ne[ye]*=De);for(Ne[0]+=Se.indexOf(ve.charAt(Ue++)),Ee=0;Ee<Ne.length;Ee++)Ne[Ee]>xe-1&&(Ne[Ee+1]==null&&(Ne[Ee+1]=0),Ne[Ee+1]+=Ne[Ee]/xe|0,Ne[Ee]%=xe)}return Ne.reverse()}return function(ve,De,xe,Se,Ee){var ye,Ne,Ue,de,qe,tt,Re,ce,Le=ve.indexOf("."),Fe=X,Be=oe;for(Le>=0&&(de=F,F=0,ve=ve.replace(".",""),tt=(ce=new $(De)).pow(ve.length-Le),F=de,ce.c=le(S(g(tt.c),tt.e,"0"),10,xe,re),ce.e=ce.c.length),Ue=de=(Re=le(ve,De,xe,Ee?(ye=H,re):(ye=re,H))).length;Re[--de]==0;Re.pop());if(!Re[0])return ye.charAt(0);if(Le<0?--Ue:(tt.c=Re,tt.e=Ue,tt.s=Se,Re=(tt=E(tt,ce,Fe,Be,xe)).c,qe=tt.r,Ue=tt.e),Le=Re[Ne=Ue+Fe+1],de=xe/2,qe=qe||Ne<0||Re[Ne+1]!=null,qe=Be<4?(Le!=null||qe)&&(Be==0||Be==(tt.s<0?3:2)):Le>de||Le==de&&(Be==4||qe||Be==6&&1&Re[Ne-1]||Be==(tt.s<0?8:7)),Ne<1||!Re[0])ve=qe?S(ye.charAt(1),-Fe,ye.charAt(0)):ye.charAt(0);else{if(Re.length=Ne,qe)for(--xe;++Re[--Ne]>xe;)Re[Ne]=0,Ne||(++Ue,Re=[1].concat(Re));for(de=Re.length;!Re[--de];);for(Le=0,ve="";Le<=de;ve+=ye.charAt(Re[Le++]));ve=S(ve,Ue,ye.charAt(0))}return ve}}(),E=function(){function re(De,xe,Se){var Ee,ye,Ne,Ue,de=0,qe=De.length,tt=xe%b,Re=xe/b|0;for(De=De.slice();qe--;)de=((ye=tt*(Ne=De[qe]%b)+(Ee=Re*Ne+(Ue=De[qe]/b|0)*tt)%b*b+de)/Se|0)+(Ee/b|0)+Re*Ue,De[qe]=ye%Se;return de&&(De=[de].concat(De)),De}function le(De,xe,Se,Ee){var ye,Ne;if(Se!=Ee)Ne=Se>Ee?1:-1;else for(ye=Ne=0;ye<Se;ye++)if(De[ye]!=xe[ye]){Ne=De[ye]>xe[ye]?1:-1;break}return Ne}function ve(De,xe,Se,Ee){for(var ye=0;Se--;)De[Se]-=ye,ye=De[Se]<xe[Se]?1:0,De[Se]=ye*Ee+De[Se]-xe[Se];for(;!De[0]&&De.length>1;De.splice(0,1));}return function(De,xe,Se,Ee,ye){var Ne,Ue,de,qe,tt,Re,ce,Le,Fe,Be,nt,it,Ge,Xe,rt,ot,Ct,Et=De.s==xe.s?1:-1,It=De.c,wt=xe.c;if(!(It&&It[0]&&wt&&wt[0]))return new $(De.s&&xe.s&&(It?!wt||It[0]!=wt[0]:wt)?It&&It[0]==0||!wt?0*Et:Et/0:NaN);for(Fe=(Le=new $(Et)).c=[],Et=Se+(Ue=De.e-xe.e)+1,ye||(ye=d,Ue=y(De.e/a)-y(xe.e/a),Et=Et/a|0),de=0;wt[de]==(It[de]||0);de++);if(wt[de]>(It[de]||0)&&Ue--,Et<0)Fe.push(1),qe=!0;else{for(Xe=It.length,ot=wt.length,de=0,Et+=2,(tt=c(ye/(wt[0]+1)))>1&&(wt=re(wt,tt,ye),It=re(It,tt,ye),ot=wt.length,Xe=It.length),Ge=ot,nt=(Be=It.slice(0,ot)).length;nt<ot;Be[nt++]=0);Ct=wt.slice(),Ct=[0].concat(Ct),rt=wt[0],wt[1]>=ye/2&&rt++;do{if(tt=0,(Ne=le(wt,Be,ot,nt))<0){if(it=Be[0],ot!=nt&&(it=it*ye+(Be[1]||0)),(tt=c(it/rt))>1)for(tt>=ye&&(tt=ye-1),ce=(Re=re(wt,tt,ye)).length,nt=Be.length;le(Re,Be,ce,nt)==1;)tt--,ve(Re,ot<ce?Ct:wt,ce,ye),ce=Re.length,Ne=1;else tt==0&&(Ne=tt=1),ce=(Re=wt.slice()).length;if(ce<nt&&(Re=[0].concat(Re)),ve(Be,Re,nt,ye),nt=Be.length,Ne==-1)for(;le(wt,Be,ot,nt)<1;)tt++,ve(Be,ot<nt?Ct:wt,nt,ye),nt=Be.length}else Ne===0&&(tt++,Be=[0]);Fe[de++]=tt,Be[0]?Be[nt++]=It[Ge]||0:(Be=[It[Ge]],nt=1)}while((Ge++<Xe||Be[0]!=null)&&Et--);qe=Be[0]!=null,Fe[0]||Fe.splice(0,1)}if(ye==d){for(de=1,Et=Fe[0];Et>=10;Et/=10,de++);$e(Le,Se+(Le.e=de+Ue*a-1)+1,Ee,qe)}else Le.e=Ue,Le.r=+qe;return Le}}(),M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,R=/^([^.]+)\.$/,V=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g,P=function(re,le,ve,De){var xe,Se=ve?le:le.replace(U,"");if(T.test(Se))re.s=isNaN(Se)?null:Se<0?-1:1;else{if(!ve&&(Se=Se.replace(M,function(Ee,ye,Ne){return xe=(Ne=Ne.toLowerCase())=="x"?16:Ne=="b"?2:8,De&&De!=xe?Ee:ye}),De&&(xe=De,Se=Se.replace(R,"$1").replace(V,"0.$1")),le!=Se))return new $(Se,xe);if($.DEBUG)throw Error(s+"Not a"+(De?" base "+De:"")+" number: "+le);re.s=null}re.c=re.e=null},W.absoluteValue=W.abs=function(){var re=new $(this);return re.s<0&&(re.s=1),re},W.comparedTo=function(re,le){return m(this,new $(re,le))},W.decimalPlaces=W.dp=function(re,le){var ve,De,xe,Se=this;if(re!=null)return w(re,0,_),le==null?le=oe:w(le,0,8),$e(new $(Se),re+Se.e+1,le);if(!(ve=Se.c))return null;if(De=((xe=ve.length-1)-y(this.e/a))*a,xe=ve[xe])for(;xe%10==0;xe/=10,De--);return De<0&&(De=0),De},W.dividedBy=W.div=function(re,le){return E(this,new $(re,le),X,oe)},W.dividedToIntegerBy=W.idiv=function(re,le){return E(this,new $(re,le),0,1)},W.exponentiatedBy=W.pow=function(re,le){var ve,De,xe,Se,Ee,ye,Ne,Ue,de=this;if((re=new $(re)).c&&!re.isInteger())throw Error(s+"Exponent not an integer: "+He(re));if(le!=null&&(le=new $(le)),Ee=re.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!re.c||!re.c[0])return Ue=new $(Math.pow(+He(de),Ee?2-C(re):+He(re))),le?Ue.mod(le):Ue;if(ye=re.s<0,le){if(le.c?!le.c[0]:!le.s)return new $(NaN);(De=!ye&&de.isInteger()&&le.isInteger())&&(de=de.mod(le))}else{if(re.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||Ee&&de.c[1]>=24e7:de.c[0]<8e13||Ee&&de.c[0]<=9999975e7)))return Se=de.s<0&&C(re)?-0:0,de.e>-1&&(Se=1/Se),new $(ye?1/Se:Se);F&&(Se=r(F/a+2))}for(Ee?(ve=new $(.5),ye&&(re.s=1),Ne=C(re)):Ne=(xe=Math.abs(+He(re)))%2,Ue=new $(Q);;){if(Ne){if(!(Ue=Ue.times(de)).c)break;Se?Ue.c.length>Se&&(Ue.c.length=Se):De&&(Ue=Ue.mod(le))}if(xe){if((xe=c(xe/2))===0)break;Ne=xe%2}else if($e(re=re.times(ve),re.e+1,1),re.e>14)Ne=C(re);else{if((xe=+He(re))==0)break;Ne=xe%2}de=de.times(de),Se?de.c&&de.c.length>Se&&(de.c.length=Se):De&&(de=de.mod(le))}return De?Ue:(ye&&(Ue=Q.div(Ue)),le?Ue.mod(le):Se?$e(Ue,F,oe,void 0):Ue)},W.integerValue=function(re){var le=new $(this);return re==null?re=oe:w(re,0,8),$e(le,le.e+1,re)},W.isEqualTo=W.eq=function(re,le){return m(this,new $(re,le))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(re,le){return m(this,new $(re,le))>0},W.isGreaterThanOrEqualTo=W.gte=function(re,le){return(le=m(this,new $(re,le)))===1||le===0},W.isInteger=function(){return!!this.c&&y(this.e/a)>this.c.length-2},W.isLessThan=W.lt=function(re,le){return m(this,new $(re,le))<0},W.isLessThanOrEqualTo=W.lte=function(re,le){return(le=m(this,new $(re,le)))===-1||le===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(re,le){var ve,De,xe,Se,Ee=this,ye=Ee.s;if(le=(re=new $(re,le)).s,!ye||!le)return new $(NaN);if(ye!=le)return re.s=-le,Ee.plus(re);var Ne=Ee.e/a,Ue=re.e/a,de=Ee.c,qe=re.c;if(!Ne||!Ue){if(!de||!qe)return de?(re.s=-le,re):new $(qe?Ee:NaN);if(!de[0]||!qe[0])return qe[0]?(re.s=-le,re):new $(de[0]?Ee:oe==3?-0:0)}if(Ne=y(Ne),Ue=y(Ue),de=de.slice(),ye=Ne-Ue){for((Se=ye<0)?(ye=-ye,xe=de):(Ue=Ne,xe=qe),xe.reverse(),le=ye;le--;xe.push(0));xe.reverse()}else for(De=(Se=(ye=de.length)<(le=qe.length))?ye:le,ye=le=0;le<De;le++)if(de[le]!=qe[le]){Se=de[le]<qe[le];break}if(Se&&(xe=de,de=qe,qe=xe,re.s=-re.s),(le=(De=qe.length)-(ve=de.length))>0)for(;le--;de[ve++]=0);for(le=d-1;De>ye;){if(de[--De]<qe[De]){for(ve=De;ve&&!de[--ve];de[ve]=le);--de[ve],de[De]+=d}de[De]-=qe[De]}for(;de[0]==0;de.splice(0,1),--Ue);return de[0]?Te(re,de,Ue):(re.s=oe==3?-1:1,re.c=[re.e=0],re)},W.modulo=W.mod=function(re,le){var ve,De,xe=this;return re=new $(re,le),!xe.c||!re.s||re.c&&!re.c[0]?new $(NaN):!re.c||xe.c&&!xe.c[0]?new $(xe):(N==9?(De=re.s,re.s=1,ve=E(xe,re,0,3),re.s=De,ve.s*=De):ve=E(xe,re,0,N),(re=xe.minus(ve.times(re))).c[0]||N!=1||(re.s=xe.s),re)},W.multipliedBy=W.times=function(re,le){var ve,De,xe,Se,Ee,ye,Ne,Ue,de,qe,tt,Re,ce,Le,Fe,Be=this,nt=Be.c,it=(re=new $(re,le)).c;if(!(nt&&it&&nt[0]&&it[0]))return!Be.s||!re.s||nt&&!nt[0]&&!it||it&&!it[0]&&!nt?re.c=re.e=re.s=null:(re.s*=Be.s,nt&&it?(re.c=[0],re.e=0):re.c=re.e=null),re;for(De=y(Be.e/a)+y(re.e/a),re.s*=Be.s,(Ne=nt.length)<(qe=it.length)&&(ce=nt,nt=it,it=ce,xe=Ne,Ne=qe,qe=xe),xe=Ne+qe,ce=[];xe--;ce.push(0));for(Le=d,Fe=b,xe=qe;--xe>=0;){for(ve=0,tt=it[xe]%Fe,Re=it[xe]/Fe|0,Se=xe+(Ee=Ne);Se>xe;)ve=((Ue=tt*(Ue=nt[--Ee]%Fe)+(ye=Re*Ue+(de=nt[Ee]/Fe|0)*tt)%Fe*Fe+ce[Se]+ve)/Le|0)+(ye/Fe|0)+Re*de,ce[Se--]=Ue%Le;ce[Se]=ve}return ve?++De:ce.splice(0,1),Te(re,ce,De)},W.negated=function(){var re=new $(this);return re.s=-re.s||null,re},W.plus=function(re,le){var ve,De=this,xe=De.s;if(le=(re=new $(re,le)).s,!xe||!le)return new $(NaN);if(xe!=le)return re.s=-le,De.minus(re);var Se=De.e/a,Ee=re.e/a,ye=De.c,Ne=re.c;if(!Se||!Ee){if(!ye||!Ne)return new $(xe/0);if(!ye[0]||!Ne[0])return Ne[0]?re:new $(ye[0]?De:0*xe)}if(Se=y(Se),Ee=y(Ee),ye=ye.slice(),xe=Se-Ee){for(xe>0?(Ee=Se,ve=Ne):(xe=-xe,ve=ye),ve.reverse();xe--;ve.push(0));ve.reverse()}for((xe=ye.length)-(le=Ne.length)<0&&(ve=Ne,Ne=ye,ye=ve,le=xe),xe=0;le;)xe=(ye[--le]=ye[le]+Ne[le]+xe)/d|0,ye[le]=d===ye[le]?0:ye[le]%d;return xe&&(ye=[xe].concat(ye),++Ee),Te(re,ye,Ee)},W.precision=W.sd=function(re,le){var ve,De,xe,Se=this;if(re!=null&&re!==!!re)return w(re,1,_),le==null?le=oe:w(le,0,8),$e(new $(Se),re,le);if(!(ve=Se.c))return null;if(De=(xe=ve.length-1)*a+1,xe=ve[xe]){for(;xe%10==0;xe/=10,De--);for(xe=ve[0];xe>=10;xe/=10,De++);}return re&&Se.e+1>De&&(De=Se.e+1),De},W.shiftedBy=function(re){return w(re,-p,p),this.times("1e"+re)},W.squareRoot=W.sqrt=function(){var re,le,ve,De,xe,Se=this,Ee=Se.c,ye=Se.s,Ne=Se.e,Ue=X+4,de=new $("0.5");if(ye!==1||!Ee||!Ee[0])return new $(!ye||ye<0&&(!Ee||Ee[0])?NaN:Ee?Se:1/0);if((ye=Math.sqrt(+He(Se)))==0||ye==1/0?(((le=g(Ee)).length+Ne)%2==0&&(le+="0"),ye=Math.sqrt(+le),Ne=y((Ne+1)/2)-(Ne<0||Ne%2),ve=new $(le=ye==1/0?"5e"+Ne:(le=ye.toExponential()).slice(0,le.indexOf("e")+1)+Ne)):ve=new $(ye+""),ve.c[0]){for((ye=(Ne=ve.e)+Ue)<3&&(ye=0);;)if(xe=ve,ve=de.times(xe.plus(E(Se,xe,Ue,1))),g(xe.c).slice(0,ye)===(le=g(ve.c)).slice(0,ye)){if(ve.e<Ne&&--ye,(le=le.slice(ye-3,ye+1))!="9999"&&(De||le!="4999")){+le&&(+le.slice(1)||le.charAt(0)!="5")||($e(ve,ve.e+X+2,1),re=!ve.times(ve).eq(Se));break}if(!De&&($e(xe,xe.e+X+2,0),xe.times(xe).eq(Se))){ve=xe;break}Ue+=4,ye+=4,De=1}}return $e(ve,ve.e+X+1,oe,re)},W.toExponential=function(re,le){return re!=null&&(w(re,0,_),re++),se(this,re,le,1)},W.toFixed=function(re,le){return re!=null&&(w(re,0,_),re=re+this.e+1),se(this,re,le)},W.toFormat=function(re,le,ve){var De,xe=this;if(ve==null)re!=null&&le&&typeof le=="object"?(ve=le,le=null):re&&typeof re=="object"?(ve=re,re=le=null):ve=K;else if(typeof ve!="object")throw Error(s+"Argument not an object: "+ve);if(De=xe.toFixed(re,le),xe.c){var Se,Ee=De.split("."),ye=+ve.groupSize,Ne=+ve.secondaryGroupSize,Ue=ve.groupSeparator||"",de=Ee[0],qe=Ee[1],tt=xe.s<0,Re=tt?de.slice(1):de,ce=Re.length;if(Ne&&(Se=ye,ye=Ne,Ne=Se,ce-=Se),ye>0&&ce>0){for(Se=ce%ye||ye,de=Re.substr(0,Se);Se<ce;Se+=ye)de+=Ue+Re.substr(Se,ye);Ne>0&&(de+=Ue+Re.slice(Se)),tt&&(de="-"+de)}De=qe?de+(ve.decimalSeparator||"")+((Ne=+ve.fractionGroupSize)?qe.replace(new RegExp("\\d{"+Ne+"}\\B","g"),"$&"+(ve.fractionGroupSeparator||"")):qe):de}return(ve.prefix||"")+De+(ve.suffix||"")},W.toFraction=function(re){var le,ve,De,xe,Se,Ee,ye,Ne,Ue,de,qe,tt,Re=this,ce=Re.c;if(re!=null&&(!(ye=new $(re)).isInteger()&&(ye.c||ye.s!==1)||ye.lt(Q)))throw Error(s+"Argument "+(ye.isInteger()?"out of range: ":"not an integer: ")+He(ye));if(!ce)return new $(Re);for(le=new $(Q),Ue=ve=new $(Q),De=Ne=new $(Q),tt=g(ce),Se=le.e=tt.length-Re.e-1,le.c[0]=f[(Ee=Se%a)<0?a+Ee:Ee],re=!re||ye.comparedTo(le)>0?Se>0?le:Ue:ye,Ee=ue,ue=1/0,ye=new $(tt),Ne.c[0]=0;de=E(ye,le,0,1),(xe=ve.plus(de.times(De))).comparedTo(re)!=1;)ve=De,De=xe,Ue=Ne.plus(de.times(xe=Ue)),Ne=xe,le=ye.minus(de.times(xe=le)),ye=xe;return xe=E(re.minus(ve),De,0,1),Ne=Ne.plus(xe.times(Ue)),ve=ve.plus(xe.times(De)),Ne.s=Ue.s=Re.s,qe=E(Ue,De,Se*=2,oe).minus(Re).abs().comparedTo(E(Ne,ve,Se,oe).minus(Re).abs())<1?[Ue,De]:[Ne,ve],ue=Ee,qe},W.toNumber=function(){return+He(this)},W.toPrecision=function(re,le){return re!=null&&w(re,1,_),se(this,re,le,2)},W.toString=function(re){var le,ve=this,De=ve.s,xe=ve.e;return xe===null?De?(le="Infinity",De<0&&(le="-"+le)):le="NaN":(re==null?le=xe<=J||xe>=he?I(g(ve.c),xe):S(g(ve.c),xe,"0"):re===10?le=S(g((ve=$e(new $(ve),X+xe+1,oe)).c),ve.e,"0"):(w(re,2,H.length,"Base"),le=D(S(g(ve.c),xe,"0"),10,re,De,!0)),De<0&&ve.c[0]&&(le="-"+le)),le},W.valueOf=W.toJSON=function(){return He(this)},W._isBigNumber=!0,A!=null&&$.set(A),$}(),n.default=n.BigNumber=n,typeof ht=="function"&&ht.amd?ht(function(){return n}):v!==void 0&&v.exports?v.exports=n:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=n)})(this)},{}],44:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/slicedToArray")),r=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("lodash/throttle")),d=n(e("lodash/sortBy")),a=function(){function p(f){var b=this,_=f.key,y=f.getAfromB,g=f.getBfromA,m=f.storage,w=f.saveThrottle,C=f.maxLimit,I=f.maxAge;(0,r.default)(this,p),(0,s.default)(this,"_key",void 0),(0,s.default)(this,"_getAfromB",void 0),(0,s.default)(this,"_getBfromA",void 0),(0,s.default)(this,"_storage",void 0),(0,s.default)(this,"_aToTimestamp",new Map),(0,s.default)(this,"_aToB",new Map),(0,s.default)(this,"_bToA",new Map),(0,s.default)(this,"_aToBpromise",new Map),(0,s.default)(this,"_bToApromise",new Map),(0,s.default)(this,"_saveCache",void 0),this._key=_,this._getBfromA=g,this._getAfromB=y,this._storage=m||(t.localStorage?t.localStorage:null),w==null&&(w=3e3),C==null&&(C=1e3),I==null&&(I=31536e6);var S=C,O=I;this._saveCache=(0,o.default)(function(){var A=b._storage;if(A){b._loadCache();var E=Date.now()-O,D={version:2,ids:[]};b._aToB.forEach(function(P,j){var k=b._aToTimestamp.get(j);k!=null&&k>E&&D.ids.push([j,P,k])}),D.ids.length>S&&(D.ids=(0,d.default)(D.ids,function(P){return(0,u.default)(P,3)[2]}).slice(-S)),A.setItem(b._key,JSON.stringify(D))}},w,{leading:!1}),this._loadCache()}return(0,c.default)(p,[{key:"_loadCache",value:function(){var f=this._storage;if(f)try{var b=JSON.parse(f.getItem(this._key)||"null");if(!b||b.version!==2)return;var _=!0,y=!1,g=void 0;try{for(var m,w=b.ids[Symbol.iterator]();!(_=(m=w.next()).done);_=!0){var C=m.value,I=(0,u.default)(C,3),S=I[0],O=I[1],A=I[2];this._aToTimestamp.set(S,A),this._aToB.set(S,O),this._bToA.set(O,S)}}catch(E){y=!0,g=E}finally{try{_||w.return==null||w.return()}finally{if(y)throw g}}}catch{}}},{key:"_rememberPair",value:function(f,b){this._aToTimestamp.set(f,Date.now()),this._aToB.set(f,b),this._bToA.set(b,f),this._saveCache()}},{key:"_update",value:function(f){this._aToTimestamp.set(f,Date.now()),this._saveCache()}},{key:"getBfromA",value:function(f){var b=this,_=this._aToB.get(f);if(_)return this._update(f),Promise.resolve(_);var y=this._aToBpromise.get(f);if(y)return y;var g=this._getBfromA(f);return this._aToBpromise.set(f,g),g.then(function(m){g===b._aToBpromise.get(f)&&(b._aToBpromise.delete(f),b._rememberPair(f,m))},function(){g===b._aToBpromise.get(f)&&b._aToBpromise.delete(f)}),g}},{key:"getAfromB",value:function(f){var b=this,_=this._bToA.get(f);if(_)return this._update(_),Promise.resolve(_);var y=this._bToApromise.get(f);if(y)return y;var g=this._getAfromB(f);return this._bToApromise.set(f,g),g.then(function(m){g===b._bToApromise.get(f)&&(b._bToApromise.delete(f),b._rememberPair(m,f))},function(){g===b._bToApromise.get(f)&&b._bToApromise.delete(f)}),g}},{key:"removeAfromCache",value:function(f){if(this._aToBpromise.delete(f),this._aToB.has(f)){var b=this._aToB.get(f);this._aToB.delete(f),this._bToA.delete(b),this._saveCache()}}},{key:"removeBfromCache",value:function(f){if(this._bToApromise.delete(f),this._bToA.has(f)){var b=this._bToA.get(f);this._aToB.delete(b),this._bToA.delete(f),this._saveCache()}}}]),p}();i.default=a,v.exports=i.default,v.exports.default=i.default}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/slicedToArray":24,"lodash/sortBy":350,"lodash/throttle":354}],45:[function(e,v,i){(function(t){(function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];v.exports=function(){for(var u=[],r=0;r<n.length;r++)typeof t[n[r]]=="function"&&(u[u.length]=n[r]);return u}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],46:[function(e,v,i){(function(t){(function(){"use strict";var n=e("base64-js"),u=e("ieee754");i.Buffer=s,i.SlowBuffer=function(N){return+N!=N&&(N=0),s.alloc(+N)},i.INSPECT_MAX_BYTES=50;var r=2147483647;function c(N){if(N>r)throw new RangeError('The value "'+N+'" is invalid for option "size"');var F=new Uint8Array(N);return F.__proto__=s.prototype,F}function s(N,F,K){if(typeof N=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(N)}return o(N,F,K)}function o(N,F,K){if(typeof N=="string")return function(se,pe){if(typeof pe=="string"&&pe!==""||(pe="utf8"),!s.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var Te=0|b(se,pe),$e=c(Te),He=$e.write(se,pe);return He!==Te&&($e=$e.slice(0,He)),$e}(N,F);if(ArrayBuffer.isView(N))return p(N);if(N==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(ue(N,ArrayBuffer)||N&&ue(N.buffer,ArrayBuffer))return function(se,pe,Te){if(pe<0||se.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<pe+(Te||0))throw new RangeError('"length" is outside of buffer bounds');var $e;return $e=pe===void 0&&Te===void 0?new Uint8Array(se):Te===void 0?new Uint8Array(se,pe):new Uint8Array(se,pe,Te),$e.__proto__=s.prototype,$e}(N,F,K);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var H=N.valueOf&&N.valueOf();if(H!=null&&H!==N)return s.from(H,F,K);var $=function(se){if(s.isBuffer(se)){var pe=0|f(se.length),Te=c(pe);return Te.length===0||se.copy(Te,0,0,pe),Te}if(se.length!==void 0)return typeof se.length!="number"||ge(se.length)?c(0):p(se);if(se.type==="Buffer"&&Array.isArray(se.data))return p(se.data)}(N);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return s.from(N[Symbol.toPrimitive]("string"),F,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function d(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function a(N){return d(N),c(N<0?0:0|f(N))}function p(N){for(var F=N.length<0?0:0|f(N.length),K=c(F),H=0;H<F;H+=1)K[H]=255&N[H];return K}function f(N){if(N>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|N}function b(N,F){if(s.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||ue(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var K=N.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&K===0)return 0;for(var $=!1;;)switch(F){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return J(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return he(N).length;default:if($)return H?-1:J(N).length;F=(""+F).toLowerCase(),$=!0}}function _(N,F,K){var H=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=(F>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return M(this,F,K);case"utf8":case"utf-8":return D(this,F,K);case"ascii":return j(this,F,K);case"latin1":case"binary":return k(this,F,K);case"base64":return E(this,F,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,F,K);default:if(H)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),H=!0}}function y(N,F,K){var H=N[F];N[F]=N[K],N[K]=H}function g(N,F,K,H,$){if(N.length===0)return-1;if(typeof K=="string"?(H=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),ge(K=+K)&&(K=$?0:N.length-1),K<0&&(K=N.length+K),K>=N.length){if($)return-1;K=N.length-1}else if(K<0){if(!$)return-1;K=0}if(typeof F=="string"&&(F=s.from(F,H)),s.isBuffer(F))return F.length===0?-1:m(N,F,K,H,$);if(typeof F=="number")return F&=255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(N,F,K):Uint8Array.prototype.lastIndexOf.call(N,F,K):m(N,[F],K,H,$);throw new TypeError("val must be string, number or Buffer")}function m(N,F,K,H,$){var se,pe=1,Te=N.length,$e=F.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(N.length<2||F.length<2)return-1;pe=2,Te/=2,$e/=2,K/=2}function He(De,xe){return pe===1?De[xe]:De.readUInt16BE(xe*pe)}if($){var re=-1;for(se=K;se<Te;se++)if(He(N,se)===He(F,re===-1?0:se-re)){if(re===-1&&(re=se),se-re+1===$e)return re*pe}else re!==-1&&(se-=se-re),re=-1}else for(K+$e>Te&&(K=Te-$e),se=K;se>=0;se--){for(var le=!0,ve=0;ve<$e;ve++)if(He(N,se+ve)!==He(F,ve)){le=!1;break}if(le)return se}return-1}function w(N,F,K,H){K=Number(K)||0;var $=N.length-K;H?(H=Number(H))>$&&(H=$):H=$;var se=F.length;H>se/2&&(H=se/2);for(var pe=0;pe<H;++pe){var Te=parseInt(F.substr(2*pe,2),16);if(ge(Te))return pe;N[K+pe]=Te}return pe}function C(N,F,K,H){return ae(J(F,N.length-K),N,K,H)}function I(N,F,K,H){return ae(function($){for(var se=[],pe=0;pe<$.length;++pe)se.push(255&$.charCodeAt(pe));return se}(F),N,K,H)}function S(N,F,K,H){return I(N,F,K,H)}function O(N,F,K,H){return ae(he(F),N,K,H)}function A(N,F,K,H){return ae(function($,se){for(var pe,Te,$e,He=[],re=0;re<$.length&&!((se-=2)<0);++re)Te=(pe=$.charCodeAt(re))>>8,$e=pe%256,He.push($e),He.push(Te);return He}(F,N.length-K),N,K,H)}function E(N,F,K){return F===0&&K===N.length?n.fromByteArray(N):n.fromByteArray(N.slice(F,K))}function D(N,F,K){K=Math.min(N.length,K);for(var H=[],$=F;$<K;){var se,pe,Te,$e,He=N[$],re=null,le=He>239?4:He>223?3:He>191?2:1;if($+le<=K)switch(le){case 1:He<128&&(re=He);break;case 2:(192&(se=N[$+1]))==128&&($e=(31&He)<<6|63&se)>127&&(re=$e);break;case 3:se=N[$+1],pe=N[$+2],(192&se)==128&&(192&pe)==128&&($e=(15&He)<<12|(63&se)<<6|63&pe)>2047&&($e<55296||$e>57343)&&(re=$e);break;case 4:se=N[$+1],pe=N[$+2],Te=N[$+3],(192&se)==128&&(192&pe)==128&&(192&Te)==128&&($e=(15&He)<<18|(63&se)<<12|(63&pe)<<6|63&Te)>65535&&$e<1114112&&(re=$e)}re===null?(re=65533,le=1):re>65535&&(re-=65536,H.push(re>>>10&1023|55296),re=56320|1023&re),H.push(re),$+=le}return function(ve){var De=ve.length;if(De<=P)return String.fromCharCode.apply(String,ve);for(var xe="",Se=0;Se<De;)xe+=String.fromCharCode.apply(String,ve.slice(Se,Se+=P));return xe}(H)}i.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42}catch{return!1}}(),s.TYPED_ARRAY_SUPPORT||typeof console>"u",Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(N,F,K){return o(N,F,K)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(N,F,K){return function(H,$,se){return d(H),H<=0?c(H):$!==void 0?typeof se=="string"?c(H).fill($,se):c(H).fill($):c(H)}(N,F,K)},s.allocUnsafe=function(N){return a(N)},s.allocUnsafeSlow=function(N){return a(N)},s.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==s.prototype},s.compare=function(N,F){if(ue(N,Uint8Array)&&(N=s.from(N,N.offset,N.byteLength)),ue(F,Uint8Array)&&(F=s.from(F,F.offset,F.byteLength)),!s.isBuffer(N)||!s.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===F)return 0;for(var K=N.length,H=F.length,$=0,se=Math.min(K,H);$<se;++$)if(N[$]!==F[$]){K=N[$],H=F[$];break}return K<H?-1:H<K?1:0},s.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(N,F){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return s.alloc(0);var K;if(F===void 0)for(F=0,K=0;K<N.length;++K)F+=N[K].length;var H=s.allocUnsafe(F),$=0;for(K=0;K<N.length;++K){var se=N[K];if(ue(se,Uint8Array)&&(se=s.from(se)),!s.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(H,$),$+=se.length}return H},s.byteLength=b,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<N;F+=2)y(this,F,F+1);return this},s.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<N;F+=4)y(this,F,F+3),y(this,F+1,F+2);return this},s.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<N;F+=8)y(this,F,F+7),y(this,F+1,F+6),y(this,F+2,F+5),y(this,F+3,F+4);return this},s.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?D(this,0,N):_.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(N){if(!s.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||s.compare(this,N)===0},s.prototype.inspect=function(){var N="",F=i.INSPECT_MAX_BYTES;return N=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(N+=" ... "),"<Buffer "+N+">"},s.prototype.compare=function(N,F,K,H,$){if(ue(N,Uint8Array)&&(N=s.from(N,N.offset,N.byteLength)),!s.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(F===void 0&&(F=0),K===void 0&&(K=N?N.length:0),H===void 0&&(H=0),$===void 0&&($=this.length),F<0||K>N.length||H<0||$>this.length)throw new RangeError("out of range index");if(H>=$&&F>=K)return 0;if(H>=$)return-1;if(F>=K)return 1;if(this===N)return 0;for(var se=($>>>=0)-(H>>>=0),pe=(K>>>=0)-(F>>>=0),Te=Math.min(se,pe),$e=this.slice(H,$),He=N.slice(F,K),re=0;re<Te;++re)if($e[re]!==He[re]){se=$e[re],pe=He[re];break}return se<pe?-1:pe<se?1:0},s.prototype.includes=function(N,F,K){return this.indexOf(N,F,K)!==-1},s.prototype.indexOf=function(N,F,K){return g(this,N,F,K,!0)},s.prototype.lastIndexOf=function(N,F,K){return g(this,N,F,K,!1)},s.prototype.write=function(N,F,K,H){if(F===void 0)H="utf8",K=this.length,F=0;else if(K===void 0&&typeof F=="string")H=F,K=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F>>>=0,isFinite(K)?(K>>>=0,H===void 0&&(H="utf8")):(H=K,K=void 0)}var $=this.length-F;if((K===void 0||K>$)&&(K=$),N.length>0&&(K<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");for(var se=!1;;)switch(H){case"hex":return w(this,N,F,K);case"utf8":case"utf-8":return C(this,N,F,K);case"ascii":return I(this,N,F,K);case"latin1":case"binary":return S(this,N,F,K);case"base64":return O(this,N,F,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,N,F,K);default:if(se)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),se=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function j(N,F,K){var H="";K=Math.min(N.length,K);for(var $=F;$<K;++$)H+=String.fromCharCode(127&N[$]);return H}function k(N,F,K){var H="";K=Math.min(N.length,K);for(var $=F;$<K;++$)H+=String.fromCharCode(N[$]);return H}function M(N,F,K){var H=N.length;(!F||F<0)&&(F=0),(!K||K<0||K>H)&&(K=H);for(var $="",se=F;se<K;++se)$+=oe(N[se]);return $}function R(N,F,K){for(var H=N.slice(F,K),$="",se=0;se<H.length;se+=2)$+=String.fromCharCode(H[se]+256*H[se+1]);return $}function V(N,F,K){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+F>K)throw new RangeError("Trying to access beyond buffer length")}function T(N,F,K,H,$,se){if(!s.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>$||F<se)throw new RangeError('"value" argument is out of bounds');if(K+H>N.length)throw new RangeError("Index out of range")}function U(N,F,K,H,$,se){if(K+H>N.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function W(N,F,K,H,$){return F=+F,K>>>=0,$||U(N,0,K,4),u.write(N,F,K,H,23,4),K+4}function Q(N,F,K,H,$){return F=+F,K>>>=0,$||U(N,0,K,8),u.write(N,F,K,H,52,8),K+8}s.prototype.slice=function(N,F){var K=this.length;(N=~~N)<0?(N+=K)<0&&(N=0):N>K&&(N=K),(F=F===void 0?K:~~F)<0?(F+=K)<0&&(F=0):F>K&&(F=K),F<N&&(F=N);var H=this.subarray(N,F);return H.__proto__=s.prototype,H},s.prototype.readUIntLE=function(N,F,K){N>>>=0,F>>>=0,K||V(N,F,this.length);for(var H=this[N],$=1,se=0;++se<F&&($*=256);)H+=this[N+se]*$;return H},s.prototype.readUIntBE=function(N,F,K){N>>>=0,F>>>=0,K||V(N,F,this.length);for(var H=this[N+--F],$=1;F>0&&($*=256);)H+=this[N+--F]*$;return H},s.prototype.readUInt8=function(N,F){return N>>>=0,F||V(N,1,this.length),this[N]},s.prototype.readUInt16LE=function(N,F){return N>>>=0,F||V(N,2,this.length),this[N]|this[N+1]<<8},s.prototype.readUInt16BE=function(N,F){return N>>>=0,F||V(N,2,this.length),this[N]<<8|this[N+1]},s.prototype.readUInt32LE=function(N,F){return N>>>=0,F||V(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},s.prototype.readUInt32BE=function(N,F){return N>>>=0,F||V(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},s.prototype.readIntLE=function(N,F,K){N>>>=0,F>>>=0,K||V(N,F,this.length);for(var H=this[N],$=1,se=0;++se<F&&($*=256);)H+=this[N+se]*$;return H>=($*=128)&&(H-=Math.pow(2,8*F)),H},s.prototype.readIntBE=function(N,F,K){N>>>=0,F>>>=0,K||V(N,F,this.length);for(var H=F,$=1,se=this[N+--H];H>0&&($*=256);)se+=this[N+--H]*$;return se>=($*=128)&&(se-=Math.pow(2,8*F)),se},s.prototype.readInt8=function(N,F){return N>>>=0,F||V(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},s.prototype.readInt16LE=function(N,F){N>>>=0,F||V(N,2,this.length);var K=this[N]|this[N+1]<<8;return 32768&K?4294901760|K:K},s.prototype.readInt16BE=function(N,F){N>>>=0,F||V(N,2,this.length);var K=this[N+1]|this[N]<<8;return 32768&K?4294901760|K:K},s.prototype.readInt32LE=function(N,F){return N>>>=0,F||V(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},s.prototype.readInt32BE=function(N,F){return N>>>=0,F||V(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},s.prototype.readFloatLE=function(N,F){return N>>>=0,F||V(N,4,this.length),u.read(this,N,!0,23,4)},s.prototype.readFloatBE=function(N,F){return N>>>=0,F||V(N,4,this.length),u.read(this,N,!1,23,4)},s.prototype.readDoubleLE=function(N,F){return N>>>=0,F||V(N,8,this.length),u.read(this,N,!0,52,8)},s.prototype.readDoubleBE=function(N,F){return N>>>=0,F||V(N,8,this.length),u.read(this,N,!1,52,8)},s.prototype.writeUIntLE=function(N,F,K,H){N=+N,F>>>=0,K>>>=0,H||T(this,N,F,K,Math.pow(2,8*K)-1,0);var $=1,se=0;for(this[F]=255&N;++se<K&&($*=256);)this[F+se]=N/$&255;return F+K},s.prototype.writeUIntBE=function(N,F,K,H){N=+N,F>>>=0,K>>>=0,H||T(this,N,F,K,Math.pow(2,8*K)-1,0);var $=K-1,se=1;for(this[F+$]=255&N;--$>=0&&(se*=256);)this[F+$]=N/se&255;return F+K},s.prototype.writeUInt8=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,1,255,0),this[F]=255&N,F+1},s.prototype.writeUInt16LE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,2,65535,0),this[F]=255&N,this[F+1]=N>>>8,F+2},s.prototype.writeUInt16BE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,2,65535,0),this[F]=N>>>8,this[F+1]=255&N,F+2},s.prototype.writeUInt32LE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,4,4294967295,0),this[F+3]=N>>>24,this[F+2]=N>>>16,this[F+1]=N>>>8,this[F]=255&N,F+4},s.prototype.writeUInt32BE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,4,4294967295,0),this[F]=N>>>24,this[F+1]=N>>>16,this[F+2]=N>>>8,this[F+3]=255&N,F+4},s.prototype.writeIntLE=function(N,F,K,H){if(N=+N,F>>>=0,!H){var $=Math.pow(2,8*K-1);T(this,N,F,K,$-1,-$)}var se=0,pe=1,Te=0;for(this[F]=255&N;++se<K&&(pe*=256);)N<0&&Te===0&&this[F+se-1]!==0&&(Te=1),this[F+se]=(N/pe>>0)-Te&255;return F+K},s.prototype.writeIntBE=function(N,F,K,H){if(N=+N,F>>>=0,!H){var $=Math.pow(2,8*K-1);T(this,N,F,K,$-1,-$)}var se=K-1,pe=1,Te=0;for(this[F+se]=255&N;--se>=0&&(pe*=256);)N<0&&Te===0&&this[F+se+1]!==0&&(Te=1),this[F+se]=(N/pe>>0)-Te&255;return F+K},s.prototype.writeInt8=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,1,127,-128),N<0&&(N=255+N+1),this[F]=255&N,F+1},s.prototype.writeInt16LE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,2,32767,-32768),this[F]=255&N,this[F+1]=N>>>8,F+2},s.prototype.writeInt16BE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,2,32767,-32768),this[F]=N>>>8,this[F+1]=255&N,F+2},s.prototype.writeInt32LE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,4,2147483647,-2147483648),this[F]=255&N,this[F+1]=N>>>8,this[F+2]=N>>>16,this[F+3]=N>>>24,F+4},s.prototype.writeInt32BE=function(N,F,K){return N=+N,F>>>=0,K||T(this,N,F,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[F]=N>>>24,this[F+1]=N>>>16,this[F+2]=N>>>8,this[F+3]=255&N,F+4},s.prototype.writeFloatLE=function(N,F,K){return W(this,N,F,!0,K)},s.prototype.writeFloatBE=function(N,F,K){return W(this,N,F,!1,K)},s.prototype.writeDoubleLE=function(N,F,K){return Q(this,N,F,!0,K)},s.prototype.writeDoubleBE=function(N,F,K){return Q(this,N,F,!1,K)},s.prototype.copy=function(N,F,K,H){if(!s.isBuffer(N))throw new TypeError("argument should be a Buffer");if(K||(K=0),H||H===0||(H=this.length),F>=N.length&&(F=N.length),F||(F=0),H>0&&H<K&&(H=K),H===K||N.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),N.length-F<H-K&&(H=N.length-F+K);var $=H-K;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(F,K,H);else if(this===N&&K<F&&F<H)for(var se=$-1;se>=0;--se)N[se+F]=this[se+K];else Uint8Array.prototype.set.call(N,this.subarray(K,H),F);return $},s.prototype.fill=function(N,F,K,H){if(typeof N=="string"){if(typeof F=="string"?(H=F,F=0,K=this.length):typeof K=="string"&&(H=K,K=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!s.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(N.length===1){var $=N.charCodeAt(0);(H==="utf8"&&$<128||H==="latin1")&&(N=$)}}else typeof N=="number"&&(N&=255);if(F<0||this.length<F||this.length<K)throw new RangeError("Out of range index");if(K<=F)return this;var se;if(F>>>=0,K=K===void 0?this.length:K>>>0,N||(N=0),typeof N=="number")for(se=F;se<K;++se)this[se]=N;else{var pe=s.isBuffer(N)?N:s.from(N,H),Te=pe.length;if(Te===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(se=0;se<K-F;++se)this[se+F]=pe[se%Te]}return this};var X=/[^+/0-9A-Za-z-_]/g;function oe(N){return N<16?"0"+N.toString(16):N.toString(16)}function J(N,F){var K;F=F||1/0;for(var H=N.length,$=null,se=[],pe=0;pe<H;++pe){if((K=N.charCodeAt(pe))>55295&&K<57344){if(!$){if(K>56319){(F-=3)>-1&&se.push(239,191,189);continue}if(pe+1===H){(F-=3)>-1&&se.push(239,191,189);continue}$=K;continue}if(K<56320){(F-=3)>-1&&se.push(239,191,189),$=K;continue}K=65536+($-55296<<10|K-56320)}else $&&(F-=3)>-1&&se.push(239,191,189);if($=null,K<128){if((F-=1)<0)break;se.push(K)}else if(K<2048){if((F-=2)<0)break;se.push(K>>6|192,63&K|128)}else if(K<65536){if((F-=3)<0)break;se.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((F-=4)<0)break;se.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return se}function he(N){return n.toByteArray(function(F){if((F=(F=F.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(N))}function ae(N,F,K,H){for(var $=0;$<H&&!($+K>=F.length||$>=N.length);++$)F[$+K]=N[$];return $}function ue(N,F){return N instanceof F||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===F.name}function ge(N){return N!=N}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":42,buffer:46,ieee754:148}],47:[function(e,v,i){"use strict";var t=e("get-intrinsic")("%Object.getOwnPropertyDescriptor%");if(t)try{t([],"length")}catch{t=null}v.exports=t},{"get-intrinsic":48}],48:[function(e,v,i){"use strict";var t,n=SyntaxError,u=Function,r=TypeError,c=function(j){try{return u('"use strict"; return ('+j+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var o=function(){throw new r},d=s?function(){try{return o}catch{try{return s(arguments,"callee").get}catch{return o}}}():o,a=e("has-symbols")(),p=Object.getPrototypeOf||function(j){return j.__proto__},f={},b=typeof Uint8Array>"u"?t:p(Uint8Array),_={"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":a?p([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a?p(p([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map<"u"&&a?p(new Map()[Symbol.iterator]()):t,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set<"u"&&a?p(new Set()[Symbol.iterator]()):t,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":a?p(""[Symbol.iterator]()):t,"%Symbol%":a?Symbol:t,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":b,"%TypeError%":r,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet},y=function j(k){var M;if(k==="%AsyncFunction%")M=c("async function () {}");else if(k==="%GeneratorFunction%")M=c("function* () {}");else if(k==="%AsyncGeneratorFunction%")M=c("async function* () {}");else if(k==="%AsyncGenerator%"){var R=j("%AsyncGeneratorFunction%");R&&(M=R.prototype)}else if(k==="%AsyncIteratorPrototype%"){var V=j("%AsyncGenerator%");V&&(M=p(V.prototype))}return _[k]=M,M},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=e("function-bind"),w=e("has"),C=m.call(Function.call,Array.prototype.concat),I=m.call(Function.apply,Array.prototype.splice),S=m.call(Function.call,String.prototype.replace),O=m.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,D=function(j){var k=O(j,0,1),M=O(j,-1);if(k==="%"&&M!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(M==="%"&&k!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var R=[];return S(j,A,function(V,T,U,W){R[R.length]=U?S(W,E,"$1"):T||V}),R},P=function(j,k){var M,R=j;if(w(g,R)&&(R="%"+(M=g[R])[0]+"%"),w(_,R)){var V=_[R];if(V===f&&(V=y(R)),V===void 0&&!k)throw new r("intrinsic "+j+" exists, but is not available. Please file an issue!");return{alias:M,name:R,value:V}}throw new n("intrinsic "+j+" does not exist!")};v.exports=function(j,k){if(typeof j!="string"||j.length===0)throw new r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof k!="boolean")throw new r('"allowMissing" argument must be a boolean');var M=D(j),R=M.length>0?M[0]:"",V=P("%"+R+"%",k),T=V.name,U=V.value,W=!1,Q=V.alias;Q&&(R=Q[0],I(M,C([0,1],Q)));for(var X=1,oe=!0;X<M.length;X+=1){var J=M[X],he=O(J,0,1),ae=O(J,-1);if((he==='"'||he==="'"||he==="`"||ae==='"'||ae==="'"||ae==="`")&&he!==ae)throw new n("property names with quotes must have matching quotes");if(J!=="constructor"&&oe||(W=!0),w(_,T="%"+(R+="."+J)+"%"))U=_[T];else if(U!=null){if(!(J in U)){if(!k)throw new r("base intrinsic for "+j+" exists, but the property is not available.");return}if(s&&X+1>=M.length){var ue=s(U,J);U=(oe=!!ue)&&"get"in ue&&!("originalValue"in ue.get)?ue.get:U[J]}else oe=w(U,J),U=U[J];oe&&!W&&(_[T]=U)}}return U}},{"function-bind":144,has:147,"has-symbols":145}],49:[function(e,v,i){(function(t){(function(){"use strict";var n=e("foreach"),u=e("available-typed-arrays"),r=e("call-bind/callBound"),c=r("Object.prototype.toString"),s=e("has-symbols")()&&typeof Symbol.toStringTag=="symbol",o=u(),d=r("Array.prototype.indexOf",!0)||function(_,y){for(var g=0;g<_.length;g+=1)if(_[g]===y)return g;return-1},a=r("String.prototype.slice"),p={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),b=Object.getPrototypeOf;s&&f&&b&&n(o,function(_){var y=new t[_];if(!(Symbol.toStringTag in y))throw new EvalError("this engine has support for Symbol.toStringTag, but "+_+" does not have the property! Please report this.");var g=b(y),m=f(g,Symbol.toStringTag);if(!m){var w=b(g);m=f(w,Symbol.toStringTag)}p[_]=m.get}),v.exports=function(_){if(!_||typeof _!="object")return!1;if(!s){var y=a(c(_),8,-1);return d(o,y)>-1}return!!f&&function(g){var m=!1;return n(p,function(w,C){if(!m)try{m=w.call(g)===C}catch{}}),m}(_)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":45,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":47,foreach:142,"has-symbols":145}],50:[function(e,v,i){v.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}},{}],51:[function(e,v,i){"use strict";var t=e("is-arguments"),n=e("is-generator-function"),u=e("which-typed-array"),r=e("is-typed-array");function c(T){return T.call.bind(T)}var s=typeof BigInt<"u",o=typeof Symbol<"u",d=c(Object.prototype.toString),a=c(Number.prototype.valueOf),p=c(String.prototype.valueOf),f=c(Boolean.prototype.valueOf);if(s)var b=c(BigInt.prototype.valueOf);if(o)var _=c(Symbol.prototype.valueOf);function y(T,U){if(typeof T!="object")return!1;try{return U(T),!0}catch{return!1}}function g(T){return d(T)==="[object Map]"}function m(T){return d(T)==="[object Set]"}function w(T){return d(T)==="[object WeakMap]"}function C(T){return d(T)==="[object WeakSet]"}function I(T){return d(T)==="[object ArrayBuffer]"}function S(T){return typeof ArrayBuffer<"u"&&(I.working?I(T):T instanceof ArrayBuffer)}function O(T){return d(T)==="[object DataView]"}function A(T){return typeof DataView<"u"&&(O.working?O(T):T instanceof DataView)}i.isArgumentsObject=t,i.isGeneratorFunction=n,i.isTypedArray=r,i.isPromise=function(T){return typeof Promise<"u"&&T instanceof Promise||T!==null&&typeof T=="object"&&typeof T.then=="function"&&typeof T.catch=="function"},i.isArrayBufferView=function(T){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(T):r(T)||A(T)},i.isUint8Array=function(T){return u(T)==="Uint8Array"},i.isUint8ClampedArray=function(T){return u(T)==="Uint8ClampedArray"},i.isUint16Array=function(T){return u(T)==="Uint16Array"},i.isUint32Array=function(T){return u(T)==="Uint32Array"},i.isInt8Array=function(T){return u(T)==="Int8Array"},i.isInt16Array=function(T){return u(T)==="Int16Array"},i.isInt32Array=function(T){return u(T)==="Int32Array"},i.isFloat32Array=function(T){return u(T)==="Float32Array"},i.isFloat64Array=function(T){return u(T)==="Float64Array"},i.isBigInt64Array=function(T){return u(T)==="BigInt64Array"},i.isBigUint64Array=function(T){return u(T)==="BigUint64Array"},g.working=typeof Map<"u"&&g(new Map),i.isMap=function(T){return typeof Map<"u"&&(g.working?g(T):T instanceof Map)},m.working=typeof Set<"u"&&m(new Set),i.isSet=function(T){return typeof Set<"u"&&(m.working?m(T):T instanceof Set)},w.working=typeof WeakMap<"u"&&w(new WeakMap),i.isWeakMap=function(T){return typeof WeakMap<"u"&&(w.working?w(T):T instanceof WeakMap)},C.working=typeof WeakSet<"u"&&C(new WeakSet),i.isWeakSet=function(T){return C(T)},I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer),i.isArrayBuffer=S,O.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&O(new DataView(new ArrayBuffer(1),0,1)),i.isDataView=A;var E=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function D(T){return d(T)==="[object SharedArrayBuffer]"}function P(T){return E!==void 0&&(D.working===void 0&&(D.working=D(new E)),D.working?D(T):T instanceof E)}function j(T){return y(T,a)}function k(T){return y(T,p)}function M(T){return y(T,f)}function R(T){return s&&y(T,b)}function V(T){return o&&y(T,_)}i.isSharedArrayBuffer=P,i.isAsyncFunction=function(T){return d(T)==="[object AsyncFunction]"},i.isMapIterator=function(T){return d(T)==="[object Map Iterator]"},i.isSetIterator=function(T){return d(T)==="[object Set Iterator]"},i.isGeneratorObject=function(T){return d(T)==="[object Generator]"},i.isWebAssemblyCompiledModule=function(T){return d(T)==="[object WebAssembly.Module]"},i.isNumberObject=j,i.isStringObject=k,i.isBooleanObject=M,i.isBigIntObject=R,i.isSymbolObject=V,i.isBoxedPrimitive=function(T){return j(T)||k(T)||M(T)||R(T)||V(T)},i.isAnyArrayBuffer=function(T){return typeof Uint8Array<"u"&&(S(T)||P(T))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(T){Object.defineProperty(i,T,{enumerable:!1,value:function(){throw new Error(T+" is not supported in userland")}})})},{"is-arguments":153,"is-generator-function":154,"is-typed-array":49,"which-typed-array":460}],52:[function(e,v,i){(function(t){(function(){var n=Object.getOwnPropertyDescriptors||function(V){for(var T=Object.keys(V),U={},W=0;W<T.length;W++)U[T[W]]=Object.getOwnPropertyDescriptor(V,T[W]);return U},u=/%[sdj%]/g;i.format=function(V){if(!w(V)){for(var T=[],U=0;U<arguments.length;U++)T.push(o(arguments[U]));return T.join(" ")}U=1;for(var W=arguments,Q=W.length,X=String(V).replace(u,function(J){if(J==="%%")return"%";if(U>=Q)return J;switch(J){case"%s":return String(W[U++]);case"%d":return Number(W[U++]);case"%j":try{return JSON.stringify(W[U++])}catch{return"[Circular]"}default:return J}}),oe=W[U];U<Q;oe=W[++U])g(oe)||!S(oe)?X+=" "+oe:X+=" "+o(oe);return X},i.deprecate=function(V,T){if(t!==void 0&&t.noDeprecation===!0)return V;if(t===void 0)return function(){return i.deprecate(V,T).apply(this,arguments)};var U=!1;return function(){if(!U){if(t.throwDeprecation)throw new Error(T);t.traceDeprecation,U=!0}return V.apply(this,arguments)}};var r={},c=/^$/;if(t.env.NODE_DEBUG){var s=t.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+s+"$","i")}function o(V,T){var U={seen:[],stylize:a};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),y(T)?U.showHidden=T:T&&i._extend(U,T),C(U.showHidden)&&(U.showHidden=!1),C(U.depth)&&(U.depth=2),C(U.colors)&&(U.colors=!1),C(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=d),p(U,V,U.depth)}function d(V,T){var U=o.styles[T];return U?"\x1B["+o.colors[U][0]+"m"+V+"\x1B["+o.colors[U][1]+"m":V}function a(V,T){return V}function p(V,T,U){if(V.customInspect&&T&&E(T.inspect)&&T.inspect!==i.inspect&&(!T.constructor||T.constructor.prototype!==T)){var W=T.inspect(U,V);return w(W)||(W=p(V,W,U)),W}var Q=function(N,F){if(C(F))return N.stylize("undefined","undefined");if(w(F)){var K="'"+JSON.stringify(F).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return N.stylize(K,"string")}if(m(F))return N.stylize(""+F,"number");if(y(F))return N.stylize(""+F,"boolean");if(g(F))return N.stylize("null","null")}(V,T);if(Q)return Q;var X=Object.keys(T),oe=function(N){var F={};return N.forEach(function(K,H){F[K]=!0}),F}(X);if(V.showHidden&&(X=Object.getOwnPropertyNames(T)),A(T)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return f(T);if(X.length===0){if(E(T)){var J=T.name?": "+T.name:"";return V.stylize("[Function"+J+"]","special")}if(I(T))return V.stylize(RegExp.prototype.toString.call(T),"regexp");if(O(T))return V.stylize(Date.prototype.toString.call(T),"date");if(A(T))return f(T)}var he,ae="",ue=!1,ge=["{","}"];return _(T)&&(ue=!0,ge=["[","]"]),E(T)&&(ae=" [Function"+(T.name?": "+T.name:"")+"]"),I(T)&&(ae=" "+RegExp.prototype.toString.call(T)),O(T)&&(ae=" "+Date.prototype.toUTCString.call(T)),A(T)&&(ae=" "+f(T)),X.length!==0||ue&&T.length!=0?U<0?I(T)?V.stylize(RegExp.prototype.toString.call(T),"regexp"):V.stylize("[Object]","special"):(V.seen.push(T),he=ue?function(N,F,K,H,$){for(var se=[],pe=0,Te=F.length;pe<Te;++pe)k(F,String(pe))?se.push(b(N,F,K,H,String(pe),!0)):se.push("");return $.forEach(function($e){$e.match(/^\d+$/)||se.push(b(N,F,K,H,$e,!0))}),se}(V,T,U,oe,X):X.map(function(N){return b(V,T,U,oe,N,ue)}),V.seen.pop(),function(N,F,K){var H=N.reduce(function($,se){return se.indexOf(`
`)>=0,$+se.replace(/\u001b\[\d\d?m/g,"").length+1},0);return H>60?K[0]+(F===""?"":F+`
 `)+" "+N.join(`,
  `)+" "+K[1]:K[0]+F+" "+N.join(", ")+" "+K[1]}(he,ae,ge)):ge[0]+ae+ge[1]}function f(V){return"["+Error.prototype.toString.call(V)+"]"}function b(V,T,U,W,Q,X){var oe,J,he;if((he=Object.getOwnPropertyDescriptor(T,Q)||{value:T[Q]}).get?J=he.set?V.stylize("[Getter/Setter]","special"):V.stylize("[Getter]","special"):he.set&&(J=V.stylize("[Setter]","special")),k(W,Q)||(oe="["+Q+"]"),J||(V.seen.indexOf(he.value)<0?(J=g(U)?p(V,he.value,null):p(V,he.value,U-1)).indexOf(`
`)>-1&&(J=X?J.split(`
`).map(function(ae){return"  "+ae}).join(`
`).substr(2):`
`+J.split(`
`).map(function(ae){return"   "+ae}).join(`
`)):J=V.stylize("[Circular]","special")),C(oe)){if(X&&Q.match(/^\d+$/))return J;(oe=JSON.stringify(""+Q)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.substr(1,oe.length-2),oe=V.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=V.stylize(oe,"string"))}return oe+": "+J}function _(V){return Array.isArray(V)}function y(V){return typeof V=="boolean"}function g(V){return V===null}function m(V){return typeof V=="number"}function w(V){return typeof V=="string"}function C(V){return V===void 0}function I(V){return S(V)&&D(V)==="[object RegExp]"}function S(V){return typeof V=="object"&&V!==null}function O(V){return S(V)&&D(V)==="[object Date]"}function A(V){return S(V)&&(D(V)==="[object Error]"||V instanceof Error)}function E(V){return typeof V=="function"}function D(V){return Object.prototype.toString.call(V)}function P(V){return V<10?"0"+V.toString(10):V.toString(10)}i.debuglog=function(V){if(V=V.toUpperCase(),!r[V])if(c.test(V)){var T=t.pid;r[V]=function(){var U=i.format.apply(i,arguments)}}else r[V]=function(){};return r[V]},i.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.types=e("./support/types"),i.isArray=_,i.isBoolean=y,i.isNull=g,i.isNullOrUndefined=function(V){return V==null},i.isNumber=m,i.isString=w,i.isSymbol=function(V){return typeof V=="symbol"},i.isUndefined=C,i.isRegExp=I,i.types.isRegExp=I,i.isObject=S,i.isDate=O,i.types.isDate=O,i.isError=A,i.types.isNativeError=A,i.isFunction=E,i.isPrimitive=function(V){return V===null||typeof V=="boolean"||typeof V=="number"||typeof V=="string"||typeof V=="symbol"||V===void 0},i.isBuffer=e("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(V,T){return Object.prototype.hasOwnProperty.call(V,T)}i.log=function(){var V,T},i.inherits=e("inherits"),i._extend=function(V,T){if(!T||!S(T))return V;for(var U=Object.keys(T),W=U.length;W--;)V[U[W]]=T[U[W]];return V};var M=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function R(V,T){if(!V){var U=new Error("Promise was rejected with a falsy value");U.reason=V,V=U}return T(V)}i.promisify=function(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');if(M&&V[M]){var T;if(typeof(T=V[M])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(T,M,{value:T,enumerable:!1,writable:!1,configurable:!0}),T}function T(){for(var U,W,Q=new Promise(function(J,he){U=J,W=he}),X=[],oe=0;oe<arguments.length;oe++)X.push(arguments[oe]);X.push(function(J,he){J?W(J):U(he)});try{V.apply(this,X)}catch(J){W(J)}return Q}return Object.setPrototypeOf(T,Object.getPrototypeOf(V)),M&&Object.defineProperty(T,M,{value:T,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(T,n(V))},i.promisify.custom=M,i.callbackify=function(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');function T(){for(var U=[],W=0;W<arguments.length;W++)U.push(arguments[W]);var Q=U.pop();if(typeof Q!="function")throw new TypeError("The last argument must be of type Function");var X=this,oe=function(){return Q.apply(X,arguments)};V.apply(this,U).then(function(J){t.nextTick(oe.bind(null,null,J))},function(J){t.nextTick(R.bind(null,J,oe))})}return Object.setPrototypeOf(T,Object.getPrototypeOf(V)),Object.defineProperties(T,n(V)),T}}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":50,"./support/types":51,_process:399,inherits:151}],53:[function(e,v,i){"use strict";var t=e("get-intrinsic"),n=e("./"),u=n(t("String.prototype.indexOf"));v.exports=function(r,c){var s=t(r,!!c);return typeof s=="function"&&u(r,".prototype.")>-1?n(s):s}},{"./":54,"get-intrinsic":55}],54:[function(e,v,i){"use strict";var t=e("function-bind"),n=e("get-intrinsic"),u=n("%Function.prototype.apply%"),r=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||t.call(r,u),s=n("%Object.getOwnPropertyDescriptor%",!0),o=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}v.exports=function(p){var f=c(t,r,arguments);return s&&o&&s(f,"length").configurable&&o(f,"length",{value:1+d(0,p.length-(arguments.length-1))}),f};var a=function(){return c(t,u,arguments)};o?o(v.exports,"apply",{value:a}):v.exports.apply=a},{"function-bind":144,"get-intrinsic":55}],55:[function(e,v,i){arguments[4][48][0].apply(i,arguments)},{dup:48,"function-bind":144,has:147,"has-symbols":145}],56:[function(e,v,i){(function(){"use strict";var t={}.hasOwnProperty;function n(){for(var u=[],r=0;r<arguments.length;r++){var c=arguments[r];if(c){var s=typeof c;if(s==="string"||s==="number")u.push(c);else if(Array.isArray(c)){if(c.length){var o=n.apply(null,c);o&&u.push(o)}}else if(s==="object")if(c.toString===Object.prototype.toString)for(var d in c)t.call(c,d)&&c[d]&&u.push(d);else u.push(c.toString())}}return u.join(" ")}v!==void 0&&v.exports?(n.default=n,v.exports=n):typeof ht=="function"&&typeof ht.amd=="object"&&ht.amd?ht("classnames",[],function(){return n}):window.classNames=n})()},{}],57:[function(e,v,i){(function(t){(function(){"use strict";i.__esModule=!0,i.default=function(s,o){if(c)return c.call(s,o);var d=s;do{if((0,u.default)(d,o))return d;d=d.parentNode}while(d&&d!==t.document);return null};var n,u=(n=e("matches-selector-ng"))&&n.__esModule?n:{default:n},r=t.Element&&t.Element.prototype,c=r&&r.closest;v.exports=i.default,v.exports.default=i.default}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"matches-selector-ng":365}],58:[function(e,v,i){"use strict";v.exports=function(t,n){var u=this,r=u.constructor;return u.callbacks={},u.activeSequences=[],u.resetTimer,u.ignoreNextKeyup=!1,u.ignoreNextKeypress=!1,u.nextExpectedAction=!1,u.element=t,u.addEvents(n),r.instances.push(u),u},v.exports.prototype.bind=e("./prototype/bind"),v.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),v.exports.prototype.trigger=e("./prototype/trigger"),v.exports.prototype.reset=e("./prototype/reset.js"),v.exports.prototype.stopCallback=e("./prototype/stopCallback"),v.exports.prototype.handleKey=e("./prototype/handleKey"),v.exports.prototype.addEvents=e("./prototype/addEvents"),v.exports.prototype.bindSingle=e("./prototype/bindSingle"),v.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),v.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),v.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),v.exports.prototype.getMatches=e("./prototype/getMatches"),v.exports.prototype.resetSequences=e("./prototype/resetSequences"),v.exports.prototype.fireCallback=e("./prototype/fireCallback"),v.exports.prototype.bindSequence=e("./prototype/bindSequence"),v.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),v.exports.instances=[],v.exports.reset=e("./reset"),v.exports.REVERSE_MAP=null},{"./prototype/addEvents":59,"./prototype/bind":60,"./prototype/bindMultiple":61,"./prototype/bindSequence":62,"./prototype/bindSingle":63,"./prototype/fireCallback":64,"./prototype/getKeyInfo":65,"./prototype/getMatches":66,"./prototype/getReverseMap":67,"./prototype/handleKey":68,"./prototype/pickBestAction":71,"./prototype/reset.js":72,"./prototype/resetSequenceTimer":73,"./prototype/resetSequences":74,"./prototype/stopCallback":75,"./prototype/trigger":76,"./reset":77}],59:[function(e,v,i){"use strict";v.exports=function(t){var n,u,r,c=this.element;u=e("./handleKeyEvent"),(n=e("../../helpers/addEvent"))(c,"keypress",r=u.bind(this),t),n(c,"keydown",r,t),n(c,"keyup",r,t)}},{"../../helpers/addEvent":78,"./handleKeyEvent":69}],60:[function(e,v,i){"use strict";v.exports=function(t,n,u){return t=t instanceof Array?t:[t],this.bindMultiple(t,n,u)}},{}],61:[function(e,v,i){"use strict";v.exports=function(t,n,u){for(var r=[],c=0;c<t.length;++c)r.push(this.bindSingle(t[c],n,u));return function(){for(var s=0;s<r.length;s++)r[s]()}}},{}],62:[function(e,v,i){"use strict";v.exports=function(t,n,u,r){var c=this;function s(f){return function(){return c.nextExpectedAction=f,++u.currentLevel,c.resetSequenceTimer(),!0}}function o(f){var b;c.fireCallback(u,f,t),r!=="keyup"&&(b=e("../../helpers/characterFromEvent"),c.ignoreNextKeyup=b(f)),setTimeout(function(){c.resetSequences()},10)}u.currentLevel=0;for(var d=[],a=0;a<n.length;++a){var p=a+1===n.length?o:s(r||c.getKeyInfo(n[a+1]).action);d.push(c.bindSingle(n[a],p,r,t,a,u))}return function(){for(var f=0;f<d.length;f++)d[f]()}}},{"../../helpers/characterFromEvent":79}],63:[function(e,v,i){"use strict";v.exports=function(t,n,u,r,c,s){var o,d=this,a=(t=t.replace(/\s+/g," ")).split(" ");if(a.length>1)return d.bindSequence(t,a,n,u);o=d.getKeyInfo(t,u),d.callbacks[o.key]=d.callbacks[o.key]||{sequences:[],singles:[]};var p=d.callbacks[o.key][r?"sequences":"singles"],f={callback:n,originalCallback:s||n,modifiers:o.modifiers,action:o.action,seq:r,level:c,combo:t};return p.push(f),function(){var b=p.indexOf(f);p.splice(b,1)}}},{}],64:[function(e,v,i){"use strict";v.exports=function(t,n,u,r){if(this.stopCallback(n,n.target||n.srcElement,u,r))return!0;var c=t(n,u);return c===!1&&(e("../../helpers/preventDefault")(n),e("../../helpers/stopPropagation")(n)),c}},{"../../helpers/preventDefault":83,"../../helpers/stopPropagation":88}],65:[function(e,v,i){"use strict";v.exports=function(t,n){var u,r,c,s,o,d,a=[];for(u=e("../../helpers/keysFromString")(t),s=e("../../helpers/special-aliases"),o=e("../../helpers/shift-map"),d=e("../../helpers/isModifier"),c=0;c<u.length;++c)s[r=u[c]]&&(r=s[r]),n&&n!=="keypress"&&o[r]&&(r=o[r],a.push("shift")),d(r)&&a.push(r);return{key:r,modifiers:a,action:n=this.pickBestAction(r,a,n)}}},{"../../helpers/isModifier":81,"../../helpers/keysFromString":82,"../../helpers/shift-map":84,"../../helpers/special-aliases":85}],66:[function(e,v,i){"use strict";v.exports=function(t,n,u,r,c,s){var o,d,a,p=this,f=[],b=u.type;if(!p.callbacks[t])return[];d=e("../../helpers/isModifier"),b==="keyup"&&d(t)&&(n=[t]);var _=p.callbacks[t].sequences.reverse().concat(p.callbacks[t].singles.reverse());for(p.callbacks[t].sequences.reverse(),p.callbacks[t].singles.reverse(),o=0;o<_.length;++o){var y=_[o];!r&&y.seq&&y.originalCallback.currentLevel!==y.level||b===y.action&&(a=e("./modifiersMatch"),(b==="keypress"&&!u.metaKey&&!u.ctrlKey||a(n,y.modifiers))&&f.push(y))}return f}},{"../../helpers/isModifier":81,"./modifiersMatch":70}],67:[function(e,v,i){"use strict";v.exports=function(){var t,n=this.constructor;if(!n.REVERSE_MAP)for(var u in n.REVERSE_MAP={},t=e("../../helpers/special-keys-map"))u>95&&u<112||t.hasOwnProperty(u)&&(n.REVERSE_MAP[t[u]]=u);return n.REVERSE_MAP}},{"../../helpers/special-keys-map":87}],68:[function(e,v,i){"use strict";v.exports=function(t,n,u){var r,c,s,o,d=this,a=[],p=0,f=!1;for(r=d.getMatches(t,n,u),c=0;c<r.length;++c)r[c].seq&&(p=Math.max(p,r[c].level));for(c=0;c<r.length;++c)if(r[c].seq){if(r[c].level!==p)continue;if(f=!0,a.push(r[c].originalCallback),!d.fireCallback(r[c].callback,u,r[c].combo,r[c].seq)){a=[];break}}else f||d.fireCallback(r[c].callback,u,r[c].combo);o=u.type==="keypress"&&d.ignoreNextKeypress,s=e("../../helpers/isModifier"),u.type!==d.nextExpectedAction||s(t)||o||d.resetSequences(a),d.ignoreNextKeypress=f&&u.type==="keydown"}},{"../../helpers/isModifier":81}],69:[function(e,v,i){"use strict";v.exports=function(t){var n,u=this;typeof t.which!="number"&&(t.which=t.keyCode);var r=e("../../helpers/characterFromEvent")(t);r&&(t.type!=="keyup"||u.ignoreNextKeyup!==r?(n=e("../../helpers/eventModifiers"),u.handleKey(r,n(t),t)):u.ignoreNextKeyup=!1)}},{"../../helpers/characterFromEvent":79,"../../helpers/eventModifiers":80}],70:[function(e,v,i){"use strict";v.exports=function(t,n){return t.sort().join(",")===n.sort().join(",")}},{}],71:[function(e,v,i){"use strict";v.exports=function(t,n,u){return u||(u=this.getReverseMap()[t]?"keydown":"keypress"),u==="keypress"&&n.length&&(u="keydown"),u}},{}],72:[function(e,v,i){"use strict";v.exports=function(){return this.callbacks={},this.directMap={},this}},{}],73:[function(e,v,i){"use strict";v.exports=function(){var t=this;clearTimeout(t.resetTimer),t.resetTimer=setTimeout(function(){t.resetSequences()},1e3)}},{}],74:[function(e,v,i){"use strict";v.exports=function(t){for(var n in t=t||[],this.callbacks)for(var u=this.callbacks[n].sequences,r=0;r<u.length;r++)t.indexOf(u[r].originalCallback)===-1&&(u[r].originalCallback.currentLevel=0);this.nextExpectedAction=t.length>0}},{}],75:[function(e,v,i){"use strict";v.exports=function(t,n){return!((" "+n.className+" ").indexOf(" combokeys ")>-1)&&(n.tagName==="INPUT"||n.tagName==="SELECT"||n.tagName==="TEXTAREA"||n.isContentEditable)}},{}],76:[function(e,v,i){"use strict";v.exports=function(t,n){}},{}],77:[function(e,v,i){"use strict";v.exports=function(){this.instances.forEach(function(t){t.reset()})}},{}],78:[function(e,v,i){"use strict";v.exports=function(t,n,u,r){t.addEventListener?t.addEventListener(n,u,r):t.attachEvent("on"+n,u)}},{}],79:[function(e,v,i){"use strict";v.exports=function(t){var n,u;if(n=e("./special-keys-map"),u=e("./special-characters-map"),t.type==="keypress"){var r=String.fromCharCode(t.which);return t.shiftKey||(r=r.toLowerCase()),r}return n[t.which]?n[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}},{"./special-characters-map":86,"./special-keys-map":87}],80:[function(e,v,i){"use strict";v.exports=function(t){var n=[];return t.shiftKey&&n.push("shift"),t.altKey&&n.push("alt"),t.ctrlKey&&n.push("ctrl"),t.metaKey&&n.push("meta"),n}},{}],81:[function(e,v,i){"use strict";v.exports=function(t){return t==="shift"||t==="ctrl"||t==="alt"||t==="meta"}},{}],82:[function(e,v,i){"use strict";v.exports=function(t){return t==="+"?["+"]:t.split("+")}},{}],83:[function(e,v,i){"use strict";v.exports=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},{}],84:[function(e,v,i){"use strict";v.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],85:[function(e,v,i){"use strict";v.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],86:[function(e,v,i){"use strict";v.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],87:[function(e,v,i){"use strict";v.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var t=1;t<20;++t)v.exports[111+t]="f"+t;for(t=0;t<=9;++t)v.exports[t+96]=t},{}],88:[function(e,v,i){"use strict";v.exports=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}},{}],89:[function(e,v,i){"use strict";v.exports=e("./Combokeys")},{"./Combokeys":58}],90:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o,d){for(var a=r(s),p=r(o),f={all:d.buffer||0,top:d.topBuffer||0,bottom:d.bottomBuffer||0,left:d.leftBuffer||0,right:d.rightBuffer||0},b=Array.isArray(d.position)?d.position:[d.position].filter(Boolean),_=Array.isArray(d.hAlign)?d.hAlign:[d.hAlign].filter(Boolean),y=Array.isArray(d.vAlign)?d.vAlign:[d.vAlign].filter(Boolean),g=b.length>0&&d.forcePosition?b:(0,u.default)(b.concat(["top","bottom","left","right"])),m=_.length>0&&d.forceHAlign?_:(0,u.default)(_.concat(["center","left","right"])),w=y.length>0&&d.forceVAlign?y:(0,u.default)(y.concat(["center","top","bottom"])),C=(0,n.default)(g.map(function(j){return j==="cover"?(0,n.default)(m.map(function(k){return w.map(function(M){return{position:j,hAlign:k,vAlign:M}})})):j==="top"||j==="bottom"?m.map(function(k){return{position:j,hAlign:k,vAlign:"center"}}):w.map(function(k){return{position:j,hAlign:"center",vAlign:k}})})),I=null,S=0;S<C.length;S++){var O=C[S],A=c(a,p,O,f),E=A.top,D=A.left;if(E-f.all-f.top>=0&&D-f.all-f.left>=0&&E+a.height+f.all+f.bottom<=window.innerHeight&&D+a.width+f.all+f.right<=window.innerWidth){I={choice:O,coord:A};break}}if(!I){var P={position:b[0]||"top",hAlign:_[0]||"center",vAlign:y[0]||"center"};I={choice:P,coord:c(a,p,P,f)}}return s.style.top="".concat(I.coord.top,"px"),s.style.left="".concat(I.coord.left,"px"),I.choice};var n=t(e("lodash/flatten")),u=t(e("lodash/uniq"));function r(s){var o=s.getBoundingClientRect();return"width"in o||(o=Object.assign({width:o.right-o.left,height:o.bottom-o.top},o)),o}function c(s,o,d,a){var p=d.position,f=d.hAlign,b=d.vAlign,_=0,y=0;if(p==="cover"){switch(f){case"center":y=Math.round((o.left+o.right-s.width)/2);break;case"left":y=Math.floor(o.left);break;case"right":y=Math.ceil(o.right-s.width);break;default:throw new Error("Should not happen")}switch(b){case"center":_=Math.round((o.top+o.bottom-s.height)/2);break;case"top":_=Math.floor(o.top);break;case"bottom":_=Math.ceil(o.bottom-s.height);break;default:throw new Error("Should not happen")}}else if(p==="top"||p==="bottom"){switch(p){case"top":_=Math.floor(o.top-s.height-a.all-a.bottom);break;case"bottom":_=Math.ceil(o.bottom+a.all+a.top);break;default:throw new Error("Should not happen")}switch(f){case"center":y=Math.round((o.left+o.right-s.width)/2);break;case"left":y=Math.round(o.left);break;case"right":y=Math.round(o.right-s.width);break;default:throw new Error("Should not happen")}}else{switch(p){case"left":y=Math.floor(o.left-s.width-a.all-a.right);break;case"right":y=Math.ceil(o.right+a.all+a.left);break;default:throw new Error("Should not happen")}switch(b){case"center":_=Math.round((o.top+o.bottom-s.height)/2);break;case"top":_=Math.round(o.top);break;case"bottom":_=Math.round(o.bottom-s.height);break;default:throw new Error("Should not happen")}}return{top:_,left:y}}v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/flatten":319,"lodash/uniq":359}],91:[function(e,v,i){var t=e("../../modules/_core"),n=t.JSON||(t.JSON={stringify:JSON.stringify});v.exports=function(u){return n.stringify.apply(n,arguments)}},{"../../modules/_core":99}],92:[function(e,v,i){e("../../modules/es6.object.assign"),v.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":99,"../../modules/es6.object.assign":131}],93:[function(e,v,i){e("../../modules/es6.object.define-property");var t=e("../../modules/_core").Object;v.exports=function(n,u,r){return t.defineProperty(n,u,r)}},{"../../modules/_core":99,"../../modules/es6.object.define-property":132}],94:[function(e,v,i){e("../../modules/es6.object.keys"),v.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":99,"../../modules/es6.object.keys":133}],95:[function(e,v,i){v.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}},{}],96:[function(e,v,i){var t=e("./_is-object");v.exports=function(n){if(!t(n))throw TypeError(n+" is not an object!");return n}},{"./_is-object":112}],97:[function(e,v,i){var t=e("./_to-iobject"),n=e("./_to-length"),u=e("./_to-absolute-index");v.exports=function(r){return function(c,s,o){var d,a=t(c),p=n(a.length),f=u(o,p);if(r&&s!=s){for(;p>f;)if((d=a[f++])!=d)return!0}else for(;p>f;f++)if((r||f in a)&&a[f]===s)return r||f||0;return!r&&-1}}},{"./_to-absolute-index":124,"./_to-iobject":126,"./_to-length":127}],98:[function(e,v,i){var t={}.toString;v.exports=function(n){return t.call(n).slice(8,-1)}},{}],99:[function(e,v,i){var t=v.exports={version:"2.6.12"};typeof __e=="number"&&(__e=t)},{}],100:[function(e,v,i){var t=e("./_a-function");v.exports=function(n,u,r){if(t(n),u===void 0)return n;switch(r){case 1:return function(c){return n.call(u,c)};case 2:return function(c,s){return n.call(u,c,s)};case 3:return function(c,s,o){return n.call(u,c,s,o)}}return function(){return n.apply(u,arguments)}}},{"./_a-function":95}],101:[function(e,v,i){v.exports=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t}},{}],102:[function(e,v,i){v.exports=!e("./_fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./_fails":106}],103:[function(e,v,i){var t=e("./_is-object"),n=e("./_global").document,u=t(n)&&t(n.createElement);v.exports=function(r){return u?n.createElement(r):{}}},{"./_global":107,"./_is-object":112}],104:[function(e,v,i){v.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],105:[function(e,v,i){var t=e("./_global"),n=e("./_core"),u=e("./_ctx"),r=e("./_hide"),c=e("./_has"),s="prototype",o=function(d,a,p){var f,b,_,y=d&o.F,g=d&o.G,m=d&o.S,w=d&o.P,C=d&o.B,I=d&o.W,S=g?n:n[a]||(n[a]={}),O=S[s],A=g?t:m?t[a]:(t[a]||{})[s];for(f in g&&(p=a),p)(b=!y&&A&&A[f]!==void 0)&&c(S,f)||(_=b?A[f]:p[f],S[f]=g&&typeof A[f]!="function"?p[f]:C&&b?u(_,t):I&&A[f]==_?function(E){var D=function(P,j,k){if(this instanceof E){switch(arguments.length){case 0:return new E;case 1:return new E(P);case 2:return new E(P,j)}return new E(P,j,k)}return E.apply(this,arguments)};return D[s]=E[s],D}(_):w&&typeof _=="function"?u(Function.call,_):_,w&&((S.virtual||(S.virtual={}))[f]=_,d&o.R&&O&&!O[f]&&r(O,f,_)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,v.exports=o},{"./_core":99,"./_ctx":100,"./_global":107,"./_has":108,"./_hide":109}],106:[function(e,v,i){v.exports=function(t){try{return!!t()}catch{return!0}}},{}],107:[function(e,v,i){var t=v.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=t)},{}],108:[function(e,v,i){var t={}.hasOwnProperty;v.exports=function(n,u){return t.call(n,u)}},{}],109:[function(e,v,i){var t=e("./_object-dp"),n=e("./_property-desc");v.exports=e("./_descriptors")?function(u,r,c){return t.f(u,r,n(1,c))}:function(u,r,c){return u[r]=c,u}},{"./_descriptors":102,"./_object-dp":115,"./_property-desc":121}],110:[function(e,v,i){v.exports=!e("./_descriptors")&&!e("./_fails")(function(){return Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7})},{"./_descriptors":102,"./_dom-create":103,"./_fails":106}],111:[function(e,v,i){var t=e("./_cof");v.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return t(n)=="String"?n.split(""):Object(n)}},{"./_cof":98}],112:[function(e,v,i){v.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}},{}],113:[function(e,v,i){v.exports=!0},{}],114:[function(e,v,i){"use strict";var t=e("./_descriptors"),n=e("./_object-keys"),u=e("./_object-gops"),r=e("./_object-pie"),c=e("./_to-object"),s=e("./_iobject"),o=Object.assign;v.exports=!o||e("./_fails")(function(){var d={},a={},p=Symbol(),f="abcdefghijklmnopqrst";return d[p]=7,f.split("").forEach(function(b){a[b]=b}),o({},d)[p]!=7||Object.keys(o({},a)).join("")!=f})?function(d,a){for(var p=c(d),f=arguments.length,b=1,_=u.f,y=r.f;f>b;)for(var g,m=s(arguments[b++]),w=_?n(m).concat(_(m)):n(m),C=w.length,I=0;C>I;)g=w[I++],t&&!y.call(m,g)||(p[g]=m[g]);return p}:o},{"./_descriptors":102,"./_fails":106,"./_iobject":111,"./_object-gops":116,"./_object-keys":118,"./_object-pie":119,"./_to-object":128}],115:[function(e,v,i){var t=e("./_an-object"),n=e("./_ie8-dom-define"),u=e("./_to-primitive"),r=Object.defineProperty;i.f=e("./_descriptors")?Object.defineProperty:function(c,s,o){if(t(c),s=u(s,!0),t(o),n)try{return r(c,s,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(c[s]=o.value),c}},{"./_an-object":96,"./_descriptors":102,"./_ie8-dom-define":110,"./_to-primitive":129}],116:[function(e,v,i){i.f=Object.getOwnPropertySymbols},{}],117:[function(e,v,i){var t=e("./_has"),n=e("./_to-iobject"),u=e("./_array-includes")(!1),r=e("./_shared-key")("IE_PROTO");v.exports=function(c,s){var o,d=n(c),a=0,p=[];for(o in d)o!=r&&t(d,o)&&p.push(o);for(;s.length>a;)t(d,o=s[a++])&&(~u(p,o)||p.push(o));return p}},{"./_array-includes":97,"./_has":108,"./_shared-key":122,"./_to-iobject":126}],118:[function(e,v,i){var t=e("./_object-keys-internal"),n=e("./_enum-bug-keys");v.exports=Object.keys||function(u){return t(u,n)}},{"./_enum-bug-keys":104,"./_object-keys-internal":117}],119:[function(e,v,i){i.f={}.propertyIsEnumerable},{}],120:[function(e,v,i){var t=e("./_export"),n=e("./_core"),u=e("./_fails");v.exports=function(r,c){var s=(n.Object||{})[r]||Object[r],o={};o[r]=c(s),t(t.S+t.F*u(function(){s(1)}),"Object",o)}},{"./_core":99,"./_export":105,"./_fails":106}],121:[function(e,v,i){v.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},{}],122:[function(e,v,i){var t=e("./_shared")("keys"),n=e("./_uid");v.exports=function(u){return t[u]||(t[u]=n(u))}},{"./_shared":123,"./_uid":130}],123:[function(e,v,i){var t=e("./_core"),n=e("./_global"),u="__core-js_shared__",r=n[u]||(n[u]={});(v.exports=function(c,s){return r[c]||(r[c]=s!==void 0?s:{})})("versions",[]).push({version:t.version,mode:e("./_library")?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":99,"./_global":107,"./_library":113}],124:[function(e,v,i){var t=e("./_to-integer"),n=Math.max,u=Math.min;v.exports=function(r,c){return(r=t(r))<0?n(r+c,0):u(r,c)}},{"./_to-integer":125}],125:[function(e,v,i){var t=Math.ceil,n=Math.floor;v.exports=function(u){return isNaN(u=+u)?0:(u>0?n:t)(u)}},{}],126:[function(e,v,i){var t=e("./_iobject"),n=e("./_defined");v.exports=function(u){return t(n(u))}},{"./_defined":101,"./_iobject":111}],127:[function(e,v,i){var t=e("./_to-integer"),n=Math.min;v.exports=function(u){return u>0?n(t(u),9007199254740991):0}},{"./_to-integer":125}],128:[function(e,v,i){var t=e("./_defined");v.exports=function(n){return Object(t(n))}},{"./_defined":101}],129:[function(e,v,i){var t=e("./_is-object");v.exports=function(n,u){if(!t(n))return n;var r,c;if(u&&typeof(r=n.toString)=="function"&&!t(c=r.call(n))||typeof(r=n.valueOf)=="function"&&!t(c=r.call(n))||!u&&typeof(r=n.toString)=="function"&&!t(c=r.call(n)))return c;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":112}],130:[function(e,v,i){var t=0,n=Math.random();v.exports=function(u){return"Symbol(".concat(u===void 0?"":u,")_",(++t+n).toString(36))}},{}],131:[function(e,v,i){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},{"./_export":105,"./_object-assign":114}],132:[function(e,v,i){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":102,"./_export":105,"./_object-dp":115}],133:[function(e,v,i){var t=e("./_to-object"),n=e("./_object-keys");e("./_object-sap")("keys",function(){return function(u){return n(t(u))}})},{"./_object-keys":118,"./_object-sap":120,"./_to-object":128}],134:[function(e,v,i){(function(t){"use strict";var n,u,r,c,s=9e15,o=1e9,d="0123456789abcdef",a="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},b=!0,_="[DecimalError] ",y=_+"Invalid argument: ",g=_+"Precision limit exceeded",m=_+"crypto unavailable",w=Math.floor,C=Math.pow,I=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,S=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,O=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,A=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,D=7,P=a.length-1,j=p.length-1,k={name:"[object Decimal]"};function M(z){var Z,te,ne,fe=z.length-1,ee="",_e=z[0];if(fe>0){for(ee+=_e,Z=1;Z<fe;Z++)ne=z[Z]+"",(te=D-ne.length)&&(ee+=ae(te)),ee+=ne;_e=z[Z],(te=D-(ne=_e+"").length)&&(ee+=ae(te))}else if(_e===0)return"0";for(;_e%10==0;)_e/=10;return ee+_e}function R(z,Z,te){if(z!==~~z||z<Z||z>te)throw Error(y+z)}function V(z,Z,te,ne){var fe,ee,_e,ke;for(ee=z[0];ee>=10;ee/=10)--Z;return--Z<0?(Z+=D,fe=0):(fe=Math.ceil((Z+1)/D),Z%=D),ee=C(10,D-Z),ke=z[fe]%ee|0,ne==null?Z<3?(Z==0?ke=ke/100|0:Z==1&&(ke=ke/10|0),_e=te<4&&ke==99999||te>3&&ke==49999||ke==5e4||ke==0):_e=(te<4&&ke+1==ee||te>3&&ke+1==ee/2)&&(z[fe+1]/ee/100|0)==C(10,Z-2)-1||(ke==ee/2||ke==0)&&(z[fe+1]/ee/100|0)==0:Z<4?(Z==0?ke=ke/1e3|0:Z==1?ke=ke/100|0:Z==2&&(ke=ke/10|0),_e=(ne||te<4)&&ke==9999||!ne&&te>3&&ke==4999):_e=((ne||te<4)&&ke+1==ee||!ne&&te>3&&ke+1==ee/2)&&(z[fe+1]/ee/1e3|0)==C(10,Z-3)-1,_e}function T(z,Z,te){for(var ne,fe,ee=[0],_e=0,ke=z.length;_e<ke;){for(fe=ee.length;fe--;)ee[fe]*=Z;for(ee[0]+=d.indexOf(z.charAt(_e++)),ne=0;ne<ee.length;ne++)ee[ne]>te-1&&(ee[ne+1]===void 0&&(ee[ne+1]=0),ee[ne+1]+=ee[ne]/te|0,ee[ne]%=te)}return ee.reverse()}k.absoluteValue=k.abs=function(){var z=new this.constructor(this);return z.s<0&&(z.s=1),W(z)},k.ceil=function(){return W(new this.constructor(this),this.e+1,2)},k.comparedTo=k.cmp=function(z){var Z,te,ne,fe,ee=this,_e=ee.d,ke=(z=new ee.constructor(z)).d,Ie=ee.s,Me=z.s;if(!_e||!ke)return Ie&&Me?Ie!==Me?Ie:_e===ke?0:!_e^Ie<0?1:-1:NaN;if(!_e[0]||!ke[0])return _e[0]?Ie:ke[0]?-Me:0;if(Ie!==Me)return Ie;if(ee.e!==z.e)return ee.e>z.e^Ie<0?1:-1;for(Z=0,te=(ne=_e.length)<(fe=ke.length)?ne:fe;Z<te;++Z)if(_e[Z]!==ke[Z])return _e[Z]>ke[Z]^Ie<0?1:-1;return ne===fe?0:ne>fe^Ie<0?1:-1},k.cosine=k.cos=function(){var z,Z,te=this,ne=te.constructor;return te.d?te.d[0]?(z=ne.precision,Z=ne.rounding,ne.precision=z+Math.max(te.e,te.sd())+D,ne.rounding=1,te=function(fe,ee){var _e,ke,Ie=ee.d.length;Ie<32?ke=(1/Te(4,_e=Math.ceil(Ie/3))).toString():(_e=16,ke="2.3283064365386962890625e-10"),fe.precision+=_e,ee=pe(fe,1,ee.times(ke),new fe(1));for(var Me=_e;Me--;){var Ce=ee.times(ee);ee=Ce.times(Ce).minus(Ce).times(8).plus(1)}return fe.precision-=_e,ee}(ne,$e(ne,te)),ne.precision=z,ne.rounding=Z,W(c==2||c==3?te.neg():te,z,Z,!0)):new ne(1):new ne(NaN)},k.cubeRoot=k.cbrt=function(){var z,Z,te,ne,fe,ee,_e,ke,Ie,Me,Ce=this,We=Ce.constructor;if(!Ce.isFinite()||Ce.isZero())return new We(Ce);for(b=!1,(ee=Ce.s*C(Ce.s*Ce,1/3))&&Math.abs(ee)!=1/0?ne=new We(ee.toString()):(te=M(Ce.d),(ee=((z=Ce.e)-te.length+1)%3)&&(te+=ee==1||ee==-2?"0":"00"),ee=C(te,1/3),z=w((z+1)/3)-(z%3==(z<0?-1:2)),(ne=new We(te=ee==1/0?"5e"+z:(te=ee.toExponential()).slice(0,te.indexOf("e")+1)+z)).s=Ce.s),_e=(z=We.precision)+3;;)if(Me=(Ie=(ke=ne).times(ke).times(ke)).plus(Ce),ne=U(Me.plus(Ce).times(ke),Me.plus(Ie),_e+2,1),M(ke.d).slice(0,_e)===(te=M(ne.d)).slice(0,_e)){if((te=te.slice(_e-3,_e+1))!="9999"&&(fe||te!="4999")){+te&&(+te.slice(1)||te.charAt(0)!="5")||(W(ne,z+1,1),Z=!ne.times(ne).times(ne).eq(Ce));break}if(!fe&&(W(ke,z+1,0),ke.times(ke).times(ke).eq(Ce))){ne=ke;break}_e+=4,fe=1}return b=!0,W(ne,z,We.rounding,Z)},k.decimalPlaces=k.dp=function(){var z,Z=this.d,te=NaN;if(Z){if(te=((z=Z.length-1)-w(this.e/D))*D,z=Z[z])for(;z%10==0;z/=10)te--;te<0&&(te=0)}return te},k.dividedBy=k.div=function(z){return U(this,new this.constructor(z))},k.dividedToIntegerBy=k.divToInt=function(z){var Z=this.constructor;return W(U(this,new Z(z),0,1,1),Z.precision,Z.rounding)},k.equals=k.eq=function(z){return this.cmp(z)===0},k.floor=function(){return W(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(z){return this.cmp(z)>0},k.greaterThanOrEqualTo=k.gte=function(z){var Z=this.cmp(z);return Z==1||Z===0},k.hyperbolicCosine=k.cosh=function(){var z,Z,te,ne,fe,ee=this,_e=ee.constructor,ke=new _e(1);if(!ee.isFinite())return new _e(ee.s?1/0:NaN);if(ee.isZero())return ke;te=_e.precision,ne=_e.rounding,_e.precision=te+Math.max(ee.e,ee.sd())+4,_e.rounding=1,(fe=ee.d.length)<32?Z=(1/Te(4,z=Math.ceil(fe/3))).toString():(z=16,Z="2.3283064365386962890625e-10"),ee=pe(_e,1,ee.times(Z),new _e(1),!0);for(var Ie,Me=z,Ce=new _e(8);Me--;)Ie=ee.times(ee),ee=ke.minus(Ie.times(Ce.minus(Ie.times(Ce))));return W(ee,_e.precision=te,_e.rounding=ne,!0)},k.hyperbolicSine=k.sinh=function(){var z,Z,te,ne,fe=this,ee=fe.constructor;if(!fe.isFinite()||fe.isZero())return new ee(fe);if(Z=ee.precision,te=ee.rounding,ee.precision=Z+Math.max(fe.e,fe.sd())+4,ee.rounding=1,(ne=fe.d.length)<3)fe=pe(ee,2,fe,fe,!0);else{z=(z=1.4*Math.sqrt(ne))>16?16:0|z,fe=pe(ee,2,fe=fe.times(1/Te(5,z)),fe,!0);for(var _e,ke=new ee(5),Ie=new ee(16),Me=new ee(20);z--;)_e=fe.times(fe),fe=fe.times(ke.plus(_e.times(Ie.times(_e).plus(Me))))}return ee.precision=Z,ee.rounding=te,W(fe,Z,te,!0)},k.hyperbolicTangent=k.tanh=function(){var z,Z,te=this,ne=te.constructor;return te.isFinite()?te.isZero()?new ne(te):(z=ne.precision,Z=ne.rounding,ne.precision=z+7,ne.rounding=1,U(te.sinh(),te.cosh(),ne.precision=z,ne.rounding=Z)):new ne(te.s)},k.inverseCosine=k.acos=function(){var z,Z=this,te=Z.constructor,ne=Z.abs().cmp(1),fe=te.precision,ee=te.rounding;return ne!==-1?ne===0?Z.isNeg()?J(te,fe,ee):new te(0):new te(NaN):Z.isZero()?J(te,fe+4,ee).times(.5):(te.precision=fe+6,te.rounding=1,Z=Z.asin(),z=J(te,fe+4,ee).times(.5),te.precision=fe,te.rounding=ee,z.minus(Z))},k.inverseHyperbolicCosine=k.acosh=function(){var z,Z,te=this,ne=te.constructor;return te.lte(1)?new ne(te.eq(1)?0:NaN):te.isFinite()?(z=ne.precision,Z=ne.rounding,ne.precision=z+Math.max(Math.abs(te.e),te.sd())+4,ne.rounding=1,b=!1,te=te.times(te).minus(1).sqrt().plus(te),b=!0,ne.precision=z,ne.rounding=Z,te.ln()):new ne(te)},k.inverseHyperbolicSine=k.asinh=function(){var z,Z,te=this,ne=te.constructor;return!te.isFinite()||te.isZero()?new ne(te):(z=ne.precision,Z=ne.rounding,ne.precision=z+2*Math.max(Math.abs(te.e),te.sd())+6,ne.rounding=1,b=!1,te=te.times(te).plus(1).sqrt().plus(te),b=!0,ne.precision=z,ne.rounding=Z,te.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var z,Z,te,ne,fe=this,ee=fe.constructor;return fe.isFinite()?fe.e>=0?new ee(fe.abs().eq(1)?fe.s/0:fe.isZero()?fe:NaN):(z=ee.precision,Z=ee.rounding,ne=fe.sd(),Math.max(ne,z)<2*-fe.e-1?W(new ee(fe),z,Z,!0):(ee.precision=te=ne-fe.e,fe=U(fe.plus(1),new ee(1).minus(fe),te+z,1),ee.precision=z+4,ee.rounding=1,fe=fe.ln(),ee.precision=z,ee.rounding=Z,fe.times(.5))):new ee(NaN)},k.inverseSine=k.asin=function(){var z,Z,te,ne,fe=this,ee=fe.constructor;return fe.isZero()?new ee(fe):(Z=fe.abs().cmp(1),te=ee.precision,ne=ee.rounding,Z!==-1?Z===0?((z=J(ee,te+4,ne).times(.5)).s=fe.s,z):new ee(NaN):(ee.precision=te+6,ee.rounding=1,fe=fe.div(new ee(1).minus(fe.times(fe)).sqrt().plus(1)).atan(),ee.precision=te,ee.rounding=ne,fe.times(2)))},k.inverseTangent=k.atan=function(){var z,Z,te,ne,fe,ee,_e,ke,Ie,Me=this,Ce=Me.constructor,We=Ce.precision,Ke=Ce.rounding;if(Me.isFinite()){if(Me.isZero())return new Ce(Me);if(Me.abs().eq(1)&&We+4<=j)return(_e=J(Ce,We+4,Ke).times(.25)).s=Me.s,_e}else{if(!Me.s)return new Ce(NaN);if(We+4<=j)return(_e=J(Ce,We+4,Ke).times(.5)).s=Me.s,_e}for(Ce.precision=ke=We+10,Ce.rounding=1,z=te=Math.min(28,ke/D+2|0);z;--z)Me=Me.div(Me.times(Me).plus(1).sqrt().plus(1));for(b=!1,Z=Math.ceil(ke/D),ne=1,Ie=Me.times(Me),_e=new Ce(Me),fe=Me;z!==-1;)if(fe=fe.times(Ie),ee=_e.minus(fe.div(ne+=2)),fe=fe.times(Ie),(_e=ee.plus(fe.div(ne+=2))).d[Z]!==void 0)for(z=Z;_e.d[z]===ee.d[z]&&z--;);return te&&(_e=_e.times(2<<te-1)),b=!0,W(_e,Ce.precision=We,Ce.rounding=Ke,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&w(this.e/D)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&this.d[0]===0},k.lessThan=k.lt=function(z){return this.cmp(z)<0},k.lessThanOrEqualTo=k.lte=function(z){return this.cmp(z)<1},k.logarithm=k.log=function(z){var Z,te,ne,fe,ee,_e,ke,Ie,Me=this,Ce=Me.constructor,We=Ce.precision,Ke=Ce.rounding;if(z==null)z=new Ce(10),Z=!0;else{if(te=(z=new Ce(z)).d,z.s<0||!te||!te[0]||z.eq(1))return new Ce(NaN);Z=z.eq(10)}if(te=Me.d,Me.s<0||!te||!te[0]||Me.eq(1))return new Ce(te&&!te[0]?-1/0:Me.s!=1?NaN:te?0:1/0);if(Z)if(te.length>1)ee=!0;else{for(fe=te[0];fe%10==0;)fe/=10;ee=fe!==1}if(b=!1,_e=K(Me,ke=We+5),ne=Z?oe(Ce,ke+10):K(z,ke),V((Ie=U(_e,ne,ke,1)).d,fe=We,Ke))do if(_e=K(Me,ke+=10),ne=Z?oe(Ce,ke+10):K(z,ke),Ie=U(_e,ne,ke,1),!ee){+M(Ie.d).slice(fe+1,fe+15)+1==1e14&&(Ie=W(Ie,We+1,0));break}while(V(Ie.d,fe+=10,Ke));return b=!0,W(Ie,We,Ke)},k.minus=k.sub=function(z){var Z,te,ne,fe,ee,_e,ke,Ie,Me,Ce,We,Ke,ut=this,dt=ut.constructor;if(z=new dt(z),!ut.d||!z.d)return ut.s&&z.s?ut.d?z.s=-z.s:z=new dt(z.d||ut.s!==z.s?ut:NaN):z=new dt(NaN),z;if(ut.s!=z.s)return z.s=-z.s,ut.plus(z);if(Me=ut.d,Ke=z.d,ke=dt.precision,Ie=dt.rounding,!Me[0]||!Ke[0]){if(Ke[0])z.s=-z.s;else{if(!Me[0])return new dt(Ie===3?-0:0);z=new dt(ut)}return b?W(z,ke,Ie):z}if(te=w(z.e/D),Ce=w(ut.e/D),Me=Me.slice(),ee=Ce-te){for((We=ee<0)?(Z=Me,ee=-ee,_e=Ke.length):(Z=Ke,te=Ce,_e=Me.length),ee>(ne=Math.max(Math.ceil(ke/D),_e)+2)&&(ee=ne,Z.length=1),Z.reverse(),ne=ee;ne--;)Z.push(0);Z.reverse()}else{for((We=(ne=Me.length)<(_e=Ke.length))&&(_e=ne),ne=0;ne<_e;ne++)if(Me[ne]!=Ke[ne]){We=Me[ne]<Ke[ne];break}ee=0}for(We&&(Z=Me,Me=Ke,Ke=Z,z.s=-z.s),_e=Me.length,ne=Ke.length-_e;ne>0;--ne)Me[_e++]=0;for(ne=Ke.length;ne>ee;){if(Me[--ne]<Ke[ne]){for(fe=ne;fe&&Me[--fe]===0;)Me[fe]=E-1;--Me[fe],Me[ne]+=E}Me[ne]-=Ke[ne]}for(;Me[--_e]===0;)Me.pop();for(;Me[0]===0;Me.shift())--te;return Me[0]?(z.d=Me,z.e=X(Me,te),b?W(z,ke,Ie):z):new dt(Ie===3?-0:0)},k.modulo=k.mod=function(z){var Z,te=this,ne=te.constructor;return z=new ne(z),!te.d||!z.s||z.d&&!z.d[0]?new ne(NaN):!z.d||te.d&&!te.d[0]?W(new ne(te),ne.precision,ne.rounding):(b=!1,ne.modulo==9?(Z=U(te,z.abs(),0,3,1)).s*=z.s:Z=U(te,z,0,ne.modulo,1),Z=Z.times(z),b=!0,te.minus(Z))},k.naturalExponential=k.exp=function(){return F(this)},k.naturalLogarithm=k.ln=function(){return K(this)},k.negated=k.neg=function(){var z=new this.constructor(this);return z.s=-z.s,W(z)},k.plus=k.add=function(z){var Z,te,ne,fe,ee,_e,ke,Ie,Me,Ce,We=this,Ke=We.constructor;if(z=new Ke(z),!We.d||!z.d)return We.s&&z.s?We.d||(z=new Ke(z.d||We.s===z.s?We:NaN)):z=new Ke(NaN),z;if(We.s!=z.s)return z.s=-z.s,We.minus(z);if(Me=We.d,Ce=z.d,ke=Ke.precision,Ie=Ke.rounding,!Me[0]||!Ce[0])return Ce[0]||(z=new Ke(We)),b?W(z,ke,Ie):z;if(ee=w(We.e/D),ne=w(z.e/D),Me=Me.slice(),fe=ee-ne){for(fe<0?(te=Me,fe=-fe,_e=Ce.length):(te=Ce,ne=ee,_e=Me.length),fe>(_e=(ee=Math.ceil(ke/D))>_e?ee+1:_e+1)&&(fe=_e,te.length=1),te.reverse();fe--;)te.push(0);te.reverse()}for((_e=Me.length)-(fe=Ce.length)<0&&(fe=_e,te=Ce,Ce=Me,Me=te),Z=0;fe;)Z=(Me[--fe]=Me[fe]+Ce[fe]+Z)/E|0,Me[fe]%=E;for(Z&&(Me.unshift(Z),++ne),_e=Me.length;Me[--_e]==0;)Me.pop();return z.d=Me,z.e=X(Me,ne),b?W(z,ke,Ie):z},k.precision=k.sd=function(z){var Z,te=this;if(z!==void 0&&z!==!!z&&z!==1&&z!==0)throw Error(y+z);return te.d?(Z=he(te.d),z&&te.e+1>Z&&(Z=te.e+1)):Z=NaN,Z},k.round=function(){var z=this,Z=z.constructor;return W(new Z(z),z.e+1,Z.rounding)},k.sine=k.sin=function(){var z,Z,te=this,ne=te.constructor;return te.isFinite()?te.isZero()?new ne(te):(z=ne.precision,Z=ne.rounding,ne.precision=z+Math.max(te.e,te.sd())+D,ne.rounding=1,te=function(fe,ee){var _e,ke=ee.d.length;if(ke<3)return pe(fe,2,ee,ee);_e=(_e=1.4*Math.sqrt(ke))>16?16:0|_e,ee=ee.times(1/Te(5,_e)),ee=pe(fe,2,ee,ee);for(var Ie,Me=new fe(5),Ce=new fe(16),We=new fe(20);_e--;)Ie=ee.times(ee),ee=ee.times(Me.plus(Ie.times(Ce.times(Ie).minus(We))));return ee}(ne,$e(ne,te)),ne.precision=z,ne.rounding=Z,W(c>2?te.neg():te,z,Z,!0)):new ne(NaN)},k.squareRoot=k.sqrt=function(){var z,Z,te,ne,fe,ee,_e=this,ke=_e.d,Ie=_e.e,Me=_e.s,Ce=_e.constructor;if(Me!==1||!ke||!ke[0])return new Ce(!Me||Me<0&&(!ke||ke[0])?NaN:ke?_e:1/0);for(b=!1,(Me=Math.sqrt(+_e))==0||Me==1/0?(((Z=M(ke)).length+Ie)%2==0&&(Z+="0"),Me=Math.sqrt(Z),Ie=w((Ie+1)/2)-(Ie<0||Ie%2),ne=new Ce(Z=Me==1/0?"5e"+Ie:(Z=Me.toExponential()).slice(0,Z.indexOf("e")+1)+Ie)):ne=new Ce(Me.toString()),te=(Ie=Ce.precision)+3;;)if(ne=(ee=ne).plus(U(_e,ee,te+2,1)).times(.5),M(ee.d).slice(0,te)===(Z=M(ne.d)).slice(0,te)){if((Z=Z.slice(te-3,te+1))!="9999"&&(fe||Z!="4999")){+Z&&(+Z.slice(1)||Z.charAt(0)!="5")||(W(ne,Ie+1,1),z=!ne.times(ne).eq(_e));break}if(!fe&&(W(ee,Ie+1,0),ee.times(ee).eq(_e))){ne=ee;break}te+=4,fe=1}return b=!0,W(ne,Ie,Ce.rounding,z)},k.tangent=k.tan=function(){var z,Z,te=this,ne=te.constructor;return te.isFinite()?te.isZero()?new ne(te):(z=ne.precision,Z=ne.rounding,ne.precision=z+10,ne.rounding=1,(te=te.sin()).s=1,te=U(te,new ne(1).minus(te.times(te)).sqrt(),z+10,0),ne.precision=z,ne.rounding=Z,W(c==2||c==4?te.neg():te,z,Z,!0)):new ne(NaN)},k.times=k.mul=function(z){var Z,te,ne,fe,ee,_e,ke,Ie,Me,Ce=this,We=Ce.constructor,Ke=Ce.d,ut=(z=new We(z)).d;if(z.s*=Ce.s,!(Ke&&Ke[0]&&ut&&ut[0]))return new We(!z.s||Ke&&!Ke[0]&&!ut||ut&&!ut[0]&&!Ke?NaN:Ke&&ut?0*z.s:z.s/0);for(te=w(Ce.e/D)+w(z.e/D),(Ie=Ke.length)<(Me=ut.length)&&(ee=Ke,Ke=ut,ut=ee,_e=Ie,Ie=Me,Me=_e),ee=[],ne=_e=Ie+Me;ne--;)ee.push(0);for(ne=Me;--ne>=0;){for(Z=0,fe=Ie+ne;fe>ne;)ke=ee[fe]+ut[ne]*Ke[fe-ne-1]+Z,ee[fe--]=ke%E|0,Z=ke/E|0;ee[fe]=(ee[fe]+Z)%E|0}for(;!ee[--_e];)ee.pop();return Z?++te:ee.shift(),z.d=ee,z.e=X(ee,te),b?W(z,We.precision,We.rounding):z},k.toBinary=function(z,Z){return He(this,2,z,Z)},k.toDecimalPlaces=k.toDP=function(z,Z){var te=this,ne=te.constructor;return te=new ne(te),z===void 0?te:(R(z,0,o),Z===void 0?Z=ne.rounding:R(Z,0,8),W(te,z+te.e+1,Z))},k.toExponential=function(z,Z){var te,ne=this,fe=ne.constructor;return z===void 0?te=Q(ne,!0):(R(z,0,o),Z===void 0?Z=fe.rounding:R(Z,0,8),te=Q(ne=W(new fe(ne),z+1,Z),!0,z+1)),ne.isNeg()&&!ne.isZero()?"-"+te:te},k.toFixed=function(z,Z){var te,ne,fe=this,ee=fe.constructor;return z===void 0?te=Q(fe):(R(z,0,o),Z===void 0?Z=ee.rounding:R(Z,0,8),te=Q(ne=W(new ee(fe),z+fe.e+1,Z),!1,z+ne.e+1)),fe.isNeg()&&!fe.isZero()?"-"+te:te},k.toFraction=function(z){var Z,te,ne,fe,ee,_e,ke,Ie,Me,Ce,We,Ke,ut=this,dt=ut.d,St=ut.constructor;if(!dt)return new St(ut);if(Me=te=new St(1),ne=Ie=new St(0),_e=(ee=(Z=new St(ne)).e=he(dt)-ut.e-1)%D,Z.d[0]=C(10,_e<0?D+_e:_e),z==null)z=ee>0?Z:Me;else{if(!(ke=new St(z)).isInt()||ke.lt(Me))throw Error(y+ke);z=ke.gt(Z)?ee>0?Z:Me:ke}for(b=!1,ke=new St(M(dt)),Ce=St.precision,St.precision=ee=dt.length*D*2;We=U(ke,Z,0,1,1),(fe=te.plus(We.times(ne))).cmp(z)!=1;)te=ne,ne=fe,fe=Me,Me=Ie.plus(We.times(fe)),Ie=fe,fe=Z,Z=ke.minus(We.times(fe)),ke=fe;return fe=U(z.minus(te),ne,0,1,1),Ie=Ie.plus(fe.times(Me)),te=te.plus(fe.times(ne)),Ie.s=Me.s=ut.s,Ke=U(Me,ne,ee,1).minus(ut).abs().cmp(U(Ie,te,ee,1).minus(ut).abs())<1?[Me,ne]:[Ie,te],St.precision=Ce,b=!0,Ke},k.toHexadecimal=k.toHex=function(z,Z){return He(this,16,z,Z)},k.toNearest=function(z,Z){var te=this,ne=te.constructor;if(te=new ne(te),z==null){if(!te.d)return te;z=new ne(1),Z=ne.rounding}else{if(z=new ne(z),Z===void 0?Z=ne.rounding:R(Z,0,8),!te.d)return z.s?te:z;if(!z.d)return z.s&&(z.s=te.s),z}return z.d[0]?(b=!1,te=U(te,z,0,Z,1).times(z),b=!0,W(te)):(z.s=te.s,te=z),te},k.toNumber=function(){return+this},k.toOctal=function(z,Z){return He(this,8,z,Z)},k.toPower=k.pow=function(z){var Z,te,ne,fe,ee,_e,ke=this,Ie=ke.constructor,Me=+(z=new Ie(z));if(!(ke.d&&z.d&&ke.d[0]&&z.d[0]))return new Ie(C(+ke,Me));if((ke=new Ie(ke)).eq(1))return ke;if(ne=Ie.precision,ee=Ie.rounding,z.eq(1))return W(ke,ne,ee);if((Z=w(z.e/D))>=z.d.length-1&&(te=Me<0?-Me:Me)<=9007199254740991)return fe=ue(Ie,ke,te,ne),z.s<0?new Ie(1).div(fe):W(fe,ne,ee);if((_e=ke.s)<0){if(Z<z.d.length-1)return new Ie(NaN);if((1&z.d[Z])==0&&(_e=1),ke.e==0&&ke.d[0]==1&&ke.d.length==1)return ke.s=_e,ke}return(Z=(te=C(+ke,Me))!=0&&isFinite(te)?new Ie(te+"").e:w(Me*(Math.log("0."+M(ke.d))/Math.LN10+ke.e+1)))>Ie.maxE+1||Z<Ie.minE-1?new Ie(Z>0?_e/0:0):(b=!1,Ie.rounding=ke.s=1,te=Math.min(12,(Z+"").length),(fe=F(z.times(K(ke,ne+te)),ne)).d&&V((fe=W(fe,ne+5,1)).d,ne,ee)&&(Z=ne+10,+M((fe=W(F(z.times(K(ke,Z+te)),Z),Z+5,1)).d).slice(ne+1,ne+15)+1==1e14&&(fe=W(fe,ne+1,0))),fe.s=_e,b=!0,Ie.rounding=ee,W(fe,ne,ee))},k.toPrecision=function(z,Z){var te,ne=this,fe=ne.constructor;return z===void 0?te=Q(ne,ne.e<=fe.toExpNeg||ne.e>=fe.toExpPos):(R(z,1,o),Z===void 0?Z=fe.rounding:R(Z,0,8),te=Q(ne=W(new fe(ne),z,Z),z<=ne.e||ne.e<=fe.toExpNeg,z)),ne.isNeg()&&!ne.isZero()?"-"+te:te},k.toSignificantDigits=k.toSD=function(z,Z){var te=this.constructor;return z===void 0?(z=te.precision,Z=te.rounding):(R(z,1,o),Z===void 0?Z=te.rounding:R(Z,0,8)),W(new te(this),z,Z)},k.toString=function(){var z=this,Z=z.constructor,te=Q(z,z.e<=Z.toExpNeg||z.e>=Z.toExpPos);return z.isNeg()&&!z.isZero()?"-"+te:te},k.truncated=k.trunc=function(){return W(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var z=this,Z=z.constructor,te=Q(z,z.e<=Z.toExpNeg||z.e>=Z.toExpPos);return z.isNeg()?"-"+te:te};var U=function(){function z(ne,fe,ee){var _e,ke=0,Ie=ne.length;for(ne=ne.slice();Ie--;)_e=ne[Ie]*fe+ke,ne[Ie]=_e%ee|0,ke=_e/ee|0;return ke&&ne.unshift(ke),ne}function Z(ne,fe,ee,_e){var ke,Ie;if(ee!=_e)Ie=ee>_e?1:-1;else for(ke=Ie=0;ke<ee;ke++)if(ne[ke]!=fe[ke]){Ie=ne[ke]>fe[ke]?1:-1;break}return Ie}function te(ne,fe,ee,_e){for(var ke=0;ee--;)ne[ee]-=ke,ke=ne[ee]<fe[ee]?1:0,ne[ee]=ke*_e+ne[ee]-fe[ee];for(;!ne[0]&&ne.length>1;)ne.shift()}return function(ne,fe,ee,_e,ke,Ie){var Me,Ce,We,Ke,ut,dt,St,Tt,en,Bt,Mt,At,tn,Ft,nn,pn,un,hn,Jt,On,Pn=ne.constructor,mn=ne.s==fe.s?1:-1,qt=ne.d,kt=fe.d;if(!(qt&&qt[0]&&kt&&kt[0]))return new Pn(ne.s&&fe.s&&(qt?!kt||qt[0]!=kt[0]:kt)?qt&&qt[0]==0||!kt?0*mn:mn/0:NaN);for(Ie?(ut=1,Ce=ne.e-fe.e):(Ie=E,ut=D,Ce=w(ne.e/ut)-w(fe.e/ut)),Jt=kt.length,un=qt.length,Bt=(en=new Pn(mn)).d=[],We=0;kt[We]==(qt[We]||0);We++);if(kt[We]>(qt[We]||0)&&Ce--,ee==null?(Ft=ee=Pn.precision,_e=Pn.rounding):Ft=ke?ee+(ne.e-fe.e)+1:ee,Ft<0)Bt.push(1),dt=!0;else{if(Ft=Ft/ut+2|0,We=0,Jt==1){for(Ke=0,kt=kt[0],Ft++;(We<un||Ke)&&Ft--;We++)nn=Ke*Ie+(qt[We]||0),Bt[We]=nn/kt|0,Ke=nn%kt|0;dt=Ke||We<un}else{for((Ke=Ie/(kt[0]+1)|0)>1&&(kt=z(kt,Ke,Ie),qt=z(qt,Ke,Ie),Jt=kt.length,un=qt.length),pn=Jt,At=(Mt=qt.slice(0,Jt)).length;At<Jt;)Mt[At++]=0;(On=kt.slice()).unshift(0),hn=kt[0],kt[1]>=Ie/2&&++hn;do Ke=0,(Me=Z(kt,Mt,Jt,At))<0?(tn=Mt[0],Jt!=At&&(tn=tn*Ie+(Mt[1]||0)),(Ke=tn/hn|0)>1?(Ke>=Ie&&(Ke=Ie-1),(Me=Z(St=z(kt,Ke,Ie),Mt,Tt=St.length,At=Mt.length))==1&&(Ke--,te(St,Jt<Tt?On:kt,Tt,Ie))):(Ke==0&&(Me=Ke=1),St=kt.slice()),(Tt=St.length)<At&&St.unshift(0),te(Mt,St,At,Ie),Me==-1&&(Me=Z(kt,Mt,Jt,At=Mt.length))<1&&(Ke++,te(Mt,Jt<At?On:kt,At,Ie)),At=Mt.length):Me===0&&(Ke++,Mt=[0]),Bt[We++]=Ke,Me&&Mt[0]?Mt[At++]=qt[pn]||0:(Mt=[qt[pn]],At=1);while((pn++<un||Mt[0]!==void 0)&&Ft--);dt=Mt[0]!==void 0}Bt[0]||Bt.shift()}if(ut==1)en.e=Ce,u=dt;else{for(We=1,Ke=Bt[0];Ke>=10;Ke/=10)We++;en.e=We+Ce*ut-1,W(en,ke?ee+en.e+1:ee,_e,dt)}return en}}();function W(z,Z,te,ne){var fe,ee,_e,ke,Ie,Me,Ce,We,Ke,ut=z.constructor;e:if(Z!=null){if(!(We=z.d))return z;for(fe=1,ke=We[0];ke>=10;ke/=10)fe++;if((ee=Z-fe)<0)ee+=D,_e=Z,Ie=(Ce=We[Ke=0])/C(10,fe-_e-1)%10|0;else if((Ke=Math.ceil((ee+1)/D))>=(ke=We.length)){if(!ne)break e;for(;ke++<=Ke;)We.push(0);Ce=Ie=0,fe=1,_e=(ee%=D)-D+1}else{for(Ce=ke=We[Ke],fe=1;ke>=10;ke/=10)fe++;Ie=(_e=(ee%=D)-D+fe)<0?0:Ce/C(10,fe-_e-1)%10|0}if(ne=ne||Z<0||We[Ke+1]!==void 0||(_e<0?Ce:Ce%C(10,fe-_e-1)),Me=te<4?(Ie||ne)&&(te==0||te==(z.s<0?3:2)):Ie>5||Ie==5&&(te==4||ne||te==6&&(ee>0?_e>0?Ce/C(10,fe-_e):0:We[Ke-1])%10&1||te==(z.s<0?8:7)),Z<1||!We[0])return We.length=0,Me?(Z-=z.e+1,We[0]=C(10,(D-Z%D)%D),z.e=-Z||0):We[0]=z.e=0,z;if(ee==0?(We.length=Ke,ke=1,Ke--):(We.length=Ke+1,ke=C(10,D-ee),We[Ke]=_e>0?(Ce/C(10,fe-_e)%C(10,_e)|0)*ke:0),Me)for(;;){if(Ke==0){for(ee=1,_e=We[0];_e>=10;_e/=10)ee++;for(_e=We[0]+=ke,ke=1;_e>=10;_e/=10)ke++;ee!=ke&&(z.e++,We[0]==E&&(We[0]=1));break}if(We[Ke]+=ke,We[Ke]!=E)break;We[Ke--]=0,ke=1}for(ee=We.length;We[--ee]===0;)We.pop()}return b&&(z.e>ut.maxE?(z.d=null,z.e=NaN):z.e<ut.minE&&(z.e=0,z.d=[0])),z}function Q(z,Z,te){if(!z.isFinite())return H(z);var ne,fe=z.e,ee=M(z.d),_e=ee.length;return Z?(te&&(ne=te-_e)>0?ee=ee.charAt(0)+"."+ee.slice(1)+ae(ne):_e>1&&(ee=ee.charAt(0)+"."+ee.slice(1)),ee=ee+(z.e<0?"e":"e+")+z.e):fe<0?(ee="0."+ae(-fe-1)+ee,te&&(ne=te-_e)>0&&(ee+=ae(ne))):fe>=_e?(ee+=ae(fe+1-_e),te&&(ne=te-fe-1)>0&&(ee=ee+"."+ae(ne))):((ne=fe+1)<_e&&(ee=ee.slice(0,ne)+"."+ee.slice(ne)),te&&(ne=te-_e)>0&&(fe+1===_e&&(ee+="."),ee+=ae(ne))),ee}function X(z,Z){var te=z[0];for(Z*=D;te>=10;te/=10)Z++;return Z}function oe(z,Z,te){if(Z>P)throw b=!0,te&&(z.precision=te),Error(g);return W(new z(a),Z,1,!0)}function J(z,Z,te){if(Z>j)throw Error(g);return W(new z(p),Z,te,!0)}function he(z){var Z=z.length-1,te=Z*D+1;if(Z=z[Z]){for(;Z%10==0;Z/=10)te--;for(Z=z[0];Z>=10;Z/=10)te++}return te}function ae(z){for(var Z="";z--;)Z+="0";return Z}function ue(z,Z,te,ne){var fe,ee=new z(1),_e=Math.ceil(ne/D+4);for(b=!1;;){if(te%2&&re((ee=ee.times(Z)).d,_e)&&(fe=!0),(te=w(te/2))===0){te=ee.d.length-1,fe&&ee.d[te]===0&&++ee.d[te];break}re((Z=Z.times(Z)).d,_e)}return b=!0,ee}function ge(z){return 1&z.d[z.d.length-1]}function N(z,Z,te){for(var ne,fe=new z(Z[0]),ee=0;++ee<Z.length;){if(!(ne=new z(Z[ee])).s){fe=ne;break}fe[te](ne)&&(fe=ne)}return fe}function F(z,Z){var te,ne,fe,ee,_e,ke,Ie,Me=0,Ce=0,We=0,Ke=z.constructor,ut=Ke.rounding,dt=Ke.precision;if(!z.d||!z.d[0]||z.e>17)return new Ke(z.d?z.d[0]?z.s<0?0:1/0:1:z.s?z.s<0?0:z:NaN);for(Z==null?(b=!1,Ie=dt):Ie=Z,ke=new Ke(.03125);z.e>-2;)z=z.times(ke),We+=5;for(Ie+=ne=Math.log(C(2,We))/Math.LN10*2+5|0,te=ee=_e=new Ke(1),Ke.precision=Ie;;){if(ee=W(ee.times(z),Ie,1),te=te.times(++Ce),M((ke=_e.plus(U(ee,te,Ie,1))).d).slice(0,Ie)===M(_e.d).slice(0,Ie)){for(fe=We;fe--;)_e=W(_e.times(_e),Ie,1);if(Z!=null)return Ke.precision=dt,_e;if(!(Me<3&&V(_e.d,Ie-ne,ut,Me)))return W(_e,Ke.precision=dt,ut,b=!0);Ke.precision=Ie+=10,te=ee=ke=new Ke(1),Ce=0,Me++}_e=ke}}function K(z,Z){var te,ne,fe,ee,_e,ke,Ie,Me,Ce,We,Ke,ut=1,dt=z,St=dt.d,Tt=dt.constructor,en=Tt.rounding,Bt=Tt.precision;if(dt.s<0||!St||!St[0]||!dt.e&&St[0]==1&&St.length==1)return new Tt(St&&!St[0]?-1/0:dt.s!=1?NaN:St?0:dt);if(Z==null?(b=!1,Ce=Bt):Ce=Z,Tt.precision=Ce+=10,ne=(te=M(St)).charAt(0),!(Math.abs(ee=dt.e)<15e14))return Me=oe(Tt,Ce+2,Bt).times(ee+""),dt=K(new Tt(ne+"."+te.slice(1)),Ce-10).plus(Me),Tt.precision=Bt,Z==null?W(dt,Bt,en,b=!0):dt;for(;ne<7&&ne!=1||ne==1&&te.charAt(1)>3;)ne=(te=M((dt=dt.times(z)).d)).charAt(0),ut++;for(ee=dt.e,ne>1?(dt=new Tt("0."+te),ee++):dt=new Tt(ne+"."+te.slice(1)),We=dt,Ie=_e=dt=U(dt.minus(1),dt.plus(1),Ce,1),Ke=W(dt.times(dt),Ce,1),fe=3;;){if(_e=W(_e.times(Ke),Ce,1),M((Me=Ie.plus(U(_e,new Tt(fe),Ce,1))).d).slice(0,Ce)===M(Ie.d).slice(0,Ce)){if(Ie=Ie.times(2),ee!==0&&(Ie=Ie.plus(oe(Tt,Ce+2,Bt).times(ee+""))),Ie=U(Ie,new Tt(ut),Ce,1),Z!=null)return Tt.precision=Bt,Ie;if(!V(Ie.d,Ce-10,en,ke))return W(Ie,Tt.precision=Bt,en,b=!0);Tt.precision=Ce+=10,Me=_e=dt=U(We.minus(1),We.plus(1),Ce,1),Ke=W(dt.times(dt),Ce,1),fe=ke=1}Ie=Me,fe+=2}}function H(z){return String(z.s*z.s/0)}function $(z,Z){var te,ne,fe;for((te=Z.indexOf("."))>-1&&(Z=Z.replace(".","")),(ne=Z.search(/e/i))>0?(te<0&&(te=ne),te+=+Z.slice(ne+1),Z=Z.substring(0,ne)):te<0&&(te=Z.length),ne=0;Z.charCodeAt(ne)===48;ne++);for(fe=Z.length;Z.charCodeAt(fe-1)===48;--fe);if(Z=Z.slice(ne,fe)){if(fe-=ne,z.e=te=te-ne-1,z.d=[],ne=(te+1)%D,te<0&&(ne+=D),ne<fe){for(ne&&z.d.push(+Z.slice(0,ne)),fe-=D;ne<fe;)z.d.push(+Z.slice(ne,ne+=D));Z=Z.slice(ne),ne=D-Z.length}else ne-=fe;for(;ne--;)Z+="0";z.d.push(+Z),b&&(z.e>z.constructor.maxE?(z.d=null,z.e=NaN):z.e<z.constructor.minE&&(z.e=0,z.d=[0]))}else z.e=0,z.d=[0];return z}function se(z,Z){var te,ne,fe,ee,_e,ke,Ie,Me,Ce;if(Z==="Infinity"||Z==="NaN")return+Z||(z.s=NaN),z.e=NaN,z.d=null,z;if(S.test(Z))te=16,Z=Z.toLowerCase();else if(I.test(Z))te=2;else{if(!O.test(Z))throw Error(y+Z);te=8}for((ee=Z.search(/p/i))>0?(Ie=+Z.slice(ee+1),Z=Z.substring(2,ee)):Z=Z.slice(2),_e=(ee=Z.indexOf("."))>=0,ne=z.constructor,_e&&(ee=(ke=(Z=Z.replace(".","")).length)-ee,fe=ue(ne,new ne(te),ee,2*ee)),ee=Ce=(Me=T(Z,te,E)).length-1;Me[ee]===0;--ee)Me.pop();return ee<0?new ne(0*z.s):(z.e=X(Me,Ce),z.d=Me,b=!1,_e&&(z=U(z,fe,4*ke)),Ie&&(z=z.times(Math.abs(Ie)<54?C(2,Ie):n.pow(2,Ie))),b=!0,z)}function pe(z,Z,te,ne,fe){var ee,_e,ke,Ie,Me=z.precision,Ce=Math.ceil(Me/D);for(b=!1,Ie=te.times(te),ke=new z(ne);;){if(_e=U(ke.times(Ie),new z(Z++*Z++),Me,1),ke=fe?ne.plus(_e):ne.minus(_e),ne=U(_e.times(Ie),new z(Z++*Z++),Me,1),(_e=ke.plus(ne)).d[Ce]!==void 0){for(ee=Ce;_e.d[ee]===ke.d[ee]&&ee--;);if(ee==-1)break}ee=ke,ke=ne,ne=_e,_e=ee}return b=!0,_e.d.length=Ce+1,_e}function Te(z,Z){for(var te=z;--Z;)te*=z;return te}function $e(z,Z){var te,ne=Z.s<0,fe=J(z,z.precision,1),ee=fe.times(.5);if((Z=Z.abs()).lte(ee))return c=ne?4:1,Z;if((te=Z.divToInt(fe)).isZero())c=ne?3:2;else{if((Z=Z.minus(te.times(fe))).lte(ee))return c=ge(te)?ne?2:3:ne?4:1,Z;c=ge(te)?ne?1:4:ne?3:2}return Z.minus(fe).abs()}function He(z,Z,te,ne){var fe,ee,_e,ke,Ie,Me,Ce,We,Ke,ut=z.constructor,dt=te!==void 0;if(dt?(R(te,1,o),ne===void 0?ne=ut.rounding:R(ne,0,8)):(te=ut.precision,ne=ut.rounding),z.isFinite()){for(dt?(fe=2,Z==16?te=4*te-3:Z==8&&(te=3*te-2)):fe=Z,(_e=(Ce=Q(z)).indexOf("."))>=0&&(Ce=Ce.replace(".",""),(Ke=new ut(1)).e=Ce.length-_e,Ke.d=T(Q(Ke),10,fe),Ke.e=Ke.d.length),ee=Ie=(We=T(Ce,10,fe)).length;We[--Ie]==0;)We.pop();if(We[0]){if(_e<0?ee--:((z=new ut(z)).d=We,z.e=ee,We=(z=U(z,Ke,te,ne,0,fe)).d,ee=z.e,Me=u),_e=We[te],ke=fe/2,Me=Me||We[te+1]!==void 0,Me=ne<4?(_e!==void 0||Me)&&(ne===0||ne===(z.s<0?3:2)):_e>ke||_e===ke&&(ne===4||Me||ne===6&&1&We[te-1]||ne===(z.s<0?8:7)),We.length=te,Me)for(;++We[--te]>fe-1;)We[te]=0,te||(++ee,We.unshift(1));for(Ie=We.length;!We[Ie-1];--Ie);for(_e=0,Ce="";_e<Ie;_e++)Ce+=d.charAt(We[_e]);if(dt){if(Ie>1)if(Z==16||Z==8){for(_e=Z==16?4:3,--Ie;Ie%_e;Ie++)Ce+="0";for(Ie=(We=T(Ce,fe,Z)).length;!We[Ie-1];--Ie);for(_e=1,Ce="1.";_e<Ie;_e++)Ce+=d.charAt(We[_e])}else Ce=Ce.charAt(0)+"."+Ce.slice(1);Ce=Ce+(ee<0?"p":"p+")+ee}else if(ee<0){for(;++ee;)Ce="0"+Ce;Ce="0."+Ce}else if(++ee>Ie)for(ee-=Ie;ee--;)Ce+="0";else ee<Ie&&(Ce=Ce.slice(0,ee)+"."+Ce.slice(ee))}else Ce=dt?"0p+0":"0";Ce=(Z==16?"0x":Z==2?"0b":Z==8?"0o":"")+Ce}else Ce=H(z);return z.s<0?"-"+Ce:Ce}function re(z,Z){if(z.length>Z)return z.length=Z,!0}function le(z){return new this(z).abs()}function ve(z){return new this(z).acos()}function De(z){return new this(z).acosh()}function xe(z,Z){return new this(z).plus(Z)}function Se(z){return new this(z).asin()}function Ee(z){return new this(z).asinh()}function ye(z){return new this(z).atan()}function Ne(z){return new this(z).atanh()}function Ue(z,Z){z=new this(z),Z=new this(Z);var te,ne=this.precision,fe=this.rounding,ee=ne+4;return z.s&&Z.s?z.d||Z.d?!Z.d||z.isZero()?(te=Z.s<0?J(this,ne,fe):new this(0)).s=z.s:!z.d||Z.isZero()?(te=J(this,ee,1).times(.5)).s=z.s:Z.s<0?(this.precision=ee,this.rounding=1,te=this.atan(U(z,Z,ee,1)),Z=J(this,ee,1),this.precision=ne,this.rounding=fe,te=z.s<0?te.minus(Z):te.plus(Z)):te=this.atan(U(z,Z,ee,1)):(te=J(this,ee,1).times(Z.s>0?.25:.75)).s=z.s:te=new this(NaN),te}function de(z){return new this(z).cbrt()}function qe(z){return W(z=new this(z),z.e+1,2)}function tt(z){if(!z||typeof z!="object")throw Error(_+"Object expected");var Z,te,ne,fe=z.defaults===!0,ee=["precision",1,o,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(Z=0;Z<ee.length;Z+=3)if(te=ee[Z],fe&&(this[te]=f[te]),(ne=z[te])!==void 0){if(!(w(ne)===ne&&ne>=ee[Z+1]&&ne<=ee[Z+2]))throw Error(y+te+": "+ne);this[te]=ne}if(te="crypto",fe&&(this[te]=f[te]),(ne=z[te])!==void 0){if(ne!==!0&&ne!==!1&&ne!==0&&ne!==1)throw Error(y+te+": "+ne);if(ne){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(m);this[te]=!0}else this[te]=!1}return this}function Re(z){return new this(z).cos()}function ce(z){return new this(z).cosh()}function Le(z,Z){return new this(z).div(Z)}function Fe(z){return new this(z).exp()}function Be(z){return W(z=new this(z),z.e+1,3)}function nt(){var z,Z,te=new this(0);for(b=!1,z=0;z<arguments.length;)if((Z=new this(arguments[z++])).d)te.d&&(te=te.plus(Z.times(Z)));else{if(Z.s)return b=!0,new this(1/0);te=Z}return b=!0,te.sqrt()}function it(z){return z instanceof n||z&&z.name==="[object Decimal]"||!1}function Ge(z){return new this(z).ln()}function Xe(z,Z){return new this(z).log(Z)}function rt(z){return new this(z).log(2)}function ot(z){return new this(z).log(10)}function Ct(){return N(this,arguments,"lt")}function Et(){return N(this,arguments,"gt")}function It(z,Z){return new this(z).mod(Z)}function wt(z,Z){return new this(z).mul(Z)}function Lt(z,Z){return new this(z).pow(Z)}function Tr(z){var Z,te,ne,fe,ee=0,_e=new this(1),ke=[];if(z===void 0?z=this.precision:R(z,1,o),ne=Math.ceil(z/D),this.crypto)if(crypto.getRandomValues)for(Z=crypto.getRandomValues(new Uint32Array(ne));ee<ne;)(fe=Z[ee])>=429e7?Z[ee]=crypto.getRandomValues(new Uint32Array(1))[0]:ke[ee++]=fe%1e7;else{if(!crypto.randomBytes)throw Error(m);for(Z=crypto.randomBytes(ne*=4);ee<ne;)(fe=Z[ee]+(Z[ee+1]<<8)+(Z[ee+2]<<16)+((127&Z[ee+3])<<24))>=214e7?crypto.randomBytes(4).copy(Z,ee):(ke.push(fe%1e7),ee+=4);ee=ne/4}else for(;ee<ne;)ke[ee++]=1e7*Math.random()|0;for(ne=ke[--ee],z%=D,ne&&z&&(fe=C(10,D-z),ke[ee]=(ne/fe|0)*fe);ke[ee]===0;ee--)ke.pop();if(ee<0)te=0,ke=[0];else{for(te=-1;ke[0]===0;te-=D)ke.shift();for(ne=1,fe=ke[0];fe>=10;fe/=10)ne++;ne<D&&(te-=D-ne)}return _e.e=te,_e.d=ke,_e}function Mr(z){return W(z=new this(z),z.e+1,this.rounding)}function Or(z){return(z=new this(z)).d?z.d[0]?z.s:0*z.s:z.s||NaN}function zn(z){return new this(z).sin()}function Pr(z){return new this(z).sinh()}function dr(z){return new this(z).sqrt()}function cr(z,Z){return new this(z).sub(Z)}function xn(z){return new this(z).tan()}function fr(z){return new this(z).tanh()}function Wn(z){return W(z=new this(z),z.e+1,1)}n=function z(Z){var te,ne,fe;function ee(_e){var ke,Ie,Me,Ce=this;if(!(Ce instanceof ee))return new ee(_e);if(Ce.constructor=ee,_e instanceof ee)return Ce.s=_e.s,void(b?!_e.d||_e.e>ee.maxE?(Ce.e=NaN,Ce.d=null):_e.e<ee.minE?(Ce.e=0,Ce.d=[0]):(Ce.e=_e.e,Ce.d=_e.d.slice()):(Ce.e=_e.e,Ce.d=_e.d?_e.d.slice():_e.d));if((Me=typeof _e)=="number"){if(_e===0)return Ce.s=1/_e<0?-1:1,Ce.e=0,void(Ce.d=[0]);if(_e<0?(_e=-_e,Ce.s=-1):Ce.s=1,_e===~~_e&&_e<1e7){for(ke=0,Ie=_e;Ie>=10;Ie/=10)ke++;return void(b?ke>ee.maxE?(Ce.e=NaN,Ce.d=null):ke<ee.minE?(Ce.e=0,Ce.d=[0]):(Ce.e=ke,Ce.d=[_e]):(Ce.e=ke,Ce.d=[_e]))}return 0*_e!=0?(_e||(Ce.s=NaN),Ce.e=NaN,void(Ce.d=null)):$(Ce,_e.toString())}if(Me!=="string")throw Error(y+_e);return(Ie=_e.charCodeAt(0))===45?(_e=_e.slice(1),Ce.s=-1):(Ie===43&&(_e=_e.slice(1)),Ce.s=1),A.test(_e)?$(Ce,_e):se(Ce,_e)}if(ee.prototype=k,ee.ROUND_UP=0,ee.ROUND_DOWN=1,ee.ROUND_CEIL=2,ee.ROUND_FLOOR=3,ee.ROUND_HALF_UP=4,ee.ROUND_HALF_DOWN=5,ee.ROUND_HALF_EVEN=6,ee.ROUND_HALF_CEIL=7,ee.ROUND_HALF_FLOOR=8,ee.EUCLID=9,ee.config=ee.set=tt,ee.clone=z,ee.isDecimal=it,ee.abs=le,ee.acos=ve,ee.acosh=De,ee.add=xe,ee.asin=Se,ee.asinh=Ee,ee.atan=ye,ee.atanh=Ne,ee.atan2=Ue,ee.cbrt=de,ee.ceil=qe,ee.cos=Re,ee.cosh=ce,ee.div=Le,ee.exp=Fe,ee.floor=Be,ee.hypot=nt,ee.ln=Ge,ee.log=Xe,ee.log10=ot,ee.log2=rt,ee.max=Ct,ee.min=Et,ee.mod=It,ee.mul=wt,ee.pow=Lt,ee.random=Tr,ee.round=Mr,ee.sign=Or,ee.sin=zn,ee.sinh=Pr,ee.sqrt=dr,ee.sub=cr,ee.tan=xn,ee.tanh=fr,ee.trunc=Wn,Z===void 0&&(Z={}),Z&&Z.defaults!==!0)for(fe=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],te=0;te<fe.length;)Z.hasOwnProperty(ne=fe[te++])||(Z[ne]=this[ne]);return ee.config(Z),ee}(f),n.default=n.Decimal=n,a=new n(a),p=new n(p),typeof ht=="function"&&ht.amd?ht(function(){return n}):v!==void 0&&v.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(k[Symbol.for("nodejs.util.inspect.custom")]=k.toString,k[Symbol.toStringTag]="Decimal"),v.exports=n):(t||(t=typeof self<"u"&&self&&self.self==self?self:window),r=t.Decimal,n.noConflict=function(){return t.Decimal=r,n},t.Decimal=n)})(this)},{}],135:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.addEventListener=function(r,c,s,o,d){var a=(0,n.default)()||!o||u(o)!=="object"?o:!!o.capture;r.addEventListener(c,s,a,d)},i.removeEventListener=function(r,c,s,o){var d=(0,n.default)()||!o||u(o)!=="object"?o:!!o.capture;r.removeEventListener(c,s,d)};var t,n=(t=e("./supportsCaptureOption"))&&t.__esModule?t:{default:t};function u(r){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},u(r)}},{"./supportsCaptureOption":136}],136:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(t===null){var n=!1;try{var u=Object.defineProperty({},"capture",{get:function(){n=!0}});window.addEventListener("test",null,u)}catch{}t=n}return t};var t=null},{}],137:[function(e,v,i){"use strict";var t,n=typeof Reflect=="object"?Reflect:null,u=n&&typeof n.apply=="function"?n.apply:function(m,w,C){return Function.prototype.apply.call(m,w,C)};t=n&&typeof n.ownKeys=="function"?n.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var r=Number.isNaN||function(m){return m!=m};function c(){c.init.call(this)}v.exports=c,v.exports.once=function(m,w){return new Promise(function(C,I){function S(A){m.removeListener(w,O),I(A)}function O(){typeof m.removeListener=="function"&&m.removeListener("error",S),C([].slice.call(arguments))}g(m,w,O,{once:!0}),w!=="error"&&function(A,E,D){typeof A.on=="function"&&g(A,"error",E,D)}(m,S,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var s=10;function o(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}function d(m){return m._maxListeners===void 0?c.defaultMaxListeners:m._maxListeners}function a(m,w,C,I){var S,O,A,E;if(o(C),(O=m._events)===void 0?(O=m._events=Object.create(null),m._eventsCount=0):(O.newListener!==void 0&&(m.emit("newListener",w,C.listener?C.listener:C),O=m._events),A=O[w]),A===void 0)A=O[w]=C,++m._eventsCount;else if(typeof A=="function"?A=O[w]=I?[C,A]:[A,C]:I?A.unshift(C):A.push(C),(S=d(m))>0&&A.length>S&&!A.warned){A.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=m,D.type=w,D.count=A.length,E=D}return m}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(m,w,C){var I={fired:!1,wrapFn:void 0,target:m,type:w,listener:C},S=p.bind(I);return S.listener=C,I.wrapFn=S,S}function b(m,w,C){var I=m._events;if(I===void 0)return[];var S=I[w];return S===void 0?[]:typeof S=="function"?C?[S.listener||S]:[S]:C?function(O){for(var A=new Array(O.length),E=0;E<A.length;++E)A[E]=O[E].listener||O[E];return A}(S):y(S,S.length)}function _(m){var w=this._events;if(w!==void 0){var C=w[m];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}function y(m,w){for(var C=new Array(w),I=0;I<w;++I)C[I]=m[I];return C}function g(m,w,C,I){if(typeof m.on=="function")I.once?m.once(w,C):m.on(w,C);else{if(typeof m.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m);m.addEventListener(w,function S(O){I.once&&m.removeEventListener(w,S),C(O)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(m){if(typeof m!="number"||m<0||r(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");s=m}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||r(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(m){for(var w=[],C=1;C<arguments.length;C++)w.push(arguments[C]);var I=m==="error",S=this._events;if(S!==void 0)I=I&&S.error===void 0;else if(!I)return!1;if(I){var O;if(w.length>0&&(O=w[0]),O instanceof Error)throw O;var A=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw A.context=O,A}var E=S[m];if(E===void 0)return!1;if(typeof E=="function")u(E,this,w);else{var D=E.length,P=y(E,D);for(C=0;C<D;++C)u(P[C],this,w)}return!0},c.prototype.addListener=function(m,w){return a(this,m,w,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(m,w){return a(this,m,w,!0)},c.prototype.once=function(m,w){return o(w),this.on(m,f(this,m,w)),this},c.prototype.prependOnceListener=function(m,w){return o(w),this.prependListener(m,f(this,m,w)),this},c.prototype.removeListener=function(m,w){var C,I,S,O,A;if(o(w),(I=this._events)===void 0)return this;if((C=I[m])===void 0)return this;if(C===w||C.listener===w)--this._eventsCount==0?this._events=Object.create(null):(delete I[m],I.removeListener&&this.emit("removeListener",m,C.listener||w));else if(typeof C!="function"){for(S=-1,O=C.length-1;O>=0;O--)if(C[O]===w||C[O].listener===w){A=C[O].listener,S=O;break}if(S<0)return this;S===0?C.shift():function(E,D){for(;D+1<E.length;D++)E[D]=E[D+1];E.pop()}(C,S),C.length===1&&(I[m]=C[0]),I.removeListener!==void 0&&this.emit("removeListener",m,A||w)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(m){var w,C,I;if((C=this._events)===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[m]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete C[m]),this;if(arguments.length===0){var S,O=Object.keys(C);for(I=0;I<O.length;++I)(S=O[I])!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(w=C[m])=="function")this.removeListener(m,w);else if(w!==void 0)for(I=w.length-1;I>=0;I--)this.removeListener(m,w[I]);return this},c.prototype.listeners=function(m){return b(this,m,!0)},c.prototype.rawListeners=function(m){return b(this,m,!1)},c.listenerCount=function(m,w){return typeof m.listenerCount=="function"?m.listenerCount(w):_.call(m,w)},c.prototype.listenerCount=_,c.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},{}],138:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.installGlobally=i.getXMLHttpRequest=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=t(e("@babel/runtime/helpers/slicedToArray")),s=t(e("lodash/once")),o=e("./moduleId"),d=t(e("./transferrables"));function a(_,y){var g=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!g){if(Array.isArray(_)||(g=function(O,A){if(!!O){if(typeof O=="string")return p(O,A);var E=Object.prototype.toString.call(O).slice(8,-1);if(E==="Object"&&O.constructor&&(E=O.constructor.name),E==="Map"||E==="Set")return Array.from(O);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return p(O,A)}}(_))||y&&_&&typeof _.length=="number"){g&&(_=g);var m=0,w=function(){};return{s:w,n:function(){return m>=_.length?{done:!0}:{done:!1,value:_[m++]}},e:function(O){throw O},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,I=!0,S=!1;return{s:function(){g=g.call(_)},n:function(){var O=g.next();return I=O.done,O},e:function(O){S=!0,C=O},f:function(){try{I||g.return==null||g.return()}finally{if(S)throw C}}}}function p(_,y){(y==null||y>_.length)&&(y=_.length);for(var g=0,m=new Array(y);g<y;g++)m[g]=_[g];return m}var f=(0,s.default)(function(){var _={},y=new MessageChannel,g=y.port1;g.addEventListener("message",function(C){var I=C.data,S=I.id,O=I.type,A=_[S];if(O==="COMPLETE"){var E=C.data,D=E.headers,P=E.readyState,j=E.status,k=E.statusText,M=E.response,R=E.responseText,V=E.responseURL,T={};D.split(`\r
`).forEach(function(X){var oe=X.split(":"),J=(0,c.default)(oe,2),he=J[0],ae=J[1];he&&ae&&(T[he.toLowerCase().trim()]=ae.trim())}),A._headers=D,A._headersObj=T,A.status=j,A.statusText=k,A.readyState=P,A.response=M,A.responseText=R,A.responseURL=V,delete _[S];for(var U=function(){var X=Q[W],oe={name:X,target:A};(Object.prototype.hasOwnProperty.call(A._eventListeners,X)?A._eventListeners[X]:[]).forEach(function(J){return J(oe)}),A["on"+X]&&A["on"+X](oe)},W=0,Q=["load","loadend","readystatechange"];W<Q.length;W++)U()}}),g.addEventListener("messageerror",function(C){}),g.start(),window.postMessage({type:"ext-corb-workaround_port",moduleId:o.moduleId,port:y.port2},document.location.origin,[y.port2]);var m=0,w=function(){function C(){var I=this;(0,n.default)(this,C),(0,r.default)(this,"UNSENT",0),(0,r.default)(this,"OPENED",1),(0,r.default)(this,"HEADERS_RECEIVED",2),(0,r.default)(this,"LOADING",3),(0,r.default)(this,"DONE",4),(0,r.default)(this,"_id",m++),(0,r.default)(this,"_eventListeners",{}),(0,r.default)(this,"_headersObj",{}),(0,r.default)(this,"status",0),(0,r.default)(this,"statusText",""),(0,r.default)(this,"readyState",0),(0,r.default)(this,"response",""),(0,r.default)(this,"responseText",""),(0,r.default)(this,"responseURL",""),(0,r.default)(this,"_headers",""),(0,r.default)(this,"responseType",void 0),(0,r.default)(this,"withCredentials",void 0),(0,r.default)(this,"setRequestHeader",void 0),(0,r.default)(this,"open",void 0),(0,r.default)(this,"send",void 0),(0,r.default)(this,"abort",void 0);var S=this._id;_[S]=this,g.postMessage({type:"NEW_XHR",id:S});var O,A=a(["responseType","withCredentials"]);try{var E=function(){var k=O.value,M=void 0;Object.defineProperty(I,k,{get:function(){return M},set:function(R){M=R,g.postMessage({type:"SET",id:S,prop:k,value:R})}})};for(A.s();!(O=A.n()).done;)E()}catch(k){A.e(k)}finally{A.f()}var D,P=a(["setRequestHeader","open","send","abort"]);try{var j=function(){var k=D.value;I[k]=function(){for(var M=arguments.length,R=new Array(M),V=0;V<M;V++)R[V]=arguments[V];g.postMessage({type:"CALL",id:S,method:k,args:R},(0,d.default)(R))}};for(P.s();!(D=P.n()).done;)j()}catch(k){P.e(k)}finally{P.f()}}return(0,u.default)(C,[{key:"getAllResponseHeaders",value:function(){return this._headers}},{key:"getResponseHeader",value:function(I){if(I=I.toLowerCase(),Object.prototype.hasOwnProperty.call(this._headersObj,I))return this._headersObj[I]}},{key:"addEventListener",value:function(I,S){Object.prototype.hasOwnProperty.call(this._eventListeners,I)||(this._eventListeners[I]=[]),this._eventListeners[I].push(S)}},{key:"removeEventListener",value:function(I,S){Object.prototype.hasOwnProperty.call(this._eventListeners,I)&&(this._eventListeners[I]=this._eventListeners[I].filter(function(O){return S!==O}))}}]),C}();return(0,r.default)(w,"UNSENT",0),(0,r.default)(w,"OPENED",1),(0,r.default)(w,"HEADERS_RECEIVED",2),(0,r.default)(w,"LOADING",3),(0,r.default)(w,"DONE",4),w});i.getXMLHttpRequest=f;var b=(0,s.default)(function(){window.XMLHttpRequest=f()});i.installGlobally=b},{"./moduleId":139,"./transferrables":140,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/slicedToArray":24,"lodash/once":347}],139:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.moduleId=void 0,i.moduleId="1f24 e53a"},{}],140:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return u.map(function(r){if(r&&(0,n.default)(r)==="object"&&r.__proto__){if(r.__proto__.constructor.name==="ArrayBuffer")return r;if(r.__proto__.__proto__&&r.__proto__.__proto__.constructor.name==="TypedArray")return r.buffer}}).filter(Boolean)};var n=t(e("@babel/runtime/helpers/typeof"))},{"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/typeof":27}],141:[function(e,v,i){v.exports=function(t,n){return(n=typeof n=="number"?n:1/0)?function u(r,c){return r.reduce(function(s,o){return Array.isArray(o)&&c<n?s.concat(u(o,c+1)):s.concat(o)},[])}(t,1):Array.isArray(t)?t.map(function(u){return u}):t}},{}],142:[function(e,v,i){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;v.exports=function(u,r,c){if(n.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var s=u.length;if(s===+s)for(var o=0;o<s;o++)r.call(c,u[o],o,u);else for(var d in u)t.call(u,d)&&r.call(c,u[d],d,u)}},{}],143:[function(e,v,i){"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,u=Object.prototype.toString,r="[object Function]";v.exports=function(c){var s=this;if(typeof s!="function"||u.call(s)!==r)throw new TypeError(t+s);for(var o,d=n.call(arguments,1),a=Math.max(0,s.length-d.length),p=[],f=0;f<a;f++)p.push("$"+f);if(o=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var _=s.apply(this,d.concat(n.call(arguments)));return Object(_)===_?_:this}return s.apply(c,d.concat(n.call(arguments)))}),s.prototype){var b=function(){};b.prototype=s.prototype,o.prototype=new b,b.prototype=null}return o}},{}],144:[function(e,v,i){"use strict";var t=e("./implementation");v.exports=Function.prototype.bind||t},{"./implementation":143}],145:[function(e,v,i){"use strict";var t=typeof Symbol<"u"&&Symbol,n=e("./shams");v.exports=function(){return typeof t=="function"&&typeof Symbol=="function"&&typeof t("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&n()}},{"./shams":146}],146:[function(e,v,i){"use strict";v.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),u=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(u)!=="[object Symbol]")return!1;for(n in t[n]=42,t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var r=Object.getOwnPropertySymbols(t);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,n);if(c.value!==42||c.enumerable!==!0)return!1}return!0}},{}],147:[function(e,v,i){"use strict";var t=e("function-bind");v.exports=t.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":144}],148:[function(e,v,i){i.read=function(t,n,u,r,c){var s,o,d=8*c-r-1,a=(1<<d)-1,p=a>>1,f=-7,b=u?c-1:0,_=u?-1:1,y=t[n+b];for(b+=_,s=y&(1<<-f)-1,y>>=-f,f+=d;f>0;s=256*s+t[n+b],b+=_,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=256*o+t[n+b],b+=_,f-=8);if(s===0)s=1-p;else{if(s===a)return o?NaN:1/0*(y?-1:1);o+=Math.pow(2,r),s-=p}return(y?-1:1)*o*Math.pow(2,s-r)},i.write=function(t,n,u,r,c,s){var o,d,a,p=8*s-c-1,f=(1<<p)-1,b=f>>1,_=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,g=r?1:-1,m=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(d=isNaN(n)?1:0,o=f):(o=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-o))<1&&(o--,a*=2),(n+=o+b>=1?_/a:_*Math.pow(2,1-b))*a>=2&&(o++,a/=2),o+b>=f?(d=0,o=f):o+b>=1?(d=(n*a-1)*Math.pow(2,c),o+=b):(d=n*Math.pow(2,b-1)*Math.pow(2,c),o=0));c>=8;t[u+y]=255&d,y+=g,d/=256,c-=8);for(o=o<<c|d,p+=c;p>0;t[u+y]=255&o,y+=g,o/=256,p-=8);t[u+y-g]|=128*m}},{}],149:[function(e,v,i){(function(t){(function(){"use strict";function n(I){return typeof I!="object"||"toString"in I?I:Object.prototype.toString.call(I).slice(8,-1)}Object.defineProperty(i,"__esModule",{value:!0});var u=typeof t=="object"&&t.env.NODE_ENV==="production";function r(I,S){if(!I)throw u?new Error("Invariant failed"):new Error(S())}i.invariant=r;var c=Object.prototype.hasOwnProperty,s=Array.prototype.splice,o=Object.prototype.toString;function d(I){return o.call(I).slice(8,-1)}var a=Object.assign||function(I,S){return p(S).forEach(function(O){c.call(S,O)&&(I[O]=S[O])}),I},p=typeof Object.getOwnPropertySymbols=="function"?function(I){return Object.keys(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.keys(I)};function f(I){return Array.isArray(I)?a(I.constructor(I.length),I):d(I)==="Map"?new Map(I):d(I)==="Set"?new Set(I):I&&typeof I=="object"?a(Object.create(Object.getPrototypeOf(I)),I):I}var b=function(){function I(){this.commands=a({},_),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(S,O){return S===O},this.update.newContext=function(){return new I().update}}return Object.defineProperty(I.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(S){this.update.isEquals=S},enumerable:!0,configurable:!0}),I.prototype.extend=function(S,O){this.commands[S]=O},I.prototype.update=function(S,O){var A=this,E=typeof O=="function"?{$apply:O}:O;Array.isArray(S)&&Array.isArray(E)||r(!Array.isArray(E),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),r(typeof E=="object"&&E!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(A.commands).join(", ")+"."});var D=S;return p(E).forEach(function(P){if(c.call(A.commands,P)){var j=S===D;D=A.commands[P](E[P],D,E,S),j&&A.isEquals(D,S)&&(D=S)}else{var k=d(S)==="Map"?A.update(S.get(P),E[P]):A.update(S[P],E[P]),M=d(D)==="Map"?D.get(P):D[P];A.isEquals(k,M)&&(k!==void 0||c.call(S,P))||(D===S&&(D=f(S)),d(D)==="Map"?D.set(P,k):D[P]=k)}}),D},I}();i.Context=b;var _={$push:function(I,S,O){return g(S,O,"$push"),I.length?S.concat(I):S},$unshift:function(I,S,O){return g(S,O,"$unshift"),I.length?I.concat(S):S},$splice:function(I,S,O,A){return function(E,D){r(Array.isArray(E),function(){return"Expected $splice target to be an array; got "+n(E)}),w(D.$splice)}(S,O),I.forEach(function(E){w(E),S===A&&E.length&&(S=f(A)),s.apply(S,E)}),S},$set:function(I,S,O){return function(A){r(Object.keys(A).length===1,function(){return"Cannot have more than one key in an object with $set"})}(O),I},$toggle:function(I,S){m(I,"$toggle");var O=I.length?f(S):S;return I.forEach(function(A){O[A]=!S[A]}),O},$unset:function(I,S,O,A){return m(I,"$unset"),I.forEach(function(E){Object.hasOwnProperty.call(S,E)&&(S===A&&(S=f(A)),delete S[E])}),S},$add:function(I,S,O,A){return C(S,"$add"),m(I,"$add"),d(S)==="Map"?I.forEach(function(E){var D=E[0],P=E[1];S===A&&S.get(D)!==P&&(S=f(A)),S.set(D,P)}):I.forEach(function(E){S!==A||S.has(E)||(S=f(A)),S.add(E)}),S},$remove:function(I,S,O,A){return C(S,"$remove"),m(I,"$remove"),I.forEach(function(E){S===A&&S.has(E)&&(S=f(A)),S.delete(E)}),S},$merge:function(I,S,O,A){var E,D;return E=S,r((D=I)&&typeof D=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+n(D)}),r(E&&typeof E=="object",function(){return"update(): $merge expects a target of type 'object'; got "+n(E)}),p(I).forEach(function(P){I[P]!==S[P]&&(S===A&&(S=f(A)),S[P]=I[P])}),S},$apply:function(I,S){var O;return r(typeof(O=I)=="function",function(){return"update(): expected spec of $apply to be a function; got "+n(O)+"."}),I(S)}},y=new b;function g(I,S,O){r(Array.isArray(I),function(){return"update(): expected target of "+n(O)+" to be an array; got "+n(I)+"."}),m(S[O],O)}function m(I,S){r(Array.isArray(I),function(){return"update(): expected spec of "+n(S)+" to be an array; got "+n(I)+". Did you forget to wrap your parameter in an array?"})}function w(I){r(Array.isArray(I),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(I)+". Did you forget to wrap your parameters in an array?"})}function C(I,S){var O=d(I);r(O==="Map"||O==="Set",function(){return"update(): "+n(S)+" expects a target of type Set or Map; got "+n(O)})}i.isEquals=y.update.isEquals,i.extend=y.extend,i.default=y.update,i.default.default=v.exports=a(i.default,i)}).call(this)}).call(this,e("_process"))},{_process:399}],150:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=[];(u=t.indexOf(n,u+1))!==-1;)r.push(u);return r}},{}],151:[function(e,v,i){typeof Object.create=="function"?v.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:v.exports=function(t,n){if(n){t.super_=n;var u=function(){};u.prototype=n.prototype,t.prototype=new u,t.prototype.constructor=t}}},{}],152:[function(e,v,i){"use strict";v.exports=function(t,n,u,r,c,s,o,d){if(!t){var a;if(n===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[u,r,c,s,o,d],f=0;(a=new Error(n.replace(/%s/g,function(){return p[f++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}},{}],153:[function(e,v,i){"use strict";var t=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",n=e("call-bind/callBound")("Object.prototype.toString"),u=function(s){return!(t&&s&&typeof s=="object"&&Symbol.toStringTag in s)&&n(s)==="[object Arguments]"},r=function(s){return!!u(s)||s!==null&&typeof s=="object"&&typeof s.length=="number"&&s.length>=0&&n(s)!=="[object Array]"&&n(s.callee)==="[object Function]"},c=function(){return u(arguments)}();u.isLegacyArguments=r,v.exports=c?u:r},{"call-bind/callBound":53}],154:[function(e,v,i){"use strict";var t,n=Object.prototype.toString,u=Function.prototype.toString,r=/^\s*(?:function)?\*/,c=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",s=Object.getPrototypeOf;v.exports=function(o){if(typeof o!="function")return!1;if(r.test(u.call(o)))return!0;if(!c)return n.call(o)==="[object GeneratorFunction]";if(!s)return!1;if(t===void 0){var d=function(){if(!c)return!1;try{return Function("return function*() {}")()}catch{}}();t=!!d&&s(d)}return s(o)===t}},{}],155:[function(e,v,i){var t,n;t=this,n=function(u){var r={plug:function(){},unplug:function(){}};function c(){var s=!1,o=u.pool(),d=null,a=u.stream(function(p){function f(b){p.emitEvent(b)}if(d=p,!s)return o.onAny(f),function(){d=null,o.offAny(f)};p.end()});return a.value=a.emit=function(p){return d&&d.emit(p),a},a.error=function(p){return d&&d.error(p),a},a.event=a.emitEvent=function(p){return p.type==="end"?a.end():d&&d.emitEvent(p),a},a.plug=function(p){return o.plug(p),a},a.unplug=function(p){return o.unplug(p),a},a.end=function(){return s||(s=!0,d&&d.end(),o=r),a},a.setName("bus")}return c.default=c,c},typeof ht=="function"&&ht.amd?ht(["kefir"],n):typeof i=="object"?v.exports=n(e("kefir")):t.KefirBus=n(t.Kefir)},{kefir:158}],156:[function(e,v,i){"use strict";v.exports=function(t,n){return n&&n.subscribe&&n.subscribeOnNext?t.stream(function(u){var r=n.subscribe(function(c){u.emit(c)},function(c){u.error(c),u.end()},function(){u.end()});return function(){r.dispose()}}):n&&n.onAny&&n.offAny?t.stream(function(u){var r=u.emitEvent;return n.onAny(r),function(){n.offAny(r)}}):n&&n.subscribe&&n.onValue?t.stream(function(u){return n.subscribe(function(r){typeof r.hasValue=="function"?r.hasValue()?u.emit(r.value()):r.isEnd()?u.end():r.isError()&&u.error(r.error):r.hasValue?u.emit(r.value):r.isEnd?u.end():r.isError&&u.error(r.error)})}):n&&n.subscribe&&n.lift?t.stream(function(u){var r=n.subscribe(function(c){u.emit(c)},function(c){u.error(c),u.end()},function(){u.end()});return function(){r.unsubscribe()}}):t.constant(n)}},{}],157:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var n=null;function u(){r.stopped=!0,n&&(n.emit(null),n.end())}var r=t.stream(function(c){n=c,r.stopped&&u()}).toProperty();return r.stopped=!1,r.destroy=u,r};var t=e("kefir");v.exports=i.default,v.exports.default=i.default},{kefir:158}],158:[function(e,v,i){(function(t){(function(){(function(n,u){typeof i=="object"&&v!==void 0?u(i):typeof ht=="function"&&ht.amd?ht(["exports"],u):u(n.Kefir=n.Kefir||{})})(this,function(n){"use strict";function u(B){var G=arguments.length,be=void 0,je=void 0;for(be=1;be<G;be++)for(je in arguments[be])B[je]=arguments[be][je];return B}function r(B,G){var be,je,ze=arguments.length,Qe=void 0;for(B.prototype=(be=G.prototype,(je=function(){}).prototype=be,new je),B.prototype.constructor=B,Qe=2;Qe<ze;Qe++)u(B.prototype,arguments[Qe]);return B}var c=["<nothing>"],s="end",o="value",d="error",a="any";function p(B,G){var be=void 0,je=void 0,ze=void 0,Qe=void 0;if(B.length===0)return G;if(G.length===0)return B;for(Qe=0,be=new Array(B.length+G.length),je=B.length,ze=0;ze<je;ze++,Qe++)be[Qe]=B[ze];for(je=G.length,ze=0;ze<je;ze++,Qe++)be[Qe]=G[ze];return be}function f(B,G){var be=B.length,je=void 0;for(je=0;je<be;je++)if(B[je]===G)return je;return-1}function b(B,G){var be=B.length,je=void 0;for(je=0;je<be;je++)if(G(B[je]))return je;return-1}function _(B){var G=B.length,be=new Array(G),je=void 0;for(je=0;je<G;je++)be[je]=B[je];return be}function y(B,G){var be=B.length,je=void 0,ze=void 0,Qe=void 0;if(G>=0&&G<be){if(be===1)return[];for(je=new Array(be-1),ze=0,Qe=0;ze<be;ze++)ze!==G&&(je[Qe]=B[ze],Qe++);return je}return B}function g(B,G){var be=B.length,je=new Array(be),ze=void 0;for(ze=0;ze<be;ze++)je[ze]=G(B[ze]);return je}function m(B,G,be){B===a?G(be):B===be.type&&(B===o||B===d?G(be.value):G())}function w(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function C(){this._dispatcher=new w,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function I(){C.call(this)}function S(){C.call(this),this._currentEvent=null}u(w.prototype,{add:function(B,G){return this._items=p(this._items,[{type:B,fn:G}]),this._items.length},remove:function(B,G){var be=b(this._items,function(je){return je.type===B&&je.fn===G});return this._inLoop!==0&&be!==-1&&(this._removedItems===null&&(this._removedItems=[]),this._removedItems.push(this._items[be])),this._items=y(this._items,be),this._items.length},addSpy:function(B){return this._spies=p(this._spies,[B]),this._spies.length},removeSpy:function(B){return this._spies=y(this._spies,this._spies.indexOf(B)),this._spies.length},dispatch:function(B){this._inLoop++;for(var G=0,be=this._spies;this._spies!==null&&G<be.length;G++)be[G](B);for(var je=0,ze=this._items;je<ze.length&&this._items!==null;je++)this._removedItems!==null&&(Qe=this._removedItems,ft=ze[je],f(Qe,ft)!==-1)||m(ze[je].type,ze[je].fn,B);var Qe,ft;this._inLoop--,this._inLoop===0&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),u(C.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(B){this._active!==B&&(this._active=B,B?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(B,G){switch(B){case o:return this._emitValue(G);case d:return this._emitError(G);case s:return this._emitEnd()}},_emitValue:function(B){this._alive&&this._dispatcher.dispatch({type:o,value:B})},_emitError:function(B){this._alive&&this._dispatcher.dispatch({type:d,value:B})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:s}),this._clear())},_on:function(B,G){return this._alive?(this._dispatcher.add(B,G),this._setActive(!0)):m(B,G,{type:s}),this},_off:function(B,G){return this._alive&&this._dispatcher.remove(B,G)===0&&this._setActive(!1),this},onValue:function(B){return this._on(o,B)},onError:function(B){return this._on(d,B)},onEnd:function(B){return this._on(s,B)},onAny:function(B){return this._on(a,B)},offValue:function(B){return this._off(o,B)},offError:function(B){return this._off(d,B)},offEnd:function(B){return this._off(s,B)},offAny:function(B){return this._off(a,B)},observe:function(B,G,be){var je=this,ze=!1,Qe=B&&typeof B!="function"?B:{value:B,error:G,end:be},ft=function(mt){mt.type===s&&(ze=!0),mt.type===o&&Qe.value?Qe.value(mt.value):mt.type===d&&Qe.error?Qe.error(mt.value):mt.type===s&&Qe.end&&Qe.end(mt.value)};return this.onAny(ft),{unsubscribe:function(){ze||(je.offAny(ft),ze=!0)},get closed(){return ze}}},_ofSameType:function(B,G){return B.prototype.getType()===this.getType()?B:G},setName:function(B,G){return this._name=G?B._name+"."+G:B,this},log:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.toString(),G=void 0,be=function(je){var ze="<"+je.type+(G?":current":"")+">";je.type};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:B,handler:be})),G=!0,this.onAny(be),G=!1,this},offLog:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.toString();if(this._logHandlers){var G=b(this._logHandlers,function(be){return be.name===B});G!==-1&&(this.offAny(this._logHandlers[G].handler),this._logHandlers.splice(G,1))}return this},spy:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.toString(),G=function(be){var je="<"+be.type+">";be.type};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:B,handler:G}),this._dispatcher.addSpy(G)),this},offSpy:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.toString();if(this._spyHandlers){var G=b(this._spyHandlers,function(be){return be.name===B});G!==-1&&(this._dispatcher.removeSpy(this._spyHandlers[G].handler),this._spyHandlers.splice(G,1))}return this}}),C.prototype.toString=function(){return"["+this._name+"]"},r(I,C,{_name:"stream",getType:function(){return"stream"}}),r(S,C,{_name:"property",_emitValue:function(B){this._alive&&(this._currentEvent={type:o,value:B},this._activating||this._dispatcher.dispatch({type:o,value:B}))},_emitError:function(B){this._alive&&(this._currentEvent={type:d,value:B},this._activating||this._dispatcher.dispatch({type:d,value:B}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:s}),this._clear())},_on:function(B,G){return this._alive&&(this._dispatcher.add(B,G),this._setActive(!0)),this._currentEvent!==null&&m(B,G,this._currentEvent),this._alive||m(B,G,{type:s}),this},getType:function(){return"property"}});var O=new I;function A(){return O}function E(B){function G(be,je){var ze=this;I.call(this),this._wait=be,this._intervalId=null,this._$onTick=function(){return ze._onTick()},this._init(je)}return r(G,I,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){this._intervalId!==null&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){I.prototype._clear.call(this),this._$onTick=null,this._free()}},B),G}O._emitEnd(),O._name="never";var D=E({_name:"later",_init:function(B){var G=B.x;this._x=G},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});function P(B,G){return new D(B,{x:G})}var j=E({_name:"interval",_init:function(B){var G=B.x;this._x=G},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});function k(B,G){return new j(B,{x:G})}var M=E({_name:"sequentially",_init:function(B){var G=B.xs;this._xs=_(G)},_free:function(){this._xs=null},_onTick:function(){this._xs.length===1?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});function R(B,G){return G.length===0?A():new M(B,{xs:G})}var V=E({_name:"fromPoll",_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_onTick:function(){var B=this._fn;this._emitValue(B())}});function T(B,G){return new V(B,{fn:G})}function U(B){function G(je){return B._emitValue(je),B._active}function be(je){return B._emit(je.type,je.value),B._active}return{value:G,error:function(je){return B._emitError(je),B._active},end:function(){return B._emitEnd(),B._active},event:be,emit:G,emitEvent:be}}var W=E({_name:"withInterval",_init:function(B){var G=B.fn;this._fn=G,this._emitter=U(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function Q(B,G){return new W(B,{fn:G})}function X(B){I.call(this),this._fn=B,this._unsubscribe=null}function oe(B){return new X(B)}function J(B){var G=!1;return oe(function(be){G||(B(function(je){be.emit(je),be.end()}),G=!0)}).setName("fromCallback")}function he(B){var G=!1;return oe(function(be){G||(B(function(je,ze){je?be.error(je):be.emit(ze),be.end()}),G=!0)}).setName("fromNodeCallback")}function ae(B,G){switch(G){case 0:return function(){return B()};case 1:return function(be){return B(be[0])};case 2:return function(be){return B(be[0],be[1])};case 3:return function(be){return B(be[0],be[1],be[2])};case 4:return function(be){return B(be[0],be[1],be[2],be[3])};default:return function(be){return B.apply(null,be)}}}r(X,I,{_name:"stream",_onActivation:function(){var B=(0,this._fn)(U(this));this._unsubscribe=typeof B=="function"?B:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){this._unsubscribe!==null&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){I.prototype._clear.call(this),this._fn=null}});var ue=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function ge(B,G,be){for(var je=void 0,ze=void 0,Qe=0;Qe<ue.length;Qe++)if(typeof B[ue[Qe][0]]=="function"&&typeof B[ue[Qe][1]]=="function"){je=ue[Qe][0],ze=ue[Qe][1];break}if(je===void 0)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(ft,mt,Ut){return oe(function(Ht){var Nn=Ut?function(){Ht.emit(function($t,wi,Yt){var mo=Yt?Yt.length:0;if(wi!=null)return mo===0?$t.call(wi):$t.apply(wi,Yt);switch(mo){case 0:return $t();case 1:return $t(Yt[0]);case 2:return $t(Yt[0],Yt[1]);case 3:return $t(Yt[0],Yt[1],Yt[2]);case 4:return $t(Yt[0],Yt[1],Yt[2],Yt[3]);default:return $t.apply(null,Yt)}}(Ut,this,arguments))}:function($t){Ht.emit($t)};return ft(Nn),function(){return mt(Nn)}}).setName("fromSubUnsub")}(function(ft){return B[je](G,ft)},function(ft){return B[ze](G,ft)},be).setName("fromEvents")}function N(B){this._currentEvent={type:"value",value:B,current:!0}}function F(B){return new N(B)}function K(B){this._currentEvent={type:"error",value:B,current:!0}}function H(B){return new K(B)}function $(B,G){return function(be,je){var ze=this;B.call(this),this._source=be,this._name=be._name+"."+G,this._init(je),this._$handleAny=function(Qe){return ze._handleAny(Qe)}}}function se(B){return{_init:function(){},_free:function(){},_handleValue:function(G){this._emitValue(G)},_handleError:function(G){this._emitError(G)},_handleEnd:function(){this._emitEnd()},_handleAny:function(G){switch(G.type){case o:return this._handleValue(G.value);case d:return this._handleError(G.value);case s:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){B.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function pe(B,G){var be=$(I,B);return r(be,I,se(I),G),be}function Te(B,G){var be=$(S,B);return r(be,S,se(S),G),be}r(N,S,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),r(K,S,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var $e=Te("toProperty",{_init:function(B){var G=B.fn;this._getInitialCurrent=G},_onActivation:function(){if(this._getInitialCurrent!==null){var B=this._getInitialCurrent;this._emitValue(B())}this._source.onAny(this._$handleAny)}});function He(B){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(G!==null&&typeof G!="function")throw new Error("You should call toProperty() with a function or no arguments.");return new $e(B,{fn:G})}var re=pe("changes",{_handleValue:function(B){this._activating||this._emitValue(B)},_handleError:function(B){this._activating||this._emitError(B)}});function le(B){var G=!1,be=oe(function(je){if(!G){var ze=B.then(function(Qe){je.emit(Qe),je.end()},function(Qe){je.error(Qe),je.end()});ze&&typeof ze.done=="function"&&ze.done(),G=!0}});return He(be,null).setName("fromPromise")}function ve(){if(typeof Promise=="function")return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var De=function(B){var G,be=B.Symbol;return typeof be=="function"?be.observable?G=be.observable:(G=be("observable"),be.observable=G):G="@@observable",G}(typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:v!==void 0?v:Function("return this")()),xe=De.default?De.default:De;function Se(B){var G=B[xe]?B[xe]():B;return oe(function(be){var je=G.subscribe({error:function(ze){be.error(ze),be.end()},next:function(ze){be.emit(ze)},complete:function(){be.end()}});return je.unsubscribe?function(){je.unsubscribe()}:je}).setName("fromESObservable")}function Ee(B){this._observable=B.takeErrors(1)}function ye(){return new Ee(this)}function Ne(B,G,be){for(var je in B)B.hasOwnProperty(je)&&(G.push(je),be.push(B[je]))}function Ue(B,G,be){var je=this;I.call(this),this._activeCount=B.length,this._sources=p(B,G),this._combinator=be,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(ft,mt){var Ut=ft.length,Ht=void 0;for(Ht=0;Ht<Ut;Ht++)ft[Ht]=mt}(this._latestValues,c),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var ze=function(ft){je._$handlers.push(function(mt){return je._handleAny(ft,mt)})},Qe=0;Qe<this._sources.length;Qe++)ze(Qe)}function de(B,G,be){return typeof G=="function"&&(be=G,G=void 0),Array.isArray(B)?function(je){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Qe=arguments[2];if(!Array.isArray(ze))throw new Error("Combine can only combine active and passive collections of the same type.");return Qe=Qe?ae(Qe,je.length+ze.length):function(ft){return ft},je.length===0?A():new Ue(je,ze,Qe)}(B,G,be):function(je){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Qe=arguments[2];if(typeof ze!="object"||Array.isArray(ze))throw new Error("Combine can only combine active and passive collections of the same type.");var ft=[],mt=[],Ut=[];return Ne(je,ft,mt),Ne(ze,ft,Ut),mt.length===0?A():new Ue(mt,Ut,function(Ht){for(var Nn={},$t=Ht.length-1;0<=$t;$t--)Nn[ft[$t]]=Ht[$t];return Qe?Qe(Nn):Nn})}(B,G,be)}u(Ee.prototype,{subscribe:function(B,G,be){var je=this,ze=typeof B=="function"?{next:B,error:G,complete:be}:B,Qe=function(mt){mt.type===s&&(ft=!0),mt.type===o&&ze.next?ze.next(mt.value):mt.type===d&&ze.error?ze.error(mt.value):mt.type===s&&ze.complete&&ze.complete(mt.value)};this._observable.onAny(Qe);var ft=!1;return{unsubscribe:function(){ft=!0,je._observable.offAny(Qe)},get closed(){return ft}}}}),Ee.prototype[xe]=function(){return this},r(Ue,I,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var B=this._activeCount;B<this._sources.length;B++)this._sources[B].onAny(this._$handlers[B]);for(var G=0;G<this._activeCount;G++)this._sources[G].onAny(this._$handlers[G]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var B=this._sources.length,G=void 0;for(G=0;G<B;G++)this._sources[G].offAny(this._$handlers[G])},_emitIfFull:function(){for(var B=!0,G=!1,be=this._latestValues.length,je=new Array(be),ze=new Array(be),Qe=0;Qe<be;Qe++)je[Qe]=this._latestValues[Qe],ze[Qe]=this._latestErrors[Qe],je[Qe]===c&&(B=!1),ze[Qe]!==void 0&&(G=!0);if(B){var ft=this._combinator;this._emitValue(ft(je))}G&&this._emitError(function(mt){for(var Ut=void 0,Ht=0;Ht<mt.length;Ht++)mt[Ht]!==void 0&&(Ut===void 0||Ut.index<mt[Ht].index)&&(Ut=mt[Ht]);return Ut.error}(ze))},_handleAny:function(B,G){G.type===o||G.type===d?(G.type===o&&(this._latestValues[B]=G.value,this._latestErrors[B]=void 0),G.type===d&&(this._latestValues[B]=c,this._latestErrors[B]={index:this._latestErrorIndex++,error:G.value}),B<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):B<this._activeCount&&(this._aliveCount--,this._aliveCount===0&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){I.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var qe={empty:function(){return A()},concat:function(B,G){return B.merge(G)},of:function(B){return F(B)},map:function(B,G){return G.map(B)},bimap:function(B,G,be){return be.mapErrors(B).map(G)},ap:function(B,G){return de([B,G],function(be,je){return be(je)})},chain:function(B,G){return G.flatMap(B)}},tt=Object.freeze({Observable:qe}),Re={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){var G=this._fn;this._emitValue(G(B))}},ce=pe("map",Re),Le=Te("map",Re),Fe=function(B){return B};function Be(B){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe;return new(B._ofSameType(ce,Le))(B,{fn:G})}var nt={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){(0,this._fn)(B)&&this._emitValue(B)}},it=pe("filter",nt),Ge=Te("filter",nt),Xe=function(B){return B},rt={_init:function(B){var G=B.n;this._n=G,G<=0&&this._emitEnd()},_handleValue:function(B){this._n!==0&&(this._n--,this._emitValue(B),this._n===0&&this._emitEnd())}},ot=pe("take",rt),Ct=Te("take",rt),Et={_init:function(B){var G=B.n;this._n=G,G<=0&&this._emitEnd()},_handleError:function(B){this._n!==0&&(this._n--,this._emitError(B),this._n===0&&this._emitEnd())}},It=pe("takeErrors",Et),wt=Te("takeErrors",Et),Lt={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){(0,this._fn)(B)?this._emitValue(B):this._emitEnd()}},Tr=pe("takeWhile",Lt),Mr=Te("takeWhile",Lt),Or=function(B){return B},zn={_init:function(){this._lastValue=c},_free:function(){this._lastValue=null},_handleValue:function(B){this._lastValue=B},_handleEnd:function(){this._lastValue!==c&&this._emitValue(this._lastValue),this._emitEnd()}},Pr=pe("last",zn),dr=Te("last",zn),cr={_init:function(B){var G=B.n;this._n=Math.max(0,G)},_handleValue:function(B){this._n===0?this._emitValue(B):this._n--}},xn=pe("skip",cr),fr=Te("skip",cr),Wn={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){var G=this._fn;this._fn===null||G(B)||(this._fn=null),this._fn===null&&this._emitValue(B)}},z=pe("skipWhile",Wn),Z=Te("skipWhile",Wn),te=function(B){return B},ne={_init:function(B){var G=B.fn;this._fn=G,this._prev=c},_free:function(){this._fn=null,this._prev=null},_handleValue:function(B){var G=this._fn;this._prev!==c&&G(this._prev,B)||(this._prev=B,this._emitValue(B))}},fe=pe("skipDuplicates",ne),ee=Te("skipDuplicates",ne),_e=function(B,G){return B===G};function ke(B){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e;return new(B._ofSameType(fe,ee))(B,{fn:G})}var Ie={_init:function(B){var G=B.fn,be=B.seed;this._fn=G,this._prev=be},_free:function(){this._prev=null,this._fn=null},_handleValue:function(B){if(this._prev!==c){var G=this._fn;this._emitValue(G(this._prev,B))}this._prev=B}},Me=pe("diff",Ie),Ce=Te("diff",Ie);function We(B,G){return[B,G]}var Ke=Te("scan",{_init:function(B){var G=B.fn,be=B.seed;this._fn=G,this._seed=be,be!==c&&this._emitValue(be)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(B){var G=this._fn;this._currentEvent===null||this._currentEvent.type===d?this._emitValue(this._seed===c?B:G(this._seed,B)):this._emitValue(G(this._currentEvent.value,B))}}),ut=pe("flatten",{_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){for(var G=(0,this._fn)(B),be=0;be<G.length;be++)this._emitValue(G[be])}}),dt=function(B){return B},St={},Tt={_init:function(B){var G=this,be=B.wait;this._wait=Math.max(0,be),this._buff=[],this._$shiftBuff=function(){var je=G._buff.shift();je===St?G._emitEnd():G._emitValue(je)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(B){this._activating?this._emitValue(B):(this._buff.push(B),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(St),setTimeout(this._$shiftBuff,this._wait))}},en=pe("delay",Tt),Bt=Te("delay",Tt),Mt=Date.now?function(){return Date.now()}:function(){return new Date().getTime()},At={_init:function(B){var G=this,be=B.wait,je=B.leading,ze=B.trailing;this._wait=Math.max(0,be),this._leading=je,this._trailing=ze,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return G._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(B){if(this._activating)this._emitValue(B);else{var G=Mt();this._lastCallTime!==0||this._leading||(this._lastCallTime=G);var be=this._wait-(G-this._lastCallTime);be<=0?(this._cancelTrailing(),this._lastCallTime=G,this._emitValue(B)):this._trailing&&(this._cancelTrailing(),this._trailingValue=B,this._timeoutId=setTimeout(this._$trailingCall,be))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){this._timeoutId!==null&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?Mt():0,this._endLater&&this._emitEnd()}},tn=pe("throttle",At),Ft=Te("throttle",At),nn={_init:function(B){var G=this,be=B.wait,je=B.immediate;this._wait=Math.max(0,be),this._immediate=je,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return G._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(B){this._activating?this._emitValue(B):(this._lastAttempt=Mt(),this._immediate&&!this._timeoutId&&this._emitValue(B),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=B))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var B=Mt()-this._lastAttempt;if(B<this._wait&&B>=0)this._timeoutId=setTimeout(this._$later,this._wait-B);else{if(this._timeoutId=null,!this._immediate){var G=this._laterValue;this._laterValue=null,this._emitValue(G)}this._endLater&&this._emitEnd()}}},pn=pe("debounce",nn),un=Te("debounce",nn),hn={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleError:function(B){var G=this._fn;this._emitError(G(B))}},Jt=pe("mapErrors",hn),On=Te("mapErrors",hn),Pn=function(B){return B},mn={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleError:function(B){(0,this._fn)(B)&&this._emitError(B)}},qt=pe("filterErrors",mn),kt=Te("filterErrors",mn),Yi=function(B){return B},Qi={_handleValue:function(){}},pr=pe("ignoreValues",Qi),Xi=Te("ignoreValues",Qi),hr={_handleError:function(){}},$n=pe("ignoreErrors",hr),fi=Te("ignoreErrors",hr),pi={_handleEnd:function(){}},Rr=pe("ignoreEnd",pi),Zi=Te("ignoreEnd",pi),hi={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleEnd:function(){var B=this._fn;this._emitValue(B()),this._emitEnd()}},eo=pe("beforeEnd",hi),to=Te("beforeEnd",hi),mi={_init:function(B){var G=B.min,be=B.max;this._max=be,this._min=G,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(B){this._buff=function(G,be,je){var ze=Math.min(je,G.length+1),Qe=G.length-ze+1,ft=new Array(ze),mt=void 0;for(mt=Qe;mt<ze;mt++)ft[mt-Qe]=G[mt];return ft[ze-1]=be,ft}(this._buff,B,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},_i=pe("slidingWindow",mi),ea=Te("slidingWindow",mi),Lr={_init:function(B){var G=B.fn,be=B.flushOnEnd;this._fn=G,this._flushOnEnd=be,this._buff=[]},_free:function(){this._buff=null},_flush:function(){this._buff!==null&&this._buff.length!==0&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(B){this._buff.push(B),(0,this._fn)(B)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Dt=pe("bufferWhile",Lr),Gn=Te("bufferWhile",Lr),mr=function(B){return B},bi={_init:function(B){var G=B.count,be=B.flushOnEnd;this._count=G,this._flushOnEnd=be,this._buff=[]},_free:function(){this._buff=null},_flush:function(){this._buff!==null&&this._buff.length!==0&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(B){this._buff.push(B),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},jr=pe("bufferWithCount",bi),Kn=Te("bufferWithCount",bi),Vr={_init:function(B){var G=this,be=B.wait,je=B.count,ze=B.flushOnEnd;this._wait=be,this._count=je,this._flushOnEnd=ze,this._intervalId=null,this._$onTick=function(){return G._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){this._buff!==null&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(B){this._buff.push(B),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&this._buff.length!==0&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._intervalId!==null&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},Nr=pe("bufferWithTimeOrCount",Vr),Cn=Te("bufferWithTimeOrCount",Vr),no={_init:function(B){var G,be=B.transducer;this._xform=be((G=this,{"@@transducer/step":function(je,ze){return G._emitValue(ze),null},"@@transducer/result":function(){return G._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(B){this._xform["@@transducer/step"](null,B)!==null&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},ta=pe("transduce",no),na=Te("transduce",no),ro={_init:function(B){var G=B.fn;this._handler=G,this._emitter=U(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(B){this._handler(this._emitter,B)}},Br=pe("withHandler",ro),ra=Te("withHandler",ro),io=Array.isArray||function(B){return Object.prototype.toString.call(B)==="[object Array]"};function qr(B,G){var be=this;I.call(this),this._buffers=g(B,function(Qe){return io(Qe)?_(Qe):[]}),this._sources=g(B,function(Qe){return io(Qe)?A():Qe}),this._combinator=G?ae(G,this._sources.length):function(Qe){return Qe},this._aliveCount=0,this._$handlers=[];for(var je=function(Qe){be._$handlers.push(function(ft){return be._handleAny(Qe,ft)})},ze=0;ze<this._sources.length;ze++)je(ze)}function _r(B,G){return B.length===0?A():new qr(B,G)}r(qr,I,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var B=this._sources.length;this._aliveCount=B;for(var G=0;G<B&&this._active;G++)this._sources[G].onAny(this._$handlers[G])},_onDeactivation:function(){for(var B=0;B<this._sources.length;B++)this._sources[B].offAny(this._$handlers[B])},_emit:function(){for(var B=new Array(this._buffers.length),G=0;G<this._buffers.length;G++)B[G]=this._buffers[G].shift();var be=this._combinator;this._emitValue(be(B))},_isFull:function(){for(var B=0;B<this._buffers.length;B++)if(this._buffers[B].length===0)return!1;return!0},_handleAny:function(B,G){G.type===o&&(this._buffers[B].push(G.value),this._isFull()&&this._emit()),G.type===d&&this._emitError(G.value),G.type===s&&(this._aliveCount--,this._aliveCount===0&&this._emitEnd())},_clear:function(){I.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Rn=function(B){return B};function an(){var B=this,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=G.queueLim,je=be===void 0?0:be,ze=G.concurLim,Qe=ze===void 0?-1:ze,ft=G.drop,mt=ft===void 0?"new":ft;I.call(this),this._queueLim=je<0?-1:je,this._concurLim=Qe<0?-1:Qe,this._drop=mt,this._queue=[],this._curSources=[],this._$handleSubAny=function(Ut){return B._handleSubAny(Ut)},this._$endHandlers=[],this._currentlyAdding=null,this._concurLim===0&&this._emitEnd()}function br(B){an.call(this),this._addAll(B),this._initialised=!0}function gr(B){return B.length===0?A():new br(B)}function vr(B){var G=this;I.call(this),this._generator=B,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(be){return G._handleAny(be)}}r(an,I,{_name:"abstractPool",_add:function(B,G){G=G||Rn,this._concurLim===-1||this._curSources.length<this._concurLim?this._addToCur(G(B)):this._queueLim===-1||this._queue.length<this._queueLim?this._addToQueue(G(B)):this._drop==="old"&&(this._removeOldest(),this._add(B,G))},_addAll:function(B){var G=this;(function(be,je){var ze=be.length,Qe=void 0;for(Qe=0;Qe<ze;Qe++)je(be[Qe])})(B,function(be){return G._add(be)})},_remove:function(B){this._removeCur(B)===-1&&this._removeQueue(B)},_addToQueue:function(B){this._queue=p(this._queue,[B])},_addToCur:function(B){if(this._active){if(!B._alive)return B._currentEvent&&this._emit(B._currentEvent.type,B._currentEvent.value),void(this._active&&(this._queue.length!==0?this._pullQueue():this._curSources.length===0&&this._onEmpty()));this._currentlyAdding=B,B.onAny(this._$handleSubAny),this._currentlyAdding=null,B._alive?(this._curSources=p(this._curSources,[B]),this._active&&this._subToEnd(B)):this._queue.length!==0?this._pullQueue():this._curSources.length===0&&this._onEmpty()}else this._curSources=p(this._curSources,[B])},_subToEnd:function(B){var G=this,be=function(){return G._removeCur(B)};this._$endHandlers.push({obs:B,handler:be}),B.onEnd(be)},_subscribe:function(B){B.onAny(this._$handleSubAny),this._active&&this._subToEnd(B)},_unsubscribe:function(B){B.offAny(this._$handleSubAny);var G=b(this._$endHandlers,function(be){return be.obs===B});G!==-1&&(B.offEnd(this._$endHandlers[G].handler),this._$endHandlers.splice(G,1))},_handleSubAny:function(B){B.type===o?this._emitValue(B.value):B.type===d&&this._emitError(B.value)},_removeQueue:function(B){var G=f(this._queue,B);return this._queue=y(this._queue,G),G},_removeCur:function(B){this._active&&this._unsubscribe(B);var G=f(this._curSources,B);return this._curSources=y(this._curSources,G),G!==-1&&(this._queue.length!==0?this._pullQueue():this._curSources.length===0&&this._onEmpty()),G},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){this._queue.length!==0&&(this._queue=_(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var B=0,G=this._curSources;B<G.length&&this._active;B++)this._subscribe(G[B])},_onDeactivation:function(){for(var B=0,G=this._curSources;B<G.length;B++)this._unsubscribe(G[B]);this._currentlyAdding!==null&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return this._curSources.length===0},_onEmpty:function(){},_clear:function(){I.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),r(br,an,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),r(vr,I,{_name:"repeat",_handleAny:function(B){B.type===s?(this._source=null,this._getSource()):this._emit(B.type,B.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var B=this._generator;this._source===null&&this._alive&&this._active;)this._source=B(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){I.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var Jn=function(B){return new vr(B)};function Ur(B){return Jn(function(G){return B.length>G&&B[G]}).setName("concat")}function Wt(){an.call(this)}function _n(B,G,be){var je=this;an.call(this,be),this._source=B,this._fn=G,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(ze){return je._handleMain(ze)}}function Fr(B,G){_n.call(this,B,G)}function Yn(B,G){return function(be,je,ze){var Qe=this;B.call(this),this._primary=be,this._secondary=je,this._name=be._name+"."+G,this._lastSecondary=c,this._$handleSecondaryAny=function(ft){return Qe._handleSecondaryAny(ft)},this._$handlePrimaryAny=function(ft){return Qe._handlePrimaryAny(ft)},this._init(ze)}}function Ln(B){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(G){this._emitValue(G)},_handlePrimaryError:function(G){this._emitError(G)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(G){this._lastSecondary=G},_handleSecondaryError:function(G){this._emitError(G)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(G){switch(G.type){case o:return this._handlePrimaryValue(G.value);case d:return this._handlePrimaryError(G.value);case s:return this._handlePrimaryEnd(G.value)}},_handleSecondaryAny:function(G){switch(G.type){case o:return this._handleSecondaryValue(G.value);case d:return this._handleSecondaryError(G.value);case s:this._handleSecondaryEnd(G.value),this._removeSecondary()}},_removeSecondary:function(){this._secondary!==null&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){this._secondary!==null&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){this._secondary!==null&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){B.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function jn(B,G){var be=Yn(I,B);return r(be,I,Ln(I),G),be}function kn(B,G){var be=Yn(S,B);return r(be,S,Ln(S),G),be}r(Wt,an,{_name:"pool",plug:function(B){return this._add(B),this},unplug:function(B){return this._remove(B),this}}),r(_n,an,{_onActivation:function(){an.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){an.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(B){B.type===o&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===B.value||this._add(B.value,this._fn),this._lastCurrent=B.value,this._hadNoEvSinceDeact=!1),B.type===d&&this._emitError(B.value),B.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){an.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),r(Fr,_n,{_handleMain:function(B){B.type===d&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===B.value||this._add(B.value,this._fn),this._lastCurrent=B.value,this._hadNoEvSinceDeact=!1),B.type===o&&this._emitValue(B.value),B.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var oo={_handlePrimaryValue:function(B){this._lastSecondary!==c&&this._lastSecondary&&this._emitValue(B)},_handleSecondaryEnd:function(){this._lastSecondary!==c&&this._lastSecondary||this._emitEnd()}},Hr=jn("filterBy",oo),ao=kn("filterBy",oo),ia=function(B,G){return G},zr={_handlePrimaryValue:function(B){this._lastSecondary!==c&&this._emitValue(B)},_handleSecondaryEnd:function(){this._lastSecondary===c&&this._emitEnd()}},oa=jn("skipUntilBy",zr),aa=kn("skipUntilBy",zr),so={_handleSecondaryValue:function(){this._emitEnd()}},lo=jn("takeUntilBy",so),sa=kn("takeUntilBy",so),uo={_init:function(){var B=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).flushOnEnd,G=B===void 0||B;this._buff=[],this._flushOnEnd=G},_free:function(){this._buff=null},_flush:function(){this._buff!==null&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&this._secondary!==null&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(B){this._buff.push(B)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},la=jn("bufferBy",uo),ua=kn("bufferBy",uo),Wr={_init:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},G=B.flushOnEnd,be=G===void 0||G,je=B.flushOnChange,ze=je!==void 0&&je;this._buff=[],this._flushOnEnd=be,this._flushOnChange=ze},_free:function(){this._buff=null},_flush:function(){this._buff!==null&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(B){this._buff.push(B),this._lastSecondary===c||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==c&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(B){this._flushOnChange&&!B&&this._flush(),this._lastSecondary=B}},da=jn("bufferWhileBy",Wr),ca=kn("bufferWhileBy",Wr),gi=function(){return!1},fa=function(){return!0},co={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleValue:function(B){var G=(0,this._fn)(B);G.convert?this._emitError(G.error):this._emitValue(B)}},pa=pe("valuesToErrors",co),ha=Te("valuesToErrors",co),ma=function(B){return{convert:!0,error:B}},$r={_init:function(B){var G=B.fn;this._fn=G},_free:function(){this._fn=null},_handleError:function(B){var G=(0,this._fn)(B);G.convert?this._emitValue(G.value):this._emitError(B)}},yr=pe("errorsToValues",$r),_a=Te("errorsToValues",$r),fo=function(B){return{convert:!0,value:B}},vi={_handleError:function(B){this._emitError(B),this._emitEnd()}},po=pe("endOnError",vi),ho=Te("endOnError",vi);C.prototype.toProperty=function(B){return He(this,B)},C.prototype.changes=function(){return new re(this)},C.prototype.toPromise=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ve(),je=null;return new be(function(ze,Qe){G.onAny(function(ft){ft.type===s&&je!==null?((je.type===o?ze:Qe)(je.value),je=null):je=ft})})}(this,B)},C.prototype.toESObservable=ye,C.prototype[xe]=ye,C.prototype.map=function(B){return Be(this,B)},C.prototype.filter=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xe;return new(G._ofSameType(it,Ge))(G,{fn:be})}(this,B)},C.prototype.take=function(B){return function(G,be){return new(G._ofSameType(ot,Ct))(G,{n:be})}(this,B)},C.prototype.takeErrors=function(B){return function(G,be){return new(G._ofSameType(It,wt))(G,{n:be})}(this,B)},C.prototype.takeWhile=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Or;return new(G._ofSameType(Tr,Mr))(G,{fn:be})}(this,B)},C.prototype.last=function(){return new((B=this)._ofSameType(Pr,dr))(B);var B},C.prototype.skip=function(B){return function(G,be){return new(G._ofSameType(xn,fr))(G,{n:be})}(this,B)},C.prototype.skipWhile=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te;return new(G._ofSameType(z,Z))(G,{fn:be})}(this,B)},C.prototype.skipDuplicates=function(B){return ke(this,B)},C.prototype.diff=function(B,G){return function(be,je){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c;return new(be._ofSameType(Me,Ce))(be,{fn:je||We,seed:ze})}(this,B,G)},C.prototype.scan=function(B,G){return function(be,je){return new Ke(be,{fn:je,seed:arguments.length>2&&arguments[2]!==void 0?arguments[2]:c})}(this,B,G)},C.prototype.flatten=function(B){return function(G){return new ut(G,{fn:arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt})}(this,B)},C.prototype.delay=function(B){return function(G,be){return new(G._ofSameType(en,Bt))(G,{wait:be})}(this,B)},C.prototype.throttle=function(B,G){return function(be,je){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qe=ze.leading,ft=Qe===void 0||Qe,mt=ze.trailing,Ut=mt===void 0||mt;return new(be._ofSameType(tn,Ft))(be,{wait:je,leading:ft,trailing:Ut})}(this,B,G)},C.prototype.debounce=function(B,G){return function(be,je){var ze=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).immediate,Qe=ze!==void 0&&ze;return new(be._ofSameType(pn,un))(be,{wait:je,immediate:Qe})}(this,B,G)},C.prototype.mapErrors=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pn;return new(G._ofSameType(Jt,On))(G,{fn:be})}(this,B)},C.prototype.filterErrors=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yi;return new(G._ofSameType(qt,kt))(G,{fn:be})}(this,B)},C.prototype.ignoreValues=function(){return new((B=this)._ofSameType(pr,Xi))(B);var B},C.prototype.ignoreErrors=function(){return new((B=this)._ofSameType($n,fi))(B);var B},C.prototype.ignoreEnd=function(){return new((B=this)._ofSameType(Rr,Zi))(B);var B},C.prototype.beforeEnd=function(B){return function(G,be){return new(G._ofSameType(eo,to))(G,{fn:be})}(this,B)},C.prototype.slidingWindow=function(B,G){return function(be,je){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return new(be._ofSameType(_i,ea))(be,{min:ze,max:je})}(this,B,G)},C.prototype.bufferWhile=function(B,G){return function(be,je){var ze=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).flushOnEnd,Qe=ze===void 0||ze;return new(be._ofSameType(Dt,Gn))(be,{fn:je||mr,flushOnEnd:Qe})}(this,B,G)},C.prototype.bufferWithCount=function(B,G){return function(be,je){var ze=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).flushOnEnd,Qe=ze===void 0||ze;return new(be._ofSameType(jr,Kn))(be,{count:je,flushOnEnd:Qe})}(this,B,G)},C.prototype.bufferWithTimeOrCount=function(B,G,be){return function(je,ze,Qe){var ft=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).flushOnEnd,mt=ft===void 0||ft;return new(je._ofSameType(Nr,Cn))(je,{wait:ze,count:Qe,flushOnEnd:mt})}(this,B,G,be)},C.prototype.transduce=function(B){return function(G,be){return new(G._ofSameType(ta,na))(G,{transducer:be})}(this,B)},C.prototype.withHandler=function(B){return function(G,be){return new(G._ofSameType(Br,ra))(G,{fn:be})}(this,B)},C.prototype.thru=function(B){return B(this)},C.prototype.combine=function(B,G){return de([this,B],G)},C.prototype.zip=function(B,G){return _r([this,B],G)},C.prototype.merge=function(B){return gr([this,B])},C.prototype.concat=function(B){return Ur([this,B])};var yi=function(){return new Wt};C.prototype.flatMap=function(B){return new _n(this,B).setName(this,"flatMap")},C.prototype.flatMapLatest=function(B){return new _n(this,B,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},C.prototype.flatMapFirst=function(B){return new _n(this,B,{concurLim:1}).setName(this,"flatMapFirst")},C.prototype.flatMapConcat=function(B){return new _n(this,B,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},C.prototype.flatMapConcurLimit=function(B,G){return new _n(this,B,{queueLim:-1,concurLim:G}).setName(this,"flatMapConcurLimit")},C.prototype.flatMapErrors=function(B){return new Fr(this,B).setName(this,"flatMapErrors")},C.prototype.filterBy=function(B){return be=B,new((G=this)._ofSameType(Hr,ao))(G,be);var G,be},C.prototype.sampledBy=function(B,G){return function(be,je,ze){return de([je],[be],ze?function(Qe,ft){return ze(ft,Qe)}:ia).setName(be,"sampledBy")}(this,B,G)},C.prototype.skipUntilBy=function(B){return be=B,new((G=this)._ofSameType(oa,aa))(G,be);var G,be},C.prototype.takeUntilBy=function(B){return be=B,new((G=this)._ofSameType(lo,sa))(G,be);var G,be},C.prototype.bufferBy=function(B,G){return function(be,je,ze){return new(be._ofSameType(la,ua))(be,je,ze)}(this,B,G)},C.prototype.bufferWhileBy=function(B,G){return function(be,je,ze){return new(be._ofSameType(da,ca))(be,je,ze)}(this,B,G)};var Vn=!0;function Ds(B){}C.prototype.awaiting=function(B){return function(G,be){var je=gr([Be(G,fa),Be(be,gi)]);return(je=He(je=ke(je),gi)).setName(G,"awaiting")}(this,B)},C.prototype.valuesToErrors=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ma;return new(G._ofSameType(pa,ha))(G,{fn:be})}(this,B)},C.prototype.errorsToValues=function(B){return function(G){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fo;return new(G._ofSameType(yr,_a))(G,{fn:be})}(this,B)},C.prototype.endOnError=function(){return new((B=this)._ofSameType(po,ho))(B);var B};var wr={Observable:C,Stream:I,Property:S,never:A,later:P,interval:k,sequentially:R,fromPoll:T,withInterval:Q,fromCallback:J,fromNodeCallback:he,fromEvents:ge,stream:oe,constant:F,constantError:H,fromPromise:le,fromESObservable:Se,combine:de,zip:_r,merge:gr,concat:Ur,Pool:Wt,pool:yi,repeat:Jn,staticLand:tt};wr.Kefir=wr,n.dissableDeprecationWarnings=function(){Vn=!1},n.Kefir=wr,n.Observable=C,n.Stream=I,n.Property=S,n.never=A,n.later=P,n.interval=k,n.sequentially=R,n.fromPoll=T,n.withInterval=Q,n.fromCallback=J,n.fromNodeCallback=he,n.fromEvents=ge,n.stream=oe,n.constant=F,n.constantError=H,n.fromPromise=le,n.fromESObservable=Se,n.combine=de,n.zip=_r,n.merge=gr,n.concat=Ur,n.Pool=Wt,n.pool=yi,n.repeat=Jn,n.staticLand=tt,n.default=wr,Object.defineProperty(n,"__esModule",{value:!0})})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],159:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=t(e("asap")),s=function(){function o(){(0,n.default)(this,o),(0,r.default)(this,"_queue",[]),(0,r.default)(this,"_isFlushing",!1),(0,r.default)(this,"_index",0)}return(0,u.default)(o,[{key:"schedule",value:function(d){var a=this;this._queue.push(function(){try{d()}catch(p){setTimeout(function(){throw p},0)}}),this._queue.length===1&&(0,c.default)(function(){a.flush()})}},{key:"flush",value:function(){if(!this._isFlushing){this._isFlushing=!0;for(var d=this._queue;this._index<d.length;){var a=this._index;if(this._index+=1,d[a].call(),this._index>1024){for(var p=0,f=d.length-this._index;p<f;p++)d[p]=d[p+this._index];d.length-=this._index,this._index=0}}d.length=0,this._index=0,this._isFlushing=!1}}}]),o}();i.default=s,v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31}],160:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return new n.default({scheduler:u.getScheduler(),read:function(){var c=new Set;return u.values().forEach(function(s){r(s)&&c.add(s)}),c},listen:function(c,s){var o=new Set;return u.subscribe({start:function(){var d=new Set;u.values().forEach(function(a){r(a)&&(o.add(a),d.add(a))}),c(d)},next:function(d){d.forEach(function(a){a.type==="add"?r(a.value)&&(o.add(a.value),s.add(a.value)):a.type==="remove"&&o.has(a.value)&&(o.delete(a.value),s.remove(a.value))})},error:function(d){s.error(d)},complete:function(){s.end()}})}})};var n=t(e("."));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],161:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){var c=!1;return new n.default({scheduler:u.getScheduler(),read:function(){if(c)throw new Error("reading inactive recursively-flatMapped stream is not supported");c=!0;var s=new Set;return u.values().forEach(function(o){r(o).values().forEach(function(d){s.add(d)})}),c=!1,s},listen:function(s,o){var d=!1,a=!1,p=new Map;function f(y){y.isEnded()?y.values().forEach(function(g){o.add(g)}):y.subscribe({start:function(g){p.set(y,g),y.values().forEach(function(m){o.add(m)})},next:function(g){g.forEach(function(m){m.type==="add"?o.add(m.value):m.type==="remove"&&o.remove(m.value)})},error:function(g){o.error(g)},complete:function(){p.delete(y),d&&p.size===0&&o.end()}})}s(new Set);var b=new Map,_=u.subscribe({start:function(){u.values().forEach(function(y){var g=r(y);b.set(y,g),f(g)}),a=!0},next:function(y){y.forEach(function(g){if(g.type==="add"){var m=r(g.value);b.set(g.value,m),f(m)}else if(g.type==="remove"){var w=b.get(g.value);if(!w)throw new Error("removed value not in liveset");w.values().forEach(function(I){o.remove(I)}),b.delete(g.value);var C=p.get(w);C&&(C.unsubscribe(),p.delete(w))}})},error:function(y){o.error(y)},complete:function(){d=!0,a&&p.size===0&&o.end()}});return{unsubscribe:function(){_.unsubscribe(),p.forEach(function(y){y.unsubscribe()}),b.clear(),p.clear()},pullChanges:function(){_.pullChanges(),p.forEach(function(y){y.pullChanges()})}}}})};var n=t(e("."));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],162:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){var c=!1;return new n.default({scheduler:u.getScheduler(),read:function(){if(c)throw new Error("reading inactive recursively-flatMapped stream is not supported");c=!0;var s=new Set;return u.values().forEach(function(o){r(o).values().forEach(function(d){s.add(d)})}),c=!1,s},listen:function(s,o){var d=!1,a=!1,p=!1,f=new Map;function b(m){m.isEnded()?m.values().forEach(function(w){o.add(w)}):m.subscribe({start:function(w){f.set(m,w),m.values().forEach(function(C){o.add(C)})},next:function(w){p=!0,w.forEach(function(C){C.type==="add"?o.add(C.value):C.type==="remove"&&o.remove(C.value)})},error:function(w){o.error(w)},complete:function(){f.delete(m),d&&f.size===0&&o.end()}})}s(new Set);var _=new Map,y=u.subscribe({start:function(){u.values().forEach(function(m){var w=r(m);_.set(m,w),b(w)}),a=!0},next:function(m){p=!0,m.forEach(function(w){if(w.type==="add"){var C=r(w.value);_.set(w.value,C),b(C)}else if(w.type==="remove"){var I=_.get(w.value);if(!I)throw new Error("removed value not in liveset");I.values().forEach(function(O){o.remove(O)}),_.delete(w.value);var S=f.get(I);S&&(S.unsubscribe(),f.delete(I))}})},error:function(m){o.error(m)},complete:function(){d=!0,a&&f.size===0&&o.end()}}),g=!1;return{unsubscribe:function(){y.unsubscribe(),f.forEach(function(m){m.unsubscribe()}),_.clear(),f.clear()},pullChanges:function(){if(!g){g=!0;do p=!1,y.pullChanges(),f.forEach(function(m){m.pullChanges()});while(p);g=!1}}}}})};var n=t(e("."));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],163:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=t(e("./Scheduler")),s=t(e("symbol-observable")),o=function(){function a(p){(0,n.default)(this,a),(0,r.default)(this,"_init",void 0),(0,r.default)(this,"_scheduler",void 0),(0,r.default)(this,"_values",null),(0,r.default)(this,"_mutableValues",!1),(0,r.default)(this,"_active",null),(0,r.default)(this,"_inSubscriptionStart",!1),(0,r.default)(this,"_ended",!1),(0,r.default)(this,"_endedWithError",!1),(0,r.default)(this,"_error",null),(0,r.default)(this,"_queuedCall",!1),(0,r.default)(this,"_changeQueue",[]),(0,r.default)(this,"_observers",[]),this._init=p,this._scheduler=p.scheduler||a.defaultScheduler}return(0,u.default)(a,[{key:"_queueChange",value:function(p){var f=this;p&&this._changeQueue.push(p),this._queuedCall||(this._queuedCall=!0,this._scheduler.schedule(function(){f._queuedCall=!1;var b,_=f._changeQueue;f._changeQueue=[];var y=f._ended;y?(b=f._observers,f._observers=[]):b=f._observers.slice(),b.forEach(function(g){var m=g.observer,w=g.ignore,C=m.next;if(C)if(w===0)C.call(m,_);else{g.ignore=0;var I=_.slice(w);I.length&&C.call(m,I)}y&&(f._endedWithError?m.error&&m.error(f._error):m.complete&&m.complete())})}))}},{key:"_deactivate",value:function(){if(!this._active)throw new Error("already inactive");var p=this._active.listenHandler;this._active=null,p&&p.unsubscribe()}},{key:"values",value:function(){if(this._values){if(this._active&&!this._inSubscriptionStart){var p=this._active.listenHandler;p.pullChanges&&p.pullChanges()}return this._mutableValues&&(this._mutableValues=!1,this._values,void 0),this._values}if(this._active)throw new Error("tried to call values() on liveset during subscription before setValues was called");var f=this._init.read();return f}},{key:"isEnded",value:function(){return this._ended}},{key:"getScheduler",value:function(){return this._scheduler}},{key:"subscribe",value:function(p,f,b){var _,y=this,g=this;if(_=typeof p=="function"?{next:p,error:f,complete:b}:p,this._ended){var m={closed:!1,unsubscribe:function(){m.closed=!0},pullChanges:function(){}};return _.start&&_.start(m),m.closed||(this._endedWithError?_.error&&_.error(this._error):_.complete&&_.complete()),m.closed=!0,m}var w={observer:_,ignore:this._changeQueue.length},C=!0,I=!1,S={get closed(){return!C&&g._observers.indexOf(w)<0},unsubscribe:function(){if(C)I=!0;else{var j=y._observers.indexOf(w);j>=0&&(y._observers.splice(j,1),y._ended||y._observers.length!==0||(y._values=null,y._deactivate()))}},pullChanges:function(){y._active&&y._active.listenHandler&&y._active.listenHandler.pullChanges&&y._active.listenHandler.pullChanges();var j=y._changeQueue.length,k=_.next;if(j!==0&&k){var M=y._changeQueue.slice(w.ignore);M.length!==0&&(w.ignore=j,k.call(_,M))}}};if(!this._active){var O={get closed(){return!g._active||g._active.controller!==this},add:function(j){var k=y._values;if(!k)throw new Error("setValue must be called before controller is used");y._ended||k.has(j)||(y._mutableValues||(y._values=k=new Set(k),y._mutableValues=!0),k.add(j),y._queueChange({type:"add",value:j}))},remove:function(j){var k=y._values;if(!k)throw new Error("setValue must be called before controller is used");!y._ended&&k.has(j)&&(y._mutableValues||(y._values=k=new Set(k),y._mutableValues=!0),k.delete(j),y._queueChange({type:"remove",value:j}))},error:function(j){y._ended||(y._ended=!0,y._endedWithError=!0,y._error=j,y._queueChange(),y._deactivate())},end:function(){y._ended||(y._ended=!0,y._queueChange(),y._deactivate())}},A=this._active={controller:O,listenHandler:{unsubscribe:function(){}}},E=function(){throw new Error("setValues must be called once during listen")},D=function(j){D=E,y._values=j,y._mutableValues=!1},P=this._init.listen(function(j){return D(j)},O);if(this._values||E(),typeof P=="function")A.listenHandler={unsubscribe:P};else if(P!=null&&typeof P.unsubscribe=="function")A.listenHandler=P;else if(P!=null)throw new TypeError("listen must return object with unsubscribe method, a function, or null");O.closed&&(this._active=A,this._deactivate())}return _.start&&(this._inSubscriptionStart=!0,_.start(S),this._inSubscriptionStart=!1),C=!1,w.ignore=this._changeQueue.length,I||this._observers.push(w),S}}],[{key:"active",value:function(p,f){var b,_=p||new Set,y=new a({scheduler:f?f.scheduler:void 0,read:function(){return _},listen:function(g,m){g(_),b=m}});return y.subscribe({}),{liveSet:y,controller:b}}},{key:"constant",value:function(p,f){var b=function(){throw new Error("Should not happen")},_=new a({scheduler:f?f.scheduler:void 0,read:b,listen:b});return _._ended=!0,_._values=p,_._mutableValues=!1,_}}]),a}();function d(a){}i.default=o,(0,r.default)(o,"defaultScheduler",new c.default),o.prototype[s.default]=function(){return this},v.exports=i.default,v.exports.default=i.default},{"./Scheduler":159,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"symbol-observable":448}],164:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return new n.default({scheduler:u.getScheduler(),read:function(){throw new Error("mapWithRemoval liveset may not be read while inactive")},listen:function(c,s){var o=new Map,d=u.subscribe({start:function(){var a=new Set;u.values().forEach(function(p){var f,b=new Promise(function(y){f=y}),_=r(p,b);o.set(p,{newValue:_,resolve:f}),a.add(_)}),c(a)},next:function(a){a.forEach(function(p){if(p.type==="add"){var f,b=new Promise(function(m){f=m}),_=r(p.value,b);o.set(p.value,{newValue:_,resolve:f}),s.add(_)}else if(p.type==="remove"){var y=o.get(p.value);if(!y)throw new Error("removed item not in liveset");var g=y.newValue;(0,y.resolve)(),o.delete(p.value),s.remove(g)}})},error:function(a){s.error(a)},complete:function(){s.end()}});return{unsubscribe:function(){d.unsubscribe(),o.forEach(function(a){(0,a.resolve)()})},pullChanges:function(){d.pullChanges()}}}})};var n=t(e("."));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],165:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return new n.default({scheduler:u[0]?u[0].getScheduler():void 0,read:function(){var r=new Set;return u.forEach(function(c){c.values().forEach(function(s){r.add(s)})}),r},listen:function(r,c){var s=new Set,o=new Set,d=!1;return u.forEach(function(a){var p;a.subscribe({start:function(f){p=f,o.add(p),a.values().forEach(function(b){s.add(b)})},next:function(f){f.forEach(function(b){b.type==="add"?c.add(b.value):b.type==="remove"&&c.remove(b.value)})},error:function(f){c.error(f)},complete:function(){o.delete(p),d&&o.size===0&&c.end()}})}),r(s),d=!0,o.size===0&&c.end(),{unsubscribe:function(){o.forEach(function(a){a.unsubscribe()})},pullChanges:function(){o.forEach(function(a){a.pullChanges()})}}}})};var n=t(e("."));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],166:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return new n.default(function(r){var c=new Map;function s(d){var a,p=new Promise(function(b){a=b});c.set(d,a);var f={value:d,removal:p};r.next(f)}var o=u.subscribe({start:function(d){var a=!0,p=!1,f=void 0;try{for(var b,_=u.values()[Symbol.iterator]();!(a=(b=_.next()).done);a=!0){var y=b.value;if(d.closed)break;s(y)}}catch(g){p=!0,f=g}finally{try{a||_.return==null||_.return()}finally{if(p)throw f}}},next:function(d){d.forEach(function(a){a.type==="add"?s(a.value):a.type==="remove"&&function(p){var f=c.get(p);if(!f)throw new Error("Resolver not found in map for value");c.delete(p),f()}(a.value)})},error:function(d){r.error(d)},complete:function(){r.complete()}});return function(){o.unsubscribe(),c.forEach(function(d){d()})}})},t(e("."));var n=t(e("zen-observable"));v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15,"zen-observable":465}],167:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){function s(d,a){var p,f=!1,b=d["@@transducer/step"]([],a);return b&&b["@@transducer/reduced"]?(p=b["@@transducer/value"],f=!0):p=b,{outputValues:p,addsComplete:f}}function o(){var d=new Map,a=c(u),p=!1,f=new Set(a["@@transducer/init"]()),b=!0,_=!1,y=void 0;try{for(var g,m=r.values()[Symbol.iterator]();!(b=(g=m.next()).done);b=!0){var w=g.value,C=s(a,w),I=C.outputValues,S=C.addsComplete;d.set(w,I);for(var O=0,A=I.length;O<A;O++)f.add(I[O]);if(S){p=!0,a["@@transducer/result"]([]).forEach(function(E){f.add(E)});break}}}catch(E){_=!0,y=E}finally{try{b||m.return==null||m.return()}finally{if(_)throw y}}return{values:f,inputToOutputValues:d,xform:a,addsComplete:p}}return new n.default({scheduler:r.getScheduler(),read:function(){return o().values},listen:function(d,a){var p,f,b;return r.subscribe({start:function(){var _=o();d(_.values),p=_.inputToOutputValues,f=_.xform,b=_.addsComplete},next:function(_){for(var y=0,g=_.length;y<g;y++){var m=_[y];if(m.type==="add"){if(!b){var w=m.value,C=s(f,w),I=C.outputValues,S=C.addsComplete;p.set(w,I);for(var O=0,A=I.length;O<A;O++)a.add(I[O]);S&&(b=!0,f["@@transducer/result"]([]).forEach(function(P){a.add(P)}))}}else if(m.type==="remove"){var E=m.value,D=p.get(E);if(!D)throw new Error("value had not been added");D.forEach(function(P){a.remove(P)}),p.delete(E)}}},error:function(_){a.error(_)},complete:function(){a.end()}})}})};var n=t(e(".")),u={"@@transducer/init":function(){return[]},"@@transducer/step":function(r,c){return r.push(c),r},"@@transducer/result":function(r){return r}};v.exports=i.default,v.exports.default=i.default},{".":163,"@babel/runtime/helpers/interopRequireDefault":15}],168:[function(e,v,i){var t=e("./_getNative")(e("./_root"),"DataView");v.exports=t},{"./_getNative":252,"./_root":292}],169:[function(e,v,i){var t=e("./_hashClear"),n=e("./_hashDelete"),u=e("./_hashGet"),r=e("./_hashHas"),c=e("./_hashSet");function s(o){var d=-1,a=o==null?0:o.length;for(this.clear();++d<a;){var p=o[d];this.set(p[0],p[1])}}s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=u,s.prototype.has=r,s.prototype.set=c,v.exports=s},{"./_hashClear":258,"./_hashDelete":259,"./_hashGet":260,"./_hashHas":261,"./_hashSet":262}],170:[function(e,v,i){var t=e("./_listCacheClear"),n=e("./_listCacheDelete"),u=e("./_listCacheGet"),r=e("./_listCacheHas"),c=e("./_listCacheSet");function s(o){var d=-1,a=o==null?0:o.length;for(this.clear();++d<a;){var p=o[d];this.set(p[0],p[1])}}s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=u,s.prototype.has=r,s.prototype.set=c,v.exports=s},{"./_listCacheClear":271,"./_listCacheDelete":272,"./_listCacheGet":273,"./_listCacheHas":274,"./_listCacheSet":275}],171:[function(e,v,i){var t=e("./_getNative")(e("./_root"),"Map");v.exports=t},{"./_getNative":252,"./_root":292}],172:[function(e,v,i){var t=e("./_mapCacheClear"),n=e("./_mapCacheDelete"),u=e("./_mapCacheGet"),r=e("./_mapCacheHas"),c=e("./_mapCacheSet");function s(o){var d=-1,a=o==null?0:o.length;for(this.clear();++d<a;){var p=o[d];this.set(p[0],p[1])}}s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=u,s.prototype.has=r,s.prototype.set=c,v.exports=s},{"./_mapCacheClear":276,"./_mapCacheDelete":277,"./_mapCacheGet":278,"./_mapCacheHas":279,"./_mapCacheSet":280}],173:[function(e,v,i){var t=e("./_getNative")(e("./_root"),"Promise");v.exports=t},{"./_getNative":252,"./_root":292}],174:[function(e,v,i){var t=e("./_getNative")(e("./_root"),"Set");v.exports=t},{"./_getNative":252,"./_root":292}],175:[function(e,v,i){var t=e("./_MapCache"),n=e("./_setCacheAdd"),u=e("./_setCacheHas");function r(c){var s=-1,o=c==null?0:c.length;for(this.__data__=new t;++s<o;)this.add(c[s])}r.prototype.add=r.prototype.push=n,r.prototype.has=u,v.exports=r},{"./_MapCache":172,"./_setCacheAdd":293,"./_setCacheHas":294}],176:[function(e,v,i){var t=e("./_ListCache"),n=e("./_stackClear"),u=e("./_stackDelete"),r=e("./_stackGet"),c=e("./_stackHas"),s=e("./_stackSet");function o(d){var a=this.__data__=new t(d);this.size=a.size}o.prototype.clear=n,o.prototype.delete=u,o.prototype.get=r,o.prototype.has=c,o.prototype.set=s,v.exports=o},{"./_ListCache":170,"./_stackClear":298,"./_stackDelete":299,"./_stackGet":300,"./_stackHas":301,"./_stackSet":302}],177:[function(e,v,i){var t=e("./_root").Symbol;v.exports=t},{"./_root":292}],178:[function(e,v,i){var t=e("./_root").Uint8Array;v.exports=t},{"./_root":292}],179:[function(e,v,i){var t=e("./_getNative")(e("./_root"),"WeakMap");v.exports=t},{"./_getNative":252,"./_root":292}],180:[function(e,v,i){v.exports=function(t,n,u){switch(u.length){case 0:return t.call(n);case 1:return t.call(n,u[0]);case 2:return t.call(n,u[0],u[1]);case 3:return t.call(n,u[0],u[1],u[2])}return t.apply(n,u)}},{}],181:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=t==null?0:t.length,c=0,s=[];++u<r;){var o=t[u];n(o,u,t)&&(s[c++]=o)}return s}},{}],182:[function(e,v,i){var t=e("./_baseIndexOf");v.exports=function(n,u){return!!(n!=null&&n.length)&&t(n,u,0)>-1}},{"./_baseIndexOf":200}],183:[function(e,v,i){v.exports=function(t,n,u){for(var r=-1,c=t==null?0:t.length;++r<c;)if(u(n,t[r]))return!0;return!1}},{}],184:[function(e,v,i){var t=e("./_baseTimes"),n=e("./isArguments"),u=e("./isArray"),r=e("./isBuffer"),c=e("./_isIndex"),s=e("./isTypedArray"),o=Object.prototype.hasOwnProperty;v.exports=function(d,a){var p=u(d),f=!p&&n(d),b=!p&&!f&&r(d),_=!p&&!f&&!b&&s(d),y=p||f||b||_,g=y?t(d.length,String):[],m=g.length;for(var w in d)!a&&!o.call(d,w)||y&&(w=="length"||b&&(w=="offset"||w=="parent")||_&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||c(w,m))||g.push(w);return g}},{"./_baseTimes":225,"./_isIndex":264,"./isArguments":327,"./isArray":328,"./isBuffer":331,"./isTypedArray":339}],185:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=t==null?0:t.length,c=Array(r);++u<r;)c[u]=n(t[u],u,t);return c}},{}],186:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=n.length,c=t.length;++u<r;)t[c+u]=n[u];return t}},{}],187:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=t==null?0:t.length;++u<r;)if(n(t[u],u,t))return!0;return!1}},{}],188:[function(e,v,i){var t=e("./eq");v.exports=function(n,u){for(var r=n.length;r--;)if(t(n[r][0],u))return r;return-1}},{"./eq":312}],189:[function(e,v,i){v.exports=function(t,n,u){return t==t&&(u!==void 0&&(t=t<=u?t:u),n!==void 0&&(t=t>=n?t:n)),t}},{}],190:[function(e,v,i){var t=e("./_SetCache"),n=e("./_arrayIncludes"),u=e("./_arrayIncludesWith"),r=e("./_arrayMap"),c=e("./_baseUnary"),s=e("./_cacheHas"),o=200;v.exports=function(d,a,p,f){var b=-1,_=n,y=!0,g=d.length,m=[],w=a.length;if(!g)return m;p&&(a=r(a,c(p))),f?(_=u,y=!1):a.length>=o&&(_=s,y=!1,a=new t(a));e:for(;++b<g;){var C=d[b],I=p==null?C:p(C);if(C=f||C!==0?C:0,y&&I==I){for(var S=w;S--;)if(a[S]===I)continue e;m.push(C)}else _(a,I,f)||m.push(C)}return m}},{"./_SetCache":175,"./_arrayIncludes":182,"./_arrayIncludesWith":183,"./_arrayMap":185,"./_baseUnary":228,"./_cacheHas":232}],191:[function(e,v,i){var t=e("./_baseForOwn"),n=e("./_createBaseEach")(t);v.exports=n},{"./_baseForOwn":195,"./_createBaseEach":238}],192:[function(e,v,i){v.exports=function(t,n,u,r){for(var c=t.length,s=u+(r?1:-1);r?s--:++s<c;)if(n(t[s],s,t))return s;return-1}},{}],193:[function(e,v,i){var t=e("./_arrayPush"),n=e("./_isFlattenable");v.exports=function u(r,c,s,o,d){var a=-1,p=r.length;for(s||(s=n),d||(d=[]);++a<p;){var f=r[a];c>0&&s(f)?c>1?u(f,c-1,s,o,d):t(d,f):o||(d[d.length]=f)}return d}},{"./_arrayPush":186,"./_isFlattenable":263}],194:[function(e,v,i){var t=e("./_createBaseFor")();v.exports=t},{"./_createBaseFor":239}],195:[function(e,v,i){var t=e("./_baseFor"),n=e("./keys");v.exports=function(u,r){return u&&t(u,r,n)}},{"./_baseFor":194,"./keys":340}],196:[function(e,v,i){var t=e("./_castPath"),n=e("./_toKey");v.exports=function(u,r){for(var c=0,s=(r=t(r,u)).length;u!=null&&c<s;)u=u[n(r[c++])];return c&&c==s?u:void 0}},{"./_castPath":234,"./_toKey":305}],197:[function(e,v,i){var t=e("./_arrayPush"),n=e("./isArray");v.exports=function(u,r,c){var s=r(u);return n(u)?s:t(s,c(u))}},{"./_arrayPush":186,"./isArray":328}],198:[function(e,v,i){var t=e("./_Symbol"),n=e("./_getRawTag"),u=e("./_objectToString"),r="[object Null]",c="[object Undefined]",s=t?t.toStringTag:void 0;v.exports=function(o){return o==null?o===void 0?c:r:s&&s in Object(o)?n(o):u(o)}},{"./_Symbol":177,"./_getRawTag":253,"./_objectToString":288}],199:[function(e,v,i){v.exports=function(t,n){return t!=null&&n in Object(t)}},{}],200:[function(e,v,i){var t=e("./_baseFindIndex"),n=e("./_baseIsNaN"),u=e("./_strictIndexOf");v.exports=function(r,c,s){return c==c?u(r,c,s):t(r,n,s)}},{"./_baseFindIndex":192,"./_baseIsNaN":207,"./_strictIndexOf":303}],201:[function(e,v,i){var t=e("./_SetCache"),n=e("./_arrayIncludes"),u=e("./_arrayIncludesWith"),r=e("./_arrayMap"),c=e("./_baseUnary"),s=e("./_cacheHas"),o=Math.min;v.exports=function(d,a,p){for(var f=p?u:n,b=d[0].length,_=d.length,y=_,g=Array(_),m=1/0,w=[];y--;){var C=d[y];y&&a&&(C=r(C,c(a))),m=o(C.length,m),g[y]=!p&&(a||b>=120&&C.length>=120)?new t(y&&C):void 0}C=d[0];var I=-1,S=g[0];e:for(;++I<b&&w.length<m;){var O=C[I],A=a?a(O):O;if(O=p||O!==0?O:0,!(S?s(S,A):f(w,A,p))){for(y=_;--y;){var E=g[y];if(!(E?s(E,A):f(d[y],A,p)))continue e}S&&S.push(A),w.push(O)}}return w}},{"./_SetCache":175,"./_arrayIncludes":182,"./_arrayIncludesWith":183,"./_arrayMap":185,"./_baseUnary":228,"./_cacheHas":232}],202:[function(e,v,i){var t=e("./_baseForOwn");v.exports=function(n,u,r,c){return t(n,function(s,o,d){u(c,r(s),o,d)}),c}},{"./_baseForOwn":195}],203:[function(e,v,i){var t=e("./_baseGetTag"),n=e("./isObjectLike"),u="[object Arguments]";v.exports=function(r){return n(r)&&t(r)==u}},{"./_baseGetTag":198,"./isObjectLike":336}],204:[function(e,v,i){var t=e("./_baseIsEqualDeep"),n=e("./isObjectLike");v.exports=function u(r,c,s,o,d){return r===c||(r==null||c==null||!n(r)&&!n(c)?r!=r&&c!=c:t(r,c,s,o,u,d))}},{"./_baseIsEqualDeep":205,"./isObjectLike":336}],205:[function(e,v,i){var t=e("./_Stack"),n=e("./_equalArrays"),u=e("./_equalByTag"),r=e("./_equalObjects"),c=e("./_getTag"),s=e("./isArray"),o=e("./isBuffer"),d=e("./isTypedArray"),a=1,p="[object Arguments]",f="[object Array]",b="[object Object]",_=Object.prototype.hasOwnProperty;v.exports=function(y,g,m,w,C,I){var S=s(y),O=s(g),A=S?f:c(y),E=O?f:c(g),D=(A=A==p?b:A)==b,P=(E=E==p?b:E)==b,j=A==E;if(j&&o(y)){if(!o(g))return!1;S=!0,D=!1}if(j&&!D)return I||(I=new t),S||d(y)?n(y,g,m,w,C,I):u(y,g,A,m,w,C,I);if(!(m&a)){var k=D&&_.call(y,"__wrapped__"),M=P&&_.call(g,"__wrapped__");if(k||M){var R=k?y.value():y,V=M?g.value():g;return I||(I=new t),C(R,V,m,w,I)}}return!!j&&(I||(I=new t),r(y,g,m,w,C,I))}},{"./_Stack":176,"./_equalArrays":244,"./_equalByTag":245,"./_equalObjects":246,"./_getTag":255,"./isArray":328,"./isBuffer":331,"./isTypedArray":339}],206:[function(e,v,i){var t=e("./_Stack"),n=e("./_baseIsEqual"),u=1,r=2;v.exports=function(c,s,o,d){var a=o.length,p=a,f=!d;if(c==null)return!p;for(c=Object(c);a--;){var b=o[a];if(f&&b[2]?b[1]!==c[b[0]]:!(b[0]in c))return!1}for(;++a<p;){var _=(b=o[a])[0],y=c[_],g=b[1];if(f&&b[2]){if(y===void 0&&!(_ in c))return!1}else{var m=new t;if(d)var w=d(y,g,_,c,s,m);if(!(w===void 0?n(g,y,u|r,d,m):w))return!1}}return!0}},{"./_Stack":176,"./_baseIsEqual":204}],207:[function(e,v,i){v.exports=function(t){return t!=t}},{}],208:[function(e,v,i){var t=e("./isFunction"),n=e("./_isMasked"),u=e("./isObject"),r=e("./_toSource"),c=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,d=s.toString,a=o.hasOwnProperty,p=RegExp("^"+d.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");v.exports=function(f){return!(!u(f)||n(f))&&(t(f)?p:c).test(r(f))}},{"./_isMasked":268,"./_toSource":306,"./isFunction":333,"./isObject":335}],209:[function(e,v,i){var t=e("./_baseGetTag"),n=e("./isLength"),u=e("./isObjectLike"),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,v.exports=function(c){return u(c)&&n(c.length)&&!!r[t(c)]}},{"./_baseGetTag":198,"./isLength":334,"./isObjectLike":336}],210:[function(e,v,i){var t=e("./_baseMatches"),n=e("./_baseMatchesProperty"),u=e("./identity"),r=e("./isArray"),c=e("./property");v.exports=function(s){return typeof s=="function"?s:s==null?u:typeof s=="object"?r(s)?n(s[0],s[1]):t(s):c(s)}},{"./_baseMatches":214,"./_baseMatchesProperty":215,"./identity":323,"./isArray":328,"./property":348}],211:[function(e,v,i){var t=e("./_isPrototype"),n=e("./_nativeKeys"),u=Object.prototype.hasOwnProperty;v.exports=function(r){if(!t(r))return n(r);var c=[];for(var s in Object(r))u.call(r,s)&&s!="constructor"&&c.push(s);return c}},{"./_isPrototype":269,"./_nativeKeys":285}],212:[function(e,v,i){var t=e("./isObject"),n=e("./_isPrototype"),u=e("./_nativeKeysIn"),r=Object.prototype.hasOwnProperty;v.exports=function(c){if(!t(c))return u(c);var s=n(c),o=[];for(var d in c)(d!="constructor"||!s&&r.call(c,d))&&o.push(d);return o}},{"./_isPrototype":269,"./_nativeKeysIn":286,"./isObject":335}],213:[function(e,v,i){var t=e("./_baseEach"),n=e("./isArrayLike");v.exports=function(u,r){var c=-1,s=n(u)?Array(u.length):[];return t(u,function(o,d,a){s[++c]=r(o,d,a)}),s}},{"./_baseEach":191,"./isArrayLike":329}],214:[function(e,v,i){var t=e("./_baseIsMatch"),n=e("./_getMatchData"),u=e("./_matchesStrictComparable");v.exports=function(r){var c=n(r);return c.length==1&&c[0][2]?u(c[0][0],c[0][1]):function(s){return s===r||t(s,r,c)}}},{"./_baseIsMatch":206,"./_getMatchData":251,"./_matchesStrictComparable":282}],215:[function(e,v,i){var t=e("./_baseIsEqual"),n=e("./get"),u=e("./hasIn"),r=e("./_isKey"),c=e("./_isStrictComparable"),s=e("./_matchesStrictComparable"),o=e("./_toKey"),d=1,a=2;v.exports=function(p,f){return r(p)&&c(f)?s(o(p),f):function(b){var _=n(b,p);return _===void 0&&_===f?u(b,p):t(f,_,d|a)}}},{"./_baseIsEqual":204,"./_isKey":266,"./_isStrictComparable":270,"./_matchesStrictComparable":282,"./_toKey":305,"./get":321,"./hasIn":322}],216:[function(e,v,i){var t=e("./_arrayMap"),n=e("./_baseGet"),u=e("./_baseIteratee"),r=e("./_baseMap"),c=e("./_baseSortBy"),s=e("./_baseUnary"),o=e("./_compareMultiple"),d=e("./identity"),a=e("./isArray");v.exports=function(p,f,b){f=f.length?t(f,function(g){return a(g)?function(m){return n(m,g.length===1?g[0]:g)}:g}):[d];var _=-1;f=t(f,s(u));var y=r(p,function(g,m,w){return{criteria:t(f,function(C){return C(g)}),index:++_,value:g}});return c(y,function(g,m){return o(g,m,b)})}},{"./_arrayMap":185,"./_baseGet":196,"./_baseIteratee":210,"./_baseMap":213,"./_baseSortBy":224,"./_baseUnary":228,"./_compareMultiple":236,"./identity":323,"./isArray":328}],217:[function(e,v,i){v.exports=function(t){return function(n){return n?.[t]}}},{}],218:[function(e,v,i){var t=e("./_baseGet");v.exports=function(n){return function(u){return t(u,n)}}},{"./_baseGet":196}],219:[function(e,v,i){v.exports=function(t){return function(n){return t?.[n]}}},{}],220:[function(e,v,i){var t=e("./_baseUnset"),n=e("./_isIndex"),u=Array.prototype.splice;v.exports=function(r,c){for(var s=r?c.length:0,o=s-1;s--;){var d=c[s];if(s==o||d!==a){var a=d;n(d)?u.call(r,d,1):t(r,d)}}return r}},{"./_baseUnset":230,"./_isIndex":264}],221:[function(e,v,i){var t=e("./identity"),n=e("./_overRest"),u=e("./_setToString");v.exports=function(r,c){return u(n(r,c,t),r+"")}},{"./_overRest":290,"./_setToString":296,"./identity":323}],222:[function(e,v,i){var t=e("./constant"),n=e("./_defineProperty"),u=e("./identity"),r=n?function(c,s){return n(c,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:u;v.exports=r},{"./_defineProperty":243,"./constant":308,"./identity":323}],223:[function(e,v,i){v.exports=function(t,n,u){var r=-1,c=t.length;n<0&&(n=-n>c?0:c+n),(u=u>c?c:u)<0&&(u+=c),c=n>u?0:u-n>>>0,n>>>=0;for(var s=Array(c);++r<c;)s[r]=t[r+n];return s}},{}],224:[function(e,v,i){v.exports=function(t,n){var u=t.length;for(t.sort(n);u--;)t[u]=t[u].value;return t}},{}],225:[function(e,v,i){v.exports=function(t,n){for(var u=-1,r=Array(t);++u<t;)r[u]=n(u);return r}},{}],226:[function(e,v,i){var t=e("./_Symbol"),n=e("./_arrayMap"),u=e("./isArray"),r=e("./isSymbol"),c=1/0,s=t?t.prototype:void 0,o=s?s.toString:void 0;v.exports=function d(a){if(typeof a=="string")return a;if(u(a))return n(a,d)+"";if(r(a))return o?o.call(a):"";var p=a+"";return p=="0"&&1/a==-c?"-0":p}},{"./_Symbol":177,"./_arrayMap":185,"./isArray":328,"./isSymbol":338}],227:[function(e,v,i){var t=e("./_trimmedEndIndex"),n=/^\s+/;v.exports=function(u){return u&&u.slice(0,t(u)+1).replace(n,"")}},{"./_trimmedEndIndex":307}],228:[function(e,v,i){v.exports=function(t){return function(n){return t(n)}}},{}],229:[function(e,v,i){var t=e("./_SetCache"),n=e("./_arrayIncludes"),u=e("./_arrayIncludesWith"),r=e("./_cacheHas"),c=e("./_createSet"),s=e("./_setToArray"),o=200;v.exports=function(d,a,p){var f=-1,b=n,_=d.length,y=!0,g=[],m=g;if(p)y=!1,b=u;else if(_>=o){var w=a?null:c(d);if(w)return s(w);y=!1,b=r,m=new t}else m=a?[]:g;e:for(;++f<_;){var C=d[f],I=a?a(C):C;if(C=p||C!==0?C:0,y&&I==I){for(var S=m.length;S--;)if(m[S]===I)continue e;a&&m.push(I),g.push(C)}else b(m,I,p)||(m!==g&&m.push(I),g.push(C))}return g}},{"./_SetCache":175,"./_arrayIncludes":182,"./_arrayIncludesWith":183,"./_cacheHas":232,"./_createSet":242,"./_setToArray":295}],230:[function(e,v,i){var t=e("./_castPath"),n=e("./last"),u=e("./_parent"),r=e("./_toKey");v.exports=function(c,s){return s=t(s,c),(c=u(c,s))==null||delete c[r(n(s))]}},{"./_castPath":234,"./_parent":291,"./_toKey":305,"./last":342}],231:[function(e,v,i){var t=e("./_arrayMap");v.exports=function(n,u){return t(u,function(r){return n[r]})}},{"./_arrayMap":185}],232:[function(e,v,i){v.exports=function(t,n){return t.has(n)}},{}],233:[function(e,v,i){var t=e("./isArrayLikeObject");v.exports=function(n){return t(n)?n:[]}},{"./isArrayLikeObject":330}],234:[function(e,v,i){var t=e("./isArray"),n=e("./_isKey"),u=e("./_stringToPath"),r=e("./toString");v.exports=function(c,s){return t(c)?c:n(c,s)?[c]:u(r(c))}},{"./_isKey":266,"./_stringToPath":304,"./isArray":328,"./toString":358}],235:[function(e,v,i){var t=e("./isSymbol");v.exports=function(n,u){if(n!==u){var r=n!==void 0,c=n===null,s=n==n,o=t(n),d=u!==void 0,a=u===null,p=u==u,f=t(u);if(!a&&!f&&!o&&n>u||o&&d&&p&&!a&&!f||c&&d&&p||!r&&p||!s)return 1;if(!c&&!o&&!f&&n<u||f&&r&&s&&!c&&!o||a&&r&&s||!d&&s||!p)return-1}return 0}},{"./isSymbol":338}],236:[function(e,v,i){var t=e("./_compareAscending");v.exports=function(n,u,r){for(var c=-1,s=n.criteria,o=u.criteria,d=s.length,a=r.length;++c<d;){var p=t(s[c],o[c]);if(p)return c>=a?p:p*(r[c]=="desc"?-1:1)}return n.index-u.index}},{"./_compareAscending":235}],237:[function(e,v,i){var t=e("./_root")["__core-js_shared__"];v.exports=t},{"./_root":292}],238:[function(e,v,i){var t=e("./isArrayLike");v.exports=function(n,u){return function(r,c){if(r==null)return r;if(!t(r))return n(r,c);for(var s=r.length,o=u?s:-1,d=Object(r);(u?o--:++o<s)&&c(d[o],o,d)!==!1;);return r}}},{"./isArrayLike":329}],239:[function(e,v,i){v.exports=function(t){return function(n,u,r){for(var c=-1,s=Object(n),o=r(n),d=o.length;d--;){var a=o[t?d:++c];if(u(s[a],a,s)===!1)break}return n}}},{}],240:[function(e,v,i){var t=e("./_baseIteratee"),n=e("./isArrayLike"),u=e("./keys");v.exports=function(r){return function(c,s,o){var d=Object(c);if(!n(c)){var a=t(s,3);c=u(c),s=function(f){return a(d[f],f,d)}}var p=r(c,s,o);return p>-1?d[a?c[p]:p]:void 0}}},{"./_baseIteratee":210,"./isArrayLike":329,"./keys":340}],241:[function(e,v,i){var t=e("./_baseInverter");v.exports=function(n,u){return function(r,c){return t(r,n,u(c),{})}}},{"./_baseInverter":202}],242:[function(e,v,i){var t=e("./_Set"),n=e("./noop"),u=e("./_setToArray"),r=t&&1/u(new t([,-0]))[1]==1/0?function(c){return new t(c)}:n;v.exports=r},{"./_Set":174,"./_setToArray":295,"./noop":345}],243:[function(e,v,i){var t=e("./_getNative"),n=function(){try{var u=t(Object,"defineProperty");return u({},"",{}),u}catch{}}();v.exports=n},{"./_getNative":252}],244:[function(e,v,i){var t=e("./_SetCache"),n=e("./_arraySome"),u=e("./_cacheHas"),r=1,c=2;v.exports=function(s,o,d,a,p,f){var b=d&r,_=s.length,y=o.length;if(_!=y&&!(b&&y>_))return!1;var g=f.get(s),m=f.get(o);if(g&&m)return g==o&&m==s;var w=-1,C=!0,I=d&c?new t:void 0;for(f.set(s,o),f.set(o,s);++w<_;){var S=s[w],O=o[w];if(a)var A=b?a(O,S,w,o,s,f):a(S,O,w,s,o,f);if(A!==void 0){if(A)continue;C=!1;break}if(I){if(!n(o,function(E,D){if(!u(I,D)&&(S===E||p(S,E,d,a,f)))return I.push(D)})){C=!1;break}}else if(S!==O&&!p(S,O,d,a,f)){C=!1;break}}return f.delete(s),f.delete(o),C}},{"./_SetCache":175,"./_arraySome":187,"./_cacheHas":232}],245:[function(e,v,i){var t=e("./_Symbol"),n=e("./_Uint8Array"),u=e("./eq"),r=e("./_equalArrays"),c=e("./_mapToArray"),s=e("./_setToArray"),o=1,d=2,a="[object Boolean]",p="[object Date]",f="[object Error]",b="[object Map]",_="[object Number]",y="[object RegExp]",g="[object Set]",m="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",I="[object DataView]",S=t?t.prototype:void 0,O=S?S.valueOf:void 0;v.exports=function(A,E,D,P,j,k,M){switch(D){case I:if(A.byteLength!=E.byteLength||A.byteOffset!=E.byteOffset)return!1;A=A.buffer,E=E.buffer;case C:return!(A.byteLength!=E.byteLength||!k(new n(A),new n(E)));case a:case p:case _:return u(+A,+E);case f:return A.name==E.name&&A.message==E.message;case y:case m:return A==E+"";case b:var R=c;case g:var V=P&o;if(R||(R=s),A.size!=E.size&&!V)return!1;var T=M.get(A);if(T)return T==E;P|=d,M.set(A,E);var U=r(R(A),R(E),P,j,k,M);return M.delete(A),U;case w:if(O)return O.call(A)==O.call(E)}return!1}},{"./_Symbol":177,"./_Uint8Array":178,"./_equalArrays":244,"./_mapToArray":281,"./_setToArray":295,"./eq":312}],246:[function(e,v,i){var t=e("./_getAllKeys"),n=1,u=Object.prototype.hasOwnProperty;v.exports=function(r,c,s,o,d,a){var p=s&n,f=t(r),b=f.length;if(b!=t(c).length&&!p)return!1;for(var _=b;_--;){var y=f[_];if(!(p?y in c:u.call(c,y)))return!1}var g=a.get(r),m=a.get(c);if(g&&m)return g==c&&m==r;var w=!0;a.set(r,c),a.set(c,r);for(var C=p;++_<b;){var I=r[y=f[_]],S=c[y];if(o)var O=p?o(S,I,y,c,r,a):o(I,S,y,r,c,a);if(!(O===void 0?I===S||d(I,S,s,o,a):O)){w=!1;break}C||(C=y=="constructor")}if(w&&!C){var A=r.constructor,E=c.constructor;A==E||!("constructor"in r)||!("constructor"in c)||typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E||(w=!1)}return a.delete(r),a.delete(c),w}},{"./_getAllKeys":249}],247:[function(e,v,i){var t=e("./_basePropertyOf")({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});v.exports=t},{"./_basePropertyOf":219}],248:[function(e,v,i){(function(t){(function(){var n=typeof t=="object"&&t&&t.Object===Object&&t;v.exports=n}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],249:[function(e,v,i){var t=e("./_baseGetAllKeys"),n=e("./_getSymbols"),u=e("./keys");v.exports=function(r){return t(r,u,n)}},{"./_baseGetAllKeys":197,"./_getSymbols":254,"./keys":340}],250:[function(e,v,i){var t=e("./_isKeyable");v.exports=function(n,u){var r=n.__data__;return t(u)?r[typeof u=="string"?"string":"hash"]:r.map}},{"./_isKeyable":267}],251:[function(e,v,i){var t=e("./_isStrictComparable"),n=e("./keys");v.exports=function(u){for(var r=n(u),c=r.length;c--;){var s=r[c],o=u[s];r[c]=[s,o,t(o)]}return r}},{"./_isStrictComparable":270,"./keys":340}],252:[function(e,v,i){var t=e("./_baseIsNative"),n=e("./_getValue");v.exports=function(u,r){var c=n(u,r);return t(c)?c:void 0}},{"./_baseIsNative":208,"./_getValue":256}],253:[function(e,v,i){var t=e("./_Symbol"),n=Object.prototype,u=n.hasOwnProperty,r=n.toString,c=t?t.toStringTag:void 0;v.exports=function(s){var o=u.call(s,c),d=s[c];try{s[c]=void 0;var a=!0}catch{}var p=r.call(s);return a&&(o?s[c]=d:delete s[c]),p}},{"./_Symbol":177}],254:[function(e,v,i){var t=e("./_arrayFilter"),n=e("./stubArray"),u=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,c=r?function(s){return s==null?[]:(s=Object(s),t(r(s),function(o){return u.call(s,o)}))}:n;v.exports=c},{"./_arrayFilter":181,"./stubArray":352}],255:[function(e,v,i){var t=e("./_DataView"),n=e("./_Map"),u=e("./_Promise"),r=e("./_Set"),c=e("./_WeakMap"),s=e("./_baseGetTag"),o=e("./_toSource"),d="[object Map]",a="[object Promise]",p="[object Set]",f="[object WeakMap]",b="[object DataView]",_=o(t),y=o(n),g=o(u),m=o(r),w=o(c),C=s;(t&&C(new t(new ArrayBuffer(1)))!=b||n&&C(new n)!=d||u&&C(u.resolve())!=a||r&&C(new r)!=p||c&&C(new c)!=f)&&(C=function(I){var S=s(I),O=S=="[object Object]"?I.constructor:void 0,A=O?o(O):"";if(A)switch(A){case _:return b;case y:return d;case g:return a;case m:return p;case w:return f}return S}),v.exports=C},{"./_DataView":168,"./_Map":171,"./_Promise":173,"./_Set":174,"./_WeakMap":179,"./_baseGetTag":198,"./_toSource":306}],256:[function(e,v,i){v.exports=function(t,n){return t?.[n]}},{}],257:[function(e,v,i){var t=e("./_castPath"),n=e("./isArguments"),u=e("./isArray"),r=e("./_isIndex"),c=e("./isLength"),s=e("./_toKey");v.exports=function(o,d,a){for(var p=-1,f=(d=t(d,o)).length,b=!1;++p<f;){var _=s(d[p]);if(!(b=o!=null&&a(o,_)))break;o=o[_]}return b||++p!=f?b:!!(f=o==null?0:o.length)&&c(f)&&r(_,f)&&(u(o)||n(o))}},{"./_castPath":234,"./_isIndex":264,"./_toKey":305,"./isArguments":327,"./isArray":328,"./isLength":334}],258:[function(e,v,i){var t=e("./_nativeCreate");v.exports=function(){this.__data__=t?t(null):{},this.size=0}},{"./_nativeCreate":284}],259:[function(e,v,i){v.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},{}],260:[function(e,v,i){var t=e("./_nativeCreate"),n="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;v.exports=function(r){var c=this.__data__;if(t){var s=c[r];return s===n?void 0:s}return u.call(c,r)?c[r]:void 0}},{"./_nativeCreate":284}],261:[function(e,v,i){var t=e("./_nativeCreate"),n=Object.prototype.hasOwnProperty;v.exports=function(u){var r=this.__data__;return t?r[u]!==void 0:n.call(r,u)}},{"./_nativeCreate":284}],262:[function(e,v,i){var t=e("./_nativeCreate"),n="__lodash_hash_undefined__";v.exports=function(u,r){var c=this.__data__;return this.size+=this.has(u)?0:1,c[u]=t&&r===void 0?n:r,this}},{"./_nativeCreate":284}],263:[function(e,v,i){var t=e("./_Symbol"),n=e("./isArguments"),u=e("./isArray"),r=t?t.isConcatSpreadable:void 0;v.exports=function(c){return u(c)||n(c)||!!(r&&c&&c[r])}},{"./_Symbol":177,"./isArguments":327,"./isArray":328}],264:[function(e,v,i){var t=9007199254740991,n=/^(?:0|[1-9]\d*)$/;v.exports=function(u,r){var c=typeof u;return!!(r=r??t)&&(c=="number"||c!="symbol"&&n.test(u))&&u>-1&&u%1==0&&u<r}},{}],265:[function(e,v,i){var t=e("./eq"),n=e("./isArrayLike"),u=e("./_isIndex"),r=e("./isObject");v.exports=function(c,s,o){if(!r(o))return!1;var d=typeof s;return!!(d=="number"?n(o)&&u(s,o.length):d=="string"&&s in o)&&t(o[s],c)}},{"./_isIndex":264,"./eq":312,"./isArrayLike":329,"./isObject":335}],266:[function(e,v,i){var t=e("./isArray"),n=e("./isSymbol"),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;v.exports=function(c,s){if(t(c))return!1;var o=typeof c;return!(o!="number"&&o!="symbol"&&o!="boolean"&&c!=null&&!n(c))||r.test(c)||!u.test(c)||s!=null&&c in Object(s)}},{"./isArray":328,"./isSymbol":338}],267:[function(e,v,i){v.exports=function(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}},{}],268:[function(e,v,i){var t,n=e("./_coreJsData"),u=(t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";v.exports=function(r){return!!u&&u in r}},{"./_coreJsData":237}],269:[function(e,v,i){var t=Object.prototype;v.exports=function(n){var u=n&&n.constructor;return n===(typeof u=="function"&&u.prototype||t)}},{}],270:[function(e,v,i){var t=e("./isObject");v.exports=function(n){return n==n&&!t(n)}},{"./isObject":335}],271:[function(e,v,i){v.exports=function(){this.__data__=[],this.size=0}},{}],272:[function(e,v,i){var t=e("./_assocIndexOf"),n=Array.prototype.splice;v.exports=function(u){var r=this.__data__,c=t(r,u);return!(c<0)&&(c==r.length-1?r.pop():n.call(r,c,1),--this.size,!0)}},{"./_assocIndexOf":188}],273:[function(e,v,i){var t=e("./_assocIndexOf");v.exports=function(n){var u=this.__data__,r=t(u,n);return r<0?void 0:u[r][1]}},{"./_assocIndexOf":188}],274:[function(e,v,i){var t=e("./_assocIndexOf");v.exports=function(n){return t(this.__data__,n)>-1}},{"./_assocIndexOf":188}],275:[function(e,v,i){var t=e("./_assocIndexOf");v.exports=function(n,u){var r=this.__data__,c=t(r,n);return c<0?(++this.size,r.push([n,u])):r[c][1]=u,this}},{"./_assocIndexOf":188}],276:[function(e,v,i){var t=e("./_Hash"),n=e("./_ListCache"),u=e("./_Map");v.exports=function(){this.size=0,this.__data__={hash:new t,map:new(u||n),string:new t}}},{"./_Hash":169,"./_ListCache":170,"./_Map":171}],277:[function(e,v,i){var t=e("./_getMapData");v.exports=function(n){var u=t(this,n).delete(n);return this.size-=u?1:0,u}},{"./_getMapData":250}],278:[function(e,v,i){var t=e("./_getMapData");v.exports=function(n){return t(this,n).get(n)}},{"./_getMapData":250}],279:[function(e,v,i){var t=e("./_getMapData");v.exports=function(n){return t(this,n).has(n)}},{"./_getMapData":250}],280:[function(e,v,i){var t=e("./_getMapData");v.exports=function(n,u){var r=t(this,n),c=r.size;return r.set(n,u),this.size+=r.size==c?0:1,this}},{"./_getMapData":250}],281:[function(e,v,i){v.exports=function(t){var n=-1,u=Array(t.size);return t.forEach(function(r,c){u[++n]=[c,r]}),u}},{}],282:[function(e,v,i){v.exports=function(t,n){return function(u){return u!=null&&u[t]===n&&(n!==void 0||t in Object(u))}}},{}],283:[function(e,v,i){var t=e("./memoize"),n=500;v.exports=function(u){var r=t(u,function(s){return c.size===n&&c.clear(),s}),c=r.cache;return r}},{"./memoize":344}],284:[function(e,v,i){var t=e("./_getNative")(Object,"create");v.exports=t},{"./_getNative":252}],285:[function(e,v,i){var t=e("./_overArg")(Object.keys,Object);v.exports=t},{"./_overArg":289}],286:[function(e,v,i){v.exports=function(t){var n=[];if(t!=null)for(var u in Object(t))n.push(u);return n}},{}],287:[function(e,v,i){var t=e("./_freeGlobal"),n=typeof i=="object"&&i&&!i.nodeType&&i,u=n&&typeof v=="object"&&v&&!v.nodeType&&v,r=u&&u.exports===n&&t.process,c=function(){try{var s=u&&u.require&&u.require("util").types;return s||r&&r.binding&&r.binding("util")}catch{}}();v.exports=c},{"./_freeGlobal":248}],288:[function(e,v,i){var t=Object.prototype.toString;v.exports=function(n){return t.call(n)}},{}],289:[function(e,v,i){v.exports=function(t,n){return function(u){return t(n(u))}}},{}],290:[function(e,v,i){var t=e("./_apply"),n=Math.max;v.exports=function(u,r,c){return r=n(r===void 0?u.length-1:r,0),function(){for(var s=arguments,o=-1,d=n(s.length-r,0),a=Array(d);++o<d;)a[o]=s[r+o];o=-1;for(var p=Array(r+1);++o<r;)p[o]=s[o];return p[r]=c(a),t(u,this,p)}}},{"./_apply":180}],291:[function(e,v,i){var t=e("./_baseGet"),n=e("./_baseSlice");v.exports=function(u,r){return r.length<2?u:t(u,n(r,0,-1))}},{"./_baseGet":196,"./_baseSlice":223}],292:[function(e,v,i){var t=e("./_freeGlobal"),n=typeof self=="object"&&self&&self.Object===Object&&self,u=t||n||Function("return this")();v.exports=u},{"./_freeGlobal":248}],293:[function(e,v,i){var t="__lodash_hash_undefined__";v.exports=function(n){return this.__data__.set(n,t),this}},{}],294:[function(e,v,i){v.exports=function(t){return this.__data__.has(t)}},{}],295:[function(e,v,i){v.exports=function(t){var n=-1,u=Array(t.size);return t.forEach(function(r){u[++n]=r}),u}},{}],296:[function(e,v,i){var t=e("./_baseSetToString"),n=e("./_shortOut")(t);v.exports=n},{"./_baseSetToString":222,"./_shortOut":297}],297:[function(e,v,i){var t=800,n=16,u=Date.now;v.exports=function(r){var c=0,s=0;return function(){var o=u(),d=n-(o-s);if(s=o,d>0){if(++c>=t)return arguments[0]}else c=0;return r.apply(void 0,arguments)}}},{}],298:[function(e,v,i){var t=e("./_ListCache");v.exports=function(){this.__data__=new t,this.size=0}},{"./_ListCache":170}],299:[function(e,v,i){v.exports=function(t){var n=this.__data__,u=n.delete(t);return this.size=n.size,u}},{}],300:[function(e,v,i){v.exports=function(t){return this.__data__.get(t)}},{}],301:[function(e,v,i){v.exports=function(t){return this.__data__.has(t)}},{}],302:[function(e,v,i){var t=e("./_ListCache"),n=e("./_Map"),u=e("./_MapCache"),r=200;v.exports=function(c,s){var o=this.__data__;if(o instanceof t){var d=o.__data__;if(!n||d.length<r-1)return d.push([c,s]),this.size=++o.size,this;o=this.__data__=new u(d)}return o.set(c,s),this.size=o.size,this}},{"./_ListCache":170,"./_Map":171,"./_MapCache":172}],303:[function(e,v,i){v.exports=function(t,n,u){for(var r=u-1,c=t.length;++r<c;)if(t[r]===n)return r;return-1}},{}],304:[function(e,v,i){var t=e("./_memoizeCapped"),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,r=t(function(c){var s=[];return c.charCodeAt(0)===46&&s.push(""),c.replace(n,function(o,d,a,p){s.push(a?p.replace(u,"$1"):d||o)}),s});v.exports=r},{"./_memoizeCapped":283}],305:[function(e,v,i){var t=e("./isSymbol"),n=1/0;v.exports=function(u){if(typeof u=="string"||t(u))return u;var r=u+"";return r=="0"&&1/u==-n?"-0":r}},{"./isSymbol":338}],306:[function(e,v,i){var t=Function.prototype.toString;v.exports=function(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}},{}],307:[function(e,v,i){var t=/\s/;v.exports=function(n){for(var u=n.length;u--&&t.test(n.charAt(u)););return u}},{}],308:[function(e,v,i){v.exports=function(t){return function(){return t}}},{}],309:[function(e,v,i){var t=e("./isObject"),n=e("./now"),u=e("./toNumber"),r="Expected a function",c=Math.max,s=Math.min;v.exports=function(o,d,a){var p,f,b,_,y,g,m=0,w=!1,C=!1,I=!0;if(typeof o!="function")throw new TypeError(r);function S(P){var j=p,k=f;return p=f=void 0,m=P,_=o.apply(k,j)}function O(P){var j=P-g;return g===void 0||j>=d||j<0||C&&P-m>=b}function A(){var P=n();if(O(P))return E(P);y=setTimeout(A,function(j){var k=d-(j-g);return C?s(k,b-(j-m)):k}(P))}function E(P){return y=void 0,I&&p?S(P):(p=f=void 0,_)}function D(){var P=n(),j=O(P);if(p=arguments,f=this,g=P,j){if(y===void 0)return function(k){return m=k,y=setTimeout(A,d),w?S(k):_}(g);if(C)return clearTimeout(y),y=setTimeout(A,d),S(g)}return y===void 0&&(y=setTimeout(A,d)),_}return d=u(d)||0,t(a)&&(w=!!a.leading,b=(C="maxWait"in a)?c(u(a.maxWait)||0,d):b,I="trailing"in a?!!a.trailing:I),D.cancel=function(){y!==void 0&&clearTimeout(y),m=0,p=g=f=y=void 0},D.flush=function(){return y===void 0?_:E(n())},D}},{"./isObject":335,"./now":346,"./toNumber":357}],310:[function(e,v,i){var t=e("./_baseRest"),n=e("./eq"),u=e("./_isIterateeCall"),r=e("./keysIn"),c=Object.prototype,s=c.hasOwnProperty,o=t(function(d,a){d=Object(d);var p=-1,f=a.length,b=f>2?a[2]:void 0;for(b&&u(a[0],a[1],b)&&(f=1);++p<f;)for(var _=a[p],y=r(_),g=-1,m=y.length;++g<m;){var w=y[g],C=d[w];(C===void 0||n(C,c[w])&&!s.call(d,w))&&(d[w]=_[w])}return d});v.exports=o},{"./_baseRest":221,"./_isIterateeCall":265,"./eq":312,"./keysIn":341}],311:[function(e,v,i){var t=e("./_baseDifference"),n=e("./_baseFlatten"),u=e("./_baseRest"),r=e("./isArrayLikeObject"),c=u(function(s,o){return r(s)?t(s,n(o,1,r,!0)):[]});v.exports=c},{"./_baseDifference":190,"./_baseFlatten":193,"./_baseRest":221,"./isArrayLikeObject":330}],312:[function(e,v,i){v.exports=function(t,n){return t===n||t!=t&&n!=n}},{}],313:[function(e,v,i){var t=e("./_escapeHtmlChar"),n=e("./toString"),u=/[&<>"']/g,r=RegExp(u.source);v.exports=function(c){return(c=n(c))&&r.test(c)?c.replace(u,t):c}},{"./_escapeHtmlChar":247,"./toString":358}],314:[function(e,v,i){var t=e("./toString"),n=/[\\^$.*+?()[\]{}|]/g,u=RegExp(n.source);v.exports=function(r){return(r=t(r))&&u.test(r)?r.replace(n,"\\$&"):r}},{"./toString":358}],315:[function(e,v,i){var t=e("./_createFind")(e("./findIndex"));v.exports=t},{"./_createFind":240,"./findIndex":316}],316:[function(e,v,i){var t=e("./_baseFindIndex"),n=e("./_baseIteratee"),u=e("./toInteger"),r=Math.max;v.exports=function(c,s,o){var d=c==null?0:c.length;if(!d)return-1;var a=o==null?0:u(o);return a<0&&(a=r(d+a,0)),t(c,n(s,3),a)}},{"./_baseFindIndex":192,"./_baseIteratee":210,"./toInteger":356}],317:[function(e,v,i){var t=e("./_baseFindIndex"),n=e("./_baseIteratee"),u=e("./toInteger"),r=Math.max,c=Math.min;v.exports=function(s,o,d){var a=s==null?0:s.length;if(!a)return-1;var p=a-1;return d!==void 0&&(p=u(d),p=d<0?r(a+p,0):c(p,a-1)),t(s,n(o,3),p,!0)}},{"./_baseFindIndex":192,"./_baseIteratee":210,"./toInteger":356}],318:[function(e,v,i){var t=e("./_baseFlatten"),n=e("./map");v.exports=function(u,r){return t(n(u,r),1)}},{"./_baseFlatten":193,"./map":343}],319:[function(e,v,i){var t=e("./_baseFlatten");v.exports=function(n){return n!=null&&n.length?t(n,1):[]}},{"./_baseFlatten":193}],320:[function(e,v,i){v.exports=function(t){for(var n=-1,u=t==null?0:t.length,r={};++n<u;){var c=t[n];r[c[0]]=c[1]}return r}},{}],321:[function(e,v,i){var t=e("./_baseGet");v.exports=function(n,u,r){var c=n==null?void 0:t(n,u);return c===void 0?r:c}},{"./_baseGet":196}],322:[function(e,v,i){var t=e("./_baseHasIn"),n=e("./_hasPath");v.exports=function(u,r){return u!=null&&n(u,r,t)}},{"./_baseHasIn":199,"./_hasPath":257}],323:[function(e,v,i){v.exports=function(t){return t}},{}],324:[function(e,v,i){var t=e("./_baseIndexOf"),n=e("./isArrayLike"),u=e("./isString"),r=e("./toInteger"),c=e("./values"),s=Math.max;v.exports=function(o,d,a,p){o=n(o)?o:c(o),a=a&&!p?r(a):0;var f=o.length;return a<0&&(a=s(f+a,0)),u(o)?a<=f&&o.indexOf(d,a)>-1:!!f&&t(o,d,a)>-1}},{"./_baseIndexOf":200,"./isArrayLike":329,"./isString":337,"./toInteger":356,"./values":362}],325:[function(e,v,i){var t=e("./_arrayMap"),n=e("./_baseIntersection"),u=e("./_baseRest"),r=e("./_castArrayLikeObject"),c=u(function(s){var o=t(s,r);return o.length&&o[0]===s[0]?n(o):[]});v.exports=c},{"./_arrayMap":185,"./_baseIntersection":201,"./_baseRest":221,"./_castArrayLikeObject":233}],326:[function(e,v,i){var t=e("./_baseIteratee"),n=e("./_createInverter"),u=Object.prototype,r=u.hasOwnProperty,c=u.toString,s=n(function(o,d,a){d!=null&&typeof d.toString!="function"&&(d=c.call(d)),r.call(o,d)?o[d].push(a):o[d]=[a]},t);v.exports=s},{"./_baseIteratee":210,"./_createInverter":241}],327:[function(e,v,i){var t=e("./_baseIsArguments"),n=e("./isObjectLike"),u=Object.prototype,r=u.hasOwnProperty,c=u.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return n(o)&&r.call(o,"callee")&&!c.call(o,"callee")};v.exports=s},{"./_baseIsArguments":203,"./isObjectLike":336}],328:[function(e,v,i){var t=Array.isArray;v.exports=t},{}],329:[function(e,v,i){var t=e("./isFunction"),n=e("./isLength");v.exports=function(u){return u!=null&&n(u.length)&&!t(u)}},{"./isFunction":333,"./isLength":334}],330:[function(e,v,i){var t=e("./isArrayLike"),n=e("./isObjectLike");v.exports=function(u){return n(u)&&t(u)}},{"./isArrayLike":329,"./isObjectLike":336}],331:[function(e,v,i){var t=e("./_root"),n=e("./stubFalse"),u=typeof i=="object"&&i&&!i.nodeType&&i,r=u&&typeof v=="object"&&v&&!v.nodeType&&v,c=r&&r.exports===u?t.Buffer:void 0,s=(c?c.isBuffer:void 0)||n;v.exports=s},{"./_root":292,"./stubFalse":353}],332:[function(e,v,i){var t=e("./_baseIsEqual");v.exports=function(n,u){return t(n,u)}},{"./_baseIsEqual":204}],333:[function(e,v,i){var t=e("./_baseGetTag"),n=e("./isObject"),u="[object AsyncFunction]",r="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";v.exports=function(o){if(!n(o))return!1;var d=t(o);return d==r||d==c||d==u||d==s}},{"./_baseGetTag":198,"./isObject":335}],334:[function(e,v,i){var t=9007199254740991;v.exports=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}},{}],335:[function(e,v,i){v.exports=function(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}},{}],336:[function(e,v,i){v.exports=function(t){return t!=null&&typeof t=="object"}},{}],337:[function(e,v,i){var t=e("./_baseGetTag"),n=e("./isArray"),u=e("./isObjectLike"),r="[object String]";v.exports=function(c){return typeof c=="string"||!n(c)&&u(c)&&t(c)==r}},{"./_baseGetTag":198,"./isArray":328,"./isObjectLike":336}],338:[function(e,v,i){var t=e("./_baseGetTag"),n=e("./isObjectLike"),u="[object Symbol]";v.exports=function(r){return typeof r=="symbol"||n(r)&&t(r)==u}},{"./_baseGetTag":198,"./isObjectLike":336}],339:[function(e,v,i){var t=e("./_baseIsTypedArray"),n=e("./_baseUnary"),u=e("./_nodeUtil"),r=u&&u.isTypedArray,c=r?n(r):t;v.exports=c},{"./_baseIsTypedArray":209,"./_baseUnary":228,"./_nodeUtil":287}],340:[function(e,v,i){var t=e("./_arrayLikeKeys"),n=e("./_baseKeys"),u=e("./isArrayLike");v.exports=function(r){return u(r)?t(r):n(r)}},{"./_arrayLikeKeys":184,"./_baseKeys":211,"./isArrayLike":329}],341:[function(e,v,i){var t=e("./_arrayLikeKeys"),n=e("./_baseKeysIn"),u=e("./isArrayLike");v.exports=function(r){return u(r)?t(r,!0):n(r)}},{"./_arrayLikeKeys":184,"./_baseKeysIn":212,"./isArrayLike":329}],342:[function(e,v,i){v.exports=function(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}},{}],343:[function(e,v,i){var t=e("./_arrayMap"),n=e("./_baseIteratee"),u=e("./_baseMap"),r=e("./isArray");v.exports=function(c,s){return(r(c)?t:u)(c,n(s,3))}},{"./_arrayMap":185,"./_baseIteratee":210,"./_baseMap":213,"./isArray":328}],344:[function(e,v,i){var t=e("./_MapCache"),n="Expected a function";function u(r,c){if(typeof r!="function"||c!=null&&typeof c!="function")throw new TypeError(n);var s=function(){var o=arguments,d=c?c.apply(this,o):o[0],a=s.cache;if(a.has(d))return a.get(d);var p=r.apply(this,o);return s.cache=a.set(d,p)||a,p};return s.cache=new(u.Cache||t),s}u.Cache=t,v.exports=u},{"./_MapCache":172}],345:[function(e,v,i){v.exports=function(){}},{}],346:[function(e,v,i){var t=e("./_root");v.exports=function(){return t.Date.now()}},{"./_root":292}],347:[function(e,v,i){"use strict";v.exports=function(t){if(typeof t!="function")throw new Error("Parameter must be function");var n;return function(){if(t){var u=t;t=void 0,n=u.apply(this,arguments)}return n}}},{}],348:[function(e,v,i){var t=e("./_baseProperty"),n=e("./_basePropertyDeep"),u=e("./_isKey"),r=e("./_toKey");v.exports=function(c){return u(c)?t(r(c)):n(c)}},{"./_baseProperty":217,"./_basePropertyDeep":218,"./_isKey":266,"./_toKey":305}],349:[function(e,v,i){var t=e("./_baseIteratee"),n=e("./_basePullAt");v.exports=function(u,r){var c=[];if(!u||!u.length)return c;var s=-1,o=[],d=u.length;for(r=t(r,3);++s<d;){var a=u[s];r(a,s,u)&&(c.push(a),o.push(s))}return n(u,o),c}},{"./_baseIteratee":210,"./_basePullAt":220}],350:[function(e,v,i){var t=e("./_baseFlatten"),n=e("./_baseOrderBy"),u=e("./_baseRest"),r=e("./_isIterateeCall"),c=u(function(s,o){if(s==null)return[];var d=o.length;return d>1&&r(s,o[0],o[1])?o=[]:d>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),n(s,t(o,1),[])});v.exports=c},{"./_baseFlatten":193,"./_baseOrderBy":216,"./_baseRest":221,"./_isIterateeCall":265}],351:[function(e,v,i){var t=e("./_baseClamp"),n=e("./_baseToString"),u=e("./toInteger"),r=e("./toString");v.exports=function(c,s,o){return c=r(c),o=o==null?0:t(u(o),0,c.length),s=n(s),c.slice(o,o+s.length)==s}},{"./_baseClamp":189,"./_baseToString":226,"./toInteger":356,"./toString":358}],352:[function(e,v,i){v.exports=function(){return[]}},{}],353:[function(e,v,i){v.exports=function(){return!1}},{}],354:[function(e,v,i){var t=e("./debounce"),n=e("./isObject"),u="Expected a function";v.exports=function(r,c,s){var o=!0,d=!0;if(typeof r!="function")throw new TypeError(u);return n(s)&&(o="leading"in s?!!s.leading:o,d="trailing"in s?!!s.trailing:d),t(r,c,{leading:o,maxWait:c,trailing:d})}},{"./debounce":309,"./isObject":335}],355:[function(e,v,i){var t=e("./toNumber"),n=1/0,u=17976931348623157e292;v.exports=function(r){return r?(r=t(r))===n||r===-n?(r<0?-1:1)*u:r==r?r:0:r===0?r:0}},{"./toNumber":357}],356:[function(e,v,i){var t=e("./toFinite");v.exports=function(n){var u=t(n),r=u%1;return u==u?r?u-r:u:0}},{"./toFinite":355}],357:[function(e,v,i){var t=e("./_baseTrim"),n=e("./isObject"),u=e("./isSymbol"),r=NaN,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,d=parseInt;v.exports=function(a){if(typeof a=="number")return a;if(u(a))return r;if(n(a)){var p=typeof a.valueOf=="function"?a.valueOf():a;a=n(p)?p+"":p}if(typeof a!="string")return a===0?a:+a;a=t(a);var f=s.test(a);return f||o.test(a)?d(a.slice(2),f?2:8):c.test(a)?r:+a}},{"./_baseTrim":227,"./isObject":335,"./isSymbol":338}],358:[function(e,v,i){var t=e("./_baseToString");v.exports=function(n){return n==null?"":t(n)}},{"./_baseToString":226}],359:[function(e,v,i){var t=e("./_baseUniq");v.exports=function(n){return n&&n.length?t(n):[]}},{"./_baseUniq":229}],360:[function(e,v,i){var t=e("./_baseIteratee"),n=e("./_baseUniq");v.exports=function(u,r){return u&&u.length?n(u,t(r,2)):[]}},{"./_baseIteratee":210,"./_baseUniq":229}],361:[function(e,v,i){var t=e("./_arrayFilter"),n=e("./_arrayMap"),u=e("./_baseProperty"),r=e("./_baseTimes"),c=e("./isArrayLikeObject"),s=Math.max;v.exports=function(o){if(!o||!o.length)return[];var d=0;return o=t(o,function(a){if(c(a))return d=s(a.length,d),!0}),r(d,function(a){return n(o,u(a))})}},{"./_arrayFilter":181,"./_arrayMap":185,"./_baseProperty":217,"./_baseTimes":225,"./isArrayLikeObject":330}],362:[function(e,v,i){var t=e("./_baseValues"),n=e("./keys");v.exports=function(u){return u==null?[]:t(u,n(u))}},{"./_baseValues":231,"./keys":340}],363:[function(e,v,i){var t=e("./_baseRest")(e("./unzip"));v.exports=t},{"./_baseRest":221,"./unzip":361}],364:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){return function(s){return new r(c,s)}};var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=function(){function c(s,o){(0,n.default)(this,c),this.f=s,this.xform=o,this.i=-1}return(0,u.default)(c,[{key:"@@transducer/init",value:function(){return this.xform["@@transducer/init"]()}},{key:"@@transducer/result",value:function(s){return this.xform["@@transducer/result"](s)}},{key:"@@transducer/step",value:function(s,o){return this.i++,this.xform["@@transducer/step"](s,this.f(o,this.i))}}]),c}();v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":15}],365:[function(e,v,i){(function(t){(function(){"use strict";i.__esModule=!0,i.default=function(r,c){if(u)return u.call(r,c);var s=r.parentNode;if(s&&typeof s.querySelectorAll=="function"){for(var o=s.querySelectorAll(c),d=0;d<o.length;d++)if(o[d]===r)return!0}return!1};var n=t.Element&&t.Element.prototype,u=n&&(n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector);v.exports=i.default,v.exports.default=i.default}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],366:[function(e,v,i){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;v.exports=function(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var c={},s=0;s<10;s++)c["_"+String.fromCharCode(s)]=s;if(Object.getOwnPropertyNames(c).map(function(d){return c[d]}).join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(d){o[d]=d}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(r,c){for(var s,o,d=function(b){if(b==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(b)}(r),a=1;a<arguments.length;a++){for(var p in s=Object(arguments[a]))n.call(s,p)&&(d[p]=s[p]);if(t){o=t(s);for(var f=0;f<o.length;f++)u.call(s,o[f])&&(d[o[f]]=s[o[f]])}}return d}},{}],367:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t.Object.freeze||function(u){return u};i.default=n,v.exports=i.default}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],368:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=b(e("babel-runtime/helpers/extends")),n=b(e("babel-runtime/core-js/object/keys")),u=b(e("babel-runtime/helpers/classCallCheck")),r=b(e("babel-runtime/helpers/createClass")),c=b(e("babel-runtime/core-js/json/stringify")),s=b(e("immutability-helper")),o=b(e("lodash/findIndex")),d=b(e("lodash/findLastIndex")),a=b(e("lodash/invertBy")),p=b(e("lodash/sortBy")),f=b(e("./freeze"));function b(g){return g&&g.__esModule?g:{default:g}}function _(g){return(0,c.default)(g.groupId)+":"+(0,c.default)(g.id)}var y=function(){function g(m){(0,u.default)(this,g),this._items=(0,f.default)([]),this._needsSort=!1,this._get=m.get,this._set=m.set,this._maxLimit=m.maxLimit||200}return(0,r.default)(g,[{key:"_read",value:function(){var m=this._get();return m??{order:[]}}},{key:"_save",value:function(m){if(m.order.length>this._maxLimit){var w=m.order.map(function(S,O){return{item:S,index:O}}),C=(0,p.default)(w,function(S){return S.item.lastUse}).slice(0,m.order.length-this._maxLimit).map(function(S){return S.index}),I=(0,p.default)(C,function(S){return-S});m=(0,s.default)(m,{order:{$splice:I.map(function(S){return[S,1]})}})}this._set(m)}},{key:"_updatePersistedDataWithItem",value:function(m){var w=this._read(),C=(0,o.default)(w.order,function(P){return P.groupId===m.groupId&&P.id===m.id});if(C!==-1&&w.order[C].orderHint!==m.orderHint&&(w=(0,s.default)(w,{order:{$splice:[[C,1]]}}),C=-1),C!==-1)w=(0,s.default)(w,{order:{$splice:[[C,1,{groupId:m.groupId,id:m.id,orderHint:m.orderHint,lastUse:Date.now()}]]}});else{var I=void 0,S=(0,d.default)(w.order,function(P){return P.groupId===m.groupId&&P.orderHint<=m.orderHint});if(S!==-1)I=S+1;else{var O=(0,o.default)(w.order,function(P){return P.groupId===m.groupId});if(O!==-1)I=O;else{var A=(0,a.default)(w.order,function(P){return P.groupId}),E=(0,n.default)(A),D=Math.floor(Math.random()*(E.length+1));I=D===E.length?w.order.length:A[E[D]][0]}}w=(0,s.default)(w,{order:{$splice:[[I,0,{groupId:m.groupId,id:m.id,orderHint:m.orderHint,lastUse:Date.now()}]]}})}return this._save(w),w}},{key:"_sortItemsIfNecessary",value:function(m){if(this._needsSort){m||(m=this._read());var w=(0,a.default)(m.order,_);this._items=(0,f.default)((0,p.default)(this._items,function(C){var I=_(C);return Object.prototype.hasOwnProperty.call(w,I)?Number(w[I][0]):0})),this._needsSort=!1}}},{key:"addItem",value:function(m){this._updatePersistedDataWithItem(m),this._needsSort=!0,this._items=this._items.concat([(0,f.default)({groupId:m.groupId,id:m.id,orderHint:m.orderHint,value:m.value})])}},{key:"updateItemValue",value:function(m,w,C){this._items=(0,f.default)(this._items.map(function(I){return I.groupId===m&&I.id===w?(0,f.default)((0,t.default)({},I,{value:C})):I}))}},{key:"updateItemValueByIndex",value:function(m,w){this._sortItemsIfNecessary(),this._items=(0,f.default)((0,s.default)(this._items,{$splice:[[m,1,(0,f.default)((0,t.default)({},this._items[m],{value:w}))]]}))}},{key:"removeItem",value:function(m,w){this._items=(0,f.default)(this._items.filter(function(C){return C.groupId!==m||C.id!==w}))}},{key:"removeItemByIndex",value:function(m){this._sortItemsIfNecessary(),this._items=(0,f.default)((0,s.default)(this._items,{$splice:[[m,1]]}))}},{key:"moveItem",value:function(m,w){var C=this._read();this._sortItemsIfNecessary(C);var I=this._items[m],S=this._items[w],O=(0,o.default)(C.order,function(E){return E.groupId===I.groupId&&E.id===I.id}),A=(0,o.default)(C.order,function(E){return E.groupId===S.groupId&&E.id===S.id});C=(0,s.default)(C,{order:{$splice:[[O,1],[A,0,C.order[O]]]}}),this._save(C),this._needsSort=!0}},{key:"getOrderedItems",value:function(){return this._sortItemsIfNecessary(),this._items}},{key:"reload",value:function(){this._needsSort=!0}}]),g}();i.default=y,v.exports=i.default},{"./freeze":367,"babel-runtime/core-js/json/stringify":35,"babel-runtime/core-js/object/keys":38,"babel-runtime/helpers/classCallCheck":39,"babel-runtime/helpers/createClass":40,"babel-runtime/helpers/extends":41,"immutability-helper":369,"lodash/findIndex":316,"lodash/findLastIndex":317,"lodash/invertBy":326,"lodash/sortBy":350}],369:[function(e,v,i){var t=e("invariant"),n=Object.prototype.hasOwnProperty,u=Array.prototype.splice,r=Object.prototype.toString,c=function(m){return r.call(m).slice(8,-1)},s=Object.assign||function(m,w){return o(w).forEach(function(C){n.call(w,C)&&(m[C]=w[C])}),m},o=typeof Object.getOwnPropertySymbols=="function"?function(m){return Object.keys(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.keys(m)};function d(m){if(Array.isArray(m))return s(m.constructor(m.length),m);if(c(m)==="Map")return new Map(m);if(c(m)==="Set")return new Set(m);if(m&&typeof m=="object"){var w=Object.getPrototypeOf(m);return s(Object.create(w),m)}return m}function a(){var m=s({},p);return w.extend=function(C,I){m[C]=I},w.isEquals=function(C,I){return C===I},w;function w(C,I){typeof I=="function"&&(I={$apply:I}),Array.isArray(C)&&Array.isArray(I)||t(!Array.isArray(I),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),t(typeof I=="object"&&I!==null,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(m).join(", "));var S=C;return o(I).forEach(function(O){if(n.call(m,O)){var A=C===S;S=m[O](I[O],S,I,C),A&&w.isEquals(S,C)&&(S=C)}else{var E=c(C)==="Map"?w(C.get(O),I[O]):w(C[O],I[O]),D=c(S)==="Map"?S.get(O):S[O];w.isEquals(E,D)&&(E!==void 0||n.call(C,O))||(S===C&&(S=d(C)),c(S)==="Map"?S.set(O,E):S[O]=E)}}),S}}var p={$push:function(m,w,C){return b(w,C,"$push"),m.length?w.concat(m):w},$unshift:function(m,w,C){return b(w,C,"$unshift"),m.length?m.concat(w):w},$splice:function(m,w,C,I){return function(S,O){t(Array.isArray(S),"Expected $splice target to be an array; got %s",S),y(O.$splice)}(w,C),m.forEach(function(S){y(S),w===I&&S.length&&(w=d(I)),u.apply(w,S)}),w},$set:function(m,w,C){return function(I){t(Object.keys(I).length===1,"Cannot have more than one key in an object with $set")}(C),m},$toggle:function(m,w){_(m,"$toggle");var C=m.length?d(w):w;return m.forEach(function(I){C[I]=!w[I]}),C},$unset:function(m,w,C,I){return _(m,"$unset"),m.forEach(function(S){Object.hasOwnProperty.call(w,S)&&(w===I&&(w=d(I)),delete w[S])}),w},$add:function(m,w,C,I){return g(w,"$add"),_(m,"$add"),c(w)==="Map"?m.forEach(function(S){var O=S[0],A=S[1];w===I&&w.get(O)!==A&&(w=d(I)),w.set(O,A)}):m.forEach(function(S){w!==I||w.has(S)||(w=d(I)),w.add(S)}),w},$remove:function(m,w,C,I){return g(w,"$remove"),_(m,"$remove"),m.forEach(function(S){w===I&&w.has(S)&&(w=d(I)),w.delete(S)}),w},$merge:function(m,w,C,I){var S,O;return S=w,t((O=m)&&typeof O=="object","update(): $merge expects a spec of type 'object'; got %s",O),t(S&&typeof S=="object","update(): $merge expects a target of type 'object'; got %s",S),o(m).forEach(function(A){m[A]!==w[A]&&(w===I&&(w=d(I)),w[A]=m[A])}),w},$apply:function(m,w){var C;return t(typeof(C=m)=="function","update(): expected spec of $apply to be a function; got %s.",C),m(w)}},f=a();function b(m,w,C){t(Array.isArray(m),"update(): expected target of %s to be an array; got %s.",C,m),_(w[C],C)}function _(m,w){t(Array.isArray(m),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",w,m)}function y(m){t(Array.isArray(m),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",m)}function g(m,w){var C=c(m);t(C==="Map"||C==="Set","update(): %s expects a target of type Set or Map; got %s",w,C)}v.exports=f,v.exports.default=f,v.exports.newContext=a},{invariant:152}],370:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return function(r){return(0,n.default)(r,u)}};var n=t(e("matches-selector-ng"));v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/interopRequireDefault":15,"matches-selector-ng":365}],371:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function a(p,f){var b=f.map(function(_){if(typeof _=="string"){var y=(0,s.default)(_);return function(j){return(0,d.default)(j,y)}}if(_.$or){var g=_.$or.map(function(j){return a(p,j)});return function(j){return(0,c.default)(g.map(function(k){return k(j)}))}}if(_.$watch){var m=_.$watch,w=m.attributeFilter,C=m.cond,I=typeof C=="function"?C:(0,s.default)(C);return function(j){return(0,o.default)(j,w,I)}}if(_.$log){var S=_.$log,O=function(j){return!0};return function(j){return(0,r.default)(j,O)}}if(_.$filter){var A=_.$filter,E=function(j){var k=j.el;return A(k)};return function(j){return(0,r.default)(j,E)}}if(_.$map){var D=_.$map,P=n.default.compose(n.default.map(function(j){return{el:D(j.el),parents:j.parents}}),n.default.filter(function(j){return j.el!=null}));return function(j){return(0,u.default)(j,P)}}throw new Error("Invalid selector item: ".concat(JSON.stringify(_)))});return b.reduce(function(_,y){return function(g){return y(_(g))}},function(_){return _})};var n=t(e("transducers.js")),u=t(e("live-set/transduce")),r=t(e("live-set/filter")),c=t(e("live-set/merge")),s=t(e("./createCssFn")),o=t(e("./watchMutations")),d=t(e("./watchFilteredChildren"));v.exports=i.default,v.exports.default=i.default},{"./createCssFn":370,"./watchFilteredChildren":372,"./watchMutations":373,"@babel/runtime/helpers/interopRequireDefault":15,"live-set/filter":160,"live-set/merge":165,"live-set/transduce":167,"transducers.js":453}],372:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return new n.default({scheduler:u.getScheduler(),read:function(){throw new Error},listen:function(c,s){c(new Set);var o=new Map,d=new Map;function a(f){function b(g){if(g.nodeType===1&&r(g)){var m={el:g,parents:f.parents};d.set(g,m),s.add(m)}}function _(g){if(g.nodeType===1){var m=d.get(g);m&&(d.delete(g),s.remove(m))}}Array.prototype.forEach.call(f.el.children,b);var y=new MutationObserver(function(g){if(g.length>1){var m=new Set,w=[];g.forEach(function(C){for(var I=C.addedNodes,S=C.removedNodes,O=0,A=S.length;O<A;O++)S[O].nodeType===1&&m.add(S[O]);for(var E=0,D=I.length;E<D;E++){var P=I[E];P.nodeType===1&&(m.has(P)?m.delete(P):w.push(P))}}),w.forEach(b),m.forEach(_)}else g.forEach(function(C){Array.prototype.forEach.call(C.addedNodes,b),Array.prototype.forEach.call(C.removedNodes,_)})});y.observe(f.el,{childList:!0}),o.set(f,{observer:y,removedNode:_})}var p=u.subscribe({start:function(){u.values().forEach(a)},next:function(f){f.forEach(function(b){b.type==="add"?a(b.value):b.type==="remove"&&function(_){var y=o.get(_);if(!y)throw new Error("Should not happen: Unseen ElementContext removed");y.observer.takeRecords().forEach(function(g){Array.prototype.forEach.call(g.removedNodes,y.removedNode)}),y.observer.disconnect(),Array.prototype.forEach.call(_.el.children,y.removedNode),o.delete(_)}(b.value)})}});return{unsubscribe:function(){p.unsubscribe(),o.forEach(function(f){f.observer.disconnect()})},pullChanges:function(){p.pullChanges()}}}})};var n=t(e("live-set"));v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],373:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r,c){return new n.default({scheduler:u.getScheduler(),read:function(){throw new Error},listen:function(s,o){s(new Set);var d=new Map;function a(f){var b=new MutationObserver(function(y){y.length!==0&&(c(f.el)?_.passed||(_.passed=!0,o.add(f)):_.passed&&(_.passed=!1,o.remove(f)))}),_={mo:b,passed:!1};c(f.el)&&(_.passed=!0,o.add(f)),b.observe(f.el,{attributes:!0,attributeFilter:r}),d.set(f,_)}var p=u.subscribe({start:function(){u.values().forEach(a)},next:function(f){f.forEach(function(b){b.type==="add"?a(b.value):b.type==="remove"&&function(_){var y=d.get(_);if(!y)throw new Error("Should not happen: Unseen ElementContext removed");y.mo.disconnect(),y.passed&&o.remove(_),d.delete(_)}(b.value)})}});return{unsubscribe:function(){p.unsubscribe(),d.forEach(function(f){f.mo.disconnect()})},pullChanges:function(){p.pullChanges()}}}})};var n=t(e("live-set"));v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],374:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=t(e("live-set")),s=t(e("live-set/merge")),o=t(e("live-set/flatMapR")),d=t(e("live-set/Scheduler")),a=e("tag-tree"),p=t(e("./watcherFinderMerger")),f=t(e("./createTransformer"));function b(y){var g=new Map,m=[];return Object.keys(y.tags).forEach(function(w){var C=y.tags[w],I=C.ownedBy;m.push({tag:w,ownedBy:I}),g.set(w,C)}),Object.keys(y.finders).concat(y.watchers.map(function(w){return w.tag})).forEach(function(w){g.has(w)||(g.set(w,{ownedBy:[]}),m.push({tag:w}))}),{map:g,list:m}}var _=function(){function y(g,m){var w,C=this;if((0,n.default)(this,y),(0,r.default)(this,"tree",void 0),(0,r.default)(this,"_scheduler",new d.default),(0,r.default)(this,"_treeController",void 0),(0,r.default)(this,"_rootMatchedSet",void 0),(0,r.default)(this,"_ecSources",void 0),(0,r.default)(this,"_logError",void 0),(0,r.default)(this,"_options",void 0),(0,r.default)(this,"_tagOptions",void 0),(0,r.default)(this,"_tagsList",void 0),(0,r.default)(this,"_subscriptions",[]),g.nodeType===Node.DOCUMENT_NODE){if(!(w=g.documentElement))throw new Error("missing documentElement")}else w=g;this._options=m,this._logError=m.logError||function(A){setTimeout(function(){throw A},0)};var I=b(this._options),S=I.map,O=I.list;this._tagOptions=S,this._tagsList=O,this.tree=new a.TagTree({root:w,tags:O,executor:function(A){C._treeController=A}}),this._rootMatchedSet=c.default.constant(new Set([{el:this.tree.getValue(),parents:[{tag:null,node:this.tree}]}]),{scheduler:this._scheduler}),this._setupWatchersAndFinders()}return(0,u.default)(y,[{key:"_setupWatchersAndFinders",value:function(){var g=this,m=new Set;this._options.watchers.forEach(function(w){m.add(w.tag)}),this._ecSources=new Map(this._tagsList.map(function(w){var C=w.tag,I=g._tagOptions.get(C);if(!I)throw new Error;var S=new Set(I.ownedBy||[]),O=c.default.active(null,{scheduler:g._scheduler}),A=O.liveSet,E=O.controller,D=m.has(C)?(0,o.default)(A,function(R){return R}):null,P=g._options.finders[C],j=P?(0,p.default)(g._scheduler,g.tree,C,I,D,P,g._logError):D||c.default.constant(new Set,{scheduler:g._scheduler}),k=new Map,M=new c.default({scheduler:g._scheduler,read:function(){throw new Error},listen:function(R,V){var T=new Map,U=function(W){var Q=W.el,X=function(J){for(var he,ae=J.length-1;ae>=0;ae--)if(J[ae].tag==null||S.has(J[ae].tag)){he=J[ae].node;break}if(!he)throw new Error;return he}(W.parents),oe=g._treeController.addTaggedValue(X,C,Q);return k.has(Q)&&g._logError(new Error("PageParserTree(".concat(C,") watcher received element twice")),Q),k.set(Q,oe),{el:Q,parents:W.parents.concat([{tag:C,node:oe}])}};return j.subscribe({start:function(){var W=new Set;j.values().forEach(function(Q){var X=U(Q);T.set(Q,X),W.add(X)}),R(W)},next:function(W){var Q=new Set;W.length>1&&W.forEach(function(X){X.type==="remove"&&Q.add(X.value)}),W.forEach(function(X){if(X.type==="add"){if(Q.has(X.value))return;var oe=U(X.value);T.set(X.value,oe),V.add(oe)}else if(X.type==="remove"){var J=T.get(X.value);if(!J)return;T.delete(X.value),V.remove(J);var he=k.get(J.el);if(!he)throw new Error("Should not happen: received removal of unseen element");k.delete(J.el);var ae=he.getParent();ae&&ae.ownsNode(he)&&g._treeController.removeTaggedNode(ae,C,he)}})},error:function(W){V.error(W)},complete:function(){V.end()}})}});return g._subscriptions.push(M.subscribe({})),[C,{liveSet:A,controller:E,ecSet:M}]})),this._options.watchers.forEach(function(w){var C=w.sources,I=w.selectors,S=w.tag,O=C.map(function(P){if(!P)return g._rootMatchedSet;var j=g._ecSources.get(P);if(!j)throw new Error("Unknown source: "+P);return j.ecSet}),A=O.length===1?O[0]:(0,s.default)(O),E=(0,f.default)(g._scheduler,I),D=g._ecSources.get(S);if(!D)throw new Error;D.controller.add(E(A))}),this._scheduler.flush()}},{key:"_dumpWithoutEnd",value:function(){var g=this;this._subscriptions.forEach(function(m){m.unsubscribe()}),this._subscriptions.length=0,this.tree.getOwned().forEach(function(m,w){m.values().forEach(function(C){g._treeController.removeTaggedNode(g.tree,w,C)})})}},{key:"dump",value:function(){this._dumpWithoutEnd(),this._treeController.end()}},{key:"replaceOptions",value:function(g){var m="replaceOptions does not support tag changes",w=b(g).map;if(this._tagOptions.size!==w.size)throw new Error(m);this._tagOptions.forEach(function(C,I){var S=w.get(I);if(!S)throw new Error(m);var O=C.ownedBy||[],A=new Set(S.ownedBy||[]);if(O.length!==A.size)throw new Error(m);O.forEach(function(E){if(!A.has(E))throw new Error(m)})}),this._dumpWithoutEnd(),this._options=g,this._setupWatchersAndFinders()}}]),y}();i.default=_,v.exports=i.default,v.exports.default=i.default},{"./createTransformer":371,"./watcherFinderMerger":375,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163,"live-set/Scheduler":159,"live-set/flatMapR":162,"live-set/merge":165,"tag-tree":452}],375:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o,d,a,p,f,b){return new r.default({scheduler:s,read:function(){throw new Error("Should not happen")},listen:function(_,y){var g=new Set,m=new Set,w=new Set,C=new Set,I=null;p?I=p.subscribe({start:function(){if(!p)throw new Error;var D=p.values();_(D),D.forEach(function(P){w.add(P.el),g.add(P.el),m.add(P)})},next:function(D){D.forEach(function(P){if(P.type==="add"){var j=P.value.el;w.add(j),g.has(j)?b(new Error("PageParserTree(".concat(d,") watcher found element already found by finder")),j):(g.add(j),m.add(P.value),y.add(P.value))}else if(P.type==="remove"){var k=P.value.el;w.delete(k),C.delete(k),m.has(P.value)&&(g.delete(k),m.delete(P.value),y.remove(P.value))}})},error:function(D){y.error(D)},complete:function(){y.end()}}):_(new Set);var S=null;if(f){var O=f.fn,A=f.interval,E=a.ownedBy||[];S=function(D,P,j){var k=Date.now(),M=null,R=null,V=function(){R=null,j(),T()},T=function(){var U;if(D==null)U=5e3+1e3*Math.random();else if(typeof D=="number")U=D;else{if(typeof D!="function")throw new Error("interval has wrong type: ".concat((0,u.default)(D)));U=D(P.size,Date.now()-k)}U!==1/0&&(M=setTimeout(function(){M=null,t.requestIdleCallback&&t.cancelIdleCallback?R=t.requestIdleCallback(V,{timeout:U}):V()},U))};return T(),{dispose:function(){M!=null&&clearTimeout(M),R!=null&&t.cancelIdleCallback(R)}}}(A,g,function(){for(var D=new Set,P=O(o.getValue()),j=0,k=P.length;j<k;j++){var M=P[j];if(D.add(M),!g.has(M)){g.add(M);var R=c(M,o,E);m.add(R),y.add(R),p&&(b(new Error("PageParserTree(".concat(d,") finder found element missed by watcher")),M),I&&I.pullChanges())}}m.forEach(function(V){var T=V.el;D.has(T)||(w.has(T)?C.has(T)||(C.add(T),b(new Error("PageParserTree(".concat(d,") watcher found element missed by finder")),T)):(m.delete(V),g.delete(T),y.remove(V),I&&I.pullChanges()))}),s.flush()})}return{unsubscribe:function(){S?.dispose(),I&&I.unsubscribe()},pullChanges:function(){I&&I.pullChanges()}}}})};var u=n(e("@babel/runtime/helpers/typeof")),r=n(e("live-set"));function c(s,o,d){var a=null;return{el:s,get parents(){if(!a){for(var p=o.getValue(),f=[],b=s.parentElement;b;){for(var _=o.getNodesForValue(b),y=0,g=_.length;y<g;y++){var m=_[y],w=m.getTag();if(w==null||d.indexOf(w)>=0){f.push({tag:w,node:m});break}}if(b===p)break;b=b.parentElement}f.reverse(),a=f}return a}}}v.exports=i.default,v.exports.default=i.default}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/typeof":27,"live-set":163}],376:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){return new Promise(function(u){setTimeout(function(){u(n)},t)})}},{}],377:[function(e,v,i){(function(t){(function(){(function(){var n,u,r;typeof performance<"u"&&performance!==null&&performance.now?v.exports=function(){return performance.now()}:t!=null&&t.hrtime?(v.exports=function(){return(n()-r)/1e6},u=t.hrtime,r=(n=function(){var c;return 1e9*(c=u())[0]+c[1]})()):Date.now?(v.exports=function(){return Date.now()-r},r=Date.now()):(v.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:399}],378:[function(e,v,i){"use strict";i.__esModule=!0;var t=g(e("./processor")),n=g(e("./selectors/attribute")),u=g(e("./selectors/className")),r=g(e("./selectors/combinator")),c=g(e("./selectors/comment")),s=g(e("./selectors/id")),o=g(e("./selectors/nesting")),d=g(e("./selectors/pseudo")),a=g(e("./selectors/root")),p=g(e("./selectors/selector")),f=g(e("./selectors/string")),b=g(e("./selectors/tag")),_=g(e("./selectors/universal")),y=function(w){if(w&&w.__esModule)return w;var C={};if(w!=null)for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&(C[I]=w[I]);return C.default=w,C}(e("./selectors/types"));function g(w){return w&&w.__esModule?w:{default:w}}var m=function(w){return new t.default(w)};m.attribute=function(w){return new n.default(w)},m.className=function(w){return new u.default(w)},m.combinator=function(w){return new r.default(w)},m.comment=function(w){return new c.default(w)},m.id=function(w){return new s.default(w)},m.nesting=function(w){return new o.default(w)},m.pseudo=function(w){return new d.default(w)},m.root=function(w){return new a.default(w)},m.selector=function(w){return new p.default(w)},m.string=function(w){return new f.default(w)},m.tag=function(w){return new b.default(w)},m.universal=function(w){return new _.default(w)},Object.keys(y).forEach(function(w){w!=="__esModule"&&(m[w]=y[w])}),i.default=m,v.exports=i.default},{"./processor":380,"./selectors/attribute":381,"./selectors/className":382,"./selectors/combinator":383,"./selectors/comment":384,"./selectors/id":386,"./selectors/nesting":388,"./selectors/pseudo":390,"./selectors/root":391,"./selectors/selector":392,"./selectors/string":393,"./selectors/tag":394,"./selectors/types":395,"./selectors/universal":396}],379:[function(e,v,i){"use strict";i.__esModule=!0;var t=function(){function A(E,D){for(var P=0;P<D.length;P++){var j=D[P];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(E,j.key,j)}}return function(E,D,P){return D&&A(E.prototype,D),P&&A(E,P),E}}(),n=S(e("flatten")),u=S(e("indexes-of")),r=S(e("uniq")),c=S(e("./selectors/root")),s=S(e("./selectors/selector")),o=S(e("./selectors/className")),d=S(e("./selectors/comment")),a=S(e("./selectors/id")),p=S(e("./selectors/tag")),f=S(e("./selectors/string")),b=S(e("./selectors/pseudo")),_=S(e("./selectors/attribute")),y=S(e("./selectors/universal")),g=S(e("./selectors/combinator")),m=S(e("./selectors/nesting")),w=S(e("./sortAscending")),C=S(e("./tokenize")),I=function(A){if(A&&A.__esModule)return A;var E={};if(A!=null)for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(E[D]=A[D]);return E.default=A,E}(e("./selectors/types"));function S(A){return A&&A.__esModule?A:{default:A}}var O=function(){function A(E){(function(P,j){if(!(P instanceof j))throw new TypeError("Cannot call a class as a function")})(this,A),this.input=E,this.lossy=E.options.lossless===!1,this.position=0,this.root=new c.default;var D=new s.default;return this.root.append(D),this.current=D,this.lossy?this.tokens=(0,C.default)({safe:E.safe,css:E.css.trim()}):this.tokens=(0,C.default)(E),this.loop()}return A.prototype.attribute=function(){var E="",D=void 0,P=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[0]!=="]";)E+=this.tokens[this.position][1],this.position++;this.position!==this.tokens.length||~E.indexOf("]")||this.error("Expected a closing square bracket.");var j=E.split(/((?:[*~^$|]?=))([^]*)/),k=j[0].split(/(\|)/g),M={operator:j[1],value:j[2],source:{start:{line:P[2],column:P[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:P[4]};if(k.length>1?(k[0]===""&&(k[0]=!0),M.attribute=this.parseValue(k[2]),M.namespace=this.parseNamespace(k[0])):M.attribute=this.parseValue(j[0]),D=new _.default(M),j[2]){var R=j[2].split(/(\s+i\s*?)$/),V=R[0].trim();D.value=this.lossy?V:R[0],R[1]&&(D.insensitive=!0,this.lossy||(D.raws.insensitive=R[1])),D.quoted=V[0]==="'"||V[0]==='"',D.raws.unquoted=D.quoted?V.slice(1,-1):V}this.newNode(D),this.position++},A.prototype.combinator=function(){if(this.currToken[1]==="|")return this.namespace();for(var E=new g.default({value:"",source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]});this.position<this.tokens.length&&this.currToken&&(this.currToken[0]==="space"||this.currToken[0]==="combinator");)this.nextToken&&this.nextToken[0]==="combinator"?(E.spaces.before=this.parseSpace(this.currToken[1]),E.source.start.line=this.nextToken[2],E.source.start.column=this.nextToken[3],E.source.end.column=this.nextToken[3],E.source.end.line=this.nextToken[2],E.sourceIndex=this.nextToken[4]):this.prevToken&&this.prevToken[0]==="combinator"?E.spaces.after=this.parseSpace(this.currToken[1]):this.currToken[0]==="combinator"?E.value=this.currToken[1]:this.currToken[0]==="space"&&(E.value=this.parseSpace(this.currToken[1]," ")),this.position++;return this.newNode(E)},A.prototype.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;var E=new s.default;this.current.parent.append(E),this.current=E,this.position++},A.prototype.comment=function(){var E=new d.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]});this.newNode(E),this.position++},A.prototype.error=function(E){throw new this.input.error(E)},A.prototype.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.")},A.prototype.missingParenthesis=function(){return this.error("Expected opening parenthesis.")},A.prototype.missingSquareBracket=function(){return this.error("Expected opening square bracket.")},A.prototype.namespace=function(){var E=this.prevToken&&this.prevToken[1]||!0;return this.nextToken[0]==="word"?(this.position++,this.word(E)):this.nextToken[0]==="*"?(this.position++,this.universal(E)):void 0},A.prototype.nesting=function(){this.newNode(new m.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]})),this.position++},A.prototype.parentheses=function(){var E=this.current.last;if(E&&E.type===I.PSEUDO){var D=new s.default,P=this.current;E.append(D),this.current=D;var j=1;for(this.position++;this.position<this.tokens.length&&j;)this.currToken[0]==="("&&j++,this.currToken[0]===")"&&j--,j?this.parse():(D.parent.source.end.line=this.currToken[2],D.parent.source.end.column=this.currToken[3],this.position++);j&&this.error("Expected closing parenthesis."),this.current=P}else{var k=1;for(this.position++,E.value+="(";this.position<this.tokens.length&&k;)this.currToken[0]==="("&&k++,this.currToken[0]===")"&&k--,E.value+=this.parseParenthesisToken(this.currToken),this.position++;k&&this.error("Expected closing parenthesis.")}},A.prototype.pseudo=function(){for(var E=this,D="",P=this.currToken;this.currToken&&this.currToken[0]===":";)D+=this.currToken[1],this.position++;if(!this.currToken)return this.error("Expected pseudo-class or pseudo-element");if(this.currToken[0]==="word"){var j=void 0;this.splitWord(!1,function(k,M){D+=k,j=new b.default({value:D,source:{start:{line:P[2],column:P[3]},end:{line:E.currToken[4],column:E.currToken[5]}},sourceIndex:P[4]}),E.newNode(j),M>1&&E.nextToken&&E.nextToken[0]==="("&&E.error("Misplaced parenthesis.")})}else this.error('Unexpected "'+this.currToken[0]+'" found.')},A.prototype.space=function(){var E=this.currToken;this.position===0||this.prevToken[0]===","||this.prevToken[0]==="("?(this.spaces=this.parseSpace(E[1]),this.position++):this.position===this.tokens.length-1||this.nextToken[0]===","||this.nextToken[0]===")"?(this.current.last.spaces.after=this.parseSpace(E[1]),this.position++):this.combinator()},A.prototype.string=function(){var E=this.currToken;this.newNode(new f.default({value:this.currToken[1],source:{start:{line:E[2],column:E[3]},end:{line:E[4],column:E[5]}},sourceIndex:E[6]})),this.position++},A.prototype.universal=function(E){var D=this.nextToken;if(D&&D[1]==="|")return this.position++,this.namespace();this.newNode(new y.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),E),this.position++},A.prototype.splitWord=function(E,D){for(var P=this,j=this.nextToken,k=this.currToken[1];j&&j[0]==="word";){this.position++;var M=this.currToken[1];if(k+=M,M.lastIndexOf("\\")===M.length-1){var R=this.nextToken;R&&R[0]==="space"&&(k+=this.parseSpace(R[1]," "),this.position++)}j=this.nextToken}var V=(0,u.default)(k,"."),T=(0,u.default)(k,"#"),U=(0,u.default)(k,"#{");U.length&&(T=T.filter(function(Q){return!~U.indexOf(Q)}));var W=(0,w.default)((0,r.default)((0,n.default)([[0],V,T])));W.forEach(function(Q,X){var oe=W[X+1]||k.length,J=k.slice(Q,oe);if(X===0&&D)return D.call(P,J,W.length);var he=void 0;he=~V.indexOf(Q)?new o.default({value:J.slice(1),source:{start:{line:P.currToken[2],column:P.currToken[3]+Q},end:{line:P.currToken[4],column:P.currToken[3]+(oe-1)}},sourceIndex:P.currToken[6]+W[X]}):~T.indexOf(Q)?new a.default({value:J.slice(1),source:{start:{line:P.currToken[2],column:P.currToken[3]+Q},end:{line:P.currToken[4],column:P.currToken[3]+(oe-1)}},sourceIndex:P.currToken[6]+W[X]}):new p.default({value:J,source:{start:{line:P.currToken[2],column:P.currToken[3]+Q},end:{line:P.currToken[4],column:P.currToken[3]+(oe-1)}},sourceIndex:P.currToken[6]+W[X]}),P.newNode(he,E)}),this.position++},A.prototype.word=function(E){var D=this.nextToken;return D&&D[1]==="|"?(this.position++,this.namespace()):this.splitWord(E)},A.prototype.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.root},A.prototype.parse=function(E){switch(this.currToken[0]){case"space":this.space();break;case"comment":this.comment();break;case"(":this.parentheses();break;case")":E&&this.missingParenthesis();break;case"[":this.attribute();break;case"]":this.missingSquareBracket();break;case"at-word":case"word":this.word();break;case":":this.pseudo();break;case";":this.missingBackslash();break;case",":this.comma();break;case"*":this.universal();break;case"&":this.nesting();break;case"combinator":this.combinator();break;case"string":this.string()}},A.prototype.parseNamespace=function(E){if(this.lossy&&typeof E=="string"){var D=E.trim();return!D.length||D}return E},A.prototype.parseSpace=function(E,D){return this.lossy?D||"":E},A.prototype.parseValue=function(E){return this.lossy&&E&&typeof E=="string"?E.trim():E},A.prototype.parseParenthesisToken=function(E){return this.lossy?E[0]==="space"?this.parseSpace(E[1]," "):this.parseValue(E[1]):E[1]},A.prototype.newNode=function(E,D){return D&&(E.namespace=this.parseNamespace(D)),this.spaces&&(E.spaces.before=this.spaces,this.spaces=""),this.current.append(E)},t(A,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),A}();i.default=O,v.exports=i.default},{"./selectors/attribute":381,"./selectors/className":382,"./selectors/combinator":383,"./selectors/comment":384,"./selectors/id":386,"./selectors/nesting":388,"./selectors/pseudo":390,"./selectors/root":391,"./selectors/selector":392,"./selectors/string":393,"./selectors/tag":394,"./selectors/types":395,"./selectors/universal":396,"./sortAscending":397,"./tokenize":398,flatten:141,"indexes-of":150,uniq:456}],380:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=function(){function s(o,d){for(var a=0;a<d.length;a++){var p=d[a];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}return function(o,d,a){return d&&s(o.prototype,d),a&&s(o,a),o}}(),u=e("./parser"),r=(t=u)&&t.__esModule?t:{default:t},c=function(){function s(o){return function(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function")}(this,s),this.func=o||function(){},this}return s.prototype.process=function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=new r.default({css:o,error:function(p){throw new Error(p)},options:d});return this.res=a,this.func(a),this},n(s,[{key:"result",get:function(){return String(this.res)}}]),s}();i.default=c,v.exports=i.default},{"./parser":379}],381:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./namespace"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.ATTRIBUTE,a.raws={},a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o.prototype.toString=function(){var d=[this.spaces.before,"[",this.ns,this.attribute];return this.operator&&d.push(this.operator),this.value&&d.push(this.value),this.raws.insensitive?d.push(this.raws.insensitive):this.insensitive&&d.push(" i"),d.push("]"),d.concat(this.spaces.after).join("")},o}(u.default);i.default=c,v.exports=i.default},{"./namespace":387,"./types":395}],382:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./namespace"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.CLASS,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o.prototype.toString=function(){return[this.spaces.before,this.ns,String("."+this.value),this.spaces.after].join("")},o}(u.default);i.default=c,v.exports=i.default},{"./namespace":387,"./types":395}],383:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./node"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.COMBINATOR,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./node":389,"./types":395}],384:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./node"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.COMMENT,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./node":389,"./types":395}],385:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=function(){function o(d,a){for(var p=0;p<a.length;p++){var f=a[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,a,p){return a&&o(d.prototype,a),p&&o(d,p),d}}(),u=e("./node"),r=(t=u)&&t.__esModule?t:{default:t},c=function(o){if(o&&o.__esModule)return o;var d={};if(o!=null)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(d[a]=o[a]);return d.default=o,d}(e("./types")),s=function(o){function d(a){(function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")})(this,d);var p=function(f,b){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?f:b}(this,o.call(this,a));return p.nodes||(p.nodes=[]),p}return function(a,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);a.prototype=Object.create(p&&p.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(a,p):a.__proto__=p)}(d,o),d.prototype.append=function(a){return a.parent=this,this.nodes.push(a),this},d.prototype.prepend=function(a){return a.parent=this,this.nodes.unshift(a),this},d.prototype.at=function(a){return this.nodes[a]},d.prototype.index=function(a){return typeof a=="number"?a:this.nodes.indexOf(a)},d.prototype.removeChild=function(a){a=this.index(a),this.at(a).parent=void 0,this.nodes.splice(a,1);var p=void 0;for(var f in this.indexes)(p=this.indexes[f])>=a&&(this.indexes[f]=p-1);return this},d.prototype.removeAll=function(){var a=this.nodes,p=Array.isArray(a),f=0;for(a=p?a:a[Symbol.iterator]();;){var b;if(p){if(f>=a.length)break;b=a[f++]}else{if((f=a.next()).done)break;b=f.value}b.parent=void 0}return this.nodes=[],this},d.prototype.empty=function(){return this.removeAll()},d.prototype.insertAfter=function(a,p){var f=this.index(a);this.nodes.splice(f+1,0,p);var b=void 0;for(var _ in this.indexes)f<=(b=this.indexes[_])&&(this.indexes[_]=b+this.nodes.length);return this},d.prototype.insertBefore=function(a,p){var f=this.index(a);this.nodes.splice(f,0,p);var b=void 0;for(var _ in this.indexes)f<=(b=this.indexes[_])&&(this.indexes[_]=b+this.nodes.length);return this},d.prototype.each=function(a){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var p=this.lastEach;if(this.indexes[p]=0,this.length){for(var f=void 0,b=void 0;this.indexes[p]<this.length&&(f=this.indexes[p],(b=a(this.at(f),f))!==!1);)this.indexes[p]+=1;return delete this.indexes[p],b!==!1&&void 0}},d.prototype.walk=function(a){return this.each(function(p,f){var b=a(p,f);if(b!==!1&&p.length&&(b=p.walk(a)),b===!1)return!1})},d.prototype.walkAttributes=function(a){var p=this;return this.walk(function(f){if(f.type===c.ATTRIBUTE)return a.call(p,f)})},d.prototype.walkClasses=function(a){var p=this;return this.walk(function(f){if(f.type===c.CLASS)return a.call(p,f)})},d.prototype.walkCombinators=function(a){var p=this;return this.walk(function(f){if(f.type===c.COMBINATOR)return a.call(p,f)})},d.prototype.walkComments=function(a){var p=this;return this.walk(function(f){if(f.type===c.COMMENT)return a.call(p,f)})},d.prototype.walkIds=function(a){var p=this;return this.walk(function(f){if(f.type===c.ID)return a.call(p,f)})},d.prototype.walkNesting=function(a){var p=this;return this.walk(function(f){if(f.type===c.NESTING)return a.call(p,f)})},d.prototype.walkPseudos=function(a){var p=this;return this.walk(function(f){if(f.type===c.PSEUDO)return a.call(p,f)})},d.prototype.walkTags=function(a){var p=this;return this.walk(function(f){if(f.type===c.TAG)return a.call(p,f)})},d.prototype.walkUniversals=function(a){var p=this;return this.walk(function(f){if(f.type===c.UNIVERSAL)return a.call(p,f)})},d.prototype.split=function(a){var p=this,f=[];return this.reduce(function(b,_,y){var g=a.call(p,_);return f.push(_),g?(b.push(f),f=[]):y===p.length-1&&b.push(f),b},[])},d.prototype.map=function(a){return this.nodes.map(a)},d.prototype.reduce=function(a,p){return this.nodes.reduce(a,p)},d.prototype.every=function(a){return this.nodes.every(a)},d.prototype.some=function(a){return this.nodes.some(a)},d.prototype.filter=function(a){return this.nodes.filter(a)},d.prototype.sort=function(a){return this.nodes.sort(a)},d.prototype.toString=function(){return this.map(String).join("")},n(d,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),d}(r.default);i.default=s,v.exports=i.default},{"./node":389,"./types":395}],386:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./namespace"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.ID,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o.prototype.toString=function(){return[this.spaces.before,this.ns,String("#"+this.value),this.spaces.after].join("")},o}(u.default);i.default=c,v.exports=i.default},{"./namespace":387,"./types":395}],387:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=function(){function c(s,o){for(var d=0;d<o.length;d++){var a=o[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}return function(s,o,d){return o&&c(s.prototype,o),d&&c(s,d),s}}(),u=e("./node"),r=function(c){function s(){return function(o,d){if(!(o instanceof d))throw new TypeError("Cannot call a class as a function")}(this,s),function(o,d){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?o:d}(this,c.apply(this,arguments))}return function(o,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);o.prototype=Object.create(d&&d.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(o,d):o.__proto__=d)}(s,c),s.prototype.toString=function(){return[this.spaces.before,this.ns,String(this.value),this.spaces.after].join("")},n(s,[{key:"ns",get:function(){var o=this.namespace;return o?(typeof o=="string"?o:"")+"|":""}}]),s}(((t=u)&&t.__esModule?t:{default:t}).default);i.default=r,v.exports=i.default},{"./node":389}],388:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./node"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.NESTING,a.value="&",a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./node":389,"./types":395}],389:[function(e,v,i){"use strict";i.__esModule=!0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n=function r(c,s){if((c===void 0?"undefined":t(c))!=="object")return c;var o=new c.constructor;for(var d in c)if(c.hasOwnProperty(d)){var a=c[d],p=a===void 0?"undefined":t(a);d==="parent"&&p==="object"?s&&(o[d]=s):o[d]=a instanceof Array?a.map(function(f){return r(f,o)}):r(a,o)}return o},u=function(){function r(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var s in function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}(this,r),c)this[s]=c[s];var o=c.spaces,d=(o=o===void 0?{}:o).before,a=d===void 0?"":d,p=o.after,f=p===void 0?"":p;this.spaces={before:a,after:f}}return r.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},r.prototype.replaceWith=function(){if(this.parent){for(var c in arguments)this.parent.insertBefore(this,arguments[c]);this.remove()}return this},r.prototype.next=function(){return this.parent.at(this.parent.index(this)+1)},r.prototype.prev=function(){return this.parent.at(this.parent.index(this)-1)},r.prototype.clone=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=n(this);for(var o in c)s[o]=c[o];return s},r.prototype.toString=function(){return[this.spaces.before,String(this.value),this.spaces.after].join("")},r}();i.default=u,v.exports=i.default},{}],390:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./container"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.PSEUDO,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o.prototype.toString=function(){var d=this.length?"("+this.map(String).join(",")+")":"";return[this.spaces.before,String(this.value),d,this.spaces.after].join("")},o}(u.default);i.default=c,v.exports=i.default},{"./container":385,"./types":395}],391:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./container"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.ROOT,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o.prototype.toString=function(){var d=this.reduce(function(a,p){var f=String(p);return f?a+f+",":""},"").slice(0,-1);return this.trailingComma?d+",":d},o}(u.default);i.default=c,v.exports=i.default},{"./container":385,"./types":395}],392:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./container"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.SELECTOR,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./container":385,"./types":395}],393:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./node"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.STRING,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./node":389,"./types":395}],394:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./namespace"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.TAG,a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./namespace":387,"./types":395}],395:[function(e,v,i){"use strict";i.__esModule=!0,i.TAG="tag",i.STRING="string",i.SELECTOR="selector",i.ROOT="root",i.PSEUDO="pseudo",i.NESTING="nesting",i.ID="id",i.COMMENT="comment",i.COMBINATOR="combinator",i.CLASS="class",i.ATTRIBUTE="attribute",i.UNIVERSAL="universal"},{}],396:[function(e,v,i){"use strict";i.__esModule=!0;var t,n=e("./namespace"),u=(t=n)&&t.__esModule?t:{default:t},r=e("./types"),c=function(s){function o(d){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,o);var a=function(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}(this,s.call(this,d));return a.type=r.UNIVERSAL,a.value="*",a}return function(d,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}(o,s),o}(u.default);i.default=c,v.exports=i.default},{"./namespace":387,"./types":395}],397:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t){return t.sort(function(n,u){return n-u})},v.exports=i.default},{}],398:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(j){for(var k=[],M=j.css.valueOf(),R=void 0,V=void 0,T=void 0,U=void 0,W=void 0,Q=void 0,X=void 0,oe=void 0,J=void 0,he=void 0,ae=void 0,ue=M.length,ge=-1,N=1,F=0,K=function(H,$){if(!j.safe)throw j.error("Unclosed "+H,N,F-ge,F);V=(M+=$).length-1};F<ue;){switch((R=M.charCodeAt(F))===c&&(ge=F,N+=1),R){case c:case s:case d:case a:case o:V=F;do V+=1,(R=M.charCodeAt(V))===c&&(ge=V,N+=1);while(R===s||R===c||R===d||R===a||R===o);k.push(["space",M.slice(F,V),N,F-ge,F]),F=V-1;break;case p:case f:case b:case _:V=F;do V+=1,R=M.charCodeAt(V);while(R===p||R===f||R===b||R===_);k.push(["combinator",M.slice(F,V),N,F-ge,F]),F=V-1;break;case S:k.push(["*","*",N,F-ge,F]);break;case A:k.push(["&","&",N,F-ge,F]);break;case y:k.push([",",",",N,F-ge,F]);break;case w:k.push(["[","[",N,F-ge,F]);break;case C:k.push(["]","]",N,F-ge,F]);break;case O:k.push([":",":",N,F-ge,F]);break;case I:k.push([";",";",N,F-ge,F]);break;case g:k.push(["(","(",N,F-ge,F]);break;case m:k.push([")",")",N,F-ge,F]);break;case t:case n:T=R===t?"'":'"',V=F;do for(he=!1,(V=M.indexOf(T,V+1))===-1&&K("quote",T),ae=V;M.charCodeAt(ae-1)===u;)ae-=1,he=!he;while(he);k.push(["string",M.slice(F,V+1),N,F-ge,N,V-ge,F]),F=V;break;case E:D.lastIndex=F+1,D.test(M),V=D.lastIndex===0?M.length-1:D.lastIndex-2,k.push(["at-word",M.slice(F,V+1),N,F-ge,N,V-ge,F]),F=V;break;case u:for(V=F,X=!0;M.charCodeAt(V+1)===u;)V+=1,X=!X;R=M.charCodeAt(V+1),X&&R!==r&&R!==s&&R!==c&&R!==d&&R!==a&&R!==o&&(V+=1),k.push(["word",M.slice(F,V+1),N,F-ge,N,V-ge,F]),F=V;break;default:R===r&&M.charCodeAt(F+1)===S?((V=M.indexOf("*/",F+2)+1)===0&&K("comment","*/"),(W=(U=(Q=M.slice(F,V+1)).split(`
`)).length-1)>0?(oe=N+W,J=V-U[W].length):(oe=N,J=ge),k.push(["comment",Q,N,F-ge,oe,V-J,F]),ge=J,N=oe,F=V):(P.lastIndex=F+1,P.test(M),V=P.lastIndex===0?M.length-1:P.lastIndex-2,k.push(["word",M.slice(F,V+1),N,F-ge,N,V-ge,F]),F=V)}F++}return k};var t=39,n=34,u=92,r=47,c=10,s=32,o=12,d=9,a=13,p=43,f=62,b=126,_=124,y=44,g=40,m=41,w=91,C=93,I=59,S=42,O=58,A=38,E=64,D=/[ \n\t\r\{\(\)'"\\;/]/g,P=/[ \n\t\r\(\)\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g;v.exports=i.default},{}],399:[function(e,v,i){var t,n,u=v.exports={};function r(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(g){if(t===setTimeout)return setTimeout(g,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(g,0);try{return t(g,0)}catch{try{return t.call(null,g,0)}catch{return t.call(this,g,0)}}}(function(){try{t=typeof setTimeout=="function"?setTimeout:r}catch{t=r}try{n=typeof clearTimeout=="function"?clearTimeout:c}catch{n=c}})();var o,d=[],a=!1,p=-1;function f(){a&&o&&(a=!1,o.length?d=o.concat(d):p=-1,d.length&&b())}function b(){if(!a){var g=s(f);a=!0;for(var m=d.length;m;){for(o=d,d=[];++p<m;)o&&o[p].run();p=-1,m=d.length}o=null,a=!1,function(w){if(n===clearTimeout)return clearTimeout(w);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(w);try{n(w)}catch{try{return n.call(null,w)}catch{return n.call(this,w)}}}(g)}}function _(g,m){this.fun=g,this.array=m}function y(){}u.nextTick=function(g){var m=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)m[w-1]=arguments[w];d.push(new _(g,m)),d.length!==1||a||s(b)},_.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=y,u.addListener=y,u.once=y,u.off=y,u.removeListener=y,u.removeAllListeners=y,u.emit=y,u.prependListener=y,u.prependOnceListener=y,u.listeners=function(g){return[]},u.binding=function(g){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(g){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],400:[function(e,v,i){"use strict";function t(n,u,r,c,s){}t.resetWarningCache=function(){},v.exports=t},{"./lib/ReactPropTypesSecret":404}],401:[function(e,v,i){"use strict";var t=e("./lib/ReactPropTypesSecret");function n(){}function u(){}u.resetWarningCache=n,v.exports=function(){function r(o,d,a,p,f,b){if(b!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}function c(){return r}r.isRequired=r;var s={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:c,element:r,elementType:r,instanceOf:c,node:r,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:u,resetWarningCache:n};return s.PropTypes=s,s}},{"./lib/ReactPropTypesSecret":404}],402:[function(e,v,i){"use strict";var t=e("react-is"),n=e("object-assign"),u=e("./lib/ReactPropTypesSecret"),r=e("./checkPropTypes"),c=Function.call.bind(Object.prototype.hasOwnProperty),s=function(){};function o(){return null}v.exports=function(d,a){var p=typeof Symbol=="function"&&Symbol.iterator,f="@@iterator",b="<<anonymous>>",_={array:w("array"),bool:w("boolean"),func:w("function"),number:w("number"),object:w("object"),string:w("string"),symbol:w("symbol"),any:m(o),arrayOf:function(A){return m(function(E,D,P,j,k){if(typeof A!="function")return new g("Property `"+k+"` of component `"+P+"` has invalid PropType notation inside arrayOf.");var M=E[D];if(!Array.isArray(M))return new g("Invalid "+j+" `"+k+"` of type `"+I(M)+"` supplied to `"+P+"`, expected an array.");for(var R=0;R<M.length;R++){var V=A(M,R,P,j,k+"["+R+"]",u);if(V instanceof Error)return V}return null})},element:m(function(A,E,D,P,j){var k=A[E];return d(k)?null:new g("Invalid "+P+" `"+j+"` of type `"+I(k)+"` supplied to `"+D+"`, expected a single ReactElement.")}),elementType:m(function(A,E,D,P,j){var k=A[E];return t.isValidElementType(k)?null:new g("Invalid "+P+" `"+j+"` of type `"+I(k)+"` supplied to `"+D+"`, expected a single ReactElement type.")}),instanceOf:function(A){return m(function(E,D,P,j,k){if(!(E[D]instanceof A)){var M=A.name||b;return new g("Invalid "+j+" `"+k+"` of type `"+(((R=E[D]).constructor&&R.constructor.name?R.constructor.name:b)+"` supplied to `")+P+"`, expected instance of `"+M+"`.")}var R;return null})},node:m(function(A,E,D,P,j){return C(A[E])?null:new g("Invalid "+P+" `"+j+"` supplied to `"+D+"`, expected a ReactNode.")}),objectOf:function(A){return m(function(E,D,P,j,k){if(typeof A!="function")return new g("Property `"+k+"` of component `"+P+"` has invalid PropType notation inside objectOf.");var M=E[D],R=I(M);if(R!=="object")return new g("Invalid "+j+" `"+k+"` of type `"+R+"` supplied to `"+P+"`, expected an object.");for(var V in M)if(c(M,V)){var T=A(M,V,P,j,k+"."+V,u);if(T instanceof Error)return T}return null})},oneOf:function(A){return Array.isArray(A)?m(function(E,D,P,j,k){for(var M=E[D],R=0;R<A.length;R++)if(y(M,A[R]))return null;var V=JSON.stringify(A,function(T,U){return S(U)==="symbol"?String(U):U});return new g("Invalid "+j+" `"+k+"` of value `"+String(M)+"` supplied to `"+P+"`, expected one of "+V+".")}):o},oneOfType:function(A){if(!Array.isArray(A))return o;for(var E=0;E<A.length;E++){var D=A[E];if(typeof D!="function")return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+O(D)+" at index "+E+"."),o}return m(function(P,j,k,M,R){for(var V=0;V<A.length;V++)if((0,A[V])(P,j,k,M,R,u)==null)return null;return new g("Invalid "+M+" `"+R+"` supplied to `"+k+"`.")})},shape:function(A){return m(function(E,D,P,j,k){var M=E[D],R=I(M);if(R!=="object")return new g("Invalid "+j+" `"+k+"` of type `"+R+"` supplied to `"+P+"`, expected `object`.");for(var V in A){var T=A[V];if(T){var U=T(M,V,P,j,k+"."+V,u);if(U)return U}}return null})},exact:function(A){return m(function(E,D,P,j,k){var M=E[D],R=I(M);if(R!=="object")return new g("Invalid "+j+" `"+k+"` of type `"+R+"` supplied to `"+P+"`, expected `object`.");var V=n({},E[D],A);for(var T in V){var U=A[T];if(!U)return new g("Invalid "+j+" `"+k+"` key `"+T+"` supplied to `"+P+"`.\nBad object: "+JSON.stringify(E[D],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(A),null,"  "));var W=U(M,T,P,j,k+"."+T,u);if(W)return W}return null})}};function y(A,E){return A===E?A!==0||1/A==1/E:A!=A&&E!=E}function g(A){this.message=A,this.stack=""}function m(A){function E(P,j,k,M,R,V,T){if(M=M||b,V=V||k,T!==u&&a){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}return j[k]==null?P?j[k]===null?new g("The "+R+" `"+V+"` is marked as required in `"+M+"`, but its value is `null`."):new g("The "+R+" `"+V+"` is marked as required in `"+M+"`, but its value is `undefined`."):null:A(j,k,M,R,V)}var D=E.bind(null,!1);return D.isRequired=E.bind(null,!0),D}function w(A){return m(function(E,D,P,j,k,M){var R=E[D];return I(R)!==A?new g("Invalid "+j+" `"+k+"` of type `"+S(R)+"` supplied to `"+P+"`, expected `"+A+"`."):null})}function C(A){switch(typeof A){case"number":case"string":case"undefined":return!0;case"boolean":return!A;case"object":if(Array.isArray(A))return A.every(C);if(A===null||d(A))return!0;var E=function(k){var M=k&&(p&&k[p]||k[f]);if(typeof M=="function")return M}(A);if(!E)return!1;var D,P=E.call(A);if(E!==A.entries){for(;!(D=P.next()).done;)if(!C(D.value))return!1}else for(;!(D=P.next()).done;){var j=D.value;if(j&&!C(j[1]))return!1}return!0;default:return!1}}function I(A){var E=typeof A;return Array.isArray(A)?"array":A instanceof RegExp?"object":function(D,P){return D==="symbol"||!!P&&(P["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&P instanceof Symbol)}(E,A)?"symbol":E}function S(A){if(A==null)return""+A;var E=I(A);if(E==="object"){if(A instanceof Date)return"date";if(A instanceof RegExp)return"regexp"}return E}function O(A){var E=S(A);switch(E){case"array":case"object":return"an "+E;case"boolean":case"date":case"regexp":return"a "+E;default:return E}}return g.prototype=Error.prototype,_.checkPropTypes=r,_.resetWarningCache=r.resetWarningCache,_.PropTypes=_,_}},{"./checkPropTypes":400,"./lib/ReactPropTypesSecret":404,"object-assign":366,"react-is":407}],403:[function(e,v,i){v.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":401,"./factoryWithTypeCheckers":402,"react-is":407}],404:[function(e,v,i){"use strict";v.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],405:[function(e,v,i){(function(t){(function(){"use strict";t.env.NODE_ENV!=="production"&&function(){var n=typeof Symbol=="function"&&Symbol.for,u=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,c=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,d=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,b=n?Symbol.for("react.forward_ref"):60112,_=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,w=n?Symbol.for("react.block"):60121,C=n?Symbol.for("react.fundamental"):60117,I=n?Symbol.for("react.responder"):60118,S=n?Symbol.for("react.scope"):60119;function O(J){if(typeof J=="object"&&J!==null){var he=J.$$typeof;switch(he){case u:var ae=J.type;switch(ae){case p:case f:case c:case o:case s:case _:return ae;default:var ue=ae&&ae.$$typeof;switch(ue){case a:case b:case m:case g:case d:return ue;default:return he}}case r:return he}}}var A=p,E=f,D=a,P=d,j=u,k=b,M=c,R=m,V=g,T=r,U=o,W=s,Q=_,X=!1;function oe(J){return O(J)===f}i.AsyncMode=A,i.ConcurrentMode=E,i.ContextConsumer=D,i.ContextProvider=P,i.Element=j,i.ForwardRef=k,i.Fragment=M,i.Lazy=R,i.Memo=V,i.Portal=T,i.Profiler=U,i.StrictMode=W,i.Suspense=Q,i.isAsyncMode=function(J){return X||(X=!0),oe(J)||O(J)===p},i.isConcurrentMode=oe,i.isContextConsumer=function(J){return O(J)===a},i.isContextProvider=function(J){return O(J)===d},i.isElement=function(J){return typeof J=="object"&&J!==null&&J.$$typeof===u},i.isForwardRef=function(J){return O(J)===b},i.isFragment=function(J){return O(J)===c},i.isLazy=function(J){return O(J)===m},i.isMemo=function(J){return O(J)===g},i.isPortal=function(J){return O(J)===r},i.isProfiler=function(J){return O(J)===o},i.isStrictMode=function(J){return O(J)===s},i.isSuspense=function(J){return O(J)===_},i.isValidElementType=function(J){return typeof J=="string"||typeof J=="function"||J===c||J===f||J===o||J===s||J===_||J===y||typeof J=="object"&&J!==null&&(J.$$typeof===m||J.$$typeof===g||J.$$typeof===d||J.$$typeof===a||J.$$typeof===b||J.$$typeof===C||J.$$typeof===I||J.$$typeof===S||J.$$typeof===w)},i.typeOf=O}()}).call(this)}).call(this,e("_process"))},{_process:399}],406:[function(e,v,i){"use strict";var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,u=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,c=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,b=t?Symbol.for("react.suspense"):60113,_=t?Symbol.for("react.suspense_list"):60120,y=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,m=t?Symbol.for("react.block"):60121,w=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,I=t?Symbol.for("react.scope"):60119;function S(A){if(typeof A=="object"&&A!==null){var E=A.$$typeof;switch(E){case n:switch(A=A.type){case a:case p:case r:case s:case c:case b:return A;default:switch(A=A&&A.$$typeof){case d:case f:case g:case y:case o:return A;default:return E}}case u:return E}}}function O(A){return S(A)===p}i.AsyncMode=a,i.ConcurrentMode=p,i.ContextConsumer=d,i.ContextProvider=o,i.Element=n,i.ForwardRef=f,i.Fragment=r,i.Lazy=g,i.Memo=y,i.Portal=u,i.Profiler=s,i.StrictMode=c,i.Suspense=b,i.isAsyncMode=function(A){return O(A)||S(A)===a},i.isConcurrentMode=O,i.isContextConsumer=function(A){return S(A)===d},i.isContextProvider=function(A){return S(A)===o},i.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===n},i.isForwardRef=function(A){return S(A)===f},i.isFragment=function(A){return S(A)===r},i.isLazy=function(A){return S(A)===g},i.isMemo=function(A){return S(A)===y},i.isPortal=function(A){return S(A)===u},i.isProfiler=function(A){return S(A)===s},i.isStrictMode=function(A){return S(A)===c},i.isSuspense=function(A){return S(A)===b},i.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===r||A===p||A===s||A===c||A===b||A===_||typeof A=="object"&&A!==null&&(A.$$typeof===g||A.$$typeof===y||A.$$typeof===o||A.$$typeof===d||A.$$typeof===f||A.$$typeof===w||A.$$typeof===C||A.$$typeof===I||A.$$typeof===m)},i.typeOf=S},{}],407:[function(e,v,i){(function(t){(function(){"use strict";t.env.NODE_ENV==="production"?v.exports=e("./cjs/react-is.production.min.js"):v.exports=e("./cjs/react-is.development.js")}).call(this)}).call(this,e("_process"))},{"./cjs/react-is.development.js":405,"./cjs/react-is.production.min.js":406,_process:399}],408:[function(e,v,i){"use strict";function t(u,r){return Object.prototype.hasOwnProperty.call(u,r)}v.exports=function(u,r,c,s){r=r||"&",c=c||"=";var o={};if(typeof u!="string"||u.length===0)return o;var d=/\+/g;u=u.split(r);var a=1e3;s&&typeof s.maxKeys=="number"&&(a=s.maxKeys);var p=u.length;a>0&&p>a&&(p=a);for(var f=0;f<p;++f){var b,_,y,g,m=u[f].replace(d,"%20"),w=m.indexOf(c);w>=0?(b=m.substr(0,w),_=m.substr(w+1)):(b=m,_=""),y=decodeURIComponent(b),g=decodeURIComponent(_),t(o,y)?n(o[y])?o[y].push(g):o[y]=[o[y],g]:o[y]=g}return o};var n=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"}},{}],409:[function(e,v,i){"use strict";var t=function(c){switch(typeof c){case"string":return c;case"boolean":return c?"true":"false";case"number":return isFinite(c)?c:"";default:return""}};v.exports=function(c,s,o,d){return s=s||"&",o=o||"=",c===null&&(c=void 0),typeof c=="object"?u(r(c),function(a){var p=encodeURIComponent(t(a))+o;return n(c[a])?u(c[a],function(f){return p+encodeURIComponent(t(f))}).join(s):p+encodeURIComponent(t(c[a]))}).join(s):d?encodeURIComponent(t(d))+o+encodeURIComponent(t(c)):""};var n=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function u(c,s){if(c.map)return c.map(s);for(var o=[],d=0;d<c.length;d++)o.push(s(c[d],d));return o}var r=Object.keys||function(c){var s=[];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&s.push(o);return s}},{}],410:[function(e,v,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":408,"./encode":409}],411:[function(e,v,i){(function(t){(function(){for(var n=e("performance-now"),u=typeof window>"u"?t:window,r=["moz","webkit"],c="AnimationFrame",s=u["request"+c],o=u["cancel"+c]||u["cancelRequest"+c],d=0;!s&&d<r.length;d++)s=u[r[d]+"Request"+c],o=u[r[d]+"Cancel"+c]||u[r[d]+"CancelRequest"+c];if(!s||!o){var a=0,p=0,f=[];s=function(b){if(f.length===0){var _=n(),y=Math.max(0,16.666666666666668-(_-a));a=y+_,setTimeout(function(){var g=f.slice(0);f.length=0;for(var m=0;m<g.length;m++)if(!g[m].cancelled)try{g[m].callback(a)}catch(w){setTimeout(function(){throw w},0)}},Math.round(y))}return f.push({handle:++p,callback:b,cancelled:!1}),p},o=function(b){for(var _=0;_<f.length;_++)f[_].handle===b&&(f[_].cancelled=!0)}}v.exports=function(b){return s.call(u,b)},v.exports.cancel=function(){o.apply(u,arguments)},v.exports.polyfill=function(b){b||(b=u),b.requestAnimationFrame=s,b.cancelAnimationFrame=o}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":412}],412:[function(e,v,i){(function(t){(function(){(function(){var n,u,r,c,s,o;typeof performance<"u"&&performance!==null&&performance.now?v.exports=function(){return performance.now()}:t!=null&&t.hrtime?(v.exports=function(){return(n()-s)/1e6},u=t.hrtime,c=(n=function(){var d;return 1e9*(d=u())[0]+d[1]})(),o=1e9*t.uptime(),s=c-o):Date.now?(v.exports=function(){return Date.now()-r},r=Date.now()):(v.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:399}],413:[function(e,v,i){"use strict"},{"object-assign":366,react:437,scheduler:443,"scheduler/tracing":444}],414:[function(e,v,i){"use strict";var t=e("react"),n=e("object-assign"),u=e("scheduler");function r(l){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+l,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!t)throw Error(r(227));var c=new Set,s={};function o(l,h){d(l,h),d(l+"Capture",h)}function d(l,h){for(s[l]=h,l=0;l<h.length;l++)c.add(h[l])}var a=!(typeof window>"u"||window.document===void 0||window.document.createElement===void 0),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,b={},_={};function y(l,h,x,L,q,Y,ie){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=L,this.attributeNamespace=q,this.mustUseProperty=x,this.propertyName=l,this.type=h,this.sanitizeURL=Y,this.removeEmptyString=ie}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){g[l]=new y(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var h=l[0];g[h]=new y(h,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){g[l]=new y(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){g[l]=new y(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){g[l]=new y(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){g[l]=new y(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){g[l]=new y(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){g[l]=new y(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){g[l]=new y(l,5,!1,l.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function w(l){return l[1].toUpperCase()}function C(l,h,x,L){var q=g.hasOwnProperty(h)?g[h]:null;(q!==null?q.type===0:!L&&2<h.length&&(h[0]==="o"||h[0]==="O")&&(h[1]==="n"||h[1]==="N"))||(function(Y,ie,me,we){if(ie==null||function(Pe,et,at,Ze){if(at!==null&&at.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return!Ze&&(at!==null?!at.acceptsBooleans:(Pe=Pe.toLowerCase().slice(0,5))!=="data-"&&Pe!=="aria-");default:return!1}}(Y,ie,me,we))return!0;if(we)return!1;if(me!==null)switch(me.type){case 3:return!ie;case 4:return ie===!1;case 5:return isNaN(ie);case 6:return isNaN(ie)||1>ie}return!1}(h,x,q,L)&&(x=null),L||q===null?function(Y){return!!f.call(_,Y)||!f.call(b,Y)&&(p.test(Y)?_[Y]=!0:(b[Y]=!0,!1))}(h)&&(x===null?l.removeAttribute(h):l.setAttribute(h,""+x)):q.mustUseProperty?l[q.propertyName]=x===null?q.type!==3&&"":x:(h=q.attributeName,L=q.attributeNamespace,x===null?l.removeAttribute(h):(x=(q=q.type)===3||q===4&&x===!0?"":""+x,L?l.setAttributeNS(L,h,x):l.setAttribute(h,x))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var h=l.replace(m,w);g[h]=new y(h,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var h=l.replace(m,w);g[h]=new y(h,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var h=l.replace(m,w);g[h]=new y(h,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){g[l]=new y(l,1,!1,l.toLowerCase(),null,!1,!1)}),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){g[l]=new y(l,1,!1,l.toLowerCase(),null,!0,!0)});var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,O=60106,A=60107,E=60108,D=60114,P=60109,j=60110,k=60112,M=60113,R=60120,V=60115,T=60116,U=60121,W=60128,Q=60129,X=60130,oe=60131;if(typeof Symbol=="function"&&Symbol.for){var J=Symbol.for;S=J("react.element"),O=J("react.portal"),A=J("react.fragment"),E=J("react.strict_mode"),D=J("react.profiler"),P=J("react.provider"),j=J("react.context"),k=J("react.forward_ref"),M=J("react.suspense"),R=J("react.suspense_list"),V=J("react.memo"),T=J("react.lazy"),U=J("react.block"),J("react.scope"),W=J("react.opaque.id"),Q=J("react.debug_trace_mode"),X=J("react.offscreen"),oe=J("react.legacy_hidden")}var he,ae=typeof Symbol=="function"&&Symbol.iterator;function ue(l){return l===null||typeof l!="object"?null:typeof(l=ae&&l[ae]||l["@@iterator"])=="function"?l:null}function ge(l){if(he===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);he=h&&h[1]||""}return`
`+he+l}var N=!1;function F(l,h){if(!l||N)return"";N=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(we){var L=we}Reflect.construct(l,[],h)}else{try{h.call()}catch(we){L=we}l.call(h.prototype)}else{try{throw Error()}catch(we){L=we}l()}}catch(we){if(we&&L&&typeof we.stack=="string"){for(var q=we.stack.split(`
`),Y=L.stack.split(`
`),ie=q.length-1,me=Y.length-1;1<=ie&&0<=me&&q[ie]!==Y[me];)me--;for(;1<=ie&&0<=me;ie--,me--)if(q[ie]!==Y[me]){if(ie!==1||me!==1)do if(ie--,0>--me||q[ie]!==Y[me])return`
`+q[ie].replace(" at new "," at ");while(1<=ie&&0<=me);break}}}finally{N=!1,Error.prepareStackTrace=x}return(l=l?l.displayName||l.name:"")?ge(l):""}function K(l){switch(l.tag){case 5:return ge(l.type);case 16:return ge("Lazy");case 13:return ge("Suspense");case 19:return ge("SuspenseList");case 0:case 2:case 15:return l=F(l.type,!1);case 11:return l=F(l.type.render,!1);case 22:return l=F(l.type._render,!1);case 1:return l=F(l.type,!0);default:return""}}function H(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case A:return"Fragment";case O:return"Portal";case D:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case j:return(l.displayName||"Context")+".Consumer";case P:return(l._context.displayName||"Context")+".Provider";case k:var h=l.render;return h=h.displayName||h.name||"",l.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case V:return H(l.type);case U:return H(l._render);case T:h=l._payload,l=l._init;try{return H(l(h))}catch{}}return null}function $(l){switch(typeof l){case"boolean":case"number":case"object":case"string":case"undefined":return l;default:return""}}function se(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function pe(l){l._valueTracker||(l._valueTracker=function(h){var x=se(h)?"checked":"value",L=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),q=""+h[x];if(!h.hasOwnProperty(x)&&L!==void 0&&typeof L.get=="function"&&typeof L.set=="function"){var Y=L.get,ie=L.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return Y.call(this)},set:function(me){q=""+me,ie.call(this,me)}}),Object.defineProperty(h,x,{enumerable:L.enumerable}),{getValue:function(){return q},setValue:function(me){q=""+me},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}(l))}function Te(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var x=h.getValue(),L="";return l&&(L=se(l)?l.checked?"true":"false":l.value),(l=L)!==x&&(h.setValue(l),!0)}function $e(l){if((l=l||(typeof document<"u"?document:void 0))===void 0)return null;try{return l.activeElement||l.body}catch{return l.body}}function He(l,h){var x=h.checked;return n({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??l._wrapperState.initialChecked})}function re(l,h){var x=h.defaultValue==null?"":h.defaultValue,L=h.checked!=null?h.checked:h.defaultChecked;x=$(h.value!=null?h.value:x),l._wrapperState={initialChecked:L,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function le(l,h){(h=h.checked)!=null&&C(l,"checked",h,!1)}function ve(l,h){le(l,h);var x=$(h.value),L=h.type;if(x!=null)L==="number"?(x===0&&l.value===""||l.value!=x)&&(l.value=""+x):l.value!==""+x&&(l.value=""+x);else if(L==="submit"||L==="reset")return void l.removeAttribute("value");h.hasOwnProperty("value")?xe(l,h.type,x):h.hasOwnProperty("defaultValue")&&xe(l,h.type,$(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(l.defaultChecked=!!h.defaultChecked)}function De(l,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var L=h.type;if(!(L!=="submit"&&L!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+l._wrapperState.initialValue,x||h===l.value||(l.value=h),l.defaultValue=h}(x=l.name)!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,x!==""&&(l.name=x)}function xe(l,h,x){h==="number"&&$e(l.ownerDocument)===l||(x==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+x&&(l.defaultValue=""+x))}function Se(l,h){return l=n({children:void 0},h),(h=function(x){var L="";return t.Children.forEach(x,function(q){q!=null&&(L+=q)}),L}(h.children))&&(l.children=h),l}function Ee(l,h,x,L){if(l=l.options,h){h={};for(var q=0;q<x.length;q++)h["$"+x[q]]=!0;for(x=0;x<l.length;x++)q=h.hasOwnProperty("$"+l[x].value),l[x].selected!==q&&(l[x].selected=q),q&&L&&(l[x].defaultSelected=!0)}else{for(x=""+$(x),h=null,q=0;q<l.length;q++){if(l[q].value===x)return l[q].selected=!0,void(L&&(l[q].defaultSelected=!0));h!==null||l[q].disabled||(h=l[q])}h!==null&&(h.selected=!0)}}function ye(l,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return n({},h,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Ne(l,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(Array.isArray(x)){if(!(1>=x.length))throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}l._wrapperState={initialValue:$(x)}}function Ue(l,h){var x=$(h.value),L=$(h.defaultValue);x!=null&&((x=""+x)!==l.value&&(l.value=x),h.defaultValue==null&&l.defaultValue!==x&&(l.defaultValue=x)),L!=null&&(l.defaultValue=""+L)}function de(l){var h=l.textContent;h===l._wrapperState.initialValue&&h!==""&&h!==null&&(l.value=h)}var qe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(l,h){return l==null||l==="http://www.w3.org/1999/xhtml"?tt(h):l==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var ce,Le,Fe=(Le=function(l,h){if(l.namespaceURI!==qe.svg||"innerHTML"in l)l.innerHTML=h;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=ce.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;h.firstChild;)l.appendChild(h.firstChild)}},typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,x,L){MSApp.execUnsafeLocalFunction(function(){return Le(l,h)})}:Le);function Be(l,h){if(h){var x=l.firstChild;if(x&&x===l.lastChild&&x.nodeType===3)return void(x.nodeValue=h)}l.textContent=h}var nt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},it=["Webkit","ms","Moz","O"];function Ge(l,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||nt.hasOwnProperty(l)&&nt[l]?(""+h).trim():h+"px"}function Xe(l,h){for(var x in l=l.style,h)if(h.hasOwnProperty(x)){var L=x.indexOf("--")===0,q=Ge(x,h[x],L);x==="float"&&(x="cssFloat"),L?l.setProperty(x,q):l[x]=q}}Object.keys(nt).forEach(function(l){it.forEach(function(h){h=h+l.charAt(0).toUpperCase()+l.substring(1),nt[h]=nt[l]})});var rt=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ot(l,h){if(h){if(rt[l]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Ct(l,h){if(l.indexOf("-")===-1)return typeof h.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Et(l){return(l=l.target||l.srcElement||window).correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var It=null,wt=null,Lt=null;function Tr(l){if(l=Ci(l)){if(typeof It!="function")throw Error(r(280));var h=l.stateNode;h&&(h=yo(h),It(l.stateNode,l.type,h))}}function Mr(l){wt?Lt?Lt.push(l):Lt=[l]:wt=l}function Or(){if(wt){var l=wt,h=Lt;if(Lt=wt=null,Tr(l),h)for(l=0;l<h.length;l++)Tr(h[l])}}function zn(l,h){return l(h)}function Pr(l,h,x,L,q){return l(h,x,L,q)}function dr(){}var cr=zn,xn=!1,fr=!1;function Wn(){wt===null&&Lt===null||(dr(),Or())}function z(l,h){var x=l.stateNode;if(x===null)return null;var L=yo(x);if(L===null)return null;x=L[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(L=!((l=l.type)==="button"||l==="input"||l==="select"||l==="textarea")),l=!L;break e;default:l=!1}if(l)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var Z=!1;if(a)try{var te={};Object.defineProperty(te,"passive",{get:function(){Z=!0}}),window.addEventListener("test",te,te),window.removeEventListener("test",te,te)}catch{Z=!1}function ne(l,h,x,L,q,Y,ie,me,we){var Pe=Array.prototype.slice.call(arguments,3);try{h.apply(x,Pe)}catch(et){this.onError(et)}}var fe=!1,ee=null,_e=!1,ke=null,Ie={onError:function(l){fe=!0,ee=l}};function Me(l,h,x,L,q,Y,ie,me,we){fe=!1,ee=null,ne.apply(Ie,arguments)}function Ce(l){var h=l,x=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do(1026&(h=l).flags)!=0&&(x=h.return),l=h.return;while(l)}return h.tag===3?x:null}function We(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate)!==null&&(h=l.memoizedState),h!==null)return h.dehydrated}return null}function Ke(l){if(Ce(l)!==l)throw Error(r(188))}function ut(l){if(l=function(x){var L=x.alternate;if(!L){if((L=Ce(x))===null)throw Error(r(188));return L!==x?null:x}for(var q=x,Y=L;;){var ie=q.return;if(ie===null)break;var me=ie.alternate;if(me===null){if((Y=ie.return)!==null){q=Y;continue}break}if(ie.child===me.child){for(me=ie.child;me;){if(me===q)return Ke(ie),x;if(me===Y)return Ke(ie),L;me=me.sibling}throw Error(r(188))}if(q.return!==Y.return)q=ie,Y=me;else{for(var we=!1,Pe=ie.child;Pe;){if(Pe===q){we=!0,q=ie,Y=me;break}if(Pe===Y){we=!0,Y=ie,q=me;break}Pe=Pe.sibling}if(!we){for(Pe=me.child;Pe;){if(Pe===q){we=!0,q=me,Y=ie;break}if(Pe===Y){we=!0,Y=me,q=ie;break}Pe=Pe.sibling}if(!we)throw Error(r(189))}}if(q.alternate!==Y)throw Error(r(190))}if(q.tag!==3)throw Error(r(188));return q.stateNode.current===q?x:L}(l),!l)return null;for(var h=l;;){if(h.tag===5||h.tag===6)return h;if(h.child)h.child.return=h,h=h.child;else{if(h===l)break;for(;!h.sibling;){if(!h.return||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}}return null}function dt(l,h){for(var x=l.alternate;h!==null;){if(h===l||h===x)return!0;h=h.return}return!1}var St,Tt,en,Bt,Mt=!1,At=[],tn=null,Ft=null,nn=null,pn=new Map,un=new Map,hn=[],Jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function On(l,h,x,L,q){return{blockedOn:l,domEventName:h,eventSystemFlags:16|x,nativeEvent:q,targetContainers:[L]}}function Pn(l,h){switch(l){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":pn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":un.delete(h.pointerId)}}function mn(l,h,x,L,q,Y){return l===null||l.nativeEvent!==Y?(l=On(h,x,L,q,Y),h!==null&&(h=Ci(h))!==null&&Tt(h),l):(l.eventSystemFlags|=L,h=l.targetContainers,q!==null&&h.indexOf(q)===-1&&h.push(q),l)}function qt(l){var h=xr(l.target);if(h!==null){var x=Ce(h);if(x!==null){if((h=x.tag)===13){if((h=We(x))!==null)return l.blockedOn=h,void Bt(l.lanePriority,function(){u.unstable_runWithPriority(l.priority,function(){en(x)})})}else if(h===3&&x.stateNode.hydrate)return void(l.blockedOn=x.tag===3?x.stateNode.containerInfo:null)}}l.blockedOn=null}function kt(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var x=_r(l.domEventName,l.eventSystemFlags,h[0],l.nativeEvent);if(x!==null)return(h=Ci(x))!==null&&Tt(h),l.blockedOn=x,!1;h.shift()}return!0}function Yi(l,h,x){kt(l)&&x.delete(h)}function Qi(){for(Mt=!1;0<At.length;){var l=At[0];if(l.blockedOn!==null){(l=Ci(l.blockedOn))!==null&&St(l);break}for(var h=l.targetContainers;0<h.length;){var x=_r(l.domEventName,l.eventSystemFlags,h[0],l.nativeEvent);if(x!==null){l.blockedOn=x;break}h.shift()}l.blockedOn===null&&At.shift()}tn!==null&&kt(tn)&&(tn=null),Ft!==null&&kt(Ft)&&(Ft=null),nn!==null&&kt(nn)&&(nn=null),pn.forEach(Yi),un.forEach(Yi)}function pr(l,h){l.blockedOn===h&&(l.blockedOn=null,Mt||(Mt=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Qi)))}function Xi(l){function h(q){return pr(q,l)}if(0<At.length){pr(At[0],l);for(var x=1;x<At.length;x++){var L=At[x];L.blockedOn===l&&(L.blockedOn=null)}}for(tn!==null&&pr(tn,l),Ft!==null&&pr(Ft,l),nn!==null&&pr(nn,l),pn.forEach(h),un.forEach(h),x=0;x<hn.length;x++)(L=hn[x]).blockedOn===l&&(L.blockedOn=null);for(;0<hn.length&&(x=hn[0]).blockedOn===null;)qt(x),x.blockedOn===null&&hn.shift()}function hr(l,h){var x={};return x[l.toLowerCase()]=h.toLowerCase(),x["Webkit"+l]="webkit"+h,x["Moz"+l]="moz"+h,x}var $n={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionend:hr("Transition","TransitionEnd")},fi={},pi={};function Rr(l){if(fi[l])return fi[l];if(!$n[l])return l;var h,x=$n[l];for(h in x)if(x.hasOwnProperty(h)&&h in pi)return fi[l]=x[h];return l}a&&(pi=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);var Zi=Rr("animationend"),hi=Rr("animationiteration"),eo=Rr("animationstart"),to=Rr("transitionend"),mi=new Map,_i=new Map,ea=["abort","abort",Zi,"animationEnd",hi,"animationIteration",eo,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",to,"transitionEnd","waiting","waiting"];function Lr(l,h){for(var x=0;x<l.length;x+=2){var L=l[x],q=l[x+1];q="on"+(q[0].toUpperCase()+q.slice(1)),_i.set(L,h),mi.set(L,q),o(q,[L])}}(0,u.unstable_now)();var Dt=8;function Gn(l){if((1&l)!=0)return Dt=15,1;if((2&l)!=0)return Dt=14,2;if((4&l)!=0)return Dt=13,4;var h=24&l;return h!==0?(Dt=12,h):(32&l)!=0?(Dt=11,32):(h=192&l)!==0?(Dt=10,h):(256&l)!=0?(Dt=9,256):(h=3584&l)!==0?(Dt=8,h):(4096&l)!=0?(Dt=7,4096):(h=4186112&l)!==0?(Dt=6,h):(h=62914560&l)!==0?(Dt=5,h):67108864&l?(Dt=4,67108864):(134217728&l)!=0?(Dt=3,134217728):(h=805306368&l)!==0?(Dt=2,h):(1073741824&l)!=0?(Dt=1,1073741824):(Dt=8,l)}function mr(l,h){var x=l.pendingLanes;if(x===0)return Dt=0;var L=0,q=0,Y=l.expiredLanes,ie=l.suspendedLanes,me=l.pingedLanes;if(Y!==0)L=Y,q=Dt=15;else if((Y=134217727&x)!==0){var we=Y&~ie;we!==0?(L=Gn(we),q=Dt):(me&=Y)!==0&&(L=Gn(me),q=Dt)}else(Y=x&~ie)!==0?(L=Gn(Y),q=Dt):me!==0&&(L=Gn(me),q=Dt);if(L===0)return 0;if(L=x&((0>(L=31-Cn(L))?0:1<<L)<<1)-1,h!==0&&h!==L&&(h&ie)==0){if(Gn(h),q<=Dt)return h;Dt=q}if((h=l.entangledLanes)!==0)for(l=l.entanglements,h&=L;0<h;)q=1<<(x=31-Cn(h)),L|=l[x],h&=~q;return L}function bi(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function jr(l,h){switch(l){case 15:return 1;case 14:return 2;case 12:return(l=Kn(24&~h))===0?jr(10,h):l;case 10:return(l=Kn(192&~h))===0?jr(8,h):l;case 8:return(l=Kn(3584&~h))===0&&(l=Kn(4186112&~h))===0&&(l=512),l;case 2:return(h=Kn(805306368&~h))===0&&(h=268435456),h}throw Error(r(358,l))}function Kn(l){return l&-l}function Vr(l){for(var h=[],x=0;31>x;x++)h.push(l);return h}function Nr(l,h,x){l.pendingLanes|=h;var L=h-1;l.suspendedLanes&=L,l.pingedLanes&=L,(l=l.eventTimes)[h=31-Cn(h)]=x}var Cn=Math.clz32?Math.clz32:function(l){return l===0?32:31-(no(l)/ta|0)|0},no=Math.log,ta=Math.LN2,na=u.unstable_UserBlockingPriority,ro=u.unstable_runWithPriority,Br=!0;function ra(l,h,x,L){xn||dr();var q=qr,Y=xn;xn=!0;try{Pr(q,l,h,x,L)}finally{(xn=Y)||Wn()}}function io(l,h,x,L){ro(na,qr.bind(null,l,h,x,L))}function qr(l,h,x,L){var q;if(Br)if((q=(4&h)==0)&&0<At.length&&-1<Jt.indexOf(l))l=On(null,l,h,x,L),At.push(l);else{var Y=_r(l,h,x,L);if(Y===null)q&&Pn(l,L);else{if(q){if(-1<Jt.indexOf(l))return l=On(Y,l,h,x,L),void At.push(l);if(function(ie,me,we,Pe,et){switch(me){case"focusin":return tn=mn(tn,ie,me,we,Pe,et),!0;case"dragenter":return Ft=mn(Ft,ie,me,we,Pe,et),!0;case"mouseover":return nn=mn(nn,ie,me,we,Pe,et),!0;case"pointerover":var at=et.pointerId;return pn.set(at,mn(pn.get(at)||null,ie,me,we,Pe,et)),!0;case"gotpointercapture":return at=et.pointerId,un.set(at,mn(un.get(at)||null,ie,me,we,Pe,et)),!0}return!1}(Y,l,h,x,L))return;Pn(l,L)}Hs(l,h,L,null,x)}}}function _r(l,h,x,L){var q=Et(L);if((q=xr(q))!==null){var Y=Ce(q);if(Y===null)q=null;else{var ie=Y.tag;if(ie===13){if((q=We(Y))!==null)return q;q=null}else if(ie===3){if(Y.stateNode.hydrate)return Y.tag===3?Y.stateNode.containerInfo:null;q=null}else Y!==q&&(q=null)}}return Hs(l,h,L,q,x),null}var Rn=null,an=null,br=null;function gr(){if(br)return br;var l,h,x=an,L=x.length,q="value"in Rn?Rn.value:Rn.textContent,Y=q.length;for(l=0;l<L&&x[l]===q[l];l++);var ie=L-l;for(h=1;h<=ie&&x[L-h]===q[Y-h];h++);return br=q.slice(l,1<h?1-h:void 0)}function vr(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode)===0&&h===13&&(l=13):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Jn(){return!0}function Ur(){return!1}function Wt(l){function h(x,L,q,Y,ie){for(var me in this._reactName=x,this._targetInst=q,this.type=L,this.nativeEvent=Y,this.target=ie,this.currentTarget=null,l)l.hasOwnProperty(me)&&(x=l[me],this[me]=x?x(Y):Y[me]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Jn:Ur,this.isPropagationStopped=Ur,this}return n(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),h}var _n,Fr,Yn,Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jn=Wt(Ln),kn=n({},Ln,{view:0,detail:0}),oo=Wt(kn),Hr=n({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Yn&&(Yn&&l.type==="mousemove"?(_n=l.screenX-Yn.screenX,Fr=l.screenY-Yn.screenY):Fr=_n=0,Yn=l),_n)},movementY:function(l){return"movementY"in l?l.movementY:Fr}}),ao=Wt(Hr),ia=Wt(n({},Hr,{dataTransfer:0})),zr=Wt(n({},kn,{relatedTarget:0})),oa=Wt(n({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0})),aa=n({},Ln,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),so=Wt(aa),lo=Wt(n({},Ln,{data:0})),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},la={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ua(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):!!(l=la[l])&&!!h[l]}function Wr(){return ua}var da=n({},kn,{key:function(l){if(l.key){var h=sa[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=vr(l))===13?"Enter":String.fromCharCode(l):l.type==="keydown"||l.type==="keyup"?uo[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(l){return l.type==="keypress"?vr(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?vr(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ca=Wt(da),gi=Wt(n({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fa=Wt(n({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr})),co=Wt(n({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),pa=n({},Hr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ha=Wt(pa),ma=[9,13,27,32],$r=a&&"CompositionEvent"in window,yr=null;a&&"documentMode"in document&&(yr=document.documentMode);var _a=a&&"TextEvent"in window&&!yr,fo=a&&(!$r||yr&&8<yr&&11>=yr),vi=String.fromCharCode(32),po=!1;function ho(l,h){switch(l){case"keyup":return ma.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yi(l){return typeof(l=l.detail)=="object"&&"data"in l?l.data:null}var Vn=!1,Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wr(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!Ds[l.type]:h==="textarea"}function B(l,h,x,L){Mr(L),0<(h=_o(h,"onChange")).length&&(x=new jn("onChange","change",null,x,L),l.push({event:x,listeners:h}))}var G=null,be=null;function je(l){Ns(l,0)}function ze(l){if(Te(Qr(l)))return l}function Qe(l,h){if(l==="change")return h}var ft=!1;if(a){var mt;if(a){var Ut="oninput"in document;if(!Ut){var Ht=document.createElement("div");Ht.setAttribute("oninput","return;"),Ut=typeof Ht.oninput=="function"}mt=Ut}else mt=!1;ft=mt&&(!document.documentMode||9<document.documentMode)}function Nn(){G&&(G.detachEvent("onpropertychange",$t),be=G=null)}function $t(l){if(l.propertyName==="value"&&ze(be)){var h=[];if(B(h,be,l,Et(l)),l=je,xn)l(h);else{xn=!0;try{zn(l,h)}finally{xn=!1,Wn()}}}}function wi(l,h,x){l==="focusin"?(Nn(),be=x,(G=h).attachEvent("onpropertychange",$t)):l==="focusout"&&Nn()}function Yt(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ze(be)}function mo(l,h){if(l==="click")return ze(h)}function Lu(l,h){if(l==="input"||l==="change")return ze(h)}var bn=typeof Object.is=="function"?Object.is:function(l,h){return l===h&&(l!==0||1/l==1/h)||l!=l&&h!=h},ju=Object.prototype.hasOwnProperty;function xi(l,h){if(bn(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var x=Object.keys(l),L=Object.keys(h);if(x.length!==L.length)return!1;for(L=0;L<x.length;L++)if(!ju.call(h,x[L])||!bn(l[x[L]],h[x[L]]))return!1;return!0}function Ts(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Ms(l,h){var x,L=Ts(l);for(l=0;L;){if(L.nodeType===3){if(x=l+L.textContent.length,l<=h&&x>=h)return{node:L,offset:h-l};l=x}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=Ts(L)}}function Os(l,h){return!(!l||!h)&&(l===h||(!l||l.nodeType!==3)&&(h&&h.nodeType===3?Os(l,h.parentNode):"contains"in l?l.contains(h):!!l.compareDocumentPosition&&!!(16&l.compareDocumentPosition(h))))}function Ps(){for(var l=window,h=$e();h instanceof l.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(!x)break;h=$e((l=h.contentWindow).document)}return h}function ba(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var Vu=a&&"documentMode"in document&&11>=document.documentMode,Gr=null,ga=null,ki=null,va=!1;function Rs(l,h,x){var L=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;va||Gr==null||Gr!==$e(L)||("selectionStart"in(L=Gr)&&ba(L)?L={start:L.selectionStart,end:L.selectionEnd}:L={anchorNode:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset},ki&&xi(ki,L)||(ki=L,0<(L=_o(ga,"onSelect")).length&&(h=new jn("onSelect","select",null,h,x),l.push({event:h,listeners:L}),h.target=Gr)))}Lr("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lr("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lr(ea,2);for(var Ls="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ya=0;ya<Ls.length;ya++)_i.set(Ls[ya],0);d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),js=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Vs(l,h,x){var L=l.type||"unknown-event";l.currentTarget=x,function(q,Y,ie,me,we,Pe,et,at,Ze){if(Me.apply(this,arguments),fe){if(!fe)throw Error(r(198));var ct=ee;fe=!1,ee=null,_e||(_e=!0,ke=ct)}}(L,h,void 0,l),l.currentTarget=null}function Ns(l,h){h=(4&h)!=0;for(var x=0;x<l.length;x++){var L=l[x],q=L.event;L=L.listeners;e:{var Y=void 0;if(h)for(var ie=L.length-1;0<=ie;ie--){var me=L[ie],we=me.instance,Pe=me.currentTarget;if(me=me.listener,we!==Y&&q.isPropagationStopped())break e;Vs(q,me,Pe),Y=we}else for(ie=0;ie<L.length;ie++){if(we=(me=L[ie]).instance,Pe=me.currentTarget,me=me.listener,we!==Y&&q.isPropagationStopped())break e;Vs(q,me,Pe),Y=we}}}if(_e)throw l=ke,_e=!1,ke=null,l}function Pt(l,h){var x=Js(h),L=l+"__bubble";x.has(L)||(Fs(h,l,2,!1),x.add(L))}var Bs="_reactListening"+Math.random().toString(36).slice(2);function qs(l){l[Bs]||(l[Bs]=!0,c.forEach(function(h){js.has(h)||Us(h,!1,l,null),Us(h,!0,l,null)}))}function Us(l,h,x,L){var q=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,Y=x;if(l==="selectionchange"&&x.nodeType!==9&&(Y=x.ownerDocument),L!==null&&!h&&js.has(l)){if(l!=="scroll")return;q|=2,Y=L}var ie=Js(Y),me=l+"__"+(h?"capture":"bubble");ie.has(me)||(h&&(q|=4),Fs(Y,l,q,h),ie.add(me))}function Fs(l,h,x,L){var q=_i.get(h);switch(q===void 0?2:q){case 0:q=ra;break;case 1:q=io;break;default:q=qr}x=q.bind(null,h,x,l),q=void 0,!Z||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(q=!0),L?q!==void 0?l.addEventListener(h,x,{capture:!0,passive:q}):l.addEventListener(h,x,!0):q!==void 0?l.addEventListener(h,x,{passive:q}):l.addEventListener(h,x,!1)}function Hs(l,h,x,L,q){var Y=L;if((1&h)==0&&(2&h)==0&&L!==null)e:for(;;){if(L===null)return;var ie=L.tag;if(ie===3||ie===4){var me=L.stateNode.containerInfo;if(me===q||me.nodeType===8&&me.parentNode===q)break;if(ie===4)for(ie=L.return;ie!==null;){var we=ie.tag;if((we===3||we===4)&&((we=ie.stateNode.containerInfo)===q||we.nodeType===8&&we.parentNode===q))return;ie=ie.return}for(;me!==null;){if((ie=xr(me))===null)return;if((we=ie.tag)===5||we===6){L=Y=ie;continue e}me=me.parentNode}}L=L.return}(function(Pe,et,at){if(fr)return Pe(et,at);fr=!0;try{cr(Pe,et,at)}finally{fr=!1,Wn()}})(function(){var Pe=Y,et=Et(x),at=[];e:{var Ze=mi.get(l);if(Ze!==void 0){var ct=jn,bt=l;switch(l){case"keypress":if(vr(x)===0)break e;case"keydown":case"keyup":ct=ca;break;case"focusin":bt="focus",ct=zr;break;case"focusout":bt="blur",ct=zr;break;case"beforeblur":case"afterblur":ct=zr;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=ao;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=ia;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=fa;break;case Zi:case hi:case eo:ct=oa;break;case to:ct=co;break;case"scroll":ct=oo;break;case"wheel":ct=ha;break;case"copy":case"cut":case"paste":ct=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=gi}var _t=(4&h)!=0,Ve=!_t&&l==="scroll",Ae=_t?Ze!==null?Ze+"Capture":null:Ze;_t=[];for(var Oe,Je=Pe;Je!==null;){var Ye=(Oe=Je).stateNode;if(Oe.tag===5&&Ye!==null&&(Oe=Ye,Ae!==null&&(Ye=z(Je,Ae))!=null&&_t.push(Si(Je,Ye,Oe))),Ve)break;Je=Je.return}0<_t.length&&(Ze=new ct(Ze,bt,null,x,et),at.push({event:Ze,listeners:_t}))}}if((7&h)==0){if(ct=l==="mouseout"||l==="pointerout",(!(Ze=l==="mouseover"||l==="pointerover")||(16&h)!=0||!(bt=x.relatedTarget||x.fromElement)||!xr(bt)&&!bt[Yr])&&(ct||Ze)&&(Ze=et.window===et?et:(Ze=et.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,ct?(ct=Pe,(bt=(bt=x.relatedTarget||x.toElement)?xr(bt):null)!==null&&(bt!==(Ve=Ce(bt))||bt.tag!==5&&bt.tag!==6)&&(bt=null)):(ct=null,bt=Pe),ct!==bt)){if(_t=ao,Ye="onMouseLeave",Ae="onMouseEnter",Je="mouse",l!=="pointerout"&&l!=="pointerover"||(_t=gi,Ye="onPointerLeave",Ae="onPointerEnter",Je="pointer"),Ve=ct==null?Ze:Qr(ct),Oe=bt==null?Ze:Qr(bt),(Ze=new _t(Ye,Je+"leave",ct,x,et)).target=Ve,Ze.relatedTarget=Oe,Ye=null,xr(et)===Pe&&((_t=new _t(Ae,Je+"enter",bt,x,et)).target=Oe,_t.relatedTarget=Ve,Ye=_t),Ve=Ye,ct&&bt)e:{for(Ae=bt,Je=0,Oe=_t=ct;Oe;Oe=Kr(Oe))Je++;for(Oe=0,Ye=Ae;Ye;Ye=Kr(Ye))Oe++;for(;0<Je-Oe;)_t=Kr(_t),Je--;for(;0<Oe-Je;)Ae=Kr(Ae),Oe--;for(;Je--;){if(_t===Ae||Ae!==null&&_t===Ae.alternate)break e;_t=Kr(_t),Ae=Kr(Ae)}_t=null}else _t=null;ct!==null&&zs(at,Ze,ct,_t,!1),bt!==null&&Ve!==null&&zs(at,Ve,bt,_t,!0)}if((ct=(Ze=Pe?Qr(Pe):window).nodeName&&Ze.nodeName.toLowerCase())==="select"||ct==="input"&&Ze.type==="file")var gt=Qe;else if(wr(Ze))if(ft)gt=Lu;else{gt=Yt;var lt=wi}else(ct=Ze.nodeName)&&ct.toLowerCase()==="input"&&(Ze.type==="checkbox"||Ze.type==="radio")&&(gt=mo);switch(gt&&(gt=gt(l,Pe))?B(at,gt,x,et):(lt&&lt(l,Ze,Pe),l==="focusout"&&(lt=Ze._wrapperState)&&lt.controlled&&Ze.type==="number"&&xe(Ze,"number",Ze.value)),lt=Pe?Qr(Pe):window,l){case"focusin":(wr(lt)||lt.contentEditable==="true")&&(Gr=lt,ga=Pe,ki=null);break;case"focusout":ki=ga=Gr=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Rs(at,x,et);break;case"selectionchange":if(Vu)break;case"keydown":case"keyup":Rs(at,x,et)}var yt;if($r)e:{switch(l){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Vn?ho(l,x)&&(xt="onCompositionEnd"):l==="keydown"&&x.keyCode===229&&(xt="onCompositionStart");xt&&(fo&&x.locale!=="ko"&&(Vn||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Vn&&(yt=gr()):(an="value"in(Rn=et)?Rn.value:Rn.textContent,Vn=!0)),0<(lt=_o(Pe,xt)).length&&(xt=new lo(xt,l,null,x,et),at.push({event:xt,listeners:lt}),(yt||(yt=yi(x))!==null)&&(xt.data=yt))),(yt=_a?function(pt,Ot){switch(pt){case"compositionend":return yi(Ot);case"keypress":return Ot.which!==32?null:(po=!0,vi);case"textInput":return(pt=Ot.data)===vi&&po?null:pt;default:return null}}(l,x):function(pt,Ot){if(Vn)return pt==="compositionend"||!$r&&ho(pt,Ot)?(pt=gr(),br=an=Rn=null,Vn=!1,pt):null;switch(pt){case"paste":default:return null;case"keypress":if(!(Ot.ctrlKey||Ot.altKey||Ot.metaKey)||Ot.ctrlKey&&Ot.altKey){if(Ot.char&&1<Ot.char.length)return Ot.char;if(Ot.which)return String.fromCharCode(Ot.which)}return null;case"compositionend":return fo&&Ot.locale!=="ko"?null:Ot.data}}(l,x))&&0<(Pe=_o(Pe,"onBeforeInput")).length&&(et=new lo("onBeforeInput","beforeinput",null,x,et),at.push({event:et,listeners:Pe}),et.data=yt)}Ns(at,h)})}function Si(l,h,x){return{instance:l,listener:h,currentTarget:x}}function _o(l,h){for(var x=h+"Capture",L=[];l!==null;){var q=l,Y=q.stateNode;q.tag===5&&Y!==null&&(q=Y,(Y=z(l,x))!=null&&L.unshift(Si(l,Y,q)),(Y=z(l,h))!=null&&L.push(Si(l,Y,q))),l=l.return}return L}function Kr(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function zs(l,h,x,L,q){for(var Y=h._reactName,ie=[];x!==null&&x!==L;){var me=x,we=me.alternate,Pe=me.stateNode;if(we!==null&&we===L)break;me.tag===5&&Pe!==null&&(me=Pe,q?(we=z(x,Y))!=null&&ie.unshift(Si(x,we,me)):q||(we=z(x,Y))!=null&&ie.push(Si(x,we,me))),x=x.return}ie.length!==0&&l.push({event:h,listeners:ie})}function bo(){}var wa=null,xa=null;function Ws(l,h){switch(l){case"button":case"input":case"select":case"textarea":return!!h.autoFocus}return!1}function ka(l,h){return l==="textarea"||l==="option"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var $s=typeof setTimeout=="function"?setTimeout:void 0,Nu=typeof clearTimeout=="function"?clearTimeout:void 0;function Ea(l){(l.nodeType===1||l.nodeType===9&&(l=l.body)!=null)&&(l.textContent="")}function Jr(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break}return l}function Gs(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var x=l.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return l;h--}else x==="/$"&&h++}l=l.previousSibling}return null}var Sa=0,go=Math.random().toString(36).slice(2),Qn="__reactFiber$"+go,vo="__reactProps$"+go,Yr="__reactContainer$"+go,Ks="__reactEvents$"+go;function xr(l){var h=l[Qn];if(h)return h;for(var x=l.parentNode;x;){if(h=x[Yr]||x[Qn]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(l=Gs(l);l!==null;){if(x=l[Qn])return x;l=Gs(l)}return h}x=(l=x).parentNode}return null}function Ci(l){return!(l=l[Qn]||l[Yr])||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Qr(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function yo(l){return l[vo]||null}function Js(l){var h=l[Ks];return h===void 0&&(h=l[Ks]=new Set),h}var Ca=[],Xr=-1;function Xn(l){return{current:l}}function Rt(l){0>Xr||(l.current=Ca[Xr],Ca[Xr]=null,Xr--)}function jt(l,h){Xr++,Ca[Xr]=l.current,l.current=h}var Zn={},Qt=Xn(Zn),sn=Xn(!1),kr=Zn;function Zr(l,h){var x=l.type.contextTypes;if(!x)return Zn;var L=l.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===h)return L.__reactInternalMemoizedMaskedChildContext;var q,Y={};for(q in x)Y[q]=h[q];return L&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=h,l.__reactInternalMemoizedMaskedChildContext=Y),Y}function dn(l){return(l=l.childContextTypes)!=null}function Ia(){Rt(sn),Rt(Qt)}function Ys(l,h,x){if(Qt.current!==Zn)throw Error(r(168));jt(Qt,h),jt(sn,x)}function Qs(l,h,x){var L=l.stateNode;if(l=h.childContextTypes,typeof L.getChildContext!="function")return x;for(var q in L=L.getChildContext())if(!(q in l))throw Error(r(108,H(h)||"Unknown",q));return n({},x,L)}function wo(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Zn,kr=Qt.current,jt(Qt,l),jt(sn,sn.current),!0}function Xs(l,h,x){var L=l.stateNode;if(!L)throw Error(r(169));x?(l=Qs(l,h,kr),L.__reactInternalMemoizedMergedChildContext=l,Rt(sn),Rt(Qt),jt(Qt,l)):Rt(sn),jt(sn,x)}var Aa=null,Er=null,Bu=u.unstable_runWithPriority,Da=u.unstable_scheduleCallback,Ta=u.unstable_cancelCallback,qu=u.unstable_shouldYield,Zs=u.unstable_requestPaint,Ma=u.unstable_now,Uu=u.unstable_getCurrentPriorityLevel,xo=u.unstable_ImmediatePriority,el=u.unstable_UserBlockingPriority,tl=u.unstable_NormalPriority,nl=u.unstable_LowPriority,rl=u.unstable_IdlePriority,Oa={},Fu=Zs!==void 0?Zs:function(){},Bn=null,ko=null,Pa=!1,il=Ma(),Xt=1e4>il?Ma:function(){return Ma()-il};function ei(){switch(Uu()){case xo:return 99;case el:return 98;case tl:return 97;case nl:return 96;case rl:return 95;default:throw Error(r(332))}}function ol(l){switch(l){case 99:return xo;case 98:return el;case 97:return tl;case 96:return nl;case 95:return rl;default:throw Error(r(332))}}function Sr(l,h){return l=ol(l),Bu(l,h)}function Ii(l,h,x){return l=ol(l),Da(l,h,x)}function In(){if(ko!==null){var l=ko;ko=null,Ta(l)}al()}function al(){if(!Pa&&Bn!==null){Pa=!0;var l=0;try{var h=Bn;Sr(99,function(){for(;l<h.length;l++){var x=h[l];do x=x(!0);while(x!==null)}}),Bn=null}catch(x){throw Bn!==null&&(Bn=Bn.slice(l+1)),Da(xo,In),x}finally{Pa=!1}}}var Hu=I.ReactCurrentBatchConfig;function En(l,h){if(l&&l.defaultProps){for(var x in h=n({},h),l=l.defaultProps)h[x]===void 0&&(h[x]=l[x]);return h}return h}var Eo=Xn(null),So=null,ti=null,Co=null;function Ra(){Co=ti=So=null}function La(l){var h=Eo.current;Rt(Eo),l.type._context._currentValue=h}function sl(l,h){for(;l!==null;){var x=l.alternate;if((l.childLanes&h)===h){if(x===null||(x.childLanes&h)===h)break;x.childLanes|=h}else l.childLanes|=h,x!==null&&(x.childLanes|=h);l=l.return}}function ni(l,h){So=l,Co=ti=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&h)!=0&&(Sn=!0),l.firstContext=null)}function gn(l,h){if(Co!==l&&h!==!1&&h!==0)if(typeof h=="number"&&h!==1073741823||(Co=l,h=1073741823),h={context:l,observedBits:h,next:null},ti===null){if(So===null)throw Error(r(308));ti=h,So.dependencies={lanes:0,firstContext:h,responders:null}}else ti=ti.next=h;return l._currentValue}var er=!1;function ja(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ll(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function tr(l,h){return{eventTime:l,lane:h,tag:0,payload:null,callback:null,next:null}}function nr(l,h){if((l=l.updateQueue)!==null){var x=(l=l.shared).pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}}function ul(l,h){var x=l.updateQueue,L=l.alternate;if(L!==null&&x===(L=L.updateQueue)){var q=null,Y=null;if((x=x.firstBaseUpdate)!==null){do{var ie={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};Y===null?q=Y=ie:Y=Y.next=ie,x=x.next}while(x!==null);Y===null?q=Y=h:Y=Y.next=h}else q=Y=h;return x={baseState:L.baseState,firstBaseUpdate:q,lastBaseUpdate:Y,shared:L.shared,effects:L.effects},void(l.updateQueue=x)}(l=x.lastBaseUpdate)===null?x.firstBaseUpdate=h:l.next=h,x.lastBaseUpdate=h}function Ai(l,h,x,L){var q=l.updateQueue;er=!1;var Y=q.firstBaseUpdate,ie=q.lastBaseUpdate,me=q.shared.pending;if(me!==null){q.shared.pending=null;var we=me,Pe=we.next;we.next=null,ie===null?Y=Pe:ie.next=Pe,ie=we;var et=l.alternate;if(et!==null){var at=(et=et.updateQueue).lastBaseUpdate;at!==ie&&(at===null?et.firstBaseUpdate=Pe:at.next=Pe,et.lastBaseUpdate=we)}}if(Y!==null){for(at=q.baseState,ie=0,et=Pe=we=null;;){me=Y.lane;var Ze=Y.eventTime;if((L&me)===me){et!==null&&(et=et.next={eventTime:Ze,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var ct=l,bt=Y;switch(me=h,Ze=x,bt.tag){case 1:if(typeof(ct=bt.payload)=="function"){at=ct.call(Ze,at,me);break e}at=ct;break e;case 3:ct.flags=-4097&ct.flags|64;case 0:if((me=typeof(ct=bt.payload)=="function"?ct.call(Ze,at,me):ct)==null)break e;at=n({},at,me);break e;case 2:er=!0}}Y.callback!==null&&(l.flags|=32,(me=q.effects)===null?q.effects=[Y]:me.push(Y))}else Ze={eventTime:Ze,lane:me,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},et===null?(Pe=et=Ze,we=at):et=et.next=Ze,ie|=me;if((Y=Y.next)===null){if((me=q.shared.pending)===null)break;Y=me.next,me.next=null,q.lastBaseUpdate=me,q.shared.pending=null}}et===null&&(we=at),q.baseState=we,q.firstBaseUpdate=Pe,q.lastBaseUpdate=et,qi|=ie,l.lanes=ie,l.memoizedState=at}}function dl(l,h,x){if(l=h.effects,h.effects=null,l!==null)for(h=0;h<l.length;h++){var L=l[h],q=L.callback;if(q!==null){if(L.callback=null,L=x,typeof q!="function")throw Error(r(191,q));q.call(L)}}}var cl=new t.Component().refs;function Io(l,h,x,L){x=(x=x(L,h=l.memoizedState))==null?h:n({},h,x),l.memoizedState=x,l.lanes===0&&(l.updateQueue.baseState=x)}var Ao={isMounted:function(l){return!!(l=l._reactInternals)&&Ce(l)===l},enqueueSetState:function(l,h,x){l=l._reactInternals;var L=fn(),q=or(l),Y=tr(L,q);Y.payload=h,x!=null&&(Y.callback=x),nr(l,Y),ar(l,q,L)},enqueueReplaceState:function(l,h,x){l=l._reactInternals;var L=fn(),q=or(l),Y=tr(L,q);Y.tag=1,Y.payload=h,x!=null&&(Y.callback=x),nr(l,Y),ar(l,q,L)},enqueueForceUpdate:function(l,h){l=l._reactInternals;var x=fn(),L=or(l),q=tr(x,L);q.tag=2,h!=null&&(q.callback=h),nr(l,q),ar(l,L,x)}};function fl(l,h,x,L,q,Y,ie){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(L,Y,ie):!h.prototype||!h.prototype.isPureReactComponent||!xi(x,L)||!xi(q,Y)}function pl(l,h,x){var L=!1,q=Zn,Y=h.contextType;return typeof Y=="object"&&Y!==null?Y=gn(Y):(q=dn(h)?kr:Qt.current,Y=(L=(L=h.contextTypes)!=null)?Zr(l,q):Zn),h=new h(x,Y),l.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Ao,l.stateNode=h,h._reactInternals=l,L&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=q,l.__reactInternalMemoizedMaskedChildContext=Y),h}function hl(l,h,x,L){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,L),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,L),h.state!==l&&Ao.enqueueReplaceState(h,h.state,null)}function Va(l,h,x,L){var q=l.stateNode;q.props=x,q.state=l.memoizedState,q.refs=cl,ja(l);var Y=h.contextType;typeof Y=="object"&&Y!==null?q.context=gn(Y):(Y=dn(h)?kr:Qt.current,q.context=Zr(l,Y)),Ai(l,x,q,L),q.state=l.memoizedState,typeof(Y=h.getDerivedStateFromProps)=="function"&&(Io(l,h,Y,x),q.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(h=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),h!==q.state&&Ao.enqueueReplaceState(q,q.state,null),Ai(l,x,q,L),q.state=l.memoizedState),typeof q.componentDidMount=="function"&&(l.flags|=4)}var Do=Array.isArray;function Di(l,h,x){if((l=x.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(x._owner){if(x=x._owner){if(x.tag!==1)throw Error(r(309));var L=x.stateNode}if(!L)throw Error(r(147,l));var q=""+l;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===q?h.ref:(h=function(Y){var ie=L.refs;ie===cl&&(ie=L.refs={}),Y===null?delete ie[q]:ie[q]=Y},h._stringRef=q,h)}if(typeof l!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,l))}return l}function To(l,h){if(l.type!=="textarea")throw Error(r(31,Object.prototype.toString.call(h)==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":h))}function ml(l){function h(Ve,Ae){if(l){var Oe=Ve.lastEffect;Oe!==null?(Oe.nextEffect=Ae,Ve.lastEffect=Ae):Ve.firstEffect=Ve.lastEffect=Ae,Ae.nextEffect=null,Ae.flags=8}}function x(Ve,Ae){if(!l)return null;for(;Ae!==null;)h(Ve,Ae),Ae=Ae.sibling;return null}function L(Ve,Ae){for(Ve=new Map;Ae!==null;)Ae.key!==null?Ve.set(Ae.key,Ae):Ve.set(Ae.index,Ae),Ae=Ae.sibling;return Ve}function q(Ve,Ae){return(Ve=ur(Ve,Ae)).index=0,Ve.sibling=null,Ve}function Y(Ve,Ae,Oe){return Ve.index=Oe,l?(Oe=Ve.alternate)!==null?(Oe=Oe.index)<Ae?(Ve.flags=2,Ae):Oe:(Ve.flags=2,Ae):Ae}function ie(Ve){return l&&Ve.alternate===null&&(Ve.flags=2),Ve}function me(Ve,Ae,Oe,Je){return Ae===null||Ae.tag!==6?((Ae=vs(Oe,Ve.mode,Je)).return=Ve,Ae):((Ae=q(Ae,Oe)).return=Ve,Ae)}function we(Ve,Ae,Oe,Je){return Ae!==null&&Ae.elementType===Oe.type?((Je=q(Ae,Oe.props)).ref=Di(Ve,Ae,Oe),Je.return=Ve,Je):((Je=Go(Oe.type,Oe.key,Oe.props,null,Ve.mode,Je)).ref=Di(Ve,Ae,Oe),Je.return=Ve,Je)}function Pe(Ve,Ae,Oe,Je){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Oe.containerInfo||Ae.stateNode.implementation!==Oe.implementation?((Ae=ys(Oe,Ve.mode,Je)).return=Ve,Ae):((Ae=q(Ae,Oe.children||[])).return=Ve,Ae)}function et(Ve,Ae,Oe,Je,Ye){return Ae===null||Ae.tag!==7?((Ae=ci(Oe,Ve.mode,Je,Ye)).return=Ve,Ae):((Ae=q(Ae,Oe)).return=Ve,Ae)}function at(Ve,Ae,Oe){if(typeof Ae=="string"||typeof Ae=="number")return(Ae=vs(""+Ae,Ve.mode,Oe)).return=Ve,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:return(Oe=Go(Ae.type,Ae.key,Ae.props,null,Ve.mode,Oe)).ref=Di(Ve,null,Ae),Oe.return=Ve,Oe;case O:return(Ae=ys(Ae,Ve.mode,Oe)).return=Ve,Ae}if(Do(Ae)||ue(Ae))return(Ae=ci(Ae,Ve.mode,Oe,null)).return=Ve,Ae;To(Ve,Ae)}return null}function Ze(Ve,Ae,Oe,Je){var Ye=Ae!==null?Ae.key:null;if(typeof Oe=="string"||typeof Oe=="number")return Ye!==null?null:me(Ve,Ae,""+Oe,Je);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case S:return Oe.key===Ye?Oe.type===A?et(Ve,Ae,Oe.props.children,Je,Ye):we(Ve,Ae,Oe,Je):null;case O:return Oe.key===Ye?Pe(Ve,Ae,Oe,Je):null}if(Do(Oe)||ue(Oe))return Ye!==null?null:et(Ve,Ae,Oe,Je,null);To(Ve,Oe)}return null}function ct(Ve,Ae,Oe,Je,Ye){if(typeof Je=="string"||typeof Je=="number")return me(Ae,Ve=Ve.get(Oe)||null,""+Je,Ye);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case S:return Ve=Ve.get(Je.key===null?Oe:Je.key)||null,Je.type===A?et(Ae,Ve,Je.props.children,Ye,Je.key):we(Ae,Ve,Je,Ye);case O:return Pe(Ae,Ve=Ve.get(Je.key===null?Oe:Je.key)||null,Je,Ye)}if(Do(Je)||ue(Je))return et(Ae,Ve=Ve.get(Oe)||null,Je,Ye,null);To(Ae,Je)}return null}function bt(Ve,Ae,Oe,Je){for(var Ye=null,gt=null,lt=Ae,yt=Ae=0,xt=null;lt!==null&&yt<Oe.length;yt++){lt.index>yt?(xt=lt,lt=null):xt=lt.sibling;var pt=Ze(Ve,lt,Oe[yt],Je);if(pt===null){lt===null&&(lt=xt);break}l&&lt&&pt.alternate===null&&h(Ve,lt),Ae=Y(pt,Ae,yt),gt===null?Ye=pt:gt.sibling=pt,gt=pt,lt=xt}if(yt===Oe.length)return x(Ve,lt),Ye;if(lt===null){for(;yt<Oe.length;yt++)(lt=at(Ve,Oe[yt],Je))!==null&&(Ae=Y(lt,Ae,yt),gt===null?Ye=lt:gt.sibling=lt,gt=lt);return Ye}for(lt=L(Ve,lt);yt<Oe.length;yt++)(xt=ct(lt,Ve,yt,Oe[yt],Je))!==null&&(l&&xt.alternate!==null&&lt.delete(xt.key===null?yt:xt.key),Ae=Y(xt,Ae,yt),gt===null?Ye=xt:gt.sibling=xt,gt=xt);return l&&lt.forEach(function(Ot){return h(Ve,Ot)}),Ye}function _t(Ve,Ae,Oe,Je){var Ye=ue(Oe);if(typeof Ye!="function")throw Error(r(150));if((Oe=Ye.call(Oe))==null)throw Error(r(151));for(var gt=Ye=null,lt=Ae,yt=Ae=0,xt=null,pt=Oe.next();lt!==null&&!pt.done;yt++,pt=Oe.next()){lt.index>yt?(xt=lt,lt=null):xt=lt.sibling;var Ot=Ze(Ve,lt,pt.value,Je);if(Ot===null){lt===null&&(lt=xt);break}l&&lt&&Ot.alternate===null&&h(Ve,lt),Ae=Y(Ot,Ae,yt),gt===null?Ye=Ot:gt.sibling=Ot,gt=Ot,lt=xt}if(pt.done)return x(Ve,lt),Ye;if(lt===null){for(;!pt.done;yt++,pt=Oe.next())(pt=at(Ve,pt.value,Je))!==null&&(Ae=Y(pt,Ae,yt),gt===null?Ye=pt:gt.sibling=pt,gt=pt);return Ye}for(lt=L(Ve,lt);!pt.done;yt++,pt=Oe.next())(pt=ct(lt,Ve,yt,pt.value,Je))!==null&&(l&&pt.alternate!==null&&lt.delete(pt.key===null?yt:pt.key),Ae=Y(pt,Ae,yt),gt===null?Ye=pt:gt.sibling=pt,gt=pt);return l&&lt.forEach(function(bd){return h(Ve,bd)}),Ye}return function(Ve,Ae,Oe,Je){var Ye=typeof Oe=="object"&&Oe!==null&&Oe.type===A&&Oe.key===null;Ye&&(Oe=Oe.props.children);var gt=typeof Oe=="object"&&Oe!==null;if(gt)switch(Oe.$$typeof){case S:e:{for(gt=Oe.key,Ye=Ae;Ye!==null;){if(Ye.key===gt){if(Ye.tag===7){if(Oe.type===A){x(Ve,Ye.sibling),(Ae=q(Ye,Oe.props.children)).return=Ve,Ve=Ae;break e}}else if(Ye.elementType===Oe.type){x(Ve,Ye.sibling),(Ae=q(Ye,Oe.props)).ref=Di(Ve,Ye,Oe),Ae.return=Ve,Ve=Ae;break e}x(Ve,Ye);break}h(Ve,Ye),Ye=Ye.sibling}Oe.type===A?((Ae=ci(Oe.props.children,Ve.mode,Je,Oe.key)).return=Ve,Ve=Ae):((Je=Go(Oe.type,Oe.key,Oe.props,null,Ve.mode,Je)).ref=Di(Ve,Ae,Oe),Je.return=Ve,Ve=Je)}return ie(Ve);case O:e:{for(Ye=Oe.key;Ae!==null;){if(Ae.key===Ye){if(Ae.tag===4&&Ae.stateNode.containerInfo===Oe.containerInfo&&Ae.stateNode.implementation===Oe.implementation){x(Ve,Ae.sibling),(Ae=q(Ae,Oe.children||[])).return=Ve,Ve=Ae;break e}x(Ve,Ae);break}h(Ve,Ae),Ae=Ae.sibling}(Ae=ys(Oe,Ve.mode,Je)).return=Ve,Ve=Ae}return ie(Ve)}if(typeof Oe=="string"||typeof Oe=="number")return Oe=""+Oe,Ae!==null&&Ae.tag===6?(x(Ve,Ae.sibling),(Ae=q(Ae,Oe)).return=Ve,Ve=Ae):(x(Ve,Ae),(Ae=vs(Oe,Ve.mode,Je)).return=Ve,Ve=Ae),ie(Ve);if(Do(Oe))return bt(Ve,Ae,Oe,Je);if(ue(Oe))return _t(Ve,Ae,Oe,Je);if(gt&&To(Ve,Oe),Oe===void 0&&!Ye)switch(Ve.tag){case 1:case 22:case 0:case 11:case 15:throw Error(r(152,H(Ve.type)||"Component"))}return x(Ve,Ae)}}var Mo=ml(!0),_l=ml(!1),Ti={},An=Xn(Ti),Mi=Xn(Ti),Oi=Xn(Ti);function Cr(l){if(l===Ti)throw Error(r(174));return l}function Na(l,h){switch(jt(Oi,h),jt(Mi,l),jt(An,Ti),l=h.nodeType){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Re(null,"");break;default:h=Re(h=(l=l===8?h.parentNode:h).namespaceURI||null,l=l.tagName)}Rt(An),jt(An,h)}function ri(){Rt(An),Rt(Mi),Rt(Oi)}function bl(l){Cr(Oi.current);var h=Cr(An.current),x=Re(h,l.type);h!==x&&(jt(Mi,l),jt(An,x))}function Ba(l){Mi.current===l&&(Rt(An),Rt(Mi))}var Vt=Xn(0);function Oo(l){for(var h=l;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&((x=x.dehydrated)===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((64&h.flags)!=0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var qn=null,rr=null,Dn=!1;function gl(l,h){var x=wn(5,null,null,0);x.elementType="DELETED",x.type="DELETED",x.stateNode=h,x.return=l,x.flags=8,l.lastEffect!==null?(l.lastEffect.nextEffect=x,l.lastEffect=x):l.firstEffect=l.lastEffect=x}function vl(l,h){switch(l.tag){case 5:var x=l.type;return(h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h)!==null&&(l.stateNode=h,!0);case 6:return(h=l.pendingProps===""||h.nodeType!==3?null:h)!==null&&(l.stateNode=h,!0);default:return!1}}function qa(l){if(Dn){var h=rr;if(h){var x=h;if(!vl(l,h)){if(!(h=Jr(x.nextSibling))||!vl(l,h))return l.flags=-1025&l.flags|2,Dn=!1,void(qn=l);gl(qn,x)}qn=l,rr=Jr(h.firstChild)}else l.flags=-1025&l.flags|2,Dn=!1,qn=l}}function yl(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;qn=l}function Po(l){if(l!==qn)return!1;if(!Dn)return yl(l),Dn=!0,!1;var h=l.type;if(l.tag!==5||h!=="head"&&h!=="body"&&!ka(h,l.memoizedProps))for(h=rr;h;)gl(l,h),h=Jr(h.nextSibling);if(yl(l),l.tag===13){if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(r(317));e:{for(l=l.nextSibling,h=0;l;){if(l.nodeType===8){var x=l.data;if(x==="/$"){if(h===0){rr=Jr(l.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}l=l.nextSibling}rr=null}}else rr=qn?Jr(l.stateNode.nextSibling):null;return!0}function Ua(){rr=qn=null,Dn=!1}var ii=[];function Fa(){for(var l=0;l<ii.length;l++)ii[l]._workInProgressVersionPrimary=null;ii.length=0}var Pi=I.ReactCurrentDispatcher,vn=I.ReactCurrentBatchConfig,Ri=0,Nt=null,rn=null,Gt=null,Ro=!1,Li=!1;function ln(){throw Error(r(321))}function Ha(l,h){if(h===null)return!1;for(var x=0;x<h.length&&x<l.length;x++)if(!bn(l[x],h[x]))return!1;return!0}function za(l,h,x,L,q,Y){if(Ri=Y,Nt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Pi.current=l===null||l.memoizedState===null?Wu:$u,l=x(L,q),Li){Y=0;do{if(Li=!1,!(25>Y))throw Error(r(301));Y+=1,Gt=rn=null,h.updateQueue=null,Pi.current=Gu,l=x(L,q)}while(Li)}if(Pi.current=No,h=rn!==null&&rn.next!==null,Ri=0,Gt=rn=Nt=null,Ro=!1,h)throw Error(r(300));return l}function Ir(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Nt.memoizedState=Gt=l:Gt=Gt.next=l,Gt}function Ar(){if(rn===null){var l=Nt.alternate;l=l!==null?l.memoizedState:null}else l=rn.next;var h=Gt===null?Nt.memoizedState:Gt.next;if(h!==null)Gt=h,rn=l;else{if(l===null)throw Error(r(310));l={memoizedState:(rn=l).memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},Gt===null?Nt.memoizedState=Gt=l:Gt=Gt.next=l}return Gt}function Tn(l,h){return typeof h=="function"?h(l):h}function ji(l){var h=Ar(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=l;var L=rn,q=L.baseQueue,Y=x.pending;if(Y!==null){if(q!==null){var ie=q.next;q.next=Y.next,Y.next=ie}L.baseQueue=q=Y,x.pending=null}if(q!==null){q=q.next,L=L.baseState;var me=ie=Y=null,we=q;do{var Pe=we.lane;if((Ri&Pe)===Pe)me!==null&&(me=me.next={lane:0,action:we.action,eagerReducer:we.eagerReducer,eagerState:we.eagerState,next:null}),L=we.eagerReducer===l?we.eagerState:l(L,we.action);else{var et={lane:Pe,action:we.action,eagerReducer:we.eagerReducer,eagerState:we.eagerState,next:null};me===null?(ie=me=et,Y=L):me=me.next=et,Nt.lanes|=Pe,qi|=Pe}we=we.next}while(we!==null&&we!==q);me===null?Y=L:me.next=ie,bn(L,h.memoizedState)||(Sn=!0),h.memoizedState=L,h.baseState=Y,h.baseQueue=me,x.lastRenderedState=L}return[h.memoizedState,x.dispatch]}function Vi(l){var h=Ar(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=l;var L=x.dispatch,q=x.pending,Y=h.memoizedState;if(q!==null){x.pending=null;var ie=q=q.next;do Y=l(Y,ie.action),ie=ie.next;while(ie!==q);bn(Y,h.memoizedState)||(Sn=!0),h.memoizedState=Y,h.baseQueue===null&&(h.baseState=Y),x.lastRenderedState=Y}return[Y,L]}function wl(l,h,x){var L=h._getVersion;L=L(h._source);var q=h._workInProgressVersionPrimary;if(q!==null?l=q===L:(l=l.mutableReadLanes,(l=(Ri&l)===l)&&(h._workInProgressVersionPrimary=L,ii.push(h))),l)return x(h._source);throw ii.push(h),Error(r(350))}function xl(l,h,x,L){var q=on;if(q===null)throw Error(r(349));var Y=h._getVersion,ie=Y(h._source),me=Pi.current,we=me.useState(function(){return wl(q,h,x)}),Pe=we[1],et=we[0];we=Gt;var at=l.memoizedState,Ze=at.refs,ct=Ze.getSnapshot,bt=at.source;at=at.subscribe;var _t=Nt;return l.memoizedState={refs:Ze,source:h,subscribe:L},me.useEffect(function(){Ze.getSnapshot=x,Ze.setSnapshot=Pe;var Ve=Y(h._source);if(!bn(ie,Ve)){Ve=x(h._source),bn(et,Ve)||(Pe(Ve),Ve=or(_t),q.mutableReadLanes|=Ve&q.pendingLanes),Ve=q.mutableReadLanes,q.entangledLanes|=Ve;for(var Ae=q.entanglements,Oe=Ve;0<Oe;){var Je=31-Cn(Oe),Ye=1<<Je;Ae[Je]|=Ve,Oe&=~Ye}}},[x,h,L]),me.useEffect(function(){return L(h._source,function(){var Ve=Ze.getSnapshot,Ae=Ze.setSnapshot;try{Ae(Ve(h._source));var Oe=or(_t);q.mutableReadLanes|=Oe&q.pendingLanes}catch(Je){Ae(function(){throw Je})}})},[h,L]),bn(ct,x)&&bn(bt,h)&&bn(at,L)||((l={pending:null,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:et}).dispatch=Pe=Ka.bind(null,Nt,l),we.queue=l,we.baseQueue=null,et=wl(q,h,x),we.memoizedState=we.baseState=et),et}function kl(l,h,x){return xl(Ar(),l,h,x)}function Ni(l){var h=Ir();return typeof l=="function"&&(l=l()),h.memoizedState=h.baseState=l,l=(l=h.queue={pending:null,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:l}).dispatch=Ka.bind(null,Nt,l),[h.memoizedState,l]}function Lo(l,h,x,L){return l={tag:l,create:h,destroy:x,deps:L,next:null},(h=Nt.updateQueue)===null?(h={lastEffect:null},Nt.updateQueue=h,h.lastEffect=l.next=l):(x=h.lastEffect)===null?h.lastEffect=l.next=l:(L=x.next,x.next=l,l.next=L,h.lastEffect=l),l}function El(l){return l={current:l},Ir().memoizedState=l}function jo(){return Ar().memoizedState}function Wa(l,h,x,L){var q=Ir();Nt.flags|=l,q.memoizedState=Lo(1|h,x,void 0,L===void 0?null:L)}function $a(l,h,x,L){var q=Ar();L=L===void 0?null:L;var Y=void 0;if(rn!==null){var ie=rn.memoizedState;if(Y=ie.destroy,L!==null&&Ha(L,ie.deps))return void Lo(h,x,Y,L)}Nt.flags|=l,q.memoizedState=Lo(1|h,x,Y,L)}function Sl(l,h){return Wa(516,4,l,h)}function Vo(l,h){return $a(516,4,l,h)}function Cl(l,h){return $a(4,2,l,h)}function Il(l,h){return typeof h=="function"?(l=l(),h(l),function(){h(null)}):h!=null?(l=l(),h.current=l,function(){h.current=null}):void 0}function Al(l,h,x){return x=x!=null?x.concat([l]):null,$a(4,2,Il.bind(null,h,l),x)}function Ga(){}function Dl(l,h){var x=Ar();h=h===void 0?null:h;var L=x.memoizedState;return L!==null&&h!==null&&Ha(h,L[1])?L[0]:(x.memoizedState=[l,h],l)}function Tl(l,h){var x=Ar();h=h===void 0?null:h;var L=x.memoizedState;return L!==null&&h!==null&&Ha(h,L[1])?L[0]:(l=l(),x.memoizedState=[l,h],l)}function zu(l,h){var x=ei();Sr(98>x?98:x,function(){l(!0)}),Sr(97<x?97:x,function(){var L=vn.transition;vn.transition=1;try{l(!1),h()}finally{vn.transition=L}})}function Ka(l,h,x){var L=fn(),q=or(l),Y={lane:q,action:x,eagerReducer:null,eagerState:null,next:null},ie=h.pending;if(ie===null?Y.next=Y:(Y.next=ie.next,ie.next=Y),h.pending=Y,ie=l.alternate,l===Nt||ie!==null&&ie===Nt)Li=Ro=!0;else{if(l.lanes===0&&(ie===null||ie.lanes===0)&&(ie=h.lastRenderedReducer)!==null)try{var me=h.lastRenderedState,we=ie(me,x);if(Y.eagerReducer=ie,Y.eagerState=we,bn(we,me))return}catch{}ar(l,q,L)}}var No={readContext:gn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useOpaqueIdentifier:ln,unstable_isNewReconciler:!1},Wu={readContext:gn,useCallback:function(l,h){return Ir().memoizedState=[l,h===void 0?null:h],l},useContext:gn,useEffect:Sl,useImperativeHandle:function(l,h,x){return x=x!=null?x.concat([l]):null,Wa(4,2,Il.bind(null,h,l),x)},useLayoutEffect:function(l,h){return Wa(4,2,l,h)},useMemo:function(l,h){var x=Ir();return h=h===void 0?null:h,l=l(),x.memoizedState=[l,h],l},useReducer:function(l,h,x){var L=Ir();return h=x!==void 0?x(h):h,L.memoizedState=L.baseState=h,l=(l=L.queue={pending:null,dispatch:null,lastRenderedReducer:l,lastRenderedState:h}).dispatch=Ka.bind(null,Nt,l),[L.memoizedState,l]},useRef:El,useState:Ni,useDebugValue:Ga,useDeferredValue:function(l){var h=Ni(l),x=h[0],L=h[1];return Sl(function(){var q=vn.transition;vn.transition=1;try{L(l)}finally{vn.transition=q}},[l]),x},useTransition:function(){var l=Ni(!1),h=l[0];return El(l=zu.bind(null,l[1])),[l,h]},useMutableSource:function(l,h,x){var L=Ir();return L.memoizedState={refs:{getSnapshot:h,setSnapshot:null},source:l,subscribe:x},xl(L,l,h,x)},useOpaqueIdentifier:function(){if(Dn){var l=!1,h=function(L){return{$$typeof:W,toString:L,valueOf:L}}(function(){throw l||(l=!0,x("r:"+(Sa++).toString(36))),Error(r(355))}),x=Ni(h)[1];return(2&Nt.mode)==0&&(Nt.flags|=516,Lo(5,function(){x("r:"+(Sa++).toString(36))},void 0,null)),h}return Ni(h="r:"+(Sa++).toString(36)),h},unstable_isNewReconciler:!1},$u={readContext:gn,useCallback:Dl,useContext:gn,useEffect:Vo,useImperativeHandle:Al,useLayoutEffect:Cl,useMemo:Tl,useReducer:ji,useRef:jo,useState:function(){return ji(Tn)},useDebugValue:Ga,useDeferredValue:function(l){var h=ji(Tn),x=h[0],L=h[1];return Vo(function(){var q=vn.transition;vn.transition=1;try{L(l)}finally{vn.transition=q}},[l]),x},useTransition:function(){var l=ji(Tn)[0];return[jo().current,l]},useMutableSource:kl,useOpaqueIdentifier:function(){return ji(Tn)[0]},unstable_isNewReconciler:!1},Gu={readContext:gn,useCallback:Dl,useContext:gn,useEffect:Vo,useImperativeHandle:Al,useLayoutEffect:Cl,useMemo:Tl,useReducer:Vi,useRef:jo,useState:function(){return Vi(Tn)},useDebugValue:Ga,useDeferredValue:function(l){var h=Vi(Tn),x=h[0],L=h[1];return Vo(function(){var q=vn.transition;vn.transition=1;try{L(l)}finally{vn.transition=q}},[l]),x},useTransition:function(){var l=Vi(Tn)[0];return[jo().current,l]},useMutableSource:kl,useOpaqueIdentifier:function(){return Vi(Tn)[0]},unstable_isNewReconciler:!1},Ku=I.ReactCurrentOwner,Sn=!1;function cn(l,h,x,L){h.child=l===null?_l(h,null,x,L):Mo(h,l.child,x,L)}function Ml(l,h,x,L,q){x=x.render;var Y=h.ref;return ni(h,q),L=za(l,h,x,L,Y,q),l===null||Sn?(h.flags|=1,cn(l,h,L,q),h.child):(h.updateQueue=l.updateQueue,h.flags&=-517,l.lanes&=~q,Un(l,h,q))}function Ol(l,h,x,L,q,Y){if(l===null){var ie=x.type;return typeof ie!="function"||bs(ie)||ie.defaultProps!==void 0||x.compare!==null||x.defaultProps!==void 0?((l=Go(x.type,null,L,h,h.mode,Y)).ref=h.ref,l.return=h,h.child=l):(h.tag=15,h.type=ie,Pl(l,h,ie,L,q,Y))}return ie=l.child,(q&Y)==0&&(q=ie.memoizedProps,(x=(x=x.compare)!==null?x:xi)(q,L)&&l.ref===h.ref)?Un(l,h,Y):(h.flags|=1,(l=ur(ie,L)).ref=h.ref,l.return=h,h.child=l)}function Pl(l,h,x,L,q,Y){if(l!==null&&xi(l.memoizedProps,L)&&l.ref===h.ref){if(Sn=!1,(Y&q)==0)return h.lanes=l.lanes,Un(l,h,Y);(16384&l.flags)!=0&&(Sn=!0)}return Ja(l,h,x,L,Y)}function Rl(l,h,x){var L=h.pendingProps,q=L.children,Y=l!==null?l.memoizedState:null;if(L.mode==="hidden"||L.mode==="unstable-defer-without-hiding")if((4&h.mode)==0)h.memoizedState={baseLanes:0},$o(h,x);else{if((1073741824&x)==0)return l=Y!==null?Y.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:l},$o(h,l),null;h.memoizedState={baseLanes:0},$o(h,Y!==null?Y.baseLanes:x)}else Y!==null?(L=Y.baseLanes|x,h.memoizedState=null):L=x,$o(h,L);return cn(l,h,q,x),h.child}function Ll(l,h){var x=h.ref;(l===null&&x!==null||l!==null&&l.ref!==x)&&(h.flags|=128)}function Ja(l,h,x,L,q){var Y=dn(x)?kr:Qt.current;return Y=Zr(h,Y),ni(h,q),x=za(l,h,x,L,Y,q),l===null||Sn?(h.flags|=1,cn(l,h,x,q),h.child):(h.updateQueue=l.updateQueue,h.flags&=-517,l.lanes&=~q,Un(l,h,q))}function jl(l,h,x,L,q){if(dn(x)){var Y=!0;wo(h)}else Y=!1;if(ni(h,q),h.stateNode===null)l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),pl(h,x,L),Va(h,x,L,q),L=!0;else if(l===null){var ie=h.stateNode,me=h.memoizedProps;ie.props=me;var we=ie.context,Pe=x.contextType;typeof Pe=="object"&&Pe!==null?Pe=gn(Pe):Pe=Zr(h,Pe=dn(x)?kr:Qt.current);var et=x.getDerivedStateFromProps,at=typeof et=="function"||typeof ie.getSnapshotBeforeUpdate=="function";at||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==L||we!==Pe)&&hl(h,ie,L,Pe),er=!1;var Ze=h.memoizedState;ie.state=Ze,Ai(h,L,ie,q),we=h.memoizedState,me!==L||Ze!==we||sn.current||er?(typeof et=="function"&&(Io(h,x,et,L),we=h.memoizedState),(me=er||fl(h,x,me,L,Ze,we,Pe))?(at||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(h.flags|=4)):(typeof ie.componentDidMount=="function"&&(h.flags|=4),h.memoizedProps=L,h.memoizedState=we),ie.props=L,ie.state=we,ie.context=Pe,L=me):(typeof ie.componentDidMount=="function"&&(h.flags|=4),L=!1)}else{ie=h.stateNode,ll(l,h),me=h.memoizedProps,Pe=h.type===h.elementType?me:En(h.type,me),ie.props=Pe,at=h.pendingProps,Ze=ie.context,typeof(we=x.contextType)=="object"&&we!==null?we=gn(we):we=Zr(h,we=dn(x)?kr:Qt.current);var ct=x.getDerivedStateFromProps;(et=typeof ct=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(me!==at||Ze!==we)&&hl(h,ie,L,we),er=!1,Ze=h.memoizedState,ie.state=Ze,Ai(h,L,ie,q);var bt=h.memoizedState;me!==at||Ze!==bt||sn.current||er?(typeof ct=="function"&&(Io(h,x,ct,L),bt=h.memoizedState),(Pe=er||fl(h,x,Pe,L,Ze,bt,we))?(et||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(L,bt,we),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(L,bt,we)),typeof ie.componentDidUpdate=="function"&&(h.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(h.flags|=256)):(typeof ie.componentDidUpdate!="function"||me===l.memoizedProps&&Ze===l.memoizedState||(h.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===l.memoizedProps&&Ze===l.memoizedState||(h.flags|=256),h.memoizedProps=L,h.memoizedState=bt),ie.props=L,ie.state=bt,ie.context=we,L=Pe):(typeof ie.componentDidUpdate!="function"||me===l.memoizedProps&&Ze===l.memoizedState||(h.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||me===l.memoizedProps&&Ze===l.memoizedState||(h.flags|=256),L=!1)}return Ya(l,h,x,L,Y,q)}function Ya(l,h,x,L,q,Y){Ll(l,h);var ie=(64&h.flags)!=0;if(!L&&!ie)return q&&Xs(h,x,!1),Un(l,h,Y);L=h.stateNode,Ku.current=h;var me=ie&&typeof x.getDerivedStateFromError!="function"?null:L.render();return h.flags|=1,l!==null&&ie?(h.child=Mo(h,l.child,null,Y),h.child=Mo(h,null,me,Y)):cn(l,h,me,Y),h.memoizedState=L.state,q&&Xs(h,x,!0),h.child}function Vl(l){var h=l.stateNode;h.pendingContext?Ys(0,h.pendingContext,h.pendingContext!==h.context):h.context&&Ys(0,h.context,!1),Na(l,h.containerInfo)}var Nl,Qa,Bl,ql,Xa={dehydrated:null,retryLane:0};function Ul(l,h,x){var L,q=h.pendingProps,Y=Vt.current,ie=!1;return(L=(64&h.flags)!=0)||(L=(l===null||l.memoizedState!==null)&&(2&Y)!=0),L?(ie=!0,h.flags&=-65):l!==null&&l.memoizedState===null||q.fallback===void 0||q.unstable_avoidThisFallback===!0||(Y|=1),jt(Vt,1&Y),l===null?(q.fallback!==void 0&&qa(h),l=q.children,Y=q.fallback,ie?(l=Fl(h,l,Y,x),h.child.memoizedState={baseLanes:x},h.memoizedState=Xa,l):typeof q.unstable_expectedLoadTime=="number"?(l=Fl(h,l,Y,x),h.child.memoizedState={baseLanes:x},h.memoizedState=Xa,h.lanes=33554432,l):((x=gs({mode:"visible",children:l},h.mode,x,null)).return=h,h.child=x)):(l.memoizedState,ie?(q=Yu(l,h,q.children,q.fallback,x),ie=h.child,Y=l.child.memoizedState,ie.memoizedState=Y===null?{baseLanes:x}:{baseLanes:Y.baseLanes|x},ie.childLanes=l.childLanes&~x,h.memoizedState=Xa,q):(x=Ju(l,h,q.children,x),h.memoizedState=null,x))}function Fl(l,h,x,L){var q=l.mode,Y=l.child;return h={mode:"hidden",children:h},(2&q)==0&&Y!==null?(Y.childLanes=0,Y.pendingProps=h):Y=gs(h,q,0,null),x=ci(x,q,L,null),Y.return=l,x.return=l,Y.sibling=x,l.child=Y,x}function Ju(l,h,x,L){var q=l.child;return l=q.sibling,x=ur(q,{mode:"visible",children:x}),(2&h.mode)==0&&(x.lanes=L),x.return=h,x.sibling=null,l!==null&&(l.nextEffect=null,l.flags=8,h.firstEffect=h.lastEffect=l),h.child=x}function Yu(l,h,x,L,q){var Y=h.mode,ie=l.child;l=ie.sibling;var me={mode:"hidden",children:x};return(2&Y)==0&&h.child!==ie?((x=h.child).childLanes=0,x.pendingProps=me,(ie=x.lastEffect)!==null?(h.firstEffect=x.firstEffect,h.lastEffect=ie,ie.nextEffect=null):h.firstEffect=h.lastEffect=null):x=ur(ie,me),l!==null?L=ur(l,L):(L=ci(L,Y,q,null)).flags|=2,L.return=h,x.return=h,x.sibling=L,h.child=x,L}function Hl(l,h){l.lanes|=h;var x=l.alternate;x!==null&&(x.lanes|=h),sl(l.return,h)}function Za(l,h,x,L,q,Y){var ie=l.memoizedState;ie===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:L,tail:x,tailMode:q,lastEffect:Y}:(ie.isBackwards=h,ie.rendering=null,ie.renderingStartTime=0,ie.last=L,ie.tail=x,ie.tailMode=q,ie.lastEffect=Y)}function zl(l,h,x){var L=h.pendingProps,q=L.revealOrder,Y=L.tail;if(cn(l,h,L.children,x),(2&(L=Vt.current))!=0)L=1&L|2,h.flags|=64;else{if(l!==null&&(64&l.flags)!=0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Hl(l,x);else if(l.tag===19)Hl(l,x);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}L&=1}if(jt(Vt,L),(2&h.mode)==0)h.memoizedState=null;else switch(q){case"forwards":for(x=h.child,q=null;x!==null;)(l=x.alternate)!==null&&Oo(l)===null&&(q=x),x=x.sibling;(x=q)===null?(q=h.child,h.child=null):(q=x.sibling,x.sibling=null),Za(h,!1,q,x,Y,h.lastEffect);break;case"backwards":for(x=null,q=h.child,h.child=null;q!==null;){if((l=q.alternate)!==null&&Oo(l)===null){h.child=q;break}l=q.sibling,q.sibling=x,x=q,q=l}Za(h,!0,x,null,Y,h.lastEffect);break;case"together":Za(h,!1,null,null,void 0,h.lastEffect);break;default:h.memoizedState=null}return h.child}function Un(l,h,x){if(l!==null&&(h.dependencies=l.dependencies),qi|=h.lanes,(x&h.childLanes)!=0){if(l!==null&&h.child!==l.child)throw Error(r(153));if(h.child!==null){for(x=ur(l=h.child,l.pendingProps),h.child=x,x.return=h;l.sibling!==null;)l=l.sibling,(x=x.sibling=ur(l,l.pendingProps)).return=h;x.sibling=null}return h.child}return null}function Bi(l,h){if(!Dn)switch(l.tailMode){case"hidden":h=l.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?l.tail=null:x.sibling=null;break;case"collapsed":x=l.tail;for(var L=null;x!==null;)x.alternate!==null&&(L=x),x=x.sibling;L===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:L.sibling=null}}function Qu(l,h,x){var L=h.pendingProps;switch(h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return dn(h.type)&&Ia(),null;case 3:return ri(),Rt(sn),Rt(Qt),Fa(),(L=h.stateNode).pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),l!==null&&l.child!==null||(Po(h)?h.flags|=4:L.hydrate||(h.flags|=256)),Qa(h),null;case 5:Ba(h);var q=Cr(Oi.current);if(x=h.type,l!==null&&h.stateNode!=null)Bl(l,h,x,L,q),l.ref!==h.ref&&(h.flags|=128);else{if(!L){if(h.stateNode===null)throw Error(r(166));return null}if(l=Cr(An.current),Po(h)){L=h.stateNode,x=h.type;var Y=h.memoizedProps;switch(L[Qn]=h,L[vo]=Y,x){case"dialog":Pt("cancel",L),Pt("close",L);break;case"iframe":case"object":case"embed":Pt("load",L);break;case"video":case"audio":for(l=0;l<Ei.length;l++)Pt(Ei[l],L);break;case"source":Pt("error",L);break;case"img":case"image":case"link":Pt("error",L),Pt("load",L);break;case"details":Pt("toggle",L);break;case"input":re(L,Y),Pt("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!Y.multiple},Pt("invalid",L);break;case"textarea":Ne(L,Y),Pt("invalid",L)}for(var ie in ot(x,Y),l=null,Y)Y.hasOwnProperty(ie)&&(q=Y[ie],ie==="children"?typeof q=="string"?L.textContent!==q&&(l=["children",q]):typeof q=="number"&&L.textContent!==""+q&&(l=["children",""+q]):s.hasOwnProperty(ie)&&q!=null&&ie==="onScroll"&&Pt("scroll",L));switch(x){case"input":pe(L),De(L,Y,!0);break;case"textarea":pe(L),de(L);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(L.onclick=bo)}L=l,h.updateQueue=L,L!==null&&(h.flags|=4)}else{switch(ie=q.nodeType===9?q:q.ownerDocument,l===qe.html&&(l=tt(x)),l===qe.html?x==="script"?((l=ie.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof L.is=="string"?l=ie.createElement(x,{is:L.is}):(l=ie.createElement(x),x==="select"&&(ie=l,L.multiple?ie.multiple=!0:L.size&&(ie.size=L.size))):l=ie.createElementNS(l,x),l[Qn]=h,l[vo]=L,Nl(l,h,!1,!1),h.stateNode=l,ie=Ct(x,L),x){case"dialog":Pt("cancel",l),Pt("close",l),q=L;break;case"iframe":case"object":case"embed":Pt("load",l),q=L;break;case"video":case"audio":for(q=0;q<Ei.length;q++)Pt(Ei[q],l);q=L;break;case"source":Pt("error",l),q=L;break;case"img":case"image":case"link":Pt("error",l),Pt("load",l),q=L;break;case"details":Pt("toggle",l),q=L;break;case"input":re(l,L),q=He(l,L),Pt("invalid",l);break;case"option":q=Se(l,L);break;case"select":l._wrapperState={wasMultiple:!!L.multiple},q=n({},L,{value:void 0}),Pt("invalid",l);break;case"textarea":Ne(l,L),q=ye(l,L),Pt("invalid",l);break;default:q=L}ot(x,q);var me=q;for(Y in me)if(me.hasOwnProperty(Y)){var we=me[Y];Y==="style"?Xe(l,we):Y==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0)!=null&&Fe(l,we):Y==="children"?typeof we=="string"?(x!=="textarea"||we!=="")&&Be(l,we):typeof we=="number"&&Be(l,""+we):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?we!=null&&Y==="onScroll"&&Pt("scroll",l):we!=null&&C(l,Y,we,ie))}switch(x){case"input":pe(l),De(l,L,!1);break;case"textarea":pe(l),de(l);break;case"option":L.value!=null&&l.setAttribute("value",""+$(L.value));break;case"select":l.multiple=!!L.multiple,(Y=L.value)!=null?Ee(l,!!L.multiple,Y,!1):L.defaultValue!=null&&Ee(l,!!L.multiple,L.defaultValue,!0);break;default:typeof q.onClick=="function"&&(l.onclick=bo)}Ws(x,L)&&(h.flags|=4)}h.ref!==null&&(h.flags|=128)}return null;case 6:if(l&&h.stateNode!=null)ql(l,h,l.memoizedProps,L);else{if(typeof L!="string"&&h.stateNode===null)throw Error(r(166));x=Cr(Oi.current),Cr(An.current),Po(h)?(L=h.stateNode,x=h.memoizedProps,L[Qn]=h,L.nodeValue!==x&&(h.flags|=4)):((L=(x.nodeType===9?x:x.ownerDocument).createTextNode(L))[Qn]=h,h.stateNode=L)}return null;case 13:return Rt(Vt),L=h.memoizedState,(64&h.flags)!=0?(h.lanes=x,h):(L=L!==null,x=!1,l===null?h.memoizedProps.fallback!==void 0&&Po(h):x=l.memoizedState!==null,L&&!x&&(2&h.mode)!=0&&(l===null&&h.memoizedProps.unstable_avoidThisFallback!==!0||(1&Vt.current)!=0?Kt===0&&(Kt=3):(Kt!==0&&Kt!==3||(Kt=4),on===null||(134217727&qi)==0&&(134217727&ai)==0||li(on,Zt))),(L||x)&&(h.flags|=4),null);case 4:return ri(),Qa(h),l===null&&qs(h.stateNode.containerInfo),null;case 10:return La(h),null;case 19:if(Rt(Vt),(L=h.memoizedState)===null)return null;if(Y=(64&h.flags)!=0,(ie=L.rendering)===null)if(Y)Bi(L,!1);else{if(Kt!==0||l!==null&&(64&l.flags)!=0)for(l=h.child;l!==null;){if((ie=Oo(l))!==null){for(h.flags|=64,Bi(L,!1),(Y=ie.updateQueue)!==null&&(h.updateQueue=Y,h.flags|=4),L.lastEffect===null&&(h.firstEffect=null),h.lastEffect=L.lastEffect,L=x,x=h.child;x!==null;)l=L,(Y=x).flags&=2,Y.nextEffect=null,Y.firstEffect=null,Y.lastEffect=null,(ie=Y.alternate)===null?(Y.childLanes=0,Y.lanes=l,Y.child=null,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=ie.childLanes,Y.lanes=ie.lanes,Y.child=ie.child,Y.memoizedProps=ie.memoizedProps,Y.memoizedState=ie.memoizedState,Y.updateQueue=ie.updateQueue,Y.type=ie.type,l=ie.dependencies,Y.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),x=x.sibling;return jt(Vt,1&Vt.current|2),h.child}l=l.sibling}L.tail!==null&&Xt()>ds&&(h.flags|=64,Y=!0,Bi(L,!1),h.lanes=33554432)}else{if(!Y)if((l=Oo(ie))!==null){if(h.flags|=64,Y=!0,(x=l.updateQueue)!==null&&(h.updateQueue=x,h.flags|=4),Bi(L,!0),L.tail===null&&L.tailMode==="hidden"&&!ie.alternate&&!Dn)return(h=h.lastEffect=L.lastEffect)!==null&&(h.nextEffect=null),null}else 2*Xt()-L.renderingStartTime>ds&&x!==1073741824&&(h.flags|=64,Y=!0,Bi(L,!1),h.lanes=33554432);L.isBackwards?(ie.sibling=h.child,h.child=ie):((x=L.last)!==null?x.sibling=ie:h.child=ie,L.last=ie)}return L.tail!==null?(x=L.tail,L.rendering=x,L.tail=x.sibling,L.lastEffect=h.lastEffect,L.renderingStartTime=Xt(),x.sibling=null,h=Vt.current,jt(Vt,Y?1&h|2:1&h),x):null;case 23:case 24:return _s(),l!==null&&l.memoizedState!==null!=(h.memoizedState!==null)&&L.mode!=="unstable-defer-without-hiding"&&(h.flags|=4),null}throw Error(r(156,h.tag))}function Xu(l){switch(l.tag){case 1:dn(l.type)&&Ia();var h=l.flags;return 4096&h?(l.flags=-4097&h|64,l):null;case 3:if(ri(),Rt(sn),Rt(Qt),Fa(),(64&(h=l.flags))!=0)throw Error(r(285));return l.flags=-4097&h|64,l;case 5:return Ba(l),null;case 13:return Rt(Vt),4096&(h=l.flags)?(l.flags=-4097&h|64,l):null;case 19:return Rt(Vt),null;case 4:return ri(),null;case 10:return La(l),null;case 23:case 24:return _s(),null;default:return null}}function es(l,h){try{var x="",L=h;do x+=K(L),L=L.return;while(L);var q=x}catch(Y){q=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:l,source:h,stack:q}}function ts(l,h){try{}catch(x){setTimeout(function(){throw x})}}Nl=function(l,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Qa=function(){},Bl=function(l,h,x,L){var q=l.memoizedProps;if(q!==L){l=h.stateNode,Cr(An.current);var Y,ie=null;switch(x){case"input":q=He(l,q),L=He(l,L),ie=[];break;case"option":q=Se(l,q),L=Se(l,L),ie=[];break;case"select":q=n({},q,{value:void 0}),L=n({},L,{value:void 0}),ie=[];break;case"textarea":q=ye(l,q),L=ye(l,L),ie=[];break;default:typeof q.onClick!="function"&&typeof L.onClick=="function"&&(l.onclick=bo)}for(Pe in ot(x,L),x=null,q)if(!L.hasOwnProperty(Pe)&&q.hasOwnProperty(Pe)&&q[Pe]!=null)if(Pe==="style"){var me=q[Pe];for(Y in me)me.hasOwnProperty(Y)&&(x||(x={}),x[Y]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(s.hasOwnProperty(Pe)?ie||(ie=[]):(ie=ie||[]).push(Pe,null));for(Pe in L){var we=L[Pe];if(me=q?.[Pe],L.hasOwnProperty(Pe)&&we!==me&&(we!=null||me!=null))if(Pe==="style")if(me){for(Y in me)!me.hasOwnProperty(Y)||we&&we.hasOwnProperty(Y)||(x||(x={}),x[Y]="");for(Y in we)we.hasOwnProperty(Y)&&me[Y]!==we[Y]&&(x||(x={}),x[Y]=we[Y])}else x||(ie||(ie=[]),ie.push(Pe,x)),x=we;else Pe==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,me=me?me.__html:void 0,we!=null&&me!==we&&(ie=ie||[]).push(Pe,we)):Pe==="children"?typeof we!="string"&&typeof we!="number"||(ie=ie||[]).push(Pe,""+we):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(s.hasOwnProperty(Pe)?(we!=null&&Pe==="onScroll"&&Pt("scroll",l),ie||me===we||(ie=[])):typeof we=="object"&&we!==null&&we.$$typeof===W?we.toString():(ie=ie||[]).push(Pe,we))}x&&(ie=ie||[]).push("style",x);var Pe=ie;(h.updateQueue=Pe)&&(h.flags|=4)}},ql=function(l,h,x,L){x!==L&&(h.flags|=4)};var Zu=typeof WeakMap=="function"?WeakMap:Map;function Wl(l,h,x){(x=tr(-1,x)).tag=3,x.payload={element:null};var L=h.value;return x.callback=function(){Uo||(Uo=!0,cs=L),ts(0,h)},x}function $l(l,h,x){(x=tr(-1,x)).tag=3;var L=l.type.getDerivedStateFromError;if(typeof L=="function"){var q=h.value;x.payload=function(){return ts(0,h),L(q)}}var Y=l.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(x.callback=function(){typeof L!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this),ts(0,h));var ie=h.stack;this.componentDidCatch(h.value,{componentStack:ie!==null?ie:""})}),x}var ed=typeof WeakSet=="function"?WeakSet:Set;function Gl(l){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(x){lr(l,x)}else h.current=null}function td(l,h){switch(h.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&h.flags&&l!==null){var x=l.memoizedProps,L=l.memoizedState;h=(l=h.stateNode).getSnapshotBeforeUpdate(h.elementType===h.type?x:En(h.type,x),L),l.__reactInternalSnapshotBeforeUpdate=h}return;case 3:return void(256&h.flags&&Ea(h.stateNode.containerInfo))}throw Error(r(163))}function nd(l,h,x){switch(x.tag){case 0:case 11:case 15:case 22:if((h=(h=x.updateQueue)!==null?h.lastEffect:null)!==null){l=h=h.next;do{if((3&l.tag)==3){var L=l.create;l.destroy=L()}l=l.next}while(l!==h)}if((h=(h=x.updateQueue)!==null?h.lastEffect:null)!==null){l=h=h.next;do{var q=l;L=q.next,(4&(q=q.tag))!=0&&(1&q)!=0&&(uu(x,l),ud(x,l)),l=L}while(l!==h)}return;case 1:return l=x.stateNode,4&x.flags&&(h===null?l.componentDidMount():(L=x.elementType===x.type?h.memoizedProps:En(x.type,h.memoizedProps),l.componentDidUpdate(L,h.memoizedState,l.__reactInternalSnapshotBeforeUpdate))),void((h=x.updateQueue)!==null&&dl(x,h,l));case 3:if((h=x.updateQueue)!==null){if(l=null,x.child!==null)switch(x.child.tag){case 5:case 1:l=x.child.stateNode}dl(x,h,l)}return;case 5:return l=x.stateNode,void(h===null&&4&x.flags&&Ws(x.type,x.memoizedProps)&&l.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(x.memoizedState===null&&(x=x.alternate,x!==null&&(x=x.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&Xi(x)))))}throw Error(r(163))}function Kl(l,h){for(var x=l;;){if(x.tag===5){var L=x.stateNode;if(h)typeof(L=L.style).setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{L=x.stateNode;var q=x.memoizedProps.style;q=q!=null&&q.hasOwnProperty("display")?q.display:null,L.style.display=Ge("display",q)}}else if(x.tag===6)x.stateNode.nodeValue=h?"":x.memoizedProps;else if((x.tag!==23&&x.tag!==24||x.memoizedState===null||x===l)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break;for(;x.sibling===null;){if(x.return===null||x.return===l)return;x=x.return}x.sibling.return=x.return,x=x.sibling}}function Jl(l,h){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Aa,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:case 22:if((l=h.updateQueue)!==null&&(l=l.lastEffect)!==null){var x=l=l.next;do{var L=x,q=L.destroy;if(L=L.tag,q!==void 0)if((4&L)!=0)uu(h,x);else{L=h;try{q()}catch(Y){lr(L,Y)}}x=x.next}while(x!==l)}break;case 1:if(Gl(h),typeof(l=h.stateNode).componentWillUnmount=="function")try{l.props=h.memoizedProps,l.state=h.memoizedState,l.componentWillUnmount()}catch(Y){lr(h,Y)}break;case 5:Gl(h);break;case 4:Zl(l,h)}}function Yl(l){l.alternate=null,l.child=null,l.dependencies=null,l.firstEffect=null,l.lastEffect=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.return=null,l.updateQueue=null}function Ql(l){return l.tag===5||l.tag===3||l.tag===4}function Xl(l){e:{for(var h=l.return;h!==null;){if(Ql(h))break e;h=h.return}throw Error(r(160))}var x=h;switch(h=x.stateNode,x.tag){case 5:var L=!1;break;case 3:case 4:h=h.containerInfo,L=!0;break;default:throw Error(r(161))}16&x.flags&&(Be(h,""),x.flags&=-17);e:t:for(x=l;;){for(;x.sibling===null;){if(x.return===null||Ql(x.return)){x=null;break e}x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(2&x.flags||x.child===null||x.tag===4)continue t;x.child.return=x,x=x.child}if(!(2&x.flags)){x=x.stateNode;break e}}L?ns(l,x,h):rs(l,x,h)}function ns(l,h,x){var L=l.tag,q=L===5||L===6;if(q)l=q?l.stateNode:l.stateNode.instance,h?x.nodeType===8?x.parentNode.insertBefore(l,h):x.insertBefore(l,h):(x.nodeType===8?(h=x.parentNode).insertBefore(l,x):(h=x).appendChild(l),(x=x._reactRootContainer)!=null||h.onclick!==null||(h.onclick=bo));else if(L!==4&&(l=l.child)!==null)for(ns(l,h,x),l=l.sibling;l!==null;)ns(l,h,x),l=l.sibling}function rs(l,h,x){var L=l.tag,q=L===5||L===6;if(q)l=q?l.stateNode:l.stateNode.instance,h?x.insertBefore(l,h):x.appendChild(l);else if(L!==4&&(l=l.child)!==null)for(rs(l,h,x),l=l.sibling;l!==null;)rs(l,h,x),l=l.sibling}function Zl(l,h){for(var x,L,q=h,Y=!1;;){if(!Y){Y=q.return;e:for(;;){if(Y===null)throw Error(r(160));switch(x=Y.stateNode,Y.tag){case 5:L=!1;break e;case 3:case 4:x=x.containerInfo,L=!0;break e}Y=Y.return}Y=!0}if(q.tag===5||q.tag===6){e:for(var ie=l,me=q,we=me;;)if(Jl(ie,we),we.child!==null&&we.tag!==4)we.child.return=we,we=we.child;else{if(we===me)break e;for(;we.sibling===null;){if(we.return===null||we.return===me)break e;we=we.return}we.sibling.return=we.return,we=we.sibling}L?(ie=x,me=q.stateNode,ie.nodeType===8?ie.parentNode.removeChild(me):ie.removeChild(me)):x.removeChild(q.stateNode)}else if(q.tag===4){if(q.child!==null){x=q.stateNode.containerInfo,L=!0,q.child.return=q,q=q.child;continue}}else if(Jl(l,q),q.child!==null){q.child.return=q,q=q.child;continue}if(q===h)break;for(;q.sibling===null;){if(q.return===null||q.return===h)return;(q=q.return).tag===4&&(Y=!1)}q.sibling.return=q.return,q=q.sibling}}function is(l,h){switch(h.tag){case 0:case 11:case 14:case 15:case 22:var x=h.updateQueue;if((x=x!==null?x.lastEffect:null)!==null){var L=x=x.next;do(3&L.tag)==3&&(l=L.destroy,L.destroy=void 0,l!==void 0&&l()),L=L.next;while(L!==x)}return;case 1:case 12:case 17:return;case 5:if((x=h.stateNode)!=null){L=h.memoizedProps;var q=l!==null?l.memoizedProps:L;l=h.type;var Y=h.updateQueue;if(h.updateQueue=null,Y!==null){for(x[vo]=L,l==="input"&&L.type==="radio"&&L.name!=null&&le(x,L),Ct(l,q),h=Ct(l,L),q=0;q<Y.length;q+=2){var ie=Y[q],me=Y[q+1];ie==="style"?Xe(x,me):ie==="dangerouslySetInnerHTML"?Fe(x,me):ie==="children"?Be(x,me):C(x,ie,me,h)}switch(l){case"input":ve(x,L);break;case"textarea":Ue(x,L);break;case"select":l=x._wrapperState.wasMultiple,x._wrapperState.wasMultiple=!!L.multiple,(Y=L.value)!=null?Ee(x,!!L.multiple,Y,!1):l!==!!L.multiple&&(L.defaultValue!=null?Ee(x,!!L.multiple,L.defaultValue,!0):Ee(x,!!L.multiple,L.multiple?[]:"",!1))}}}return;case 6:if(h.stateNode===null)throw Error(r(162));return void(h.stateNode.nodeValue=h.memoizedProps);case 3:return void((x=h.stateNode).hydrate&&(x.hydrate=!1,Xi(x.containerInfo)));case 13:return h.memoizedState!==null&&(us=Xt(),Kl(h.child,!0)),void eu(h);case 19:return void eu(h);case 23:case 24:return void Kl(h,h.memoizedState!==null)}throw Error(r(163))}function eu(l){var h=l.updateQueue;if(h!==null){l.updateQueue=null;var x=l.stateNode;x===null&&(x=l.stateNode=new ed),h.forEach(function(L){var q=fd.bind(null,l,L);x.has(L)||(x.add(L),L.then(q,q))})}}function rd(l,h){return l!==null&&((l=l.memoizedState)===null||l.dehydrated!==null)&&(h=h.memoizedState)!==null&&h.dehydrated===null}var id=Math.ceil,Bo=I.ReactCurrentDispatcher,os=I.ReactCurrentOwner,vt=0,on=null,zt=null,Zt=0,Dr=0,as=Xn(0),Kt=0,qo=null,oi=0,qi=0,ai=0,ss=0,ls=null,us=0,ds=1/0;function si(){ds=Xt()+500}var tu,st=null,Uo=!1,cs=null,Mn=null,ir=!1,Ui=null,Fi=90,fs=[],ps=[],Fn=null,Hi=0,hs=null,Fo=-1,Hn=0,Ho=0,zi=null,zo=!1;function fn(){return(48&vt)!=0?Xt():Fo!==-1?Fo:Fo=Xt()}function or(l){if((2&(l=l.mode))==0)return 1;if((4&l)==0)return ei()===99?1:2;if(Hn===0&&(Hn=oi),Hu.transition!==0){Ho!==0&&(Ho=ls!==null?ls.pendingLanes:0),l=Hn;var h=4186112&~Ho;return(h&=-h)===0&&(h=(l=4186112&~l)&-l)===0&&(h=8192),h}return l=ei(),(4&vt)!=0&&l===98?l=jr(12,Hn):l=jr(l=function(x){switch(x){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(l),Hn),l}function ar(l,h,x){if(50<Hi)throw Hi=0,hs=null,Error(r(185));if((l=Wo(l,h))===null)return null;Nr(l,h,x),l===on&&(ai|=h,Kt===4&&li(l,Zt));var L=ei();h===1?(8&vt)!=0&&(48&vt)==0?ms(l):(yn(l,x),vt===0&&(si(),In())):((4&vt)==0||L!==98&&L!==99||(Fn===null?Fn=new Set([l]):Fn.add(l)),yn(l,x)),ls=l}function Wo(l,h){l.lanes|=h;var x=l.alternate;for(x!==null&&(x.lanes|=h),x=l,l=l.return;l!==null;)l.childLanes|=h,(x=l.alternate)!==null&&(x.childLanes|=h),x=l,l=l.return;return x.tag===3?x.stateNode:null}function yn(l,h){for(var x=l.callbackNode,L=l.suspendedLanes,q=l.pingedLanes,Y=l.expirationTimes,ie=l.pendingLanes;0<ie;){var me=31-Cn(ie),we=1<<me,Pe=Y[me];if(Pe===-1){if((we&L)==0||(we&q)!=0){Pe=h,Gn(we);var et=Dt;Y[me]=10<=et?Pe+250:6<=et?Pe+5e3:-1}}else Pe<=h&&(l.expiredLanes|=we);ie&=~we}if(L=mr(l,l===on?Zt:0),h=Dt,L===0)x!==null&&(x!==Oa&&Ta(x),l.callbackNode=null,l.callbackPriority=0);else{if(x!==null){if(l.callbackPriority===h)return;x!==Oa&&Ta(x)}h===15?(x=ms.bind(null,l),Bn===null?(Bn=[x],ko=Da(xo,al)):Bn.push(x),x=Oa):h===14?x=Ii(99,ms.bind(null,l)):(x=function(at){switch(at){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(r(358,at))}}(h),x=Ii(x,nu.bind(null,l))),l.callbackPriority=h,l.callbackNode=x}}function nu(l){if(Fo=-1,Ho=Hn=0,(48&vt)!=0)throw Error(r(327));var h=l.callbackNode;if(sr()&&l.callbackNode!==h)return null;var x=mr(l,l===on?Zt:0);if(x===0)return null;var L=x,q=vt;vt|=16;var Y=au();for(on===l&&Zt===L||(si(),ui(l,L));;)try{ad();break}catch(me){ou(l,me)}if(Ra(),Bo.current=Y,vt=q,zt!==null?L=0:(on=null,Zt=0,L=Kt),(oi&ai)!=0)ui(l,0);else if(L!==0){if(L===2&&(vt|=64,l.hydrate&&(l.hydrate=!1,Ea(l.containerInfo)),(x=bi(l))!==0&&(L=Wi(l,x))),L===1)throw h=qo,ui(l,0),li(l,x),yn(l,Xt()),h;switch(l.finishedWork=l.current.alternate,l.finishedLanes=x,L){case 0:case 1:throw Error(r(345));case 2:case 5:di(l);break;case 3:if(li(l,x),(62914560&x)===x&&10<(L=us+500-Xt())){if(mr(l,0)!==0)break;if(((q=l.suspendedLanes)&x)!==x){fn(),l.pingedLanes|=l.suspendedLanes&q;break}l.timeoutHandle=$s(di.bind(null,l),L);break}di(l);break;case 4:if(li(l,x),(4186112&x)===x)break;for(L=l.eventTimes,q=-1;0<x;){var ie=31-Cn(x);Y=1<<ie,(ie=L[ie])>q&&(q=ie),x&=~Y}if(x=q,10<(x=(120>(x=Xt()-x)?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*id(x/1960))-x)){l.timeoutHandle=$s(di.bind(null,l),x);break}di(l);break;default:throw Error(r(329))}}return yn(l,Xt()),l.callbackNode===h?nu.bind(null,l):null}function li(l,h){for(h&=~ss,h&=~ai,l.suspendedLanes|=h,l.pingedLanes&=~h,l=l.expirationTimes;0<h;){var x=31-Cn(h),L=1<<x;l[x]=-1,h&=~L}}function ms(l){if((48&vt)!=0)throw Error(r(327));if(sr(),l===on&&(l.expiredLanes&Zt)!=0){var h=Zt,x=Wi(l,h);(oi&ai)!=0&&(x=Wi(l,h=mr(l,h)))}else x=Wi(l,h=mr(l,0));if(l.tag!==0&&x===2&&(vt|=64,l.hydrate&&(l.hydrate=!1,Ea(l.containerInfo)),(h=bi(l))!==0&&(x=Wi(l,h))),x===1)throw x=qo,ui(l,0),li(l,h),yn(l,Xt()),x;return l.finishedWork=l.current.alternate,l.finishedLanes=h,di(l),yn(l,Xt()),null}function ru(l,h){var x=vt;vt|=1;try{return l(h)}finally{(vt=x)===0&&(si(),In())}}function iu(l,h){var x=vt;vt&=-2,vt|=8;try{return l(h)}finally{(vt=x)===0&&(si(),In())}}function $o(l,h){jt(as,Dr),Dr|=h,oi|=h}function _s(){Dr=as.current,Rt(as)}function ui(l,h){l.finishedWork=null,l.finishedLanes=0;var x=l.timeoutHandle;if(x!==-1&&(l.timeoutHandle=-1,Nu(x)),zt!==null)for(x=zt.return;x!==null;){var L=x;switch(L.tag){case 1:(L=L.type.childContextTypes)!=null&&Ia();break;case 3:ri(),Rt(sn),Rt(Qt),Fa();break;case 5:Ba(L);break;case 4:ri();break;case 13:case 19:Rt(Vt);break;case 10:La(L);break;case 23:case 24:_s()}x=x.return}on=l,zt=ur(l.current,null),Zt=Dr=oi=h,Kt=0,qo=null,ss=ai=qi=0}function ou(l,h){for(;;){var x=zt;try{if(Ra(),Pi.current=No,Ro){for(var L=Nt.memoizedState;L!==null;){var q=L.queue;q!==null&&(q.pending=null),L=L.next}Ro=!1}if(Ri=0,Gt=rn=Nt=null,Li=!1,os.current=null,x===null||x.return===null){Kt=1,qo=h,zt=null;break}e:{var Y=l,ie=x.return,me=x,we=h;if(h=Zt,me.flags|=2048,me.firstEffect=me.lastEffect=null,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Pe=we;if((2&me.mode)==0){var et=me.alternate;et?(me.updateQueue=et.updateQueue,me.memoizedState=et.memoizedState,me.lanes=et.lanes):(me.updateQueue=null,me.memoizedState=null)}var at=(1&Vt.current)!=0,Ze=ie;do{var ct;if(ct=Ze.tag===13){var bt=Ze.memoizedState;if(bt!==null)ct=bt.dehydrated!==null;else{var _t=Ze.memoizedProps;ct=_t.fallback!==void 0&&(_t.unstable_avoidThisFallback!==!0||!at)}}if(ct){var Ve=Ze.updateQueue;if(Ve===null){var Ae=new Set;Ae.add(Pe),Ze.updateQueue=Ae}else Ve.add(Pe);if((2&Ze.mode)==0){if(Ze.flags|=64,me.flags|=16384,me.flags&=-2981,me.tag===1)if(me.alternate===null)me.tag=17;else{var Oe=tr(-1,1);Oe.tag=2,nr(me,Oe)}me.lanes|=1;break e}we=void 0,me=h;var Je=Y.pingCache;if(Je===null?(Je=Y.pingCache=new Zu,we=new Set,Je.set(Pe,we)):(we=Je.get(Pe))===void 0&&(we=new Set,Je.set(Pe,we)),!we.has(me)){we.add(me);var Ye=cd.bind(null,Y,Pe,me);Pe.then(Ye,Ye)}Ze.flags|=4096,Ze.lanes=h;break e}Ze=Ze.return}while(Ze!==null);we=Error((H(me.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Kt!==5&&(Kt=2),we=es(we,me),Ze=ie;do{switch(Ze.tag){case 3:Y=we,Ze.flags|=4096,h&=-h,Ze.lanes|=h,ul(Ze,Wl(0,Y,h));break e;case 1:Y=we;var gt=Ze.type,lt=Ze.stateNode;if((64&Ze.flags)==0&&(typeof gt.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(Mn===null||!Mn.has(lt)))){Ze.flags|=4096,h&=-h,Ze.lanes|=h,ul(Ze,$l(Ze,Y,h));break e}}Ze=Ze.return}while(Ze!==null)}lu(x)}catch(yt){h=yt,zt===x&&x!==null&&(zt=x=x.return);continue}break}}function au(){var l=Bo.current;return Bo.current=No,l===null?No:l}function Wi(l,h){var x=vt;vt|=16;var L=au();for(on===l&&Zt===h||ui(l,h);;)try{od();break}catch(q){ou(l,q)}if(Ra(),vt=x,Bo.current=L,zt!==null)throw Error(r(261));return on=null,Zt=0,Kt}function od(){for(;zt!==null;)su(zt)}function ad(){for(;zt!==null&&!qu();)su(zt)}function su(l){var h=tu(l.alternate,l,Dr);l.memoizedProps=l.pendingProps,h===null?lu(l):zt=h,os.current=null}function lu(l){var h=l;do{var x=h.alternate;if(l=h.return,(2048&h.flags)==0){if((x=Qu(x,h,Dr))!==null)return void(zt=x);if((x=h).tag!==24&&x.tag!==23||x.memoizedState===null||(1073741824&Dr)!=0||(4&x.mode)==0){for(var L=0,q=x.child;q!==null;)L|=q.lanes|q.childLanes,q=q.sibling;x.childLanes=L}l!==null&&(2048&l.flags)==0&&(l.firstEffect===null&&(l.firstEffect=h.firstEffect),h.lastEffect!==null&&(l.lastEffect!==null&&(l.lastEffect.nextEffect=h.firstEffect),l.lastEffect=h.lastEffect),1<h.flags&&(l.lastEffect!==null?l.lastEffect.nextEffect=h:l.firstEffect=h,l.lastEffect=h))}else{if((x=Xu(h))!==null)return x.flags&=2047,void(zt=x);l!==null&&(l.firstEffect=l.lastEffect=null,l.flags|=2048)}if((h=h.sibling)!==null)return void(zt=h);zt=h=l}while(h!==null);Kt===0&&(Kt=5)}function di(l){var h=ei();return Sr(99,sd.bind(null,l,h)),null}function sd(l,h){do sr();while(Ui!==null);if((48&vt)!=0)throw Error(r(327));var x=l.finishedWork;if(x===null)return null;if(l.finishedWork=null,l.finishedLanes=0,x===l.current)throw Error(r(177));l.callbackNode=null;var L=x.lanes|x.childLanes,q=L,Y=l.pendingLanes&~q;l.pendingLanes=q,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=q,l.mutableReadLanes&=q,l.entangledLanes&=q,q=l.entanglements;for(var ie=l.eventTimes,me=l.expirationTimes;0<Y;){var we=31-Cn(Y),Pe=1<<we;q[we]=0,ie[we]=-1,me[we]=-1,Y&=~Pe}if(Fn!==null&&(24&L)==0&&Fn.has(l)&&Fn.delete(l),l===on&&(zt=on=null,Zt=0),1<x.flags?x.lastEffect!==null?(x.lastEffect.nextEffect=x,L=x.firstEffect):L=x:L=x.firstEffect,L!==null){if(q=vt,vt|=32,os.current=null,wa=Br,ba(ie=Ps())){if("selectionStart"in ie)me={start:ie.selectionStart,end:ie.selectionEnd};else e:if(me=(me=ie.ownerDocument)&&me.defaultView||window,(Pe=me.getSelection&&me.getSelection())&&Pe.rangeCount!==0){me=Pe.anchorNode,Y=Pe.anchorOffset,we=Pe.focusNode,Pe=Pe.focusOffset;try{me.nodeType,we.nodeType}catch{me=null;break e}var et=0,at=-1,Ze=-1,ct=0,bt=0,_t=ie,Ve=null;t:for(;;){for(var Ae;_t!==me||Y!==0&&_t.nodeType!==3||(at=et+Y),_t!==we||Pe!==0&&_t.nodeType!==3||(Ze=et+Pe),_t.nodeType===3&&(et+=_t.nodeValue.length),(Ae=_t.firstChild)!==null;)Ve=_t,_t=Ae;for(;;){if(_t===ie)break t;if(Ve===me&&++ct===Y&&(at=et),Ve===we&&++bt===Pe&&(Ze=et),(Ae=_t.nextSibling)!==null)break;Ve=(_t=Ve).parentNode}_t=Ae}me=at===-1||Ze===-1?null:{start:at,end:Ze}}else me=null;me=me||{start:0,end:0}}else me=null;xa={focusedElem:ie,selectionRange:me},Br=!1,zi=null,zo=!1,st=L;do try{ld()}catch(pt){if(st===null)throw Error(r(330));lr(st,pt),st=st.nextEffect}while(st!==null);zi=null,st=L;do try{for(ie=l;st!==null;){var Oe=st.flags;if(16&Oe&&Be(st.stateNode,""),128&Oe){var Je=st.alternate;if(Je!==null){var Ye=Je.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}switch(1038&Oe){case 2:Xl(st),st.flags&=-3;break;case 6:Xl(st),st.flags&=-3,is(st.alternate,st);break;case 1024:st.flags&=-1025;break;case 1028:st.flags&=-1025,is(st.alternate,st);break;case 4:is(st.alternate,st);break;case 8:Zl(ie,me=st);var gt=me.alternate;Yl(me),gt!==null&&Yl(gt)}st=st.nextEffect}}catch(pt){if(st===null)throw Error(r(330));lr(st,pt),st=st.nextEffect}while(st!==null);if(Ye=xa,Je=Ps(),Oe=Ye.focusedElem,ie=Ye.selectionRange,Je!==Oe&&Oe&&Oe.ownerDocument&&Os(Oe.ownerDocument.documentElement,Oe)){for(ie!==null&&ba(Oe)&&(Je=ie.start,(Ye=ie.end)===void 0&&(Ye=Je),"selectionStart"in Oe?(Oe.selectionStart=Je,Oe.selectionEnd=Math.min(Ye,Oe.value.length)):(Ye=(Je=Oe.ownerDocument||document)&&Je.defaultView||window).getSelection&&(Ye=Ye.getSelection(),me=Oe.textContent.length,gt=Math.min(ie.start,me),ie=ie.end===void 0?gt:Math.min(ie.end,me),!Ye.extend&&gt>ie&&(me=ie,ie=gt,gt=me),me=Ms(Oe,gt),Y=Ms(Oe,ie),me&&Y&&(Ye.rangeCount!==1||Ye.anchorNode!==me.node||Ye.anchorOffset!==me.offset||Ye.focusNode!==Y.node||Ye.focusOffset!==Y.offset)&&((Je=Je.createRange()).setStart(me.node,me.offset),Ye.removeAllRanges(),gt>ie?(Ye.addRange(Je),Ye.extend(Y.node,Y.offset)):(Je.setEnd(Y.node,Y.offset),Ye.addRange(Je))))),Je=[],Ye=Oe;Ye=Ye.parentNode;)Ye.nodeType===1&&Je.push({element:Ye,left:Ye.scrollLeft,top:Ye.scrollTop});for(typeof Oe.focus=="function"&&Oe.focus(),Oe=0;Oe<Je.length;Oe++)(Ye=Je[Oe]).element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}Br=!!wa,xa=wa=null,l.current=x,st=L;do try{for(Oe=l;st!==null;){var lt=st.flags;if(36&lt&&nd(Oe,st.alternate,st),128&lt){Je=void 0;var yt=st.ref;if(yt!==null){var xt=st.stateNode;st.tag,Je=xt,typeof yt=="function"?yt(Je):yt.current=Je}}st=st.nextEffect}}catch(pt){if(st===null)throw Error(r(330));lr(st,pt),st=st.nextEffect}while(st!==null);st=null,Fu(),vt=q}else l.current=x;if(ir)ir=!1,Ui=l,Fi=h;else for(st=L;st!==null;)h=st.nextEffect,st.nextEffect=null,8&st.flags&&((lt=st).sibling=null,lt.stateNode=null),st=h;if((L=l.pendingLanes)===0&&(Mn=null),L===1?l===hs?Hi++:(Hi=0,hs=l):Hi=0,x=x.stateNode,Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Aa,x,void 0,(64&x.current.flags)==64)}catch{}if(yn(l,Xt()),Uo)throw Uo=!1,l=cs,cs=null,l;return(8&vt)!=0||In(),null}function ld(){for(;st!==null;){var l=st.alternate;zo||zi===null||((8&st.flags)!=0?dt(st,zi)&&(zo=!0):st.tag===13&&rd(l,st)&&dt(st,zi)&&(zo=!0));var h=st.flags;(256&h)!=0&&td(l,st),(512&h)==0||ir||(ir=!0,Ii(97,function(){return sr(),null})),st=st.nextEffect}}function sr(){if(Fi!==90){var l=97<Fi?97:Fi;return Fi=90,Sr(l,dd)}return!1}function ud(l,h){fs.push(h,l),ir||(ir=!0,Ii(97,function(){return sr(),null}))}function uu(l,h){ps.push(h,l),ir||(ir=!0,Ii(97,function(){return sr(),null}))}function dd(){if(Ui===null)return!1;var l=Ui;if(Ui=null,(48&vt)!=0)throw Error(r(331));var h=vt;vt|=32;var x=ps;ps=[];for(var L=0;L<x.length;L+=2){var q=x[L],Y=x[L+1],ie=q.destroy;if(q.destroy=void 0,typeof ie=="function")try{ie()}catch(we){if(Y===null)throw Error(r(330));lr(Y,we)}}for(x=fs,fs=[],L=0;L<x.length;L+=2){q=x[L],Y=x[L+1];try{var me=q.create;q.destroy=me()}catch(we){if(Y===null)throw Error(r(330));lr(Y,we)}}for(me=l.current.firstEffect;me!==null;)l=me.nextEffect,me.nextEffect=null,8&me.flags&&(me.sibling=null,me.stateNode=null),me=l;return vt=h,In(),!0}function du(l,h,x){nr(l,h=Wl(0,h=es(x,h),1)),h=fn(),(l=Wo(l,1))!==null&&(Nr(l,1,h),yn(l,h))}function lr(l,h){if(l.tag===3)du(l,l,h);else for(var x=l.return;x!==null;){if(x.tag===3){du(x,l,h);break}if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Mn===null||!Mn.has(L))){var q=$l(x,l=es(h,l),1);if(nr(x,q),q=fn(),(x=Wo(x,1))!==null)Nr(x,1,q),yn(x,q);else if(typeof L.componentDidCatch=="function"&&(Mn===null||!Mn.has(L)))try{L.componentDidCatch(h,l)}catch{}break}}x=x.return}}function cd(l,h,x){var L=l.pingCache;L!==null&&L.delete(h),h=fn(),l.pingedLanes|=l.suspendedLanes&x,on===l&&(Zt&x)===x&&(Kt===4||Kt===3&&(62914560&Zt)===Zt&&500>Xt()-us?ui(l,0):ss|=x),yn(l,h)}function fd(l,h){var x=l.stateNode;x!==null&&x.delete(h),(h=0)==0&&((2&(h=l.mode))==0?h=1:(4&h)==0?h=ei()===99?1:2:(Hn===0&&(Hn=oi),(h=Kn(62914560&~Hn))===0&&(h=4194304))),x=fn(),(l=Wo(l,h))!==null&&(Nr(l,h,x),yn(l,x))}function pd(l,h,x,L){this.tag=l,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(l,h,x,L){return new pd(l,h,x,L)}function bs(l){return!(!(l=l.prototype)||!l.isReactComponent)}function ur(l,h){var x=l.alternate;return x===null?((x=wn(l.tag,h,l.key,l.mode)).elementType=l.elementType,x.type=l.type,x.stateNode=l.stateNode,x.alternate=l,l.alternate=x):(x.pendingProps=h,x.type=l.type,x.flags=0,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null),x.childLanes=l.childLanes,x.lanes=l.lanes,x.child=l.child,x.memoizedProps=l.memoizedProps,x.memoizedState=l.memoizedState,x.updateQueue=l.updateQueue,h=l.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=l.sibling,x.index=l.index,x.ref=l.ref,x}function Go(l,h,x,L,q,Y){var ie=2;if(L=l,typeof l=="function")bs(l)&&(ie=1);else if(typeof l=="string")ie=5;else e:switch(l){case A:return ci(x.children,q,Y,h);case Q:ie=8,q|=16;break;case E:ie=8,q|=1;break;case D:return(l=wn(12,x,h,8|q)).elementType=D,l.type=D,l.lanes=Y,l;case M:return(l=wn(13,x,h,q)).type=M,l.elementType=M,l.lanes=Y,l;case R:return(l=wn(19,x,h,q)).elementType=R,l.lanes=Y,l;case X:return gs(x,q,Y,h);case oe:return(l=wn(24,x,h,q)).elementType=oe,l.lanes=Y,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:ie=10;break e;case j:ie=9;break e;case k:ie=11;break e;case V:ie=14;break e;case T:ie=16,L=null;break e;case U:ie=22;break e}throw Error(r(130,l==null?l:typeof l,""))}return(h=wn(ie,x,h,q)).elementType=l,h.type=L,h.lanes=Y,h}function ci(l,h,x,L){return(l=wn(7,l,L,h)).lanes=x,l}function gs(l,h,x,L){return(l=wn(23,l,L,h)).elementType=X,l.lanes=x,l}function vs(l,h,x){return(l=wn(6,l,null,h)).lanes=x,l}function ys(l,h,x){return(h=wn(4,l.children!==null?l.children:[],l.key,h)).lanes=x,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}function hd(l,h,x){this.tag=h,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=x,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vr(0),this.expirationTimes=Vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.mutableSourceEagerHydrationData=null}function Ko(l,h,x,L){var q=h.current,Y=fn(),ie=or(q);e:if(x){t:{if(Ce(x=x._reactInternals)!==x||x.tag!==1)throw Error(r(170));var me=x;do{switch(me.tag){case 3:me=me.stateNode.context;break t;case 1:if(dn(me.type)){me=me.stateNode.__reactInternalMemoizedMergedChildContext;break t}}me=me.return}while(me!==null);throw Error(r(171))}if(x.tag===1){var we=x.type;if(dn(we)){x=Qs(x,we,me);break e}}x=me}else x=Zn;return h.context===null?h.context=x:h.pendingContext=x,(h=tr(Y,ie)).payload={element:l},(L=L===void 0?null:L)!==null&&(h.callback=L),nr(q,h),ar(q,ie,Y),ie}function ws(l){return(l=l.current).child?(l.child.tag,l.child.stateNode):null}function cu(l,h){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var x=l.retryLane;l.retryLane=x!==0&&x<h?x:h}}function xs(l,h){cu(l,h),(l=l.alternate)&&cu(l,h)}function ks(l,h,x){var L=x!=null&&x.hydrationOptions!=null&&x.hydrationOptions.mutableSources||null;if(x=new hd(l,h,x!=null&&x.hydrate===!0),h=wn(3,null,null,h===2?7:h===1?3:0),x.current=h,h.stateNode=x,ja(h),l[Yr]=x.current,qs(l.nodeType===8?l.parentNode:l),L)for(l=0;l<L.length;l++){var q=(h=L[l])._getVersion;q=q(h._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[h,q]:x.mutableSourceEagerHydrationData.push(h,q)}this._internalRoot=x}function $i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Jo(l,h,x,L,q){var Y=x._reactRootContainer;if(Y){var ie=Y._internalRoot;if(typeof q=="function"){var me=q;q=function(){var Pe=ws(ie);me.call(Pe)}}Ko(h,ie,l,q)}else{if(Y=x._reactRootContainer=function(Pe,et){if(et||(et=!(!(et=Pe?Pe.nodeType===9?Pe.documentElement:Pe.firstChild:null)||et.nodeType!==1||!et.hasAttribute("data-reactroot"))),!et)for(var at;at=Pe.lastChild;)Pe.removeChild(at);return new ks(Pe,0,et?{hydrate:!0}:void 0)}(x,L),ie=Y._internalRoot,typeof q=="function"){var we=q;q=function(){var Pe=ws(ie);we.call(Pe)}}iu(function(){Ko(h,ie,l,q)})}return ws(ie)}function fu(l,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$i(h))throw Error(r(200));return function(L,q,Y){var ie=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:ie==null?null:""+ie,children:L,containerInfo:q,implementation:Y}}(l,h,null,x)}tu=function(l,h,x){var L=h.lanes;if(l!==null)if(l.memoizedProps!==h.pendingProps||sn.current)Sn=!0;else{if((x&L)==0){switch(Sn=!1,h.tag){case 3:Vl(h),Ua();break;case 5:bl(h);break;case 1:dn(h.type)&&wo(h);break;case 4:Na(h,h.stateNode.containerInfo);break;case 10:L=h.memoizedProps.value;var q=h.type._context;jt(Eo,q._currentValue),q._currentValue=L;break;case 13:if(h.memoizedState!==null)return(x&h.child.childLanes)!=0?Ul(l,h,x):(jt(Vt,1&Vt.current),(h=Un(l,h,x))!==null?h.sibling:null);jt(Vt,1&Vt.current);break;case 19:if(L=(x&h.childLanes)!=0,(64&l.flags)!=0){if(L)return zl(l,h,x);h.flags|=64}if((q=h.memoizedState)!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),jt(Vt,Vt.current),L)break;return null;case 23:case 24:return h.lanes=0,Rl(l,h,x)}return Un(l,h,x)}Sn=(16384&l.flags)!=0}else Sn=!1;switch(h.lanes=0,h.tag){case 2:if(L=h.type,l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),l=h.pendingProps,q=Zr(h,Qt.current),ni(h,x),q=za(null,h,L,l,q,x),h.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0){if(h.tag=1,h.memoizedState=null,h.updateQueue=null,dn(L)){var Y=!0;wo(h)}else Y=!1;h.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,ja(h);var ie=L.getDerivedStateFromProps;typeof ie=="function"&&Io(h,L,ie,l),q.updater=Ao,h.stateNode=q,q._reactInternals=h,Va(h,L,l,x),h=Ya(null,h,L,!0,Y,x)}else h.tag=0,cn(null,h,q,x),h=h.child;return h;case 16:q=h.elementType;e:{switch(l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),l=h.pendingProps,q=(Y=q._init)(q._payload),h.type=q,Y=h.tag=function(et){if(typeof et=="function")return bs(et)?1:0;if(et!=null){if((et=et.$$typeof)===k)return 11;if(et===V)return 14}return 2}(q),l=En(q,l),Y){case 0:h=Ja(null,h,q,l,x);break e;case 1:h=jl(null,h,q,l,x);break e;case 11:h=Ml(null,h,q,l,x);break e;case 14:h=Ol(null,h,q,En(q.type,l),L,x);break e}throw Error(r(306,q,""))}return h;case 0:return L=h.type,q=h.pendingProps,Ja(l,h,L,q=h.elementType===L?q:En(L,q),x);case 1:return L=h.type,q=h.pendingProps,jl(l,h,L,q=h.elementType===L?q:En(L,q),x);case 3:if(Vl(h),L=h.updateQueue,l===null||L===null)throw Error(r(282));if(L=h.pendingProps,q=(q=h.memoizedState)!==null?q.element:null,ll(l,h),Ai(h,L,null,x),(L=h.memoizedState.element)===q)Ua(),h=Un(l,h,x);else{if((Y=(q=h.stateNode).hydrate)&&(rr=Jr(h.stateNode.containerInfo.firstChild),qn=h,Y=Dn=!0),Y){if((l=q.mutableSourceEagerHydrationData)!=null)for(q=0;q<l.length;q+=2)(Y=l[q])._workInProgressVersionPrimary=l[q+1],ii.push(Y);for(x=_l(h,null,L,x),h.child=x;x;)x.flags=-3&x.flags|1024,x=x.sibling}else cn(l,h,L,x),Ua();h=h.child}return h;case 5:return bl(h),l===null&&qa(h),L=h.type,q=h.pendingProps,Y=l!==null?l.memoizedProps:null,ie=q.children,ka(L,q)?ie=null:Y!==null&&ka(L,Y)&&(h.flags|=16),Ll(l,h),cn(l,h,ie,x),h.child;case 6:return l===null&&qa(h),null;case 13:return Ul(l,h,x);case 4:return Na(h,h.stateNode.containerInfo),L=h.pendingProps,l===null?h.child=Mo(h,null,L,x):cn(l,h,L,x),h.child;case 11:return L=h.type,q=h.pendingProps,Ml(l,h,L,q=h.elementType===L?q:En(L,q),x);case 7:return cn(l,h,h.pendingProps,x),h.child;case 8:case 12:return cn(l,h,h.pendingProps.children,x),h.child;case 10:e:{L=h.type._context,q=h.pendingProps,ie=h.memoizedProps,Y=q.value;var me=h.type._context;if(jt(Eo,me._currentValue),me._currentValue=Y,ie!==null)if(me=ie.value,(Y=bn(me,Y)?0:0|(typeof L._calculateChangedBits=="function"?L._calculateChangedBits(me,Y):1073741823))===0){if(ie.children===q.children&&!sn.current){h=Un(l,h,x);break e}}else for((me=h.child)!==null&&(me.return=h);me!==null;){var we=me.dependencies;if(we!==null){ie=me.child;for(var Pe=we.firstContext;Pe!==null;){if(Pe.context===L&&(Pe.observedBits&Y)!=0){me.tag===1&&((Pe=tr(-1,x&-x)).tag=2,nr(me,Pe)),me.lanes|=x,(Pe=me.alternate)!==null&&(Pe.lanes|=x),sl(me.return,x),we.lanes|=x;break}Pe=Pe.next}}else ie=me.tag===10&&me.type===h.type?null:me.child;if(ie!==null)ie.return=me;else for(ie=me;ie!==null;){if(ie===h){ie=null;break}if((me=ie.sibling)!==null){me.return=ie.return,ie=me;break}ie=ie.return}me=ie}cn(l,h,q.children,x),h=h.child}return h;case 9:return q=h.type,L=(Y=h.pendingProps).children,ni(h,x),L=L(q=gn(q,Y.unstable_observedBits)),h.flags|=1,cn(l,h,L,x),h.child;case 14:return Y=En(q=h.type,h.pendingProps),Ol(l,h,q,Y=En(q.type,Y),L,x);case 15:return Pl(l,h,h.type,h.pendingProps,L,x);case 17:return L=h.type,q=h.pendingProps,q=h.elementType===L?q:En(L,q),l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,dn(L)?(l=!0,wo(h)):l=!1,ni(h,x),pl(h,L,q),Va(h,L,q,x),Ya(null,h,L,!0,l,x);case 19:return zl(l,h,x);case 23:case 24:return Rl(l,h,x)}throw Error(r(156,h.tag))},ks.prototype.render=function(l){Ko(l,this._internalRoot,null,null)},ks.prototype.unmount=function(){var l=this._internalRoot,h=l.containerInfo;Ko(null,l,null,function(){h[Yr]=null})},St=function(l){l.tag===13&&(ar(l,4,fn()),xs(l,4))},Tt=function(l){l.tag===13&&(ar(l,67108864,fn()),xs(l,67108864))},en=function(l){if(l.tag===13){var h=fn(),x=or(l);ar(l,x,h),xs(l,x)}},Bt=function(l,h){return h()},It=function(l,h,x){switch(h){case"input":if(ve(l,x),h=x.name,x.type==="radio"&&h!=null){for(x=l;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var L=x[h];if(L!==l&&L.form===l.form){var q=yo(L);if(!q)throw Error(r(90));Te(L),ve(L,q)}}}break;case"textarea":Ue(l,x);break;case"select":(h=x.value)!=null&&Ee(l,!!x.multiple,h,!1)}},zn=ru,Pr=function(l,h,x,L,q){var Y=vt;vt|=4;try{return Sr(98,l.bind(null,h,x,L,q))}finally{(vt=Y)===0&&(si(),In())}},dr=function(){(49&vt)==0&&(function(){if(Fn!==null){var l=Fn;Fn=null,l.forEach(function(h){h.expiredLanes|=24&h.pendingLanes,yn(h,Xt())})}In()}(),sr())},cr=function(l,h){var x=vt;vt|=2;try{return l(h)}finally{(vt=x)===0&&(si(),In())}};var md={Events:[Ci,Qr,yo,Mr,Or,sr,{current:!1}]},Gi={findFiberByHostInstance:xr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},_d={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return(l=ut(l))===null?null:l.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{Aa=Yo.inject(_d),Er=Yo}catch{}}i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=md,i.createPortal=fu,i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(r(188)):Error(r(268,Object.keys(l)));return l=(l=ut(h))===null?null:l.stateNode},i.flushSync=function(l,h){var x=vt;if((48&x)!=0)return l(h);vt|=1;try{if(l)return Sr(99,l.bind(null,h))}finally{vt=x,In()}},i.hydrate=function(l,h,x){if(!$i(h))throw Error(r(200));return Jo(null,l,h,!0,x)},i.render=function(l,h,x){if(!$i(h))throw Error(r(200));return Jo(null,l,h,!1,x)},i.unmountComponentAtNode=function(l){if(!$i(l))throw Error(r(40));return!!l._reactRootContainer&&(iu(function(){Jo(null,null,l,!1,function(){l._reactRootContainer=null,l[Yr]=null})}),!0)},i.unstable_batchedUpdates=ru,i.unstable_createPortal=function(l,h){return fu(l,h,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},i.unstable_renderSubtreeIntoContainer=function(l,h,x,L){if(!$i(x))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return Jo(l,h,x,!1,L)},i.version="17.0.2"},{"object-assign":366,react:437,scheduler:443}],415:[function(e,v,i){"use strict";(function t(){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE=="function")try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch{}})(),v.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.development.js":413,"./cjs/react-dom.production.min.js":414}],416:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/possibleConstructorReturn")),c=t(e("@babel/runtime/helpers/getPrototypeOf")),s=t(e("@babel/runtime/helpers/assertThisInitialized")),o=t(e("@babel/runtime/helpers/inherits")),d=t(e("@babel/runtime/helpers/defineProperty")),a=t(e("react")),p=t(e("./TemplateContainer")),f=function(b){function _(){var y,g;(0,n.default)(this,_);for(var m=arguments.length,w=new Array(m),C=0;C<m;C++)w[C]=arguments[C];return g=(0,r.default)(this,(y=(0,c.default)(_)).call.apply(y,[this].concat(w))),(0,d.default)((0,s.default)(g),"_templateContainer",void 0),(0,d.default)((0,s.default)(g),"_templateContainerSetter",function(I){I&&(g._templateContainer=I)}),(0,d.default)((0,s.default)(g),"_el",void 0),(0,d.default)((0,s.default)(g),"_elSetter",function(I){I&&(g._el=I)}),(0,d.default)((0,s.default)(g),"_dragHandleProps",g.props.makeDragHandleProps(function(){return g.props.y})),g}return(0,o.default)(_,b),(0,u.default)(_,[{key:"getDOMNode",value:function(){return this._el}},{key:"getTemplate",value:function(){return this._templateContainer.getTemplate()}},{key:"shouldComponentUpdate",value:function(y){return this.props.anySelected!==y.anySelected||this.props.itemSelected!==y.itemSelected||this.props.item!==y.item||this.props.template!==y.template||this.props.y!==y.y||this.props.height!==y.height||this.props.zIndex!==y.zIndex||this.props.commonProps!==y.commonProps}},{key:"render",value:function(){var y=this.props,g=y.item,m=y.y,w=y.padding,C=y.itemSelected,I=y.anySelected,S=y.height,O=y.zIndex,A=y.template,E=y.commonProps;return a.default.createElement("div",{ref:this._elSetter,style:{position:m==null?"relative":"absolute",boxSizing:"border-box",left:"0px",right:"0px",top:m==null?"0px":"".concat(m,"px"),marginBottom:"".concat(w,"px"),height:m==null?"auto":"".concat(I*(S.drag-S.natural)+S.natural,"px"),zIndex:O}},a.default.createElement(p.default,{ref:this._templateContainerSetter,item:g,template:A,itemSelected:C,anySelected:I,dragHandleProps:this._dragHandleProps,commonProps:E}))}}]),_}(a.default.Component);i.default=f,v.exports=i.default,v.exports.default=i.default},{"./TemplateContainer":418,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:437}],417:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/possibleConstructorReturn")),c=t(e("@babel/runtime/helpers/getPrototypeOf")),s=t(e("@babel/runtime/helpers/inherits")),o=function(d){function a(){return(0,n.default)(this,a),(0,r.default)(this,(0,c.default)(a).apply(this,arguments))}return(0,s.default)(a,d),(0,u.default)(a,[{key:"componentDidUpdate",value:function(){this.props.cb()}},{key:"render",value:function(){return null}}]),a}(t(e("react")).default.Component);i.default=o,v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:437}],418:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/possibleConstructorReturn")),c=t(e("@babel/runtime/helpers/getPrototypeOf")),s=t(e("@babel/runtime/helpers/assertThisInitialized")),o=t(e("@babel/runtime/helpers/inherits")),d=t(e("@babel/runtime/helpers/defineProperty")),a=t(e("react")),p=function(f){function b(){var _,y;(0,n.default)(this,b);for(var g=arguments.length,m=new Array(g),w=0;w<g;w++)m[w]=arguments[w];return y=(0,r.default)(this,(_=(0,c.default)(b)).call.apply(_,[this].concat(m))),(0,d.default)((0,s.default)(y),"_template",void 0),(0,d.default)((0,s.default)(y),"_templateSetter",function(C){C&&(y._template=C)}),y}return(0,o.default)(b,f),(0,u.default)(b,[{key:"shouldComponentUpdate",value:function(_){return this.props.anySelected!==_.anySelected||this.props.itemSelected!==_.itemSelected||this.props.item!==_.item||this.props.template!==_.template||this.props.commonProps!==_.commonProps}},{key:"getTemplate",value:function(){return this._template}},{key:"render",value:function(){var _=this.props,y=_.item,g=_.itemSelected,m=_.anySelected,w=_.dragHandleProps,C=_.commonProps,I=this.props.template;return a.default.createElement(I,{ref:this._templateSetter,item:y,itemSelected:g,anySelected:m,dragHandleProps:w,commonProps:C})}}]),b}(a.default.Component);i.default=p,v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,react:437}],419:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireWildcard"),n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/objectSpread")),r=n(e("@babel/runtime/helpers/classCallCheck")),c=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),d=n(e("@babel/runtime/helpers/assertThisInitialized")),a=n(e("@babel/runtime/helpers/inherits")),p=n(e("@babel/runtime/helpers/defineProperty")),f=t(e("react")),b=n(e("prop-types")),_=e("react-motion"),y=n(e("immutability-helper")),g=n(e("react-multi-ref")),m=n(e("./OnUpdate")),w=n(e("./MoveContainer")),C={natural:200,drag:30};function I(O,A,E){return Math.round(A-A/E*O)}var S=function(O){function A(E){var D;return(0,r.default)(this,A),D=(0,s.default)(this,(0,o.default)(A).call(this,E)),(0,p.default)((0,d.default)(D),"_itemRefs",new g.default),(0,p.default)((0,d.default)(D),"_autoScrollerTimer",void 0),(0,p.default)((0,d.default)(D),"_listRef",f.createRef()),(0,p.default)((0,d.default)(D),"_handleTouchMove",function(P){P.preventDefault(),D._handleMouseMove(P.touches[0])}),(0,p.default)((0,d.default)(D),"_handleMouseMove",function(P){var j=P.pageY,k=P.clientY,M=D.props,R=M.list,V=M.autoScrollMaxSpeed,T=M.autoScrollRegionSize,U=D.state,W=U.dragging,Q=U.lastDrag;if(W&&Q){var X=D._getContainer(),oe=D._getDragVisualIndex(),J=D._getKeyFn();if(clearInterval(D._autoScrollerTimer),oe!==0&&oe!==R.length-1){var he=0,ae=X&&X!==document.body&&X.getBoundingClientRect?X.getBoundingClientRect():{top:0,bottom:1/0},ue=Math.max(0,ae.top),ge=k-ue;if(ge>0&&ge<T)he=-1*I(ge,V,T);else{var N=Math.min(window.innerHeight,ae.bottom)-k;N>0&&N<T&&(he=I(N,V,T))}he!==0&&(D._scrollContainer(he),D._autoScrollerTimer=setTimeout(function(){D._handleMouseMove({pageY:j+(X===document.body?he:0),clientY:k})},16))}var F=X&&X!==document.body?X.scrollTop:0,K=j-Q.mouseOffset+F;if(D.props.constrainDrag){var H=D._getVisualListDuringDrag();K=Math.max(K,D._getDistanceFromTopDuringDrag(Q,J(H[0]),H)),K=Math.min(K,D._getDistanceFromTopDuringDrag(Q,J(H[H.length-1]),H))}D.setState({lastDrag:(0,u.default)({},Q,{mouseY:K})})}}),(0,p.default)((0,d.default)(D),"_handleMouseUp",function(){clearInterval(D._autoScrollerTimer),window.removeEventListener("mouseup",D._handleMouseUp),window.removeEventListener("touchend",D._handleMouseUp),window.removeEventListener("touchmove",D._handleTouchMove),window.removeEventListener("mousemove",D._handleMouseMove),document.documentElement&&(document.documentElement.style.cursor=""),D._lastScrollDelta=0;var P=D.props,j=P.list,k=P.onMoveEnd,M=D.state,R=M.dragging,V=M.lastDrag;if(R&&V&&k){var T=D._getDragListIndex(),U=D._getDragVisualIndex();T!==U&&k(D._getVisualListDuringDrag(),j[T],T,U),D.setState({dragging:!1})}}),(0,p.default)((0,d.default)(D),"_lastScrollDelta",0),D.state={useAbsolutePositioning:!1,dragging:!1,lastDrag:null,heights:null},D}return(0,a.default)(A,O),(0,c.default)(A,[{key:"getItemInstance",value:function(E){var D=this._itemRefs.map.get(E);if(!D)throw new Error("key not found");return D.getTemplate()}},{key:"componentWillUnmount",value:function(){this._handleMouseUp()}},{key:"_handleTouchStart",value:function(E,D,P){P.stopPropagation(),this._handleStartDrag(E,D,P.touches[0].pageY)}},{key:"_handleMouseDown",value:function(E,D,P){P.preventDefault(),this._handleStartDrag(E,D,P.pageY)}},{key:"_handleStartDrag",value:function(E,D,P){var j=this;document.documentElement&&(document.documentElement.style.cursor="move"),window.addEventListener("mouseup",this._handleMouseUp),window.addEventListener("touchend",this._handleMouseUp),window.addEventListener("touchmove",this._handleTouchMove),window.addEventListener("mousemove",this._handleMouseMove);var k=this._listRef.current;if(!k)throw new Error("Should not happen");k.contains&&document.activeElement&&k.contains(document.activeElement)&&document.activeElement.blur();var M=this._getKeyFn(),R=null;if(this.state.heights==null){var V=Object.create(null);this.props.list.forEach(function(U){var W=M(U),Q=j._itemRefs.map.get(W),X=Q?Q.getDOMNode().firstElementChild:null,oe=Q?Q.getTemplate():null,J=X instanceof HTMLElement?X.offsetHeight:C.natural,he=oe&&typeof oe.getDragHeight=="function"&&oe.getDragHeight()||J;V[W]={natural:J,drag:he}}),R=V}var T=function(){var U=j.props.list.map(M).indexOf(E),W=D??j._getDistance(0,U,!1),Q=j._getContainer(),X=Q&&Q!==document.body?Q.scrollTop:0;j.setState({useAbsolutePositioning:!0,dragging:!0,lastDrag:{itemKey:E,startY:W,mouseY:W,mouseOffset:P-W+X}})};R?this.setState({heights:R},T):T()}},{key:"_scrollContainer",value:function(E){var D=this._getContainer();D&&(window.scrollBy&&D===document.body?window.scrollBy(0,E):D.scrollTop+=E)}},{key:"_adjustScrollAtEnd",value:function(E){var D=Math.round(E-this._lastScrollDelta);this._scrollContainer(D),this._lastScrollDelta+=D}},{key:"_getDragListIndex",value:function(){var E=this.props.list,D=this.state.lastDrag;if(!D)throw new Error("No drag happened");var P=this._getKeyFn();return A._getIndexOfItemWithKey(P,E,D.itemKey)}},{key:"_getDragVisualIndex",value:function(){var E=this.props,D=E.list,P=E.padding,j=this.state,k=j.dragging,M=j.lastDrag;if(!k||!M)throw new Error("Should not happen");var R=this._getDragListIndex(),V=M.mouseY-M.startY,T=V>0?1:V<0?-1:0,U=R;if(T!==0)for(var W=this._getKeyFn(),Q=Math.abs(V),X=R+T;X<D.length&&X>=0;X+=T){var oe=this._getItemHeight(W(D[X])).drag;if(Q<oe/2+P)break;Q-=oe+P,U=X}return U}},{key:"_getVisualListDuringDrag",value:function(){var E=this.props.list,D=this.state,P=D.dragging,j=D.lastDrag;if(!P||!j)throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");var k=this._getDragListIndex(),M=this._getDragVisualIndex();return(0,y.default)(E,{$splice:[[k,1],[M,0,E[k]]]})}},{key:"_getItemHeight",value:function(E){return this.state.heights!=null&&E in this.state.heights?this.state.heights[E]:C}},{key:"_getDistance",value:function(E,D,P){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this.props.list;if(D<E)return-this._getDistance(D,E,P,j);for(var k=this.props.padding,M=this._getKeyFn(),R=0,V=E;V<D;V++){var T=this._getItemHeight(M(j[V]));R+=(P?T.drag:T.natural)+k}return R}},{key:"_getDistanceFromTopDuringDrag",value:function(E,D,P){var j=this._getKeyFn(),k=A._getIndexOfItemWithKey(j,P,D),M=this._getDragListIndex(),R=0;if(A._getIndexOfItemWithKey(j,P,E.itemKey)<M){var V=this._getItemHeight(E.itemKey),T=this._getItemHeight(j(P[M]));R=V.drag-T.drag}return E.startY+R+this._getDistance(M,k,!0,P)}},{key:"_getContainer",value:function(){var E=this.props.container;return E?E():null}},{key:"_getKeyFn",value:function(){return A._getKeyFn(this.props.itemKey)}},{key:"render",value:function(){var E=this,D=this.props,P=D.list,j=D.springConfig,k=D.container,M=D.padding,R=D.template,V=D.unsetZIndex,T=D.commonProps,U=this.state,W=U.dragging,Q=U.lastDrag,X=U.useAbsolutePositioning,oe=this._getKeyFn(),J=(0,_.spring)(W?1:0,j),he=W?this._getVisualListDuringDrag():P,ae=P.map(function(K,H){var $=oe(K),se=W&&Q&&Q.itemKey===$?{itemSelected:(0,_.spring)(1,j),y:Q.mouseY}:{itemSelected:(0,_.spring)(0,j),y:(X?_.spring:function(He,re){return He})(W&&Q?E._getDistanceFromTopDuringDrag(Q,$,he):E._getDistance(0,H,!1),j)},pe=(0,u.default)({anySelected:J},se),Te=function(He){return{onMouseDown:function(re){return E._handleMouseDown($,He(),re)},onTouchStart:function(re){return E._handleTouchStart($,He(),re)}}},$e=E._getItemHeight($);return f.createElement(_.Motion,{style:pe,key:$,children:function(He){var re=He.itemSelected,le=He.anySelected,ve=He.y;return f.createElement(w.default,{ref:E._itemRefs.ref($),y:X?ve:null,template:R,padding:M,item:K,itemSelected:re,anySelected:le,height:$e,zIndex:V&&!X?"auto":Q&&Q.itemKey===$?P.length:H,makeDragHandleProps:Te,commonProps:T})}})}),ue=0;if(!W&&Q&&X){var ge=this._getDragListIndex();ue=(0,_.spring)(this._getDistance(0,ge,!1)-Q.mouseY,j)}var N=0,F=0;return P.length&&(F=M,X&&(N=this._getDistance(0,P.length,!1)-M)),f.createElement("div",{style:{position:"relative"},ref:this._listRef},f.createElement(_.Motion,{style:{adjustScroll:ue,anySelected:J},onRest:function(){W||E.setState({heights:null,useAbsolutePositioning:!1})},children:function(K){var H=K.adjustScroll;return f.createElement("div",{style:{display:X?"block":"none",height:"".concat(N,"px"),marginBottom:"".concat(F,"px")}},k&&f.createElement(m.default,{cb:function(){!W&&Q&&X&&E._adjustScrollAtEnd(H)}}))}}),ae)}}],[{key:"getDerivedStateFromProps",value:function(E,D){var P=E.list,j=D.lastDrag;if(j){var k=A._getKeyFn(E.itemKey);try{A._getIndexOfItemWithKey(k,P,j.itemKey)}catch{return{dragging:!1,lastDrag:null}}}return null}},{key:"_getIndexOfItemWithKey",value:function(E,D,P){for(var j=0,k=D.length;j<k;j++)if(E(D[j])===P)return j;throw new Error("Failed to find drag index")}},{key:"_getKeyFn",value:function(E){return typeof E=="function"?E:function(D){return D[E]}}}]),A}(f.Component);i.default=S,(0,p.default)(S,"propTypes",{itemKey:b.default.oneOfType([b.default.string,b.default.func]).isRequired,template:b.default.func,list:b.default.array.isRequired,onMoveEnd:b.default.func,container:b.default.func,springConfig:b.default.object,constrainDrag:b.default.bool,padding:b.default.number,unsetZIndex:b.default.bool,autoScrollMaxSpeed:b.default.number.isRequired,autoScrollRegionSize:b.default.number.isRequired,commonProps:b.default.object}),(0,p.default)(S,"defaultProps",{springConfig:{stiffness:300,damping:50},padding:10,unsetZIndex:!1,constrainDrag:!1,autoScrollMaxSpeed:15,autoScrollRegionSize:30}),v.exports=i.default,v.exports.default=i.default},{"./MoveContainer":416,"./OnUpdate":417,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/interopRequireWildcard":16,"@babel/runtime/helpers/objectSpread":19,"@babel/runtime/helpers/possibleConstructorReturn":22,"immutability-helper":149,"prop-types":403,react:437,"react-motion":426,"react-multi-ref":432}],420:[function(e,v,i){"use strict";i.__esModule=!0;var t=Object.assign||function(y){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(y[w]=m[w])}return y},n=function(){function y(g,m){for(var w=0;w<m.length;w++){var C=m[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}return function(g,m,w){return m&&y(g.prototype,m),w&&y(g,w),g}}();function u(y){return y&&y.__esModule?y:{default:y}}var r=u(e("./mapToZero")),c=u(e("./stripStyle")),s=u(e("./stepper")),o=u(e("performance-now")),d=u(e("raf")),a=u(e("./shouldStopAnimation")),p=u(e("react")),f=u(e("prop-types")),b=1e3/60,_=function(y){function g(m){var w=this;(function(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")})(this,g),y.call(this,m),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(C){var I=!1,S=w.state,O=S.currentStyle,A=S.currentVelocity,E=S.lastIdealStyle,D=S.lastIdealVelocity;for(var P in C)if(Object.prototype.hasOwnProperty.call(C,P)){var j=C[P];typeof j=="number"&&(I||(I=!0,O=t({},O),A=t({},A),E=t({},E),D=t({},D)),O[P]=j,A[P]=0,E[P]=j,D[P]=0)}I&&w.setState({currentStyle:O,currentVelocity:A,lastIdealStyle:E,lastIdealVelocity:D})},this.startAnimationIfNecessary=function(){w.animationID=d.default(function(C){var I=w.props.style;if(a.default(w.state.currentStyle,I,w.state.currentVelocity))return w.wasAnimating&&w.props.onRest&&w.props.onRest(),w.animationID=null,w.wasAnimating=!1,void(w.accumulatedTime=0);w.wasAnimating=!0;var S=C||o.default(),O=S-w.prevTime;if(w.prevTime=S,w.accumulatedTime=w.accumulatedTime+O,w.accumulatedTime>10*b&&(w.accumulatedTime=0),w.accumulatedTime===0)return w.animationID=null,void w.startAnimationIfNecessary();var A=(w.accumulatedTime-Math.floor(w.accumulatedTime/b)*b)/b,E=Math.floor(w.accumulatedTime/b),D={},P={},j={},k={};for(var M in I)if(Object.prototype.hasOwnProperty.call(I,M)){var R=I[M];if(typeof R=="number")j[M]=R,k[M]=0,D[M]=R,P[M]=0;else{for(var V=w.state.lastIdealStyle[M],T=w.state.lastIdealVelocity[M],U=0;U<E;U++){var W=s.default(b/1e3,V,T,R.val,R.stiffness,R.damping,R.precision);V=W[0],T=W[1]}var Q=s.default(b/1e3,V,T,R.val,R.stiffness,R.damping,R.precision),X=Q[0],oe=Q[1];j[M]=V+(X-V)*A,k[M]=T+(oe-T)*A,D[M]=V,P[M]=T}}w.animationID=null,w.accumulatedTime-=E*b,w.setState({currentStyle:j,currentVelocity:k,lastIdealStyle:D,lastIdealVelocity:P}),w.unreadPropStyle=null,w.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}(g,y),n(g,null,[{key:"propTypes",value:{defaultStyle:f.default.objectOf(f.default.number),style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired,children:f.default.func.isRequired,onRest:f.default.func},enumerable:!0}]),g.prototype.defaultState=function(){var m=this.props,w=m.defaultStyle,C=m.style,I=w||c.default(C),S=r.default(I);return{currentStyle:I,currentVelocity:S,lastIdealStyle:I,lastIdealVelocity:S}},g.prototype.componentDidMount=function(){this.prevTime=o.default(),this.startAnimationIfNecessary()},g.prototype.componentWillReceiveProps=function(m){this.unreadPropStyle!=null&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=m.style,this.animationID==null&&(this.prevTime=o.default(),this.startAnimationIfNecessary())},g.prototype.componentWillUnmount=function(){this.animationID!=null&&(d.default.cancel(this.animationID),this.animationID=null)},g.prototype.render=function(){var m=this.props.children(this.state.currentStyle);return m&&p.default.Children.only(m)},g}(p.default.Component);i.default=_,v.exports=i.default},{"./mapToZero":423,"./shouldStopAnimation":428,"./stepper":430,"./stripStyle":431,"performance-now":377,"prop-types":403,raf:411,react:437}],421:[function(e,v,i){"use strict";i.__esModule=!0;var t=Object.assign||function(y){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(y[w]=m[w])}return y},n=function(){function y(g,m){for(var w=0;w<m.length;w++){var C=m[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}return function(g,m,w){return m&&y(g.prototype,m),w&&y(g,w),g}}();function u(y){return y&&y.__esModule?y:{default:y}}var r=u(e("./mapToZero")),c=u(e("./stripStyle")),s=u(e("./stepper")),o=u(e("performance-now")),d=u(e("raf")),a=u(e("./shouldStopAnimation")),p=u(e("react")),f=u(e("prop-types")),b=1e3/60,_=function(y){function g(m){var w=this;(function(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")})(this,g),y.call(this,m),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(C){for(var I=w.state,S=I.currentStyles,O=I.currentVelocities,A=I.lastIdealStyles,E=I.lastIdealVelocities,D=!1,P=0;P<C.length;P++){var j=C[P],k=!1;for(var M in j)if(Object.prototype.hasOwnProperty.call(j,M)){var R=j[M];typeof R=="number"&&(k||(k=!0,D=!0,S[P]=t({},S[P]),O[P]=t({},O[P]),A[P]=t({},A[P]),E[P]=t({},E[P])),S[P][M]=R,O[P][M]=0,A[P][M]=R,E[P][M]=0)}}D&&w.setState({currentStyles:S,currentVelocities:O,lastIdealStyles:A,lastIdealVelocities:E})},this.startAnimationIfNecessary=function(){w.animationID=d.default(function(C){var I=w.props.styles(w.state.lastIdealStyles);if(function(F,K,H){for(var $=0;$<F.length;$++)if(!a.default(F[$],K[$],H[$]))return!1;return!0}(w.state.currentStyles,I,w.state.currentVelocities))return w.animationID=null,void(w.accumulatedTime=0);var S=C||o.default(),O=S-w.prevTime;if(w.prevTime=S,w.accumulatedTime=w.accumulatedTime+O,w.accumulatedTime>10*b&&(w.accumulatedTime=0),w.accumulatedTime===0)return w.animationID=null,void w.startAnimationIfNecessary();for(var A=(w.accumulatedTime-Math.floor(w.accumulatedTime/b)*b)/b,E=Math.floor(w.accumulatedTime/b),D=[],P=[],j=[],k=[],M=0;M<I.length;M++){var R=I[M],V={},T={},U={},W={};for(var Q in R)if(Object.prototype.hasOwnProperty.call(R,Q)){var X=R[Q];if(typeof X=="number")V[Q]=X,T[Q]=0,U[Q]=X,W[Q]=0;else{for(var oe=w.state.lastIdealStyles[M][Q],J=w.state.lastIdealVelocities[M][Q],he=0;he<E;he++){var ae=s.default(b/1e3,oe,J,X.val,X.stiffness,X.damping,X.precision);oe=ae[0],J=ae[1]}var ue=s.default(b/1e3,oe,J,X.val,X.stiffness,X.damping,X.precision),ge=ue[0],N=ue[1];V[Q]=oe+(ge-oe)*A,T[Q]=J+(N-J)*A,U[Q]=oe,W[Q]=J}}j[M]=V,k[M]=T,D[M]=U,P[M]=W}w.animationID=null,w.accumulatedTime-=E*b,w.setState({currentStyles:j,currentVelocities:k,lastIdealStyles:D,lastIdealVelocities:P}),w.unreadPropStyles=null,w.startAnimationIfNecessary()})},this.state=this.defaultState()}return function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}(g,y),n(g,null,[{key:"propTypes",value:{defaultStyles:f.default.arrayOf(f.default.objectOf(f.default.number)),styles:f.default.func.isRequired,children:f.default.func.isRequired},enumerable:!0}]),g.prototype.defaultState=function(){var m=this.props,w=m.defaultStyles,C=m.styles,I=w||C().map(c.default),S=I.map(function(O){return r.default(O)});return{currentStyles:I,currentVelocities:S,lastIdealStyles:I,lastIdealVelocities:S}},g.prototype.componentDidMount=function(){this.prevTime=o.default(),this.startAnimationIfNecessary()},g.prototype.componentWillReceiveProps=function(m){this.unreadPropStyles!=null&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=m.styles(this.state.lastIdealStyles),this.animationID==null&&(this.prevTime=o.default(),this.startAnimationIfNecessary())},g.prototype.componentWillUnmount=function(){this.animationID!=null&&(d.default.cancel(this.animationID),this.animationID=null)},g.prototype.render=function(){var m=this.props.children(this.state.currentStyles);return m&&p.default.Children.only(m)},g}(p.default.Component);i.default=_,v.exports=i.default},{"./mapToZero":423,"./shouldStopAnimation":428,"./stepper":430,"./stripStyle":431,"performance-now":377,"prop-types":403,raf:411,react:437}],422:[function(e,v,i){"use strict";i.__esModule=!0;var t=Object.assign||function(w){for(var C=1;C<arguments.length;C++){var I=arguments[C];for(var S in I)Object.prototype.hasOwnProperty.call(I,S)&&(w[S]=I[S])}return w},n=function(){function w(C,I){for(var S=0;S<I.length;S++){var O=I[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,I,S){return I&&w(C.prototype,I),S&&w(C,S),C}}();function u(w){return w&&w.__esModule?w:{default:w}}var r=u(e("./mapToZero")),c=u(e("./stripStyle")),s=u(e("./stepper")),o=u(e("./mergeDiff")),d=u(e("performance-now")),a=u(e("raf")),p=u(e("./shouldStopAnimation")),f=u(e("react")),b=u(e("prop-types")),_=1e3/60;function y(w,C,I){var S=C;return S==null?w.map(function(O,A){return{key:O.key,data:O.data,style:I[A]}}):w.map(function(O,A){for(var E=0;E<S.length;E++)if(S[E].key===O.key)return{key:S[E].key,data:S[E].data,style:I[A]};return{key:O.key,data:O.data,style:I[A]}})}function g(w,C,I,S,O,A,E,D,P){for(var j=o.default(S,O,function(J,he){var ae=C(he);return ae==null||p.default(A[J],ae,E[J])?(I({key:he.key,data:he.data}),null):{key:he.key,data:he.data,style:ae}}),k=[],M=[],R=[],V=[],T=0;T<j.length;T++){for(var U=j[T],W=null,Q=0;Q<S.length;Q++)if(S[Q].key===U.key){W=Q;break}if(W==null){var X=w(U);k[T]=X,R[T]=X;var oe=r.default(U.style);M[T]=oe,V[T]=oe}else k[T]=A[W],R[T]=D[W],M[T]=E[W],V[T]=P[W]}return[j,k,M,R,V]}var m=function(w){function C(I){var S=this;(function(O,A){if(!(O instanceof A))throw new TypeError("Cannot call a class as a function")})(this,C),w.call(this,I),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(O){for(var A=g(S.props.willEnter,S.props.willLeave,S.props.didLeave,S.state.mergedPropsStyles,O,S.state.currentStyles,S.state.currentVelocities,S.state.lastIdealStyles,S.state.lastIdealVelocities),E=A[0],D=A[1],P=A[2],j=A[3],k=A[4],M=0;M<O.length;M++){var R=O[M].style,V=!1;for(var T in R)if(Object.prototype.hasOwnProperty.call(R,T)){var U=R[T];typeof U=="number"&&(V||(V=!0,D[M]=t({},D[M]),P[M]=t({},P[M]),j[M]=t({},j[M]),k[M]=t({},k[M]),E[M]={key:E[M].key,data:E[M].data,style:t({},E[M].style)}),D[M][T]=U,P[M][T]=0,j[M][T]=U,k[M][T]=0,E[M].style[T]=U)}}S.setState({currentStyles:D,currentVelocities:P,mergedPropsStyles:E,lastIdealStyles:j,lastIdealVelocities:k})},this.startAnimationIfNecessary=function(){S.unmounting||(S.animationID=a.default(function(O){if(!S.unmounting){var A=S.props.styles,E=typeof A=="function"?A(y(S.state.mergedPropsStyles,S.unreadPropStyles,S.state.lastIdealStyles)):A;if(function(Te,$e,He,re){if(re.length!==$e.length)return!1;for(var le=0;le<re.length;le++)if(re[le].key!==$e[le].key)return!1;for(le=0;le<re.length;le++)if(!p.default(Te[le],$e[le].style,He[le]))return!1;return!0}(S.state.currentStyles,E,S.state.currentVelocities,S.state.mergedPropsStyles))return S.animationID=null,void(S.accumulatedTime=0);var D=O||d.default(),P=D-S.prevTime;if(S.prevTime=D,S.accumulatedTime=S.accumulatedTime+P,S.accumulatedTime>10*_&&(S.accumulatedTime=0),S.accumulatedTime===0)return S.animationID=null,void S.startAnimationIfNecessary();for(var j=(S.accumulatedTime-Math.floor(S.accumulatedTime/_)*_)/_,k=Math.floor(S.accumulatedTime/_),M=g(S.props.willEnter,S.props.willLeave,S.props.didLeave,S.state.mergedPropsStyles,E,S.state.currentStyles,S.state.currentVelocities,S.state.lastIdealStyles,S.state.lastIdealVelocities),R=M[0],V=M[1],T=M[2],U=M[3],W=M[4],Q=0;Q<R.length;Q++){var X=R[Q].style,oe={},J={},he={},ae={};for(var ue in X)if(Object.prototype.hasOwnProperty.call(X,ue)){var ge=X[ue];if(typeof ge=="number")oe[ue]=ge,J[ue]=0,he[ue]=ge,ae[ue]=0;else{for(var N=U[Q][ue],F=W[Q][ue],K=0;K<k;K++){var H=s.default(_/1e3,N,F,ge.val,ge.stiffness,ge.damping,ge.precision);N=H[0],F=H[1]}var $=s.default(_/1e3,N,F,ge.val,ge.stiffness,ge.damping,ge.precision),se=$[0],pe=$[1];oe[ue]=N+(se-N)*j,J[ue]=F+(pe-F)*j,he[ue]=N,ae[ue]=F}}U[Q]=he,W[Q]=ae,V[Q]=oe,T[Q]=J}S.animationID=null,S.accumulatedTime-=k*_,S.setState({currentStyles:V,currentVelocities:T,lastIdealStyles:U,lastIdealVelocities:W,mergedPropsStyles:R}),S.unreadPropStyles=null,S.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return function(I,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);I.prototype=Object.create(S&&S.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(I,S):I.__proto__=S)}(C,w),n(C,null,[{key:"propTypes",value:{defaultStyles:b.default.arrayOf(b.default.shape({key:b.default.string.isRequired,data:b.default.any,style:b.default.objectOf(b.default.number).isRequired})),styles:b.default.oneOfType([b.default.func,b.default.arrayOf(b.default.shape({key:b.default.string.isRequired,data:b.default.any,style:b.default.objectOf(b.default.oneOfType([b.default.number,b.default.object])).isRequired}))]).isRequired,children:b.default.func.isRequired,willEnter:b.default.func,willLeave:b.default.func,didLeave:b.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(I){return c.default(I.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),C.prototype.defaultState=function(){var I=this.props,S=I.defaultStyles,O=I.styles,A=I.willEnter,E=I.willLeave,D=I.didLeave,P=typeof O=="function"?O(S):O,j=void 0;j=S==null?P:S.map(function(T){for(var U=0;U<P.length;U++)if(P[U].key===T.key)return P[U];return T});var k=S==null?P.map(function(T){return c.default(T.style)}):S.map(function(T){return c.default(T.style)}),M=S==null?P.map(function(T){return r.default(T.style)}):S.map(function(T){return r.default(T.style)}),R=g(A,E,D,j,P,k,M,k,M),V=R[0];return{currentStyles:R[1],currentVelocities:R[2],lastIdealStyles:R[3],lastIdealVelocities:R[4],mergedPropsStyles:V}},C.prototype.componentDidMount=function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},C.prototype.componentWillReceiveProps=function(I){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var S=I.styles;this.unreadPropStyles=typeof S=="function"?S(y(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):S,this.animationID==null&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},C.prototype.componentWillUnmount=function(){this.unmounting=!0,this.animationID!=null&&(a.default.cancel(this.animationID),this.animationID=null)},C.prototype.render=function(){var I=y(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),S=this.props.children(I);return S&&f.default.Children.only(S)},C}(f.default.Component);i.default=m,v.exports=i.default},{"./mapToZero":423,"./mergeDiff":424,"./shouldStopAnimation":428,"./stepper":430,"./stripStyle":431,"performance-now":377,"prop-types":403,raf:411,react:437}],423:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t){var n={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=0);return n},v.exports=i.default},{}],424:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t,n,u){for(var r={},c=0;c<t.length;c++)r[t[c].key]=c;var s={};for(c=0;c<n.length;c++)s[n[c].key]=c;var o=[];for(c=0;c<n.length;c++)o[c]=n[c];for(c=0;c<t.length;c++)if(!Object.prototype.hasOwnProperty.call(s,t[c].key)){var d=u(c,t[c]);d!=null&&o.push(d)}return o.sort(function(a,p){var f=s[a.key],b=s[p.key],_=r[a.key],y=r[p.key];if(f!=null&&b!=null)return s[a.key]-s[p.key];if(_!=null&&y!=null)return r[a.key]-r[p.key];if(f!=null){for(var g=0;g<n.length;g++){var m=n[g].key;if(Object.prototype.hasOwnProperty.call(r,m)){if(f<s[m]&&y>r[m])return-1;if(f>s[m]&&y<r[m])return 1}}return 1}for(g=0;g<n.length;g++)if(m=n[g].key,Object.prototype.hasOwnProperty.call(r,m)){if(b<s[m]&&_>r[m])return 1;if(b>s[m]&&_<r[m])return-1}return-1})},v.exports=i.default},{}],425:[function(e,v,i){"use strict";i.__esModule=!0,i.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},v.exports=i.default},{}],426:[function(e,v,i){"use strict";function t(a){return a&&a.__esModule?a.default:a}i.__esModule=!0;var n=e("./Motion");i.Motion=t(n);var u=e("./StaggeredMotion");i.StaggeredMotion=t(u);var r=e("./TransitionMotion");i.TransitionMotion=t(r);var c=e("./spring");i.spring=t(c);var s=e("./presets");i.presets=t(s);var o=e("./stripStyle");i.stripStyle=t(o);var d=e("./reorderKeys");i.reorderKeys=t(d)},{"./Motion":420,"./StaggeredMotion":421,"./TransitionMotion":422,"./presets":425,"./reorderKeys":427,"./spring":429,"./stripStyle":431}],427:[function(e,v,i){(function(t){(function(){"use strict";i.__esModule=!0,i.default=function(){t.env.NODE_ENV==="development"&&(n||(n=!0))};var n=!1;v.exports=i.default}).call(this)}).call(this,e("_process"))},{_process:399}],428:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t,n,u){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(u[r]!==0)return!1;var c=typeof n[r]=="number"?n[r]:n[r].val;if(t[r]!==c)return!1}return!0},v.exports=i.default},{}],429:[function(e,v,i){"use strict";i.__esModule=!0;var t=Object.assign||function(s){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var a in d)Object.prototype.hasOwnProperty.call(d,a)&&(s[a]=d[a])}return s};i.default=function(s,o){return t({},c,o,{val:s})};var n,u=e("./presets"),r=(n=u)&&n.__esModule?n:{default:n},c=t({},r.default.noWobble,{precision:.01});v.exports=i.default},{"./presets":425}],430:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(n,u,r,c,s,o,d){var a=r+(-s*(u-c)+-o*r)*n,p=u+a*n;return Math.abs(a)<d&&Math.abs(p-c)<d?(t[0]=c,t[1]=0,t):(t[0]=p,t[1]=a,t)};var t=[0,0];v.exports=i.default},{}],431:[function(e,v,i){"use strict";i.__esModule=!0,i.default=function(t){var n={};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=typeof t[u]=="number"?t[u]:t[u].val);return n},v.exports=i.default},{}],432:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=function(){function s(){(0,n.default)(this,s),(0,r.default)(this,"map",new Map),(0,r.default)(this,"_refFns",new Map)}return(0,u.default)(s,[{key:"ref",value:function(o){var d=this,a=this._refFns.get(o);return a||(a=function(p){p==null?(d._refFns.delete(o),d.map.delete(o)):d.map.set(o,p)},this._refFns.set(o,a)),a}}]),s}();i.default=c},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],433:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){var n=/(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(t);if(!n)throw new Error("Could not parse time from transition value");return Number(n[1])*(n[2].length===1?1e3:1)}},{}],434:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireWildcard"),n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/extends")),r=n(e("@babel/runtime/helpers/objectWithoutProperties")),c=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),d=n(e("@babel/runtime/helpers/getPrototypeOf")),a=n(e("@babel/runtime/helpers/assertThisInitialized")),p=n(e("@babel/runtime/helpers/inherits")),f=n(e("@babel/runtime/helpers/defineProperty")),b=t(e("react")),_=n(e("prop-types")),y=n(e("./getTransitionTimeMs")),g=function(m){function w(C){var I;return(0,c.default)(this,w),I=(0,o.default)(this,(0,d.default)(w).call(this,C)),(0,f.default)((0,a.default)(I),"_removeTransitionEndListener",function(){}),(0,f.default)((0,a.default)(I),"_main",b.createRef()),(0,f.default)((0,a.default)(I),"_inner",b.createRef()),(0,f.default)((0,a.default)(I),"_onNextTransitionEnd",function(S,O){I._removeTransitionEndListener();var A,E=function(){I._removeTransitionEndListener(),O()};I._removeTransitionEndListener=function(){I._removeTransitionEndListener=function(){},clearTimeout(A),S.removeEventListener("transitionend",E)},S.addEventListener("transitionend",E);var D=1.1*(0,y.default)(I.props.heightTransition)+500;A=setTimeout(E,D)}),I.state={renderInner:C.expanded||w._visibleWhenClosed(C),closing:!1,fullyClosed:!C.expanded,height:C.expanded?"auto":C.collapsedHeight},I}return(0,p.default)(w,m),(0,s.default)(w,[{key:"componentWillUnmount",value:function(){this._removeTransitionEndListener()}},{key:"componentDidUpdate",value:function(C,I){var S=this;if(!C.expanded&&this.props.expanded){this._removeTransitionEndListener();var O=this._main.current,A=this._inner.current;if(!O||!A)throw new Error("Should not happen");var E="".concat(A.clientHeight,"px");this.setState({height:E}),this._onNextTransitionEnd(O,function(){S.setState({height:"auto"},function(){S.props.onChangeEnd&&S.props.onChangeEnd()})})}else if(C.expanded&&!this.props.expanded){if(this._removeTransitionEndListener(),!this._inner.current)throw new Error("Should not happen");this.setState({height:"".concat(this._inner.current.clientHeight,"px")},function(){var D=S._main.current;if(!D)throw new Error("Should not happen");D.clientHeight,S.setState({height:S.props.collapsedHeight,closing:!0}),S._onNextTransitionEnd(D,function(){S.setState({closing:!1,fullyClosed:!0}),S.props.onChangeEnd&&S.props.onChangeEnd()})})}}},{key:"render",value:function(){var C=w._visibleWhenClosed(this.props),I=this.props,S=I.allowOverflowWhenOpen,O=I.children,A=(I.collapsedHeight,I.eagerRender,I.expanded,I.heightTransition),E=(I.onChangeEnd,(0,r.default)(I,["allowOverflowWhenOpen","children","collapsedHeight","eagerRender","expanded","heightTransition","onChangeEnd"])),D=this.state,P=D.height,j=D.fullyClosed,k=D.renderInner?b.createElement("div",{ref:this._inner,style:{overflow:S&&P==="auto"?"visible":"hidden"}},O):null;return b.createElement("div",(0,u.default)({},E,{ref:this._main,style:{height:P,overflow:S&&P==="auto"?"visible":"hidden",display:j&&!C?"none":null,transition:"height ".concat(A)}}),k)}}],[{key:"_visibleWhenClosed",value:function(C){return C.eagerRender||parseFloat(C.collapsedHeight)!==0}},{key:"getDerivedStateFromProps",value:function(C,I){return C.expanded&&(I.closing||I.fullyClosed)?{closing:!1,fullyClosed:!1,renderInner:!0}:C.expanded||!I.closing&&!I.fullyClosed||I.height===C.collapsedHeight?null:{height:C.collapsedHeight,renderInner:I.renderInner||w._visibleWhenClosed(C)}}}]),w}(b.Component);i.default=g,(0,f.default)(g,"propTypes",{expanded:_.default.bool.isRequired,onChangeEnd:_.default.func,collapsedHeight:_.default.string,heightTransition:_.default.string,className:_.default.string,allowOverflowWhenOpen:_.default.bool,eagerRender:_.default.bool}),(0,f.default)(g,"defaultProps",{collapsedHeight:"0",heightTransition:".25s ease",className:"",allowOverflowWhenOpen:!1,eagerRender:!1})},{"./getTransitionTimeMs":433,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/extends":12,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/interopRequireWildcard":16,"@babel/runtime/helpers/objectWithoutProperties":20,"@babel/runtime/helpers/possibleConstructorReturn":22,"prop-types":403,react:437}],435:[function(e,v,i){"use strict"},{"object-assign":366}],436:[function(e,v,i){"use strict";var t=e("object-assign"),n=60103,u=60106;i.Fragment=60107,i.StrictMode=60108,i.Profiler=60114;var r=60109,c=60110,s=60112;i.Suspense=60113;var o=60115,d=60116;if(typeof Symbol=="function"&&Symbol.for){var a=Symbol.for;n=a("react.element"),u=a("react.portal"),i.Fragment=a("react.fragment"),i.StrictMode=a("react.strict_mode"),i.Profiler=a("react.profiler"),r=a("react.provider"),c=a("react.context"),s=a("react.forward_ref"),i.Suspense=a("react.suspense"),o=a("react.memo"),d=a("react.lazy")}var p=typeof Symbol=="function"&&Symbol.iterator;function f(T){for(var U="https://reactjs.org/docs/error-decoder.html?invariant="+T,W=1;W<arguments.length;W++)U+="&args[]="+encodeURIComponent(arguments[W]);return"Minified React error #"+T+"; visit "+U+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function y(T,U,W){this.props=T,this.context=U,this.refs=_,this.updater=W||b}function g(){}function m(T,U,W){this.props=T,this.context=U,this.refs=_,this.updater=W||b}y.prototype.isReactComponent={},y.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error(f(85));this.updater.enqueueSetState(this,T,U,"setState")},y.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")},g.prototype=y.prototype;var w=m.prototype=new g;w.constructor=m,t(w,y.prototype),w.isPureReactComponent=!0;var C={current:null},I=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function O(T,U,W){var Q,X={},oe=null,J=null;if(U!=null)for(Q in U.ref!==void 0&&(J=U.ref),U.key!==void 0&&(oe=""+U.key),U)I.call(U,Q)&&!S.hasOwnProperty(Q)&&(X[Q]=U[Q]);var he=arguments.length-2;if(he===1)X.children=W;else if(1<he){for(var ae=Array(he),ue=0;ue<he;ue++)ae[ue]=arguments[ue+2];X.children=ae}if(T&&T.defaultProps)for(Q in he=T.defaultProps)X[Q]===void 0&&(X[Q]=he[Q]);return{$$typeof:n,type:T,key:oe,ref:J,props:X,_owner:C.current}}function A(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}var E=/\/+/g;function D(T,U){return typeof T=="object"&&T!==null&&T.key!=null?function(W){var Q={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(X){return Q[X]})}(""+T.key):U.toString(36)}function P(T,U,W,Q,X){var oe=typeof T;oe!=="undefined"&&oe!=="boolean"||(T=null);var J=!1;if(T===null)J=!0;else switch(oe){case"string":case"number":J=!0;break;case"object":switch(T.$$typeof){case n:case u:J=!0}}if(J)return X=X(J=T),T=Q===""?"."+D(J,0):Q,Array.isArray(X)?(W="",T!=null&&(W=T.replace(E,"$&/")+"/"),P(X,U,W,"",function(ue){return ue})):X!=null&&(A(X)&&(X=function(ue,ge){return{$$typeof:n,type:ue.type,key:ge,ref:ue.ref,props:ue.props,_owner:ue._owner}}(X,W+(!X.key||J&&J.key===X.key?"":(""+X.key).replace(E,"$&/")+"/")+T)),U.push(X)),1;if(J=0,Q=Q===""?".":Q+":",Array.isArray(T))for(var he=0;he<T.length;he++){var ae=Q+D(oe=T[he],he);J+=P(oe,U,W,ae,X)}else if(ae=function(ue){return ue===null||typeof ue!="object"?null:typeof(ue=p&&ue[p]||ue["@@iterator"])=="function"?ue:null}(T),typeof ae=="function")for(T=ae.call(T),he=0;!(oe=T.next()).done;)J+=P(oe=oe.value,U,W,ae=Q+D(oe,he++),X);else if(oe==="object")throw U=""+T,Error(f(31,U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U));return J}function j(T,U,W){if(T==null)return T;var Q=[],X=0;return P(T,Q,"","",function(oe){return U.call(W,oe,X++)}),Q}function k(T){if(T._status===-1){var U=T._result;U=U(),T._status=0,T._result=U,U.then(function(W){T._status===0&&(W=W.default,T._status=1,T._result=W)},function(W){T._status===0&&(T._status=2,T._result=W)})}if(T._status===1)return T._result;throw T._result}var M={current:null};function R(){var T=M.current;if(T===null)throw Error(f(321));return T}var V={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:t};i.Children={map:j,forEach:function(T,U,W){j(T,function(){U.apply(this,arguments)},W)},count:function(T){var U=0;return j(T,function(){U++}),U},toArray:function(T){return j(T,function(U){return U})||[]},only:function(T){if(!A(T))throw Error(f(143));return T}},i.Component=y,i.PureComponent=m,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,i.cloneElement=function(T,U,W){if(T==null)throw Error(f(267,T));var Q=t({},T.props),X=T.key,oe=T.ref,J=T._owner;if(U!=null){if(U.ref!==void 0&&(oe=U.ref,J=C.current),U.key!==void 0&&(X=""+U.key),T.type&&T.type.defaultProps)var he=T.type.defaultProps;for(ae in U)I.call(U,ae)&&!S.hasOwnProperty(ae)&&(Q[ae]=U[ae]===void 0&&he!==void 0?he[ae]:U[ae])}var ae=arguments.length-2;if(ae===1)Q.children=W;else if(1<ae){he=Array(ae);for(var ue=0;ue<ae;ue++)he[ue]=arguments[ue+2];Q.children=he}return{$$typeof:n,type:T.type,key:X,ref:oe,props:Q,_owner:J}},i.createContext=function(T,U){return U===void 0&&(U=null),(T={$$typeof:c,_calculateChangedBits:U,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:r,_context:T},T.Consumer=T},i.createElement=O,i.createFactory=function(T){var U=O.bind(null,T);return U.type=T,U},i.createRef=function(){return{current:null}},i.forwardRef=function(T){return{$$typeof:s,render:T}},i.isValidElement=A,i.lazy=function(T){return{$$typeof:d,_payload:{_status:-1,_result:T},_init:k}},i.memo=function(T,U){return{$$typeof:o,type:T,compare:U===void 0?null:U}},i.useCallback=function(T,U){return R().useCallback(T,U)},i.useContext=function(T,U){return R().useContext(T,U)},i.useDebugValue=function(){},i.useEffect=function(T,U){return R().useEffect(T,U)},i.useImperativeHandle=function(T,U,W){return R().useImperativeHandle(T,U,W)},i.useLayoutEffect=function(T,U){return R().useLayoutEffect(T,U)},i.useMemo=function(T,U){return R().useMemo(T,U)},i.useReducer=function(T,U,W){return R().useReducer(T,U,W)},i.useRef=function(T){return R().useRef(T)},i.useState=function(T){return R().useState(T)},i.version="17.0.2"},{"object-assign":366}],437:[function(e,v,i){"use strict";v.exports=e("./cjs/react.production.min.js")},{"./cjs/react.development.js":435,"./cjs/react.production.min.js":436}],438:[function(e,v,i){var t=e("buffer"),n=t.Buffer;function u(c,s){for(var o in c)s[o]=c[o]}function r(c,s,o){return n(c,s,o)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?v.exports=t:(u(t,i),i.Buffer=r),r.prototype=Object.create(n.prototype),u(n,r),r.from=function(c,s,o){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,s,o)},r.alloc=function(c,s,o){if(typeof c!="number")throw new TypeError("Argument must be a number");var d=n(c);return s!==void 0?typeof o=="string"?d.fill(s,o):d.fill(s):d.fill(0),d},r.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},r.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(c)}},{buffer:46}],439:[function(e,v,i){"use strict"},{}],440:[function(e,v,i){"use strict";var t=0;i.__interactionsRef=null,i.__subscriberRef=null,i.unstable_clear=function(n){return n()},i.unstable_getCurrent=function(){return null},i.unstable_getThreadID=function(){return++t},i.unstable_subscribe=function(){},i.unstable_trace=function(n,u,r){return r()},i.unstable_unsubscribe=function(){},i.unstable_wrap=function(n){return n}},{}],441:[function(e,v,i){"use strict"},{}],442:[function(e,v,i){"use strict";var t,n,u,r;if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var s=Date,o=s.now();i.unstable_now=function(){return s.now()-o}}if(typeof window>"u"||typeof MessageChannel!="function"){var d=null,a=null,p=function(){if(d!==null)try{var J=i.unstable_now();d(!0,J),d=null}catch(he){throw setTimeout(p,0),he}};t=function(J){d!==null?setTimeout(t,0,J):(d=J,setTimeout(p,0))},n=function(J,he){a=setTimeout(J,he)},u=function(){clearTimeout(a)},i.unstable_shouldYield=function(){return!1},r=i.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,b=window.clearTimeout;if(typeof console<"u"){var _=window.cancelAnimationFrame;window.requestAnimationFrame}var y=!1,g=null,m=-1,w=5,C=0;i.unstable_shouldYield=function(){return i.unstable_now()>=C},r=function(){},i.unstable_forceFrameRate=function(J){0>J||125<J||(w=0<J?Math.floor(1e3/J):5)};var I=new MessageChannel,S=I.port2;I.port1.onmessage=function(){if(g!==null){var J=i.unstable_now();C=J+w;try{g(!0,J)?S.postMessage(null):(y=!1,g=null)}catch(he){throw S.postMessage(null),he}}else y=!1},t=function(J){g=J,y||(y=!0,S.postMessage(null))},n=function(J,he){m=f(function(){J(i.unstable_now())},he)},u=function(){b(m),m=-1}}function O(J,he){var ae=J.length;J.push(he);e:for(;;){var ue=ae-1>>>1,ge=J[ue];if(!(ge!==void 0&&0<D(ge,he)))break e;J[ue]=he,J[ae]=ge,ae=ue}}function A(J){return(J=J[0])===void 0?null:J}function E(J){var he=J[0];if(he!==void 0){var ae=J.pop();if(ae!==he){J[0]=ae;e:for(var ue=0,ge=J.length;ue<ge;){var N=2*(ue+1)-1,F=J[N],K=N+1,H=J[K];if(F!==void 0&&0>D(F,ae))H!==void 0&&0>D(H,F)?(J[ue]=H,J[K]=ae,ue=K):(J[ue]=F,J[N]=ae,ue=N);else{if(!(H!==void 0&&0>D(H,ae)))break e;J[ue]=H,J[K]=ae,ue=K}}}return he}return null}function D(J,he){var ae=J.sortIndex-he.sortIndex;return ae!==0?ae:J.id-he.id}var P=[],j=[],k=1,M=null,R=3,V=!1,T=!1,U=!1;function W(J){for(var he=A(j);he!==null;){if(he.callback===null)E(j);else{if(!(he.startTime<=J))break;E(j),he.sortIndex=he.expirationTime,O(P,he)}he=A(j)}}function Q(J){if(U=!1,W(J),!T)if(A(P)!==null)T=!0,t(X);else{var he=A(j);he!==null&&n(Q,he.startTime-J)}}function X(J,he){T=!1,U&&(U=!1,u()),V=!0;var ae=R;try{for(W(he),M=A(P);M!==null&&(!(M.expirationTime>he)||J&&!i.unstable_shouldYield());){var ue=M.callback;if(typeof ue=="function"){M.callback=null,R=M.priorityLevel;var ge=ue(M.expirationTime<=he);he=i.unstable_now(),typeof ge=="function"?M.callback=ge:M===A(P)&&E(P),W(he)}else E(P);M=A(P)}if(M!==null)var N=!0;else{var F=A(j);F!==null&&n(Q,F.startTime-he),N=!1}return N}finally{M=null,R=ae,V=!1}}var oe=r;i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){T||V||(T=!0,t(X))},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return A(P)},i.unstable_next=function(J){switch(R){case 1:case 2:case 3:var he=3;break;default:he=R}var ae=R;R=he;try{return J()}finally{R=ae}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=oe,i.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ae=R;R=J;try{return he()}finally{R=ae}},i.unstable_scheduleCallback=function(J,he,ae){var ue=i.unstable_now();switch(typeof ae=="object"&&ae!==null?ae=typeof(ae=ae.delay)=="number"&&0<ae?ue+ae:ue:ae=ue,J){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return J={id:k++,callback:he,priorityLevel:J,startTime:ae,expirationTime:ge=ae+ge,sortIndex:-1},ae>ue?(J.sortIndex=ae,O(j,J),A(P)===null&&J===A(j)&&(U?u():U=!0,n(Q,ae-ue))):(J.sortIndex=ge,O(P,J),T||V||(T=!0,t(X))),J},i.unstable_wrapCallback=function(J){var he=R;return function(){var ae=R;R=he;try{return J.apply(this,arguments)}finally{R=ae}}}},{}],443:[function(e,v,i){"use strict";v.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.development.js":441,"./cjs/scheduler.production.min.js":442}],444:[function(e,v,i){"use strict";v.exports=e("./cjs/scheduler-tracing.production.min.js")},{"./cjs/scheduler-tracing.development.js":439,"./cjs/scheduler-tracing.production.min.js":440}],445:[function(e,v,i){var t=e("safe-buffer").Buffer;function n(u,r){this._block=t.alloc(u),this._finalSize=r,this._blockSize=u,this._len=0}n.prototype.update=function(u,r){typeof u=="string"&&(r=r||"utf8",u=t.from(u,r));for(var c=this._block,s=this._blockSize,o=u.length,d=this._len,a=0;a<o;){for(var p=d%s,f=Math.min(o-a,s-p),b=0;b<f;b++)c[p+b]=u[a+b];a+=f,(d+=f)%s==0&&this._update(c)}return this._len+=o,this},n.prototype.digest=function(u){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var c=8*this._len;if(c<=4294967295)this._block.writeUInt32BE(c,this._blockSize-4);else{var s=(4294967295&c)>>>0,o=(c-s)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var d=this._hash();return u?d.toString(u):d},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},v.exports=n},{"safe-buffer":438}],446:[function(e,v,i){var t=e("inherits"),n=e("./hash"),u=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],c=new Array(80);function s(){this.init(),this._w=c,n.call(this,64,56)}function o(p){return p<<5|p>>>27}function d(p){return p<<30|p>>>2}function a(p,f,b,_){return p===0?f&b|~f&_:p===2?f&b|f&_|b&_:f^b^_}t(s,n),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(p){for(var f,b=this._w,_=0|this._a,y=0|this._b,g=0|this._c,m=0|this._d,w=0|this._e,C=0;C<16;++C)b[C]=p.readInt32BE(4*C);for(;C<80;++C)b[C]=(f=b[C-3]^b[C-8]^b[C-14]^b[C-16])<<1|f>>>31;for(var I=0;I<80;++I){var S=~~(I/20),O=o(_)+a(S,y,g,m)+w+b[I]+r[S]|0;w=m,m=g,g=d(y),y=_,_=O}this._a=_+this._a|0,this._b=y+this._b|0,this._c=g+this._c|0,this._d=m+this._d|0,this._e=w+this._e|0},s.prototype._hash=function(){var p=u.allocUnsafe(20);return p.writeInt32BE(0|this._a,0),p.writeInt32BE(0|this._b,4),p.writeInt32BE(0|this._c,8),p.writeInt32BE(0|this._d,12),p.writeInt32BE(0|this._e,16),p},v.exports=s},{"./hash":445,inherits:151,"safe-buffer":438}],447:[function(e,v,i){var t=e("inherits"),n=e("./hash"),u=e("safe-buffer").Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=new Array(64);function s(){this.init(),this._w=c,n.call(this,64,56)}function o(b,_,y){return y^b&(_^y)}function d(b,_,y){return b&_|y&(b|_)}function a(b){return(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10)}function p(b){return(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7)}function f(b){return(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3}t(s,n),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(b){for(var _,y=this._w,g=0|this._a,m=0|this._b,w=0|this._c,C=0|this._d,I=0|this._e,S=0|this._f,O=0|this._g,A=0|this._h,E=0;E<16;++E)y[E]=b.readInt32BE(4*E);for(;E<64;++E)y[E]=0|(((_=y[E-2])>>>17|_<<15)^(_>>>19|_<<13)^_>>>10)+y[E-7]+f(y[E-15])+y[E-16];for(var D=0;D<64;++D){var P=A+p(I)+o(I,S,O)+r[D]+y[D]|0,j=a(g)+d(g,m,w)|0;A=O,O=S,S=I,I=C+P|0,C=w,w=m,m=g,g=P+j|0}this._a=g+this._a|0,this._b=m+this._b|0,this._c=w+this._c|0,this._d=C+this._d|0,this._e=I+this._e|0,this._f=S+this._f|0,this._g=O+this._g|0,this._h=A+this._h|0},s.prototype._hash=function(){var b=u.allocUnsafe(32);return b.writeInt32BE(this._a,0),b.writeInt32BE(this._b,4),b.writeInt32BE(this._c,8),b.writeInt32BE(this._d,12),b.writeInt32BE(this._e,16),b.writeInt32BE(this._f,20),b.writeInt32BE(this._g,24),b.writeInt32BE(this._h,28),b},v.exports=s},{"./hash":445,inherits:151,"safe-buffer":438}],448:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n,u,r=e("./ponyfill.js"),c=(n=r)&&n.__esModule?n:{default:n};u=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:v!==void 0?v:Function("return this")();var s=(0,c.default)(u);i.default=s}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./ponyfill.js":449}],449:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){var n,u=t.Symbol;return typeof u=="function"?u.observable?n=u.observable:(n=u("observable"),u.observable=n):n="@@observable",n}},{}],450:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/possibleConstructorReturn")),c=t(e("@babel/runtime/helpers/getPrototypeOf")),s=t(e("@babel/runtime/helpers/inherits")),o=t(e("@babel/runtime/helpers/assertThisInitialized")),d=t(e("@babel/runtime/helpers/defineProperty")),a=t(e("live-set")),p=t(e("./TagTreeNode")),f=Object.freeze([]),b=function(_){function y(g){var m,w;if((0,n.default)(this,y),m=(0,r.default)(this,(0,c.default)(y).call(this,{value:g.root,parent:null,ownedTags:new Set(g.tags.map(function(I){return I.tag})),executor:function(I){w=I}})),(0,d.default)((0,o.default)((0,o.default)(m)),"_nodeControllers",new Map),(0,d.default)((0,o.default)((0,o.default)(m)),"_lookupTable",void 0),(0,d.default)((0,o.default)((0,o.default)(m)),"_allByTag",void 0),!w)throw new Error;m._nodeControllers.set((0,o.default)((0,o.default)(m)),w),m._lookupTable=new Map([[g.root,[(0,o.default)((0,o.default)(m))]]]),m._allByTag=new Map,g.tags.forEach(function(I){var S=I.tag,O=a.default.active(),A=O.liveSet,E=O.controller;if(m._allByTag.has(S))throw new Error("Tag specified twice: "+S);m._allByTag.set(S,{ownedTags:new Set,liveSet:A,controller:E})}),g.tags.forEach(function(I){var S=I.tag,O=I.ownedBy;O&&O.forEach(function(A){var E=m._allByTag.get(A);if(!E)throw new Error("unknown ownedBy value for ".concat(S,": ").concat(A));E.ownedTags.add(S)})});var C={tree:(0,o.default)((0,o.default)(m)),addTaggedValue:function(I,S,O){var A,E=m._allByTag.get(S);if(!E)throw new Error("unknown tag: ".concat(S));var D=new p.default({value:O,parent:I,ownedTags:E.ownedTags,executor:function(k){A=k}});if(!A)throw new Error;m._nodeControllers.set(D,A),E.controller.add(D);var P=m._lookupTable.get(O);P?P.push(D):m._lookupTable.set(O,[D]);var j=m._nodeControllers.get(I);if(!j)throw new Error("parent is not part of TagTree");return j.addOwnedNode(S,D),D},removeTaggedNode:function(I,S,O){var A=m._allByTag.get(S);if(!A)throw new Error("unknown tag: ".concat(S));var E=m._nodeControllers.get(I);if(!E)throw new Error("parent is not part of TagTree");var D=O.getValue(),P=m._lookupTable.get(D);if(!P)throw new Error("node was missing from lookup table before removal");if(P.length>1){var j=P.indexOf(O);if(j<0)throw new Error("node was missing from list in lookup table before removal");P.splice(j,1)}else m._lookupTable.delete(D);O.getOwned().forEach(function(k,M){k.values().forEach(function(R){C.removeTaggedNode(O,M,R)})}),A.controller.remove(O),E.removeOwnedNode(S,O),m._nodeControllers.delete(O)},end:function(){m._nodeControllers.forEach(function(I){I.end()}),m._allByTag.forEach(function(I){I.controller.end()})}};return g.executor(C),g.executor=function(){},m}return(0,s.default)(y,_),(0,u.default)(y,[{key:"getNodesForValue",value:function(g){var m=this._lookupTable.get(g);return m?Object.freeze(m.slice()):f}},{key:"getAllByTag",value:function(g){var m=this._allByTag.get(g);if(!m)throw new Error("tag does not exist in TagTree: ".concat(g));return m.liveSet}},{key:"getAll",value:function(){var g=new Map;return this._allByTag.forEach(function(m,w){var C=m.liveSet;g.set(w,C)}),g}}]),y}(p.default);i.default=b,v.exports=i.default,v.exports.default=i.default},{"./TagTreeNode":451,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/getPrototypeOf":13,"@babel/runtime/helpers/inherits":14,"@babel/runtime/helpers/interopRequireDefault":15,"@babel/runtime/helpers/possibleConstructorReturn":22,"live-set":163}],451:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classCallCheck")),u=t(e("@babel/runtime/helpers/createClass")),r=t(e("@babel/runtime/helpers/defineProperty")),c=t(e("live-set")),s=function(){function o(d){var a=this;(0,n.default)(this,o),(0,r.default)(this,"_init",void 0),(0,r.default)(this,"_ownedNodes",new Map),(0,r.default)(this,"_ownedByTag",new Map),this._init=d,this._init.executor({node:this,addOwnedNode:function(p,f){a._ownedNodes.set(f,p);var b=a._ownedByTag.get(p);b||(b=a._createTagEntry(),a._ownedByTag.set(p,b)),b.controller.add(f)},removeOwnedNode:function(p,f){a._ownedNodes.delete(f);var b=a._ownedByTag.get(p);if(!b)throw new Error("tag not owned");b.controller.remove(f)},end:function(){a._ownedByTag.forEach(function(p){p.controller.end()})}}),this._init.executor=function(){}}return(0,u.default)(o,[{key:"_createTagEntry",value:function(){return c.default.active()}},{key:"getValue",value:function(){return this._init.value}},{key:"getParent",value:function(){return this._init.parent||null}},{key:"getOwnedByTag",value:function(d){var a=this._ownedByTag.get(d);if(!a){if(!this._init.ownedTags.has(d))throw new Error("tag not owned: ".concat(d));a=this._createTagEntry(),this._ownedByTag.set(d,a)}return a.liveSet}},{key:"getOwned",value:function(){var d=new Map;return this._ownedByTag.forEach(function(a,p){var f=a.liveSet;d.set(p,f)}),d}},{key:"getTag",value:function(){var d=this._init.parent;return d?d.getTagOfOwnedNode(this):null}},{key:"ownsNode",value:function(d){return this._ownedNodes.has(d)}},{key:"getTagOfOwnedNode",value:function(d){var a=this._ownedNodes.get(d);if(a==null)throw new Error("node not owned");return a}}]),o}();i.default=s,v.exports=i.default,v.exports.default=i.default},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],452:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"TagTree",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"TagTreeNode",{enumerable:!0,get:function(){return u.default}});var n=t(e("./TagTree")),u=t(e("./TagTreeNode"))},{"./TagTree":450,"./TagTreeNode":451,"@babel/runtime/helpers/interopRequireDefault":15}],453:[function(e,v,i){var t={iterator:typeof Symbol<"u"?Symbol.iterator:"@@iterator"};function n(H,$){throw new Error("don't know how to "+H+" collection: "+$)}function u(H,$){return $==="iterator"?H[t.iterator]||H.next:H[t[$]]}function r(H){var $=H[t.iterator];return $?$.call(H):H.next?H:d(H)?new c(H):p(H)?new s(H):void 0}function c(H){this.arr=H,this.index=0}function s(H){this.obj=H,this.keys=Object.keys(H),this.index=0}c.prototype.next=function(){return this.index<this.arr.length?{value:this.arr[this.index++],done:!1}:{done:!0}},s.prototype.next=function(){if(this.index<this.keys.length){var H=this.keys[this.index++];return{value:[H,this.obj[H]],done:!1}}return{done:!0}};var o=Object.prototype.toString,d=typeof Array.isArray=="function"?Array.isArray:function(H){return o.call(H)=="[object Array]"};function a(H){return typeof H=="function"}function p(H){return H instanceof Object&&Object.getPrototypeOf(H)===Object.getPrototypeOf({})}function f(H){return typeof H=="number"}function b(H){this["@@transducer/reduced"]=!0,this["@@transducer/value"]=H}function _(H){return H instanceof b||H&&H["@@transducer/reduced"]}function y(H){return H["@@transducer/value"]}function g(H){return _(H)?y(H):H}function m(H,$,se){if(d(H)){for(var pe=se,Te=-1,$e=H.length;++Te<$e;)if(_(pe=$["@@transducer/step"](pe,H[Te]))){pe=y(pe);break}return $["@@transducer/result"](pe)}if(p(H)||u(H,"iterator")){pe=se;for(var He=r(H),re=He.next();!re.done;){if(_(pe=$["@@transducer/step"](pe,re.value))){pe=y(pe);break}re=He.next()}return $["@@transducer/result"](pe)}n("iterate",H)}function w(H,$,se,pe){return $=$(se),pe===void 0&&(pe=$["@@transducer/init"]()),m(H,$,pe)}function C(){var H=Array.prototype.slice.call(arguments);return function($){for(var se=$,pe=H.length-1;pe>=0;pe--)se=H[pe](se);return se}}function I(H,$,se){if(!$)return H;switch(se=se??1){case 1:return function(pe){return H.call($,pe)};case 2:return function(pe,Te){return H.call($,pe,Te)};default:return H.bind($)}}function S(H,$){this.xform=$,this.f=H}function O(H,$,se){return a(H)&&(se=$,$=H,H=null),$=I($,se),H?d(H)?function(pe,Te,$e){var He=-1,re=pe.length,le=Array(re);for(Te=I(Te,$e,2);++He<re;)le[He]=Te(pe[He],He);return le}(H,$,se):ge(H,O($)):function(pe){return new S($,pe)}}function A(H,$){this.xform=$,this.f=H}function E(H,$,se){return a(H)&&(se=$,$=H,H=null),$=I($,se),H?d(H)?function(pe,Te,$e){var He=pe.length,re=[];Te=I(Te,$e,2);for(var le=0;le<He;le++)Te(pe[le],le)&&re.push(pe[le]);return re}(H,$,se):ge(H,E($)):function(pe){return new A($,pe)}}function D(H){this.xform=H,this.last=void 0}function P(H,$){this.xform=$,this.f=H}function j(H,$){this.n=H,this.i=0,this.xform=$}function k(H,$){this.n=H,this.i=0,this.xform=$}function M(H,$){this.xform=$,this.f=H,this.dropping=!0}function R(H,$){this.n=H,this.i=0,this.xform=$,this.part=new Array(H)}S.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},S.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},S.prototype["@@transducer/step"]=function(H,$){return this.xform["@@transducer/step"](H,this.f($))},A.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},A.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},A.prototype["@@transducer/step"]=function(H,$){return this.f($)?this.xform["@@transducer/step"](H,$):H},D.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},D.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},D.prototype["@@transducer/step"]=function(H,$){return $!==this.last?(this.last=$,this.xform["@@transducer/step"](H,$)):H},P.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},P.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},P.prototype["@@transducer/step"]=function(H,$){return this.f($)?this.xform["@@transducer/step"](H,$):new b(H)},j.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},j.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},j.prototype["@@transducer/step"]=function(H,$){var se;return this.i<this.n&&(H=this.xform["@@transducer/step"](H,$),this.i+1>=this.n&&(H=_(se=H)?se:new b(se))),this.i++,H},k.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},k.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},k.prototype["@@transducer/step"]=function(H,$){return this.i++<this.n?H:this.xform["@@transducer/step"](H,$)},M.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},M.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},M.prototype["@@transducer/step"]=function(H,$){if(this.dropping){if(this.f($))return H;this.dropping=!1}return this.xform["@@transducer/step"](H,$)},R.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},R.prototype["@@transducer/result"]=function(H){return this.i>0?g(this.xform["@@transducer/step"](H,this.part.slice(0,this.i))):this.xform["@@transducer/result"](H)},R.prototype["@@transducer/step"]=function(H,$){if(this.part[this.i]=$,this.i+=1,this.i===this.n){var se=this.part.slice(0,this.n);return this.part=new Array(this.n),this.i=0,this.xform["@@transducer/step"](H,se)}return H};var V={};function T(H,$){this.f=H,this.xform=$,this.part=[],this.last=V}function U(H,$){this.sep=H,this.xform=$,this.started=!1}function W(H,$){this.xform=$,this.n=H}function Q(H,$){this.xform=$,this.n=H,this.i=-1}function X(H){this.xform=H}function oe(H){return new X(H)}function J(H,$){return H.push($),H}function he(H,$){if(d($)&&$.length===2)H[$[0]]=$[1];else for(var se=Object.keys($),pe=se.length,Te=0;Te<pe;Te++)H[se[Te]]=$[se[Te]];return H}T.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},T.prototype["@@transducer/result"]=function(H){var $=this.part.length;return $>0?g(this.xform["@@transducer/step"](H,this.part.slice(0,$))):this.xform["@@transducer/result"](H)},T.prototype["@@transducer/step"]=function(H,$){var se=this.f($);return se===this.last||this.last===V?this.part.push($):(H=this.xform["@@transducer/step"](H,this.part),this.part=[$]),this.last=se,H},U.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},U.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},U.prototype["@@transducer/step"]=function(H,$){if(this.started){var se=this.xform["@@transducer/step"](H,this.sep);return _(se)?se:this.xform["@@transducer/step"](se,$)}return this.started=!0,this.xform["@@transducer/step"](H,$)},W.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},W.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},W.prototype["@@transducer/step"]=function(H,$){for(var se=this.n,pe=H,Te=0;Te<se&&!_(pe=this.xform["@@transducer/step"](pe,$));Te++);return pe},Q.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},Q.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},Q.prototype["@@transducer/step"]=function(H,$){return this.i+=1,this.i%this.n==0?this.xform["@@transducer/step"](H,$):H},X.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},X.prototype["@@transducer/result"]=function(H){return this.xform["@@transducer/result"](H)},X.prototype["@@transducer/step"]=function(H,$){var se=this.xform,pe={"@@transducer/init":function(){return se["@@transducer/init"]()},"@@transducer/result":function(Te){return Te},"@@transducer/step":function(Te,$e){var He=se["@@transducer/step"](Te,$e);return _(He)?y(He):He}};return m($,pe,H)};var ae={"@@transducer/init":function(){return[]},"@@transducer/result":function(H){return H}};ae["@@transducer/step"]=J;var ue={};function ge(H,$){return d(H)?w(H,$,ae,[]):p(H)?w(H,$,ue,{}):H["@@transducer/step"]?(se=H["@@transducer/init"]?H["@@transducer/init"]():new H.constructor,w(H,$,H,se)):u(H,"iterator")?new K($,H):void n("sequence",H);var se}ue["@@transducer/init"]=function(){return{}},ue["@@transducer/result"]=function(H){return H},ue["@@transducer/step"]=he;var N={};function F(H,$){this.xform=H(N),this.iter=$}function K(H,$){this.iter=r($),this.items=[],this.stepper=new F(H,r($))}N["@@transducer/result"]=function(H){return _(H)?y(H):H},N["@@transducer/step"]=function(H,$){return H.items.push($),H.rest},F.prototype["@@transducer/step"]=function(H){for(var $=H.items.length;H.items.length===$;){var se=this.iter.next();if(se.done||_(se.value)){this.xform["@@transducer/result"](this);break}this.xform["@@transducer/step"](H,se.value)}},K.prototype[t.iterator]=function(){return this},K.prototype.next=function(){return this["@@transducer/step"](),this.items.length?{value:this.items.pop(),done:!1}:{done:!0}},K.prototype["@@transducer/step"]=function(){this.items.length||this.stepper["@@transducer/step"](this)},v.exports={reduce:m,transformer:function(H){var $={"@@transducer/init":function(){throw new Error("init value unavailable")},"@@transducer/result":function(se){return se}};return $["@@transducer/step"]=H,$},Reduced:b,isReduced:_,iterator:r,push:J,merge:he,transduce:w,seq:ge,toArray:function(H,$){return $?w(H,$,ae,[]):m(H,ae,[])},toObj:function(H,$){return $?w(H,$,ue,{}):m(H,ue,{})},toIter:function(H,$){return $?new K($,H):r(H)},into:function(H,$,se){return d(H)?w(se,$,ae,H):p(H)?w(se,$,ue,H):H["@@transducer/step"]?w(se,$,H,H):void n("into",H)},compose:C,map:O,filter:E,remove:function(H,$,se){return a(H)&&(se=$,$=H,H=null),$=I($,se),E(H,function(pe){return!$(pe)})},cat:oe,mapcat:function(H,$){return C(O(H=I(H,$)),oe)},keep:function(H){return E(H,function($){return $!=null})},dedupe:function H($){return $?ge($,H()):function(se){return new D(se)}},take:function H($,se){return f($)&&(se=$,$=null),$?ge($,H(se)):function(pe){return new j(se,pe)}},takeWhile:function H($,se,pe){return a($)&&(pe=se,se=$,$=null),se=I(se,pe),$?ge($,H(se)):function(Te){return new P(se,Te)}},takeNth:function H($,se){return arguments.length===1?(se=$,function(pe){return new Q(se,pe)}):ge($,H(se))},drop:function H($,se){return f($)&&(se=$,$=null),$?ge($,H(se)):function(pe){return new k(se,pe)}},dropWhile:function H($,se,pe){return a($)&&(pe=se,se=$,$=null),se=I(se,pe),$?ge($,H(se)):function(Te){return new M(se,Te)}},partition:function H($,se){return f($)&&(se=$,$=null),$?ge($,H(se)):function(pe){return new R(se,pe)}},partitionBy:function H($,se,pe){return a($)&&(pe=se,se=$,$=null),se=I(se,pe),$?ge($,H(se)):function(Te){return new T(se,Te)}},interpose:function H($,se){return arguments.length===1?(se=$,function(pe){return new U(se,pe)}):ge($,H(se))},repeat:function H($,se){return arguments.length===1?(se=$,function(pe){return new W(se,pe)}):ge($,H(se))},range:function(H){for(var $=new Array(H),se=0;se<$.length;se++)$[se]=se;return $},LazyTransformer:K}},{}],454:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",s=(0,t.defonce)(u,function(){var o,d=n.stream(function(p){o=p}).toProperty();if(d.onValue(function(){}),!o)throw new Error("Should not happen, emitter was not set");var a=o;return{property:d,emit:function(p){a.emit(p)}}},"--udkefir-"+c);return s.emit(r),s.property};var t=e("ud"),n=e("kefir");v.exports=i.default,v.exports.default=i.default},{kefir:158,ud:455}],455:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defn=function(s,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",a=c(s,function(){if(!s.hot)return{fn:null,wrapper:o};var p={fn:null,wrapper:null},f=t(o.length).map(function(b){return"a"+b}).join(",");return p.wrapper=new Function("shared",`
      'use strict';
      return function `.concat(o.name,"__ud_wrapper(").concat(f,`) {
        if (new.target) {
          return Reflect.construct(shared.fn, arguments, new.target);
        } else {
          return shared.fn.apply(this, arguments);
        }
      };
      `))(p),o.prototype?(p.wrapper.prototype=Object.create(o.prototype),p.wrapper.prototype.constructor=p.wrapper):p.wrapper.prototype=o.prototype,p},"--defn-shared-"+d);return a.fn=o,s.hot&&(o.prototype&&a.wrapper.prototype&&Object.getPrototypeOf(a.wrapper.prototype)!==o.prototype&&Object.setPrototypeOf(a.wrapper.prototype,o.prototype),Object.setPrototypeOf(a.wrapper,o)),a.wrapper},i.defobj=function(s,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",a=c(s,function(){return o},"--defobj-"+d);return a!==o&&function(p,f){Object.getOwnPropertyNames(p).filter(function(_){return!Object.prototype.hasOwnProperty.call(f,_)}).forEach(function(_){delete p[_]});var b=Object.getOwnPropertyNames(f);Object.defineProperties(p,n(b,b.map(function(_){return Object.getOwnPropertyDescriptor(f,_)}).filter(Boolean).map(function(_){return{value:_.value,enumerable:_.enumerable,writable:!0,configurable:!0}})))}(a,o),a},i.defonce=c,i.markReloadable=r;var t=e("array-range"),n=e("zip-object"),u=new WeakMap;function r(s){s.hot&&s.hot.accept()}function c(s,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";r(s);var a=u.get(s);if(a||(a=new Set,u.set(s,a)),a.has(d))throw new Error("ud functions can only be used once per module with a given key");a.add(d);var p=!1,f=void 0;return s.hot&&(s.hot.data&&s.hot.data.__ud__&&Object.prototype.hasOwnProperty.call(s.hot.data.__ud__,d)&&(f=s.hot.data.__ud__[d],p=!0),s.hot.dispose(function(b){b.__ud__||(b.__ud__={}),b.__ud__[d]=f})),p||(f=o()),f}},{"array-range":30,"zip-object":467}],456:[function(e,v,i){"use strict";v.exports=function(t,n,u){return t.length===0?t:n?(u||t.sort(n),function(r,c){for(var s=1,o=r.length,d=r[0],a=r[0],p=1;p<o;++p)if(a=d,c(d=r[p],a)){if(p===s){s++;continue}r[s++]=d}return r.length=s,r}(t,n)):(u||t.sort(),function(r){for(var c=1,s=r.length,o=r[0],d=r[0],a=1;a<s;++a,d=o)if(d=o,(o=r[a])!==d){if(a===c){c++;continue}r[c++]=o}return r.length=c,r}(t))}},{}],457:[function(e,v,i){typeof Object.create=="function"?v.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:v.exports=function(t,n){t.super_=n;var u=function(){};u.prototype=n.prototype,t.prototype=new u,t.prototype.constructor=t}},{}],458:[function(e,v,i){arguments[4][50][0].apply(i,arguments)},{dup:50}],459:[function(e,v,i){(function(t,n){(function(){var u=/%[sdj%]/g;i.format=function(k){if(!m(k)){for(var M=[],R=0;R<arguments.length;R++)M.push(s(arguments[R]));return M.join(" ")}R=1;for(var V=arguments,T=V.length,U=String(k).replace(u,function(Q){if(Q==="%%")return"%";if(R>=T)return Q;switch(Q){case"%s":return String(V[R++]);case"%d":return Number(V[R++]);case"%j":try{return JSON.stringify(V[R++])}catch{return"[Circular]"}default:return Q}}),W=V[R];R<T;W=V[++R])y(W)||!I(W)?U+=" "+W:U+=" "+s(W);return U},i.deprecate=function(k,M){if(w(n.process))return function(){return i.deprecate(k,M).apply(this,arguments)};if(t.noDeprecation===!0)return k;var R=!1;return function(){if(!R){if(t.throwDeprecation)throw new Error(M);t.traceDeprecation,R=!0}return k.apply(this,arguments)}};var r,c={};function s(k,M){var R={seen:[],stylize:d};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),_(M)?R.showHidden=M:M&&i._extend(R,M),w(R.showHidden)&&(R.showHidden=!1),w(R.depth)&&(R.depth=2),w(R.colors)&&(R.colors=!1),w(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=o),a(R,k,R.depth)}function o(k,M){var R=s.styles[M];return R?"\x1B["+s.colors[R][0]+"m"+k+"\x1B["+s.colors[R][1]+"m":k}function d(k,M){return k}function a(k,M,R){if(k.customInspect&&M&&A(M.inspect)&&M.inspect!==i.inspect&&(!M.constructor||M.constructor.prototype!==M)){var V=M.inspect(R,k);return m(V)||(V=a(k,V,R)),V}var T=function(ae,ue){if(w(ue))return ae.stylize("undefined","undefined");if(m(ue)){var ge="'"+JSON.stringify(ue).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ae.stylize(ge,"string")}if(g(ue))return ae.stylize(""+ue,"number");if(_(ue))return ae.stylize(""+ue,"boolean");if(y(ue))return ae.stylize("null","null")}(k,M);if(T)return T;var U=Object.keys(M),W=function(ae){var ue={};return ae.forEach(function(ge,N){ue[ge]=!0}),ue}(U);if(k.showHidden&&(U=Object.getOwnPropertyNames(M)),O(M)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return p(M);if(U.length===0){if(A(M)){var Q=M.name?": "+M.name:"";return k.stylize("[Function"+Q+"]","special")}if(C(M))return k.stylize(RegExp.prototype.toString.call(M),"regexp");if(S(M))return k.stylize(Date.prototype.toString.call(M),"date");if(O(M))return p(M)}var X,oe="",J=!1,he=["{","}"];return b(M)&&(J=!0,he=["[","]"]),A(M)&&(oe=" [Function"+(M.name?": "+M.name:"")+"]"),C(M)&&(oe=" "+RegExp.prototype.toString.call(M)),S(M)&&(oe=" "+Date.prototype.toUTCString.call(M)),O(M)&&(oe=" "+p(M)),U.length!==0||J&&M.length!=0?R<0?C(M)?k.stylize(RegExp.prototype.toString.call(M),"regexp"):k.stylize("[Object]","special"):(k.seen.push(M),X=J?function(ae,ue,ge,N,F){for(var K=[],H=0,$=ue.length;H<$;++H)j(ue,String(H))?K.push(f(ae,ue,ge,N,String(H),!0)):K.push("");return F.forEach(function(se){se.match(/^\d+$/)||K.push(f(ae,ue,ge,N,se,!0))}),K}(k,M,R,W,U):U.map(function(ae){return f(k,M,R,W,ae,J)}),k.seen.pop(),function(ae,ue,ge){var N=ae.reduce(function(F,K){return K.indexOf(`
`)>=0,F+K.replace(/\u001b\[\d\d?m/g,"").length+1},0);return N>60?ge[0]+(ue===""?"":ue+`
 `)+" "+ae.join(`,
  `)+" "+ge[1]:ge[0]+ue+" "+ae.join(", ")+" "+ge[1]}(X,oe,he)):he[0]+oe+he[1]}function p(k){return"["+Error.prototype.toString.call(k)+"]"}function f(k,M,R,V,T,U){var W,Q,X;if((X=Object.getOwnPropertyDescriptor(M,T)||{value:M[T]}).get?Q=X.set?k.stylize("[Getter/Setter]","special"):k.stylize("[Getter]","special"):X.set&&(Q=k.stylize("[Setter]","special")),j(V,T)||(W="["+T+"]"),Q||(k.seen.indexOf(X.value)<0?(Q=y(R)?a(k,X.value,null):a(k,X.value,R-1)).indexOf(`
`)>-1&&(Q=U?Q.split(`
`).map(function(oe){return"  "+oe}).join(`
`).substr(2):`
`+Q.split(`
`).map(function(oe){return"   "+oe}).join(`
`)):Q=k.stylize("[Circular]","special")),w(W)){if(U&&T.match(/^\d+$/))return Q;(W=JSON.stringify(""+T)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(W=W.substr(1,W.length-2),W=k.stylize(W,"name")):(W=W.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),W=k.stylize(W,"string"))}return W+": "+Q}function b(k){return Array.isArray(k)}function _(k){return typeof k=="boolean"}function y(k){return k===null}function g(k){return typeof k=="number"}function m(k){return typeof k=="string"}function w(k){return k===void 0}function C(k){return I(k)&&E(k)==="[object RegExp]"}function I(k){return typeof k=="object"&&k!==null}function S(k){return I(k)&&E(k)==="[object Date]"}function O(k){return I(k)&&(E(k)==="[object Error]"||k instanceof Error)}function A(k){return typeof k=="function"}function E(k){return Object.prototype.toString.call(k)}function D(k){return k<10?"0"+k.toString(10):k.toString(10)}i.debuglog=function(k){if(w(r)&&(r=t.env.NODE_DEBUG||""),k=k.toUpperCase(),!c[k])if(new RegExp("\\b"+k+"\\b","i").test(r)){var M=t.pid;c[k]=function(){var R=i.format.apply(i,arguments)}}else c[k]=function(){};return c[k]},i.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=b,i.isBoolean=_,i.isNull=y,i.isNullOrUndefined=function(k){return k==null},i.isNumber=g,i.isString=m,i.isSymbol=function(k){return typeof k=="symbol"},i.isUndefined=w,i.isRegExp=C,i.isObject=I,i.isDate=S,i.isError=O,i.isFunction=A,i.isPrimitive=function(k){return k===null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||typeof k=="symbol"||k===void 0},i.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(k,M){return Object.prototype.hasOwnProperty.call(k,M)}i.log=function(){var k,M},i.inherits=e("inherits"),i._extend=function(k,M){if(!M||!I(M))return k;for(var R=Object.keys(M),V=R.length;V--;)k[R[V]]=M[R[V]];return k}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":458,_process:399,inherits:457}],460:[function(e,v,i){(function(t){(function(){"use strict";var n=e("foreach"),u=e("available-typed-arrays"),r=e("call-bind/callBound"),c=r("Object.prototype.toString"),s=e("has-symbols")()&&typeof Symbol.toStringTag=="symbol",o=u(),d=r("String.prototype.slice"),a={},p=e("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;s&&p&&f&&n(o,function(_){if(typeof t[_]=="function"){var y=new t[_];if(!(Symbol.toStringTag in y))throw new EvalError("this engine has support for Symbol.toStringTag, but "+_+" does not have the property! Please report this.");var g=f(y),m=p(g,Symbol.toStringTag);if(!m){var w=f(g);m=p(w,Symbol.toStringTag)}a[_]=m.get}});var b=e("is-typed-array");v.exports=function(_){return!!b(_)&&(s?function(y){var g=!1;return n(a,function(m,w){if(!g)try{var C=m.call(y);C===w&&(g=C)}catch{}}),g}(_):d(c(_),8,-1))}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":461,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":462,foreach:142,"has-symbols":145,"is-typed-array":464}],461:[function(e,v,i){(function(t){(function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];v.exports=function(){for(var u=[],r=0;r<n.length;r++)typeof t[n[r]]=="function"&&(u[u.length]=n[r]);return u}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],462:[function(e,v,i){arguments[4][47][0].apply(i,arguments)},{dup:47,"get-intrinsic":463}],463:[function(e,v,i){arguments[4][48][0].apply(i,arguments)},{dup:48,"function-bind":144,has:147,"has-symbols":145}],464:[function(e,v,i){(function(t){(function(){"use strict";var n=e("foreach"),u=e("available-typed-arrays"),r=e("call-bind/callBound"),c=r("Object.prototype.toString"),s=e("has-symbols")()&&typeof Symbol.toStringTag=="symbol",o=u(),d=r("Array.prototype.indexOf",!0)||function(_,y){for(var g=0;g<_.length;g+=1)if(_[g]===y)return g;return-1},a=r("String.prototype.slice"),p={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),b=Object.getPrototypeOf;s&&f&&b&&n(o,function(_){var y=new t[_];if(!(Symbol.toStringTag in y))throw new EvalError("this engine has support for Symbol.toStringTag, but "+_+" does not have the property! Please report this.");var g=b(y),m=f(g,Symbol.toStringTag);if(!m){var w=b(g);m=f(w,Symbol.toStringTag)}p[_]=m.get}),v.exports=function(_){if(!_||typeof _!="object")return!1;if(!s){var y=a(c(_),8,-1);return d(o,y)>-1}return!!f&&function(g){var m=!1;return n(p,function(w,C){if(!m)try{m=w.call(g)===C}catch{}}),m}(_)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":461,"call-bind/callBound":53,"es-abstract/helpers/getOwnPropertyDescriptor":462,foreach:142,"has-symbols":145}],465:[function(e,v,i){v.exports=e("./lib/Observable.js").Observable},{"./lib/Observable.js":466}],466:[function(e,v,i){"use strict";function t(A,E){if(!(A instanceof E))throw new TypeError("Cannot call a class as a function")}function n(A,E){for(var D=0;D<E.length;D++){var P=E[D];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}function u(A,E,D){return E&&n(A.prototype,E),D&&n(A,D),A}Object.defineProperty(i,"__esModule",{value:!0}),i.Observable=void 0;var r=function(){return typeof Symbol=="function"},c=function(A){return r()&&Boolean(Symbol[A])},s=function(A){return c(A)?Symbol[A]:"@@"+A};r()&&!c("observable")&&(Symbol.observable=Symbol("observable"));var o=s("iterator"),d=s("observable"),a=s("species");function p(A,E){var D=A[E];if(D!=null){if(typeof D!="function")throw new TypeError(D+" is not a function");return D}}function f(A){var E=A.constructor;return E!==void 0&&(E=E[a])===null&&(E=void 0),E!==void 0?E:O}function b(A){return A instanceof O}function _(A){_.log?_.log(A):setTimeout(function(){throw A})}function y(A){Promise.resolve().then(function(){try{A()}catch(E){_(E)}})}function g(A){var E=A._cleanup;if(E!==void 0&&(A._cleanup=void 0,E))try{if(typeof E=="function")E();else{var D=p(E,"unsubscribe");D&&D.call(E)}}catch(P){_(P)}}function m(A){A._observer=void 0,A._queue=void 0,A._state="closed"}function w(A,E,D){A._state="running";var P=A._observer;try{var j=p(P,E);switch(E){case"next":j&&j.call(P,D);break;case"error":if(m(A),!j)throw D;j.call(P,D);break;case"complete":m(A),j&&j.call(P)}}catch(k){_(k)}A._state==="closed"?g(A):A._state==="running"&&(A._state="ready")}function C(A,E,D){if(A._state!=="closed"){if(A._state!=="buffering")return A._state!=="ready"?(A._state="buffering",A._queue=[{type:E,value:D}],void y(function(){return function(P){var j=P._queue;if(j){P._queue=void 0,P._state="ready";for(var k=0;k<j.length&&(w(P,j[k].type,j[k].value),P._state!=="closed");++k);}}(A)})):void w(A,E,D);A._queue.push({type:E,value:D})}}var I=function(){function A(E,D){t(this,A),this._cleanup=void 0,this._observer=E,this._queue=void 0,this._state="initializing";var P=new S(this);try{this._cleanup=D.call(void 0,P)}catch(j){P.error(j)}this._state==="initializing"&&(this._state="ready")}return u(A,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(m(this),g(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),A}(),S=function(){function A(E){t(this,A),this._subscription=E}return u(A,[{key:"next",value:function(E){C(this._subscription,"next",E)}},{key:"error",value:function(E){C(this._subscription,"error",E)}},{key:"complete",value:function(){C(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),A}(),O=function(){function A(E){if(t(this,A),!(this instanceof A))throw new TypeError("Observable cannot be called as a function");if(typeof E!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=E}return u(A,[{key:"subscribe",value:function(E){return typeof E=="object"&&E!==null||(E={next:E,error:arguments[1],complete:arguments[2]}),new I(E,this._subscriber)}},{key:"forEach",value:function(E){var D=this;return new Promise(function(P,j){if(typeof E=="function")var k=D.subscribe({next:function(R){try{E(R,M)}catch(V){j(V),k.unsubscribe()}},error:j,complete:P});else j(new TypeError(E+" is not a function"));function M(){k.unsubscribe(),P()}})}},{key:"map",value:function(E){var D=this;if(typeof E!="function")throw new TypeError(E+" is not a function");return new(f(this))(function(P){return D.subscribe({next:function(j){try{j=E(j)}catch(k){return P.error(k)}P.next(j)},error:function(j){P.error(j)},complete:function(){P.complete()}})})}},{key:"filter",value:function(E){var D=this;if(typeof E!="function")throw new TypeError(E+" is not a function");return new(f(this))(function(P){return D.subscribe({next:function(j){try{if(!E(j))return}catch(k){return P.error(k)}P.next(j)},error:function(j){P.error(j)},complete:function(){P.complete()}})})}},{key:"reduce",value:function(E){var D=this;if(typeof E!="function")throw new TypeError(E+" is not a function");var P=f(this),j=arguments.length>1,k=!1,M=arguments[1];return new P(function(R){return D.subscribe({next:function(V){var T=!k;if(k=!0,!T||j)try{M=E(M,V)}catch(U){return R.error(U)}else M=V},error:function(V){R.error(V)},complete:function(){if(!k&&!j)return R.error(new TypeError("Cannot reduce an empty sequence"));R.next(M),R.complete()}})})}},{key:"concat",value:function(){for(var E=this,D=arguments.length,P=new Array(D),j=0;j<D;j++)P[j]=arguments[j];var k=f(this);return new k(function(M){var R,V=0;return function T(U){R=U.subscribe({next:function(W){M.next(W)},error:function(W){M.error(W)},complete:function(){V===P.length?(R=void 0,M.complete()):T(k.from(P[V++]))}})}(E),function(){R&&(R.unsubscribe(),R=void 0)}})}},{key:"flatMap",value:function(E){var D=this;if(typeof E!="function")throw new TypeError(E+" is not a function");var P=f(this);return new P(function(j){var k=[],M=D.subscribe({next:function(V){if(E)try{V=E(V)}catch(U){return j.error(U)}var T=P.from(V).subscribe({next:function(U){j.next(U)},error:function(U){j.error(U)},complete:function(){var U=k.indexOf(T);U>=0&&k.splice(U,1),R()}});k.push(T)},error:function(V){j.error(V)},complete:function(){R()}});function R(){M.closed&&k.length===0&&j.complete()}return function(){k.forEach(function(V){return V.unsubscribe()}),M.unsubscribe()}})}},{key:d,value:function(){return this}}],[{key:"from",value:function(E){var D=typeof this=="function"?this:A;if(E==null)throw new TypeError(E+" is not an object");var P=p(E,d);if(P){var j=P.call(E);if(Object(j)!==j)throw new TypeError(j+" is not an object");return b(j)&&j.constructor===D?j:new D(function(k){return j.subscribe(k)})}if(c("iterator")&&(P=p(E,o)))return new D(function(k){y(function(){if(!k.closed){var M=!0,R=!1,V=void 0;try{for(var T,U=P.call(E)[Symbol.iterator]();!(M=(T=U.next()).done);M=!0){var W=T.value;if(k.next(W),k.closed)return}}catch(Q){R=!0,V=Q}finally{try{M||U.return==null||U.return()}finally{if(R)throw V}}k.complete()}})});if(Array.isArray(E))return new D(function(k){y(function(){if(!k.closed){for(var M=0;M<E.length;++M)if(k.next(E[M]),k.closed)return;k.complete()}})});throw new TypeError(E+" is not observable")}},{key:"of",value:function(){for(var E=arguments.length,D=new Array(E),P=0;P<E;P++)D[P]=arguments[P];return new(typeof this=="function"?this:A)(function(j){y(function(){if(!j.closed){for(var k=0;k<D.length;++k)if(j.next(D[k]),j.closed)return;j.complete()}})})}},{key:a,get:function(){return this}}]),A}();i.Observable=O,r()&&Object.defineProperty(O,Symbol("extensions"),{value:{symbol:d,hostReportError:_},configurable:!0})},{}],467:[function(e,v,i){v.exports=function(t,n){arguments.length==1&&(n=t[1],t=t[0]);for(var u={},r=0;r<t.length;r+=1)u[t[r]]=n[r];return u}},{}],468:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=d;var n=t(e("querystring")),u=t(e("pdelay")),r=t(e("./cachebust-url"));let c=64e3,s=5,o={};function d(a){if(!a||typeof a.url!="string")throw new Error("URL must be given");return new Promise(function(p,f){let b=a.method?a.method:"GET",_=a.url,y=null;a.data&&(y=typeof a.data=="string"?a.data:n.default.stringify(a.data),b!=="GET"&&b!=="HEAD"||(_+=(/\?/.test(_)?"&":"?")+y,y=null));let g=a.canRetry!=null?a.canRetry:b==="GET"||b==="HEAD",m=_.match(/(?:(?:[a-z]+:)?\/\/)?([^/]*)\//);if(!m)throw new Error("Failed to match url");let w=m[1];if(Object.prototype.hasOwnProperty.call(o,w))return void f(new Error(`Server at ${_} has told us to stop connecting`));a.cachebust&&(_=(0,r.default)(_));let C=new(a.XMLHttpRequest||window.XMLHttpRequest);if(Object.assign(C,a.xhrFields),C.onerror=function(I){if((a.retryNum||0)<s&&(C.status===502||(C.status===0||C.status>=500)&&g))return void p(function(O){let A=(O.retryNum||0)+1,E=Math.min(1e3*Math.pow(2,A),c);return(0,u.default)(E).then(()=>d(Object.assign({},O,{retryNum:A})))}(a));let S=Object.assign(new Error(`Failed to load ${_}`),{event:I,xhr:C,status:C.status});C.status==490&&(o[w]=!0),f(S)},C.onload=function(I){C.status===200?p({xhr:C,text:C.responseText}):C.onerror(I)},C.open(b,_,!0),a.headers){let{headers:I}=a;Object.keys(I).forEach(S=>{let O=I[S];C.setRequestHeader(S,O)})}C.send(y)})}},{"./cachebust-url":469,"@babel/runtime/helpers/interopRequireDefault":15,pdelay:376,querystring:410}],469:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return t.test(u)?u.replace(t,"$1_="+n++):u+(/\?/.test(u)?"&":"?")+"_="+n++};let t=/([?&])_=[^&]*/,n=Date.now()+Math.floor(Math.random()*Math.pow(2,32))},{}],470:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ATTRIBUTE_WHITELIST=void 0,i.default=function(n){return n.replace(/(^|>)([^<]+)/g,(u,r,c)=>r+(c.trim().length?"...":"")).replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g,(u,r)=>t.has(r)?u:` ${r}="..."`)};let t=new Set(["class","rel","target","type","tabindex","id","style","role","contenteditable","aria-expanded","aria-hidden","aria-disabled","aria-haspopup","aria-labelledby","aria-busy","aria-multiselectable","name","data-action-data","data-item-id","data-msg-id","data-map-id","g_editable","jsnamespace","jsaction"]);i.ATTRIBUTE_WHITELIST=t},{}],471:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){let s=[],o=[],d=c,a=0;for(;d;){let p=Array.from(d.attributes).map(g=>{let{name:m,value:w}=g;return n.default` ${m}="${u.ATTRIBUTE_WHITELIST.has(m)?w:"..."}"`}).join(""),f=a,b=d.children.length-1-a,_=c!==d&&f?`[${f}]`:"",y=c!==d&&b?`[${b}]`:"";s.push(n.default`<${d.nodeName.toLowerCase()}${{__html:p}}>${_}`),o.push(n.default`${y}</${d.nodeName.toLowerCase()}>`),d.parentElement&&(a=Array.from(d.parentElement.children).indexOf(d)),d=d.parentElement}return s.reverse().join("")+(0,u.default)(c.innerHTML)+o.join("")};var n=t(e("auto-html")),u=function(c,s){if(!s&&c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var o=r(s);if(o&&o.has(c))return o.get(c);var d={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(p!=="default"&&Object.prototype.hasOwnProperty.call(c,p)){var f=a?Object.getOwnPropertyDescriptor(c,p):null;f&&(f.get||f.set)?Object.defineProperty(d,p,f):d[p]=c[p]}return d.default=c,o&&o.set(c,d),d}(e("./censorHTMLstring"));function r(c){if(typeof WeakMap!="function")return null;var s=new WeakMap,o=new WeakMap;return(r=function(d){return d?o:s})(c)}},{"./censorHTMLstring":470,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34}],472:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){return Promise.all(r.map(c=>function(s){return new Promise(o=>{let d=document.createElement("img");d.onload=function(){o(!0)},d.addEventListener("loadend",function(){o(!1)}),d.onerror=function(){o(!1)},d.src=(0,n.default)(s)})}(c).then(s=>[c,s]))).then(c=>(0,u.default)(c))};var n=t(e("./cachebust-url")),u=t(e("lodash/fromPairs"));let r=["https://www.inboxsdk.com/images/logo-red.png"]},{"./cachebust-url":469,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/fromPairs":320}],473:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let t,n,u=new Promise((r,c)=>{t=r,n=c});return{resolve:t,reject:n,promise:u}}},{}],474:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){let u=t.parentElement;for(;u;){if(n(u))return u;u=u.parentElement}return null}},{}],475:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let n=t.chrome;return n&&n.extension&&n.extension.getURL?n.extension.getURL(""):null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],476:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t=function(n,u){let r=n.get(u);if(r===void 0)throw new Error("Key not found in map");return r};i.default=t},{}],477:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let t=typeof document<"u"&&document.documentElement.getAttribute("data-inboxsdk-session-id");if(typeof t=="string")return t;{let n=Date.now()+"-"+Math.random();return typeof document<"u"&&document.documentElement.setAttribute("data-inboxsdk-session-id",n),n}}},{}],478:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){return(""+new Error("Stack saver").stack).replace(/^([^\n]*\n){2}/,"")}},{}],479:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=document.createElement("div");return n.innerHTML=t.replace(/<[^>]*>?/g,""),n.textContent}},{}],480:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return t.offsetWidth>0||t.offsetHeight>0}},{}],481:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(p,f){let b;if(d()){let _=function(y,g){if(y>3)throw g||new Error("Ran out of loadScript attempts for unknown reason");return(0,s.default)({url:p,cachebust:y>0,XMLHttpRequest:f?f.XMLHttpRequest:void 0}).then(m=>{let w=m.text,C=eval,I=[];f&&f.disableSourceMappingURL?I.push(w.replace(/\/\/# sourceMappingURL=(?!data:)[^\n]*\n?$/,"")):I.push(w),f&&f.nowrap||(I.unshift("(function(){"),I.push(`
});`)),I.push(`
//# sourceURL=`+p+`
`);let S=I.join(""),O;try{O=C(S)}catch(A){if(A&&A.name==="SyntaxError")return(0,c.default)(A,{retryNum:y,caughtSyntaxError:!0,url:p,message:`SyntaxError in loading ${p}. Did we not load it fully? Trying again...`},{}),(0,o.default)(5e3).then(()=>_(y+1,A));throw A}f&&f.nowrap||O.call(t)})};b=_(0,null)}else b=a(p,!0).catch(()=>a(p,!1).then(()=>{}));return b.catch(_=>(0,r.default)().then(y=>{(0,c.default)(_,{url:p,connectivityTestResults:y,status:_&&_.status,response:_&&_.xhr?_.xhr.responseText:null,message:"Failed to load script"},{})})),b};var u=n(e("lodash/once")),r=n(e("./connectivity-test")),c=n(e("./log-error")),s=n(e("./ajax")),o=n(e("pdelay"));let d=(0,u.default)(function(){return!(!t.chrome||!t.chrome.extension)||!(!t.safari||!t.safari.extension)});function a(p,f){let b=document.createElement("script");b.type="text/javascript",f&&(b.crossOrigin="anonymous");let _=new Promise((y,g)=>{b.addEventListener("error",function(m){g(m.error||new Error(m.message||"Load failure: "+p,m.filename,m.lineno,m.column))},!1),b.addEventListener("load",function(){setTimeout(y,1)},!1)});if(b.src=p,!document.head)throw new Error("missing head");return document.head.appendChild(b),_}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./ajax":468,"./connectivity-test":472,"./log-error":482,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347,pdelay:376}],482:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(g,m,w){if(typeof document>"u")throw g;try{if(function(M){return(0,a.default)(M)?f.has(M):!1}(g))return;b(g),g instanceof Error||b(g=new Error("Logger.error called with non-error: "+g));let{appIds:C,implVersion:I,isUsingSyncAPI:S,userEmailHash:O}=w,A=w.loaderVersion||d.BUILD_VERSION,E=!!w.sentByApp,D={};for(let M in g)if(Object.prototype.hasOwnProperty.call(g,M))try{let R=g[M];JSON.stringify(R),D[M]=R}catch{}Object.keys(D).length>0&&(m={errorProperties:D,details:m});let P=(0,c.default)(),j=["Error logged:",g];g&&g.stack&&j.push(`

Original error stack:
`+g.stack),j.push(`

Error logged from:
`+P),m&&j.push(`

Error details:`,m),j.push(`

Extension App Ids:`,JSON.stringify(C,null,2)),j.push(`
Sent by App:`,E),j.push(`
Session Id:`,p),j.push(`
Extension Id:`,(0,s.default)()),j.push(`
InboxSDK Loader Version:`,A),j.push(`
InboxSDK Implementation Version:`,I),j.push(`
Is Using Sync API:`,S);let k={message:g&&g.message||g,stack:g&&g.stack,loggedFrom:P,details:m,appIds:C,sentByApp:E,sessionId:p,emailHash:O,extensionId:(0,s.default)(),loaderVersion:A,implementationVersion:I,isUsingSyncAPI:S,origin:document.location.origin,timestamp:1e3*Date.now()};_(k),document.documentElement.getAttribute("inboxsdk-emit-error-event")==="true"&&document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror",{bubbles:!1,cancelable:!1,detail:{message:g&&g.message||g,stack:g&&g.stack,loggedFrom:P,details:m,sentByApp:E}}))}catch(C){}};var u=n(e("./ajax")),r=n(e("./rate-limit")),c=n(e("./get-stack-trace")),s=n(e("./get-extension-id")),o=n(e("./get-session-id")),d=e("./version"),a=n(e("lodash/isObject"));let p=(0,o.default)(),f=(!t.__inboxsdk_extensionSeenErrors&&t.WeakMap&&Object.defineProperty(t,"__inboxsdk_extensionSeenErrors",{value:new t.WeakMap}),{has(g){if(t.__inboxsdk_extensionSeenErrors)return t.__inboxsdk_extensionSeenErrors.has(g);try{return!!g.__inboxsdk_extensionHasSeenError}catch{return!1}},add(g){if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.set)t.__inboxsdk_extensionSeenErrors.set(g,!0);else if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.add)t.__inboxsdk_extensionSeenErrors.add(g);else try{Object.defineProperty(g,"__inboxsdk_extensionHasSeenError",{value:!0})}catch{}}});function b(g){(0,a.default)(g)&&f.add(g)}let _=(0,r.default)(function(g){try{(0,u.default)({url:"https://api.inboxsdk.com/api/v2/errors",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(g)}).catch(m=>{})}catch(m){}},6e4,10);function y(g,m){}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./ajax":468,"./get-extension-id":475,"./get-session-id":477,"./get-stack-trace":478,"./rate-limit":484,"./version":485,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isObject":335}],483:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n,u){let r=[],c=[],s=!1;function o(){c.shift()(),c.length?d():s=!1}function d(){s=!0;let a=function(){let p=Date.now()-n;return r=r.filter(f=>f>p),r.length>=u?r[0]-p:-1}();a>0?setTimeout(o,a):o()}return function(){for(var a=arguments.length,p=new Array(a),f=0;f<a;f++)p[f]=arguments[f];let b,_=new Promise((y,g)=>{b=()=>{r.push(Date.now());try{y(t.apply(this,p))}catch(m){g(m)}}});if(!b)throw new Error("Should not happen");return c.push(b),s||d(),_}}},{}],484:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n,u){let r=[];return function(){let c=Date.now();if(r=r.filter(a=>a>c-n),r.length>=u)throw new Error("Function rate limit exceeded");r.push(c);for(var s=arguments.length,o=new Array(s),d=0;d<s;d++)o[d]=arguments[d];return t.apply(this,o)}}},{}],485:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.BUILD_VERSION=void 0,i.BUILD_VERSION="0.7.25-1676405409634-3b768d9b0290a140-MODIFIED",v.hot&&v.hot.accept()},{}],486:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){if(!n.TEMPORARY_INTERNAL_skipWeakMapRequirement&&!t.WeakMap)throw new Error("Browser does not support WeakMap")}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],487:[function(e,v,i){"use strict";e("./loading/platform-implementation-loader").default._loadScript=e("./loading/load-platform-implementation-DEV")(500),v.exports=e("./inboxsdk")},{"./inboxsdk":488,"./loading/load-platform-implementation-DEV":489,"./loading/platform-implementation-loader":490}],488:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.LOADER_VERSION=void 0,i.load=function(p,f,b){return b=Object.assign({globalErrorLogging:!0},b,{VERSION:o,REQUESTED_API_VERSION:p}),(0,r.default)(b),u.default.load(f,b)},i.loadScript=void 0,n(e("../common/log-error"));var u=n(e("./loading/platform-implementation-loader")),r=n(e("./check-requirements")),c=e("../common/version"),s=n(e("../common/load-script"));let o=c.BUILD_VERSION;i.LOADER_VERSION=o;let d=s.default;i.loadScript=d;let a=document.location.origin;["https://mail.google.com","https://inbox.google.com"].indexOf(a)!=-1&&u.default.preload()}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../common/load-script":481,"../common/log-error":482,"../common/version":485,"./check-requirements":486,"./loading/platform-implementation-loader":490,"@babel/runtime/helpers/interopRequireDefault":15}],489:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault")(e("lodash/once"));v.exports=function(n){return(0,t.default)(()=>new Promise((u,r)=>{setTimeout(()=>{try{e("../../platform-implementation-js/main"),u()}catch(c){r(c)}},n)}))}},{"../../platform-implementation-js/main":743,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],490:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("lodash/once")),r=n(e("../../common/load-script"));let c={load:(o,d)=>Promise.resolve().then(()=>{if(!t.__InboxSDKImpLoader)return c._loadScript().then(()=>{if(!t.__InboxSDKImpLoader)throw new Error("Implementation file did not load correctly")})}).then(()=>t.__InboxSDKImpLoader.load("0.1",o,d)),_loadScript:(0,u.default)(function(){return(0,r.default)("https://www.inboxsdk.com/build/platform-implementation.js",{nowrap:!0})}),preload(){c._loadScript()}};var s=c;i.default=s}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../common/load-script":481,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],491:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t=Object.freeze({NAVIGATION:"NAVIGATION",LINK:"LINK",GROUPER:"GROUPER",MANAGE:"MANAGE"});i.default=t},{}],492:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ROUTE_TYPES=i.NATIVE_ROUTE_IDS=i.NATIVE_LIST_ROUTE_IDS=void 0;let t=Object.freeze({INBOX:"inbox/:page",ALL_MAIL:"all/:page",SENT:"sent/:page",STARRED:"starred/:page",DRAFTS:"drafts/:page",SNOOZED:"snoozed/:page",DONE:"done",REMINDERS:"reminders",LABEL:"label/:labelName/:page",TRASH:"trash/:page",SPAM:"spam/:page",IMPORTANT:"imp/:page",SEARCH:"search/:query/:page",THREAD:"inbox/:threadID",CHATS:"chats/:page",CHAT:"chats/:chatID",CONTACTS:"contacts/:page",CONTACT:"contacts/:contactID",SETTINGS:"settings/:section",CHAT_WELCOME:"chat/welcome",SPACES:"rooms/welcome",MEET:"calls",ANY_LIST:"*"});i.NATIVE_ROUTE_IDS=t;let n=Object.freeze({INBOX:t.INBOX,ALL_MAIL:t.ALL_MAIL,SENT:t.SENT,STARRED:t.STARRED,DRAFTS:t.DRAFTS,SNOOZED:t.SNOOZED,DONE:t.DONE,REMINDERS:t.REMINDERS,LABEL:t.LABEL,TRASH:t.TRASH,SPAM:t.SPAM,IMPORTANT:t.IMPORTANT,SEARCH:t.SEARCH,ANY_LIST:t.ANY_LIST});i.NATIVE_LIST_ROUTE_IDS=n;let u=Object.freeze({LIST:"LIST",THREAD:"THREAD",SETTINGS:"SETTINGS",CHAT:"CHAT",CUSTOM:"CUSTOM",UNKNOWN:"UNKNOWN"});i.ROUTE_TYPES=u},{}],493:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SECTION_NAMES=void 0;let t=Object.freeze({INBOX_STATE:"INBOX_STATE",METADATA_STATE:"METADATA_STATE",OTHER:"OTHER"});i.SECTION_NAMES=t},{}],494:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(!document.getElementById("inboxsdk__style")){var c=document.createElement("style");if(c.id="inboxsdk__style",r.onValue(s=>{c.textContent=(0,u.default)(s)}),!document.head)throw new Error("missing head");document.head.appendChild(c)}};var n=t(e("ud-kefir")),u=t(e("../../lib/rewriteCssWithIdMap")),r=(0,n.default)(v,`/* suggestions */

.inboxsdk__suggestions_separator_before {
  padding-bottom: 2px !important;
}

.inboxsdk__suggestions_separator_after {
  border-top: 1px solid #e5e5e5;
  padding-top: 2px !important;
}

/* buttons */

div.T-I.inboxsdk__button {
  -webkit-user-select: none;
  min-width: 27px;
}

.inboxsdk__no_bg {
  background: none;
}

.inboxsdk__button.inboxsdk__button_disabled {
  opacity: 0.55;
}

.inboxsdk__button_icon + .inboxsdk__button_text {
  margin-left: 5px;
}

.inboxsdk__button_icon {
  display: inline-block;
}

.inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  vertical-align: middle;
  margin-top: -2px;
  user-drag: none;
  -moz-user-select: none;
  -webkit-user-drag: none;
}

.inboxsdk__button_green_inactive {
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
  background-color: #53a93f;
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  color: #fff;
  text-shadow: none;
}

.inboxsdk__button_green_hover {
  -webkit-box-shadow: inset 0 -1px 0 #4c8534;
  box-shadow: inset 0 -1px 0 #4c8534;
  background-color: #65b045;
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  border-bottom: 1px solid #4c8534;
  text-shadow: none;
}

.inboxsdk__button_green_active {
  -webkit-box-shadow: inset 0 1px 0 #2f6124;
  box-shadow: inset 0 1px 0 #2f6124;
  background: #3e802f;
  border: 1px solid transparent;
  border-top: 1px solid #2f6124;
  color: #fff;
  text-shadow: none;
}

.inboxsdk__menu {
  min-width: 1em;
  min-height: 1em;
  padding: 0px;
  overflow: visible;
  max-height: none;

  /* Copied from Gmail's .J-M class */
  z-index: 7;
  cursor: default;
  font-size: 13px;
  margin: 0;
  outline: none;
}

.inboxsdk__menu > .inboxsdk__menuContent {
  padding: 0;
  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
    0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2);
  transition: opacity 0.218s;
  border: 1px solid rgba(0, 0, 0, 0.2);
  background: #fff;
  outline: none;
}

.f4.J-N-JX.inboxsdk__message_more_icon {
  height: 16px;
  margin-top: 1px;
  width: 16px;
}

/* end */

/* compose buttons */

/* fix compose mole position when sidebar is open */
/*
steps to repro:
1. open compose mole
2. open non-native sidebar
3. mole overlaps sidebar
*/
.dw .nH > .no .nH.nn:last-child[style='width: 320px;'] {
  width: 376px !important;
}

/* fix native button wrapping */
.inboxsdk__compose .a8X {
  overflow: visible;
}

.inboxsdk__compose .a8X > .bAK {
  flex-wrap: nowrap;
}

/* in material Gmail reduce padding between buttons  */
.inboxsdk__compose_narrow_buttons .gU:not(:first-child) {
  padding-left: 5px;
}

.inboxsdk__compose_narrow_buttons .inboxsdk__compose_actionToolbar {
  padding-left: 10px;
}

.inboxsdk__compose_narrow_buttons .wG:not(:first-child) {
  margin-left: 15px;
}

.inboxsdk__compose_narrow_buttons
  .inboxsdk__compose_actionToolbar
  div.inboxsdk__composeButton:last-child {
  margin-right: 0px;
}

.inboxsdk__compose_narrow_buttons
  .inboxsdk__compose_actionToolbar
  div.inboxsdk__composeButton
  + div.inboxsdk__composeButton {
  margin-left: 3px;
}

/* end narrow */

/* mimic button styling */
.inboxsdk__composeButton,
.inboxsdk__compose_sendButton {
  height: 20px;
  width: 20px;
  padding: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  outline: none;
  position: relative;
}

.inboxsdk__composeButton + .inboxsdk__composeButton {
  margin-left: 4px;
}

.inboxsdk__composeButton .inboxsdk__button_icon {
  opacity: 0.55;
}

.inboxsdk__composeButton:hover .inboxsdk__button_icon,
.inboxsdk__composeButton:focus .inboxsdk__button_icon,
.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {
  opacity: 1;
}

.inboxsdk__composeButton::before {
  content: '';
  display: block;
  opacity: 0;
  position: absolute;
  transition-duration: 0.15s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  bottom: 0px;
  left: 0px;
  right: 0px;
  top: 0px;
  background: none;
  box-sizing: border-box;
  transform: scale(0);
  transition-property: transform, opacity;
  border-radius: 4px;
}

.inboxsdk__composeButton:hover::before {
  background-color: rgba(32, 33, 36, 0.059);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__composeButton:focus::before,
.inboxsdk__composeButton.inboxsdk__composeButton_active::before {
  background-color: rgba(32, 33, 36, 0.122);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__compose_actionToolbar
  .inboxsdk__compose_groupedActionToolbar
  div.inboxsdk__composeButton:last-child {
  margin-right: 0px;
}

.inboxsdk__compose_sendButton {
  background-color: #1a73e8;
  color: white;
  height: 24px;
  width: auto;
  padding-left: 3px;
  padding-right: 3px;
  border-radius: 4px;
}

.inboxsdk__compose_sendButton {
  padding: 6px 4px;
  margin-left: 2px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 20px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 24px;
}

.inboxsdk__compose_sendButton:focus,
.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {
  background-color: #5094ed;
  box-shadow: 0 1px 1px 0 rgba(66, 133, 244, 0.3),
    0 1px 3px 1px rgba(66, 133, 244, 0.15);
  border: none;
}

.T-I ~ .inboxsdk__compose_sendButton {
  margin-left: -6px;
}

.inboxsdk__compose_actionToolbar {
  white-space: nowrap;
}

.inboxsdk__compose_actionToolbar {
  padding-left: 6px;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {
  height: 20px;
  width: 20px;
  display: inline-flex;
  user-select: none;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {
  height: 17px;
  width: 17px;
  display: inline-flex;
  margin: auto;
}

.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {
  padding-left: 8px;
}

/* grouped action toolbar */
.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {
  overflow-y: visible;
}

.inboxsdk__compose_groupedActionToolbar {
  position: absolute;
  bottom: 44px;
  margin: 3px;
  z-index: 10;
  left: 0px;
  border-radius: 2px;
  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),
    0 2px 4px -1px rgba(0, 0, 0, 0.2);
  padding: 5px 15px;
}

.inboxsdk__compose_groupedActionToolbar {
  margin-bottom: 7px;
  padding: 4px 5px;
  background: white;
  left: -3px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar {
  left: 14px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child {
  margin-left: 0px;
  margin-right: 0px;
}

.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton {
  padding: 4px;
}

/*
there's an element that gets a height of 40px when the gmail formatting toolbar
is visible. This rule makes that same element get the 40px height when
the actionToolbar is visible
*/
.inboxsdk__compose_groupedActionToolbar_visible .bA3 {
  height: 40px;
}

.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  z-index: 1;
}

.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar_arrow {
  display: none;
}

/* end grouped action toolbar */

.inboxsdk__compose_customSendContainer {
  display: inline-block;
  position: relative;
  outline: 0;
  height: 29px;
  margin: 6px 0;
  padding: 0;
  line-height: 29px;
  vertical-align: middle;
}

.inboxsdk__compose_customSendContainer {
  height: 36px;
  line-height: 36px;
}

.inboxsdk__compose_customTitleBarColor > img.Hl,
.inboxsdk__compose_customTitleBarColor > img.Hq,
.inboxsdk__compose_customTitleBarColor > img.Ha {
  background-color: transparent !important;
}

.inboxsdk__compose_hasCustomTitleBarText,
.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  display: -webkit-flex;
  display: flex;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  align-items: center;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody {
  width: 100%;
}

.inboxsdk__compose_nativeTitleBarText {
  display: none !important;
}

.inboxsdk__compose_customTitleBarText {
  width: calc(100% - 80px);
}

.inboxsdk__compose_hasCustomTitleBarText td.Hm {
  margin-right: 10px;
  margin-left: auto;
}

.inboxsdk__compose_statusBarPrependContainer {
  border-top: 1px solid #cfcfcf;
}

.inboxsdk__compose_statusBarPrependContainer + table td.gU {
  border-top: none;
}

/* end */

/* appid warning gmail specific parts */

input.inboxsdk__x_close_button {
  background-color: transparent;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=);
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
  height: 20px;
  width: 20px;
  border: none;
  vertical-align: middle;
  cursor: pointer;

  float: right;
  margin: 5px;
}

/* thread rows */

.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {
  display: inline-block;
  margin-left: 14px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon,
.inboxsdk__thread_row_label .inboxsdk__button_iconImg {
  height: 11px;
  width: 11px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon {
  display: inline-block;
  margin-top: 3px;
  margin-left: 4px;
  position: absolute;
}

.inboxsdk__thread_row_button {
  outline: 0;
  height: 20px;
  width: 20px;
  padding: 0px;
}

.inboxsdk__thread_row_button .inboxsdk__button_icon {
  max-height: 100%;
}

.inboxsdk__thread_row_custom_date_container {
  max-width: inherit;
}

.inboxsdk__thread_row_button .inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  margin-top: 0px;
}

.inboxsdk__gmail_action {
  float: right;
  position: relative;
  background-color: grey;
  border: 1px solid black;
  margin-left: 1em;
  cursor: default;
  padding: 0 6px;
  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);
  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-color: #ccc;
  color: #444;
  height: 17px;
  line-height: 17px;
  min-width: 56px;
  border-radius: 2px;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  white-space: nowrap;
  padding-right: 18px;
}

.inboxsdk__gmail_action:focus {
  border: 1px solid #4d90fe;
  outline: none;
}

.inboxsdk__gmail_action:active {
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.inboxsdk__gmail_action:hover {
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  background-color: #ededed;
  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);
  background-image: linear-gradient(top, #ededed, #eaeaea);
  border-color: #b8b8b8;
}

.inboxsdk__gmail_action::after {
  content: '';
  position: absolute;
  right: 5px;
  top: 5px;
  margin-left: 5px;
  background: no-repeat
    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;
  width: 7px;
  height: 7px;
  opacity: 0.55;
}

.inboxsdk__thread_row_custom_date {
  margin-left: 2px;
}

span.inboxsdk__thread_row_custom_date
  + span:not(.inboxsdk__thread_row_custom_date) {
  display: none;
}

span.inboxsdk__thread_row_custom_draft_label + div.yW {
  display: none;
}

.inboxsdk__thread_row_attachment_iconWrapper,
.inboxsdk__thread_row_attachment_icon {
  margin-left: 3px;
  width: 16px;
  height: 16px;
}

.inboxsdk__thread_row_attachment_iconWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  width: max-content;
}

/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.
 The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.
 The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.
 */
.zA td.apU.xY {
  width: initial;
}

.zA td.apU.xY span.inboxsdk__thread_row_button {
  margin: 0 10px;
  opacity: 0.16;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button {
  opacity: 0.54;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover {
  opacity: 1;
}

.zA td.apU.xY span.inboxsdk__thread_row_button::before {
  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.
  Explicity setting this width and height to zero as remove weird positioning that results */
  width: 0px;
  height: 0px;
}

.inboxsdk__thread_row_attachment_icon {
  vertical-align: middle;
}

.zA > .xY.inboxsdk__thread_row_attachment_icons_present {
  max-width: inherit;
}

/* narrow vertical preview pane */
.Zs .xY.inboxsdk__thread_row_attachment_icons_present {
  flex-grow: 0;
}

.Zs .xY.inboxsdk__thread_row_label {
  order: 1;
}

.Zs .xY.inboxsdk__thread_row_icon_wrapper {
  order: 1;
  margin-left: 3px;
  margin-right: 0px;
}
/* end narrow vertical preview pane */

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,
.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

.inboxsdk__thread_row_icon_wrapper {
  width: 20px;
  margin-right: 3px;
  align-self: center;
  height: 20px;
  flex: 0 0 auto;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  vertical-align: top;
}

.inboxsdk__thread_row_image_added
  .y6
  .inboxsdk__thread_row_icon_wrapper
  ~ span[id] {
  margin-left: 3px;
}

.inboxsdk__thread_row_image_added .a4W,
.inboxsdk__thread_row_image_added .apA,
.inboxsdk__thread_row_image_added .apx {
  position: relative;
}

/* end thread rows */
[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > img {
  margin-right: 3px;
  margin-left: 3px;
  margin-top: 0px;
}

[inboxsdk__message_added_attachment_icon]
  td.gH
  > span:first-child
  > *:last-child,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > *:last-child {
  margin-right: 6px;
}

.inboxsdk__message_attachment_iconWrapper,
.inboxsdk__message_attachment_icon {
  width: 21px;
  height: 21px;
  position: relative;
}

.inboxsdk__message_attachment_iconWrapper {
  margin: auto 3px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: top;
}

.inboxsdk__message_attachment_tooltipWrapper {
  position: absolute;
  top: 19px;
  z-index: 10;
}

/* Work around issue where clicking "Remove formatting" in Compose causes this
 * element to become taller and shift the toolbar down. */
.gU .aWQ {
  max-height: 3px;
}

.aQw .inboxsdk__button_icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 28px;
}

.aQw .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

.aQw .inboxsdk__button_iconImg {
  margin-top: 2px;
}

.aZi .asa .inboxsdk__button_iconImg {
  display: inline-block;
  vertical-align: middle;
  margin-top: -3px;
}

/* Message view attachments toolbar */
.aZi .aZj .asa .inboxsdk__button_iconImg {
  margin: 0;
}

body .dw {
  /* Fixes issue where a tall compose window opened over a custom view could be
   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are
   * only visible while a compose window is open.
   */
  z-index: 6 !important;
}

.inboxsdk__compose_outerSidebar_wrapper {
  position: absolute;
  left: -401px;
  top: 0px;
  background: white;
  width: 400px;
  bottom: 0px;
  border-left: 1px solid silver;
  box-shadow: -2px 0px 1px #e6e6e6;
  display: block;
}

.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {
  border-left: 0;
  box-shadow: none;
  left: -400px;
}

.inboxsdk__outerSidebarActive .aSs > div {
  width: 50% !important;
  margin-left: 30%;
}

.inboxsdk__compose_outerSidebar_header {
  background: #404040;
  font-size: 80%;
  padding: 10px 10px 11px 10px;
  color: white;
  border-bottom: 1px solid #c4c4c4;
}

.inboxsdk__compose_outerSidebar_body {
  position: absolute;
  width: 100%;
  bottom: 43px;
  top: 36px;
  left: -1px;
  overflow: auto;
}

.inboxsdk__compose_outerSidebar_footer {
  position: absolute;
  bottom: 0px;
  width: 100%;
  border-top: 1px solid rgb(206, 206, 206);
  display: block;
}

.inboxsdk__compose_innerSidebarActive form,
.inboxsdk__compose_innerSidebarActive .GQ {
  padding-right: 200px;
}

div.inboxsdk__compose_statusbar {
  border: 0;
  height: 40px;
  margin: 0;
}

.inboxsdk__compose_statusbar {
  background: none;
  position: relative;
}

/* only include padding when in thread inline view */
.HM .I5 .inboxsdk__compose_statusbar {
  padding: 0 16px 16px 16px;
}

table + .inboxsdk__compose_statusbar {
  margin-top: -8px;
}

/* Necessary in pre-new-recipients-area Gmail to stop the compose body
from resizing and pushing the statusbars off-screen when the recipients
area is focused. */
body.inboxsdk__classic_gmail_recipients_area
  .inboxsdk__compose_statusbarActive
  .aoI {
  height: auto !important;
}

.inboxsdk__compose_statusbarActive .aDl {
  z-index: unset;
}

/* compose size fixing.
TODO Can we restrict this to only composes we've modified? */
.inboxsdk__compose .qz {
  max-height: inherit !important;
}

/* aDi is initially position: fixed, which messes things up, so we make static */
body:not(.inboxsdk_hack_disableComposeSizeFixer)
  .inboxsdk__size_fixer
  .aDj.aDi {
  position: static !important;
}

.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {
  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);
}
/* Extend the message foreground outline downwards to contain our added status bars */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {
  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));
}
/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),
use a background color on the element containing our added status bars so the message background outline
isn't visible behind it. */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive
  .aDj.aDi
  > .aDh {
  background-color: white;
}

.inboxsdk__recipient_row {
  display: flex;
}

.inboxsdk__compose_notice {
  background-color: #f5f5f5;
  border-radius: 4px;
  margin: 10px;
  padding: 10px 16px;
}

.inboxsdk__recipient_row td.ok {
  height: 20px;
  padding: 0px !important;
}

.inboxsdk__recipient_row td.az3 {
  padding: 0px 3px 0px 3px;
}

.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {
  display: block !important;
}

.inboxsdk__compose_hideRecipientArea .fX.aXjCH,
.inboxsdk__compose_hideRecipientArea .aoD.hl,
.inboxsdk__compose_forceRecipientsOpen .aoD.hl,
.inboxsdk__compose_forceRecipientRowHidden {
  display: none !important;
}

/* toolbar visibility */

[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {
  display: none !important;
}

[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {
  display: none !important;
}

[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {
  display: none !important;
}

[data-toolbar-icononly='true'] .inboxsdk__button_text {
  display: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button_text {
  color: #5f6368;
}

[data-toolbar-icononly='false'] .asa:before {
  border-radius: 4px;
  border: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button {
  align-items: center;
  border: none;
  display: inline-flex;
  justify-content: center;
  outline: none;
  position: relative;
  z-index: 0;
  -webkit-font-smoothing: antialiased;
  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
  font-size: 14px;
  letter-spacing: 0.15px;
  background: none;
  box-sizing: border-box;
  color: #5f6368;
  cursor: pointer;
  font-weight: 500;
  outline: none;
  padding: 0 8px;
}

.inboxsdk__menuItem img,
.inboxsdk__menuItem .inboxsdk__icon {
  height: 16px;
  width: 16px;
  margin-top: -1px;
}

/* end */

/* modal */

.inboxsdk__modal_overlay {
  right: 0px;
  bottom: 0px;
}

.inboxsdk__modal_fullscreen {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px;
  right: 0px;
  z-index: 503;
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  -webkit-justify-content: center;
  align-items: center;
  -webkit-align-items: center;
  padding: 110px 50px 50px 50px;
}

.inboxsdk__modal_content {
  margin-top: 30px;
  margin-bottom: 30px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom)
  .inboxsdk__modal_content {
  margin-bottom: 0px;
  padding-bottom: 24px;
}

.inboxsdk__modal_close {
  outline: none;
  cursor: pointer;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container {
  position: relative;
  margin-top: -60px;
  width: auto;
  overflow: hidden;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {
  margin-right: 16px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {
  padding-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {
  margin-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {
  margin: 0px;
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides
  .inboxsdk__modal_container,
.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {
  padding-left: 0px;
  padding-right: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_container {
  padding-bottom: 0px;
}

.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {
  display: -webkit-flex;
  display: flex;
}

.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {
  -webkit-flex: 1;
  flex: 1;
  width: 0;
  word-wrap: break-word;
}

/* end modal */

/* mole */

/* Fix issue where Compose toolbar can become disconnected when moles or
 * drawers are in use */
.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  left: auto !important;
}

.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  position: static;
}

/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot
 * of fancy logic to hide moles ourselves when things get too crowded. */
.inboxsdk__moles_in_use .nH > .nH > .no {
  white-space: nowrap;
}
.inboxsdk__moles_in_use .nH > .nH > .no > * {
  white-space: initial;
}
.inboxsdk__moles_in_use .nH > .nH > .no > .nn {
  display: inline-block;
  float: none;
}

.inboxsdk__mole_view {
  position: relative;
  max-width: 564px;
  height: 100vh;
  vertical-align: top;
  display: inline-flex;
  display: -webkit-inline-flex;
  align-items: flex-end;
  -webkit-align-items: flex-end;
}

.inboxsdk__mole_view_inner {
  visibility: visible;
  box-sizing: border-box;
  margin-right: 5px;
  box-shadow: rgba(0, 0, 0, 0.2) 0 2px 6px;
  min-width: 260px;
  min-height: 36px;
}

.inboxsdk__mole_view_inner {
  min-height: 40px;
}

.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view),
.inboxsdk__mole_view_inner:not(.inboxsdk__original_view) {
  border-radius: 8px 8px 0 0;
}

.inboxsdk__mole_view_titlebar {
  position: absolute;
  left: 0;
  right: 5px;
  font-size: 14px;
  font-weight: 500;
  box-sizing: border-box;
  height: 40px;
  cursor: pointer;
  padding: 10px 12px 10px 16px;
  color: #041e49;
  background: #f2f6fc;
}

.inboxsdk__mole_view_titlebar.inboxsdk__original_view {
  color: white;
  font-size: 12.8px;
  font-weight: 400;
  background: #404040;
  padding: 9px 0 0 11px;
  border-radius: 4px 4px 0 0;
}

.inboxsdk__mole_view_titlebar h2 {
  font-size: inherit;
  font-weight: inherit;
  margin: 4px 0 0 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__mole_title_buttons {
  white-space: nowrap;
  float: right;
  padding-right: 5px;
  margin-top: 1px;
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view {
  margin-top: -3px;
}

.inboxsdk__mole_title_buttons > img {
  height: 24px;
  width: 24px;
  position: relative;
  top: 2px;
  opacity: 0.6;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img {
  height: 16px;
  width: 16px;
  margin-left: 4px;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img:hover {
  background-color: rgba(68, 71, 70, 0.078);
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view > img:hover {
  background-color: #737373;
}

.inboxsdk__mole_title_buttons > img:hover {
  opacity: 1;
}

.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,
.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title
  h2.inboxsdk__mole_default,
.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)
  h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view.inboxsdk__minimized .Hl,
.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {
  display: none;
}

.inboxsdk__mole_view_content:not(.inboxsdk__original_view) {
  margin-top: 40px;
  border: none;
}

.inboxsdk__mole_view_content {
  margin-top: 36px;
  border: 1px solid #cfcfcf;
  background: white;
  min-width: 260px;
  min-height: 20px;
  max-height: 80vh;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {
  min-width: 0px;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {
  margin-top: 0px;
  min-width: 0px;
}

/* end mole */

/* tabs */

.inboxsdk__tab {
  width: 30px;
}

.inboxsdk__tab.IDMAP_hideTitleBar:first-child:last-child {
  display: none;
}

.inboxsdk__tab.inboxsdk__tab_selected {
  width: auto;
}

table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {
  height: 28px;
}

.inboxsdk__tab_icon {
  width: 30px;
  height: 25px;
  background-position-x: 5px;
  background-position-y: 3px;
  background-size: 16px;
  background-repeat: no-repeat;
}

.inboxsdk__tab_icon img {
  height: 16px;
  width: 16px;
  margin-left: 5px;
  margin-top: 3px;
}

.inboxsdk__tab .aKx {
  top: 4px;
}

.inboxsdk__sidebar div[role='complementary'] {
  position: static !important;
}

/* Fix issue where sidebar causes threadview to be taller than it should */
.inboxsdk__sidebar > div.y4,
.IDMAP_app_sidebar_in_use > div.y4 {
  display: none;
}

table.aKk
  .inboxsdk__contentTabContainer
  .inboxsdk__tab:first-child
  .aAy[role='tab'] {
  border-left-width: 1px;
}

/* end tabs */

/* old sidebar */

.inboxsdk__sidebar .inboxsdk__contentPanelContainer {
  font: 12px Arial, sans-serif;
  max-width: 220px;
}

.inboxsdk__contentPanelContainer_contentContainer {
  overflow: hidden;
  margin-bottom: 10px;
  border-bottom: 1px solid #d8d8d8;
}

/* end old sidebar */

/* sidebar */

body.inboxsdk__hasTopMessageBar .bq9 {
  top: var(--inboxsdk__topMessageBar-height);
}

.IDMAP_app_sidebar_in_use > div[role='complementary'] {
  position: static !important;
  width: 216px !important;
}

.IDMAP_app_sidebar_in_use {
  /* Necessary to prevent z-indexes on sidebar items from causing them to show
  above stuff outside of the sidebar. */
  will-change: position;
}

.IDMAP_app_sidebar_content_panel {
  background: #ffffff;
}

.IDMAP_app_sidebar_content_area {
  padding: 4px 0 12px;
}

.IDMAP_app_sidebar.IDMAP_hideTitleBar .IDMAP_app_sidebar_content_area {
  padding-top: 0;
}

/* gmail addon support */

.container_app_sidebar_in_use.no,
.IDMAP_container_app_sidebar_no_icons.no {
  display: flex;
  display: -webkit-flex;
  flex-direction: row;
  -webkit-flex-direction: row;
  width: 100%;
}

body[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],
body[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {
  flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
}

/* overwrite margin right of the gmail page next/back and settings icon buttons
   to line up properly */

/* when no siebar is visible */
.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -57px !important;
}

/* when addon sidebar visible */
.container_addon_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* when sdk sidebar visible */
.container_app_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* no sdk icons and no native addons */
.IDMAP_container_app_sidebar_no_icons
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: 0px !important;
}

/* quickfix, TODO investigate removing ar7 class from our buttons */
.inboxsdk__button.ar7 {
  pointer-events: all !important;
}

.container_app_sidebar_in_use .bkK.nn,
.IDMAP_container_app_sidebar_no_icons .bkK.nn {
  width: auto !important;
  flex: 1;
  -webkit-flex: 1;
  min-width: 0px;
}

/* when removing addon icons */
.IDMAP_container_app_sidebar_no_icons .bnl.nn {
  z-index: -1;
  position: absolute;
}

.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use {
  min-width: 57px !important;
  flex-shrink: 0;
  -webkit-flex-shrink: 0;
}

.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use.app_sidebar_visible {
  min-width: 321px !important;
}

.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use > .J-KU-Jg {
  display: block !important;
}

.container_app_sidebar_in_use
  .IDMAP_app_sidebar_in_use
  .IDMAP_app_sidebar_container {
  display: none;
}

.container_app_sidebar_in_use
  .IDMAP_app_sidebar_in_use.app_sidebar_visible
  .IDMAP_app_sidebar_container {
  display: block;
  float: left;
  height: 100%;
  border-left: 1px solid #e0e0e0;
  padding-left: 16px;
  width: calc(100% - 74px);
  overflow: auto;
}

.container_app_sidebar_in_use
  .IDMAP_app_sidebar_container
  .IDMAP_app_sidebar_content_area {
  width: calc(100% - 16px);
  padding-right: 16px;
}

.container_app_sidebar_in_use
  .IDMAP_app_sidebar_in_use.app_sidebar_visible
  .J-KU-Jz {
  width: auto;
  padding-right: 50px;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_icon {
  margin: 18px 18px 10px 18px;
  border: none;
  background: transparent;
  height: 20px;
  width: 20px;
  overflow: hidden;
  padding: 0;
  cursor: pointer;
  position: relative;
}

.IDMAP_sidebar_iconArea.sidebar_global_iconArea .inboxsdk__button_icon {
  margin-bottom: 18px;
}

body .IDMAP_sidebar_iconArea .inboxsdk__button_icon {
  overflow: visible;
}

.IDMAP_sidebar_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_icon::before,
.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover:before {
  content: '';
  background: #f1f3f4;
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  border-radius: 50%;
  z-index: 0;
}

.IDMAP_sidebar_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_icon::before {
  background: #e8eaed;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {
  width: 20px;
  height: 20px;
  margin-top: 0px;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_icon .inboxsdk__button_iconImg {
  position: absolute;
  left: 0px;
  top: 0px;
  z-index: 1;
}

.IDMAP_sidebar_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  height: 40px;
  width: 4px;
  position: absolute;
  right: 0px;
  bottom: 0px;
  background-color: rgb(66, 133, 244);
  border-radius: 3px 0 0 3px;
}

.IDMAP_sidebar_iconArea.sidebar_global_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  bottom: 8px;
}

/* end sidebar */

/* material sidebar */
.brC-brG.companion_app_sidebar_visible {
  display: block !important;
}

.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {
  display: block !important;
}

.companion_global_app_sidebar_visible .thread_app_sidebar {
  display: none;
}

.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)
  .global_app_sidebar {
  display: none;
}

.nH.companion_container_app_sidebar_visible {
  width: calc(100% - 300px) !important;
}

.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {
  display: none !important;
}

.IDMAP_app_sidebar_in_use .IDMAP_app_sidebar_container.addon_sidebar {
  height: 100%;
  overflow: auto;
}

.IDMAP_app_sidebar_in_use
  .IDMAP_app_sidebar_container.addon_sidebar
  .IDMAP_app_sidebar_content_area {
  width: 100%;
}

.IDMAP_app_sidebar_in_use:not(.companion_app_sidebar_visible) .addon_sidebar {
  display: none;
}

.IDMAP_app_sidebar_content_panel_title_icon_container {
  margin-left: 0px;
}

.IDMAP_app_sidebar_content_panel .IDMAP_app_sidebar_content_panel_top_line {
  padding: 0px 16px;
}

/* hide thread addon icons when in custom view */
body.inboxsdk__custom_view_active
  .brC-aT5-aOt-ato-Kp-Jw
  [role='tablist']
  > div:not(:last-child) {
  display: none;
}

/* make the native addon icon container for thread add-ons (div.bvq) always visible */
.IDMAP_app_sidebar_in_use .bvq,
.IDMAP_app_sidebar_in_use .bvq > div:last-child {
  display: block !important;
}

/* hide the native addon loading div */
.IDMAP_companion_container_app_sidebar_in_use .bvq > div:first-child {
  display: none !important;
}

/* end material sidebar */

/* custom content */

.inboxsdk__custom_view_element {
  overflow: auto;
}

/* end custom content */

/* nav menu */

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {
  border-left-color: transparent;
}
.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {
  font-weight: normal;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU {
  font-weight: normal;
}
.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO {
  background: none;
}

.inboxsdk__hide_addon_container {
  display: flex !important;
  display: -webkit-flex !important;
  flex-direction: row;
  -webkit-flex-direction: row;
  width: 100% !important;
}

body[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {
  flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
}

.inboxsdk__hide_addon_container > .bkK.nn {
  width: auto !important;
  flex: 1;
  -webkit-flex: 1;
  min-width: 0;
}

.inboxsdk__hide_addon_container > .bnl.nn {
  display: none;
}

.inboxsdk__navItem {
  font-size: 14px;
}

/*
fix issue in pre-Chat Gmail versions where somehow a style="flex-grow: 1" attribute
shows up on our elements preventing them from collapsing.
*/
.inboxsdk__navItem:not(.Xr) > .V3[style] {
  flex-grow: 0 !important;
}

.inboxsdk__navItem > .TO.n4 {
  display: block;
  padding-left: 0;
}

.inboxsdk__navItem > .TO.n4 .qj > .G-asx {
  margin-right: 0;
}

.inboxsdk__navItem > .TO .aio > .bsU:empty {
  display: none;
}

.inboxsdk__navItem > .TO .qj:empty::after {
  background-color: rgb(118, 118, 118);
  border-radius: 50%;
  content: '';
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.inboxsdk__navItem > .TO .qj[style*='border-color']:empty::after {
  border-color: inherit;
}

.inboxsdk__navItem > .TO:hover .pM {
  display: flex;
  display: -webkit-flex;
  visibility: visible;
}

.inboxsdk__navItem > .TO .afM {
  cursor: pointer;
}

.inboxsdk__navItem > .TO:hover .afM {
  display: block;
  visibility: visible;
}

/* This does slightly break from the native Gmail behavior, but we keep the dropdown button
  visible while it has an active dropdown */
.inboxsdk__navItem > .TO img.afM.afO {
  display: block;
  visibility: visible;
}

/* Keep the subtitle hidden while the dropdown is active */
.inboxsdk__navItem > .TO img.afM.afO ~ .aio > .bsU {
  display: none;
}

.inboxsdk__navItem > .TO:hover .bsU {
  display: none;
}

.inboxsdk__navItem.inboxsdk__navItem_nonClickable > .TO:active {
  background-color: initial;
}

.inboxsdk__navItem_hover .aj0,
.inboxsdk__navItem_hover .p8 {
  visibility: visible;
}

.inboxsdk__appMenuItem .CL.V6:before,
.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3:before {
  background-image: var(--background-image);
}

.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3:before {
  background-size: 24px;
}

.inboxsdk__navItem_link {
  cursor: pointer;
  margin-left: auto;
}

.inboxsdk__navItem_link > a {
  margin-left: 16px;
}

.inboxsdk__navItem > .TO .inboxsdk__button {
  margin-right: 0;
}

[dir='rtl'] .inboxsdk__navItem_link {
  left: -4px;
  right: initial;
}

.inboxsdk__navItem_container .aio .inboxsdk__button {
  position: absolute;
  top: 0px;
  right: -30px;
}

.inboxsdk__navItem_marker {
  position: absolute;
  left: 0px;
  padding-bottom: 2px;
}

.inboxsdk__expando {
  z-index: 1;
}

.inboxsdk__navItem_link > a,
.aip .CK {
  color: #15c;
}

.inboxsdk__navItem_link > a:hover,
.aip .CK:hover {
  text-decoration: underline;
}

.inboxsdk__navItem_container .aio.aip {
  white-space: nowrap;
}

/* start nav menu open state */

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty {
  display: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button) {
  background: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: none;
}

/* end nav menu open state */

/* start nav menu close state */

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh {
  opacity: 1;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh.inboxsdk__navItem_parent_accessory_button {
  background-image: none !important;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh:empty {
  background-color: rgba(32, 33, 36, 0.71);
  border-radius: 50%;
  display: inherit;
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.WR[role='navigation'].bhZ:not(.bym)
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: inherit;
}

/* end nav menu close state */

/* end nav menu */

/* search results section */

.inboxsdk__custom_sections {
  margin-bottom: 15px;
}

.inboxsdk__custom_sections.Wc {
  padding: 0px;
  margin-bottom: 0px;
}

.inboxsdk__custom_sections {
  margin-bottom: 8px;
}

.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible
  .inboxsdk__resultsSection_title
  .Wp {
  visibility: hidden;
}

.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {
  padding-top: 0px;
}

.inboxsdk__custom_sections .Wg {
  padding-top: 0px;
}

.inboxsdk__custom_sections.Wc .Wg {
  border-bottom: 0;
  padding: 0px;
}

/* end lone collapsed SectionView in Gmailv1 */

.inboxsdk__results_collapsedContainer.Wg {
  height: auto;
}

.inboxsdk__results_collapsedContainer > div {
  display: flex;
  display: -webkit-flex;
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex: 1 0 100%;
  -webkit-flex: 1 0 100%;
}

/* lone collapsed SectionView in Gmailv2 */
/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */
.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child {
  flex: 1;
  -webkit-flex: 1;
  margin-right: 0;
}

.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child
  > .inboxsdk__resultsSection_header {
  display: flex;
  display: -webkit-flex;
  align-items: center;
  -webkit-align-items: center;
  flex: 1;
  -webkit-flex: 1;
}

.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child
  > .inboxsdk__resultsSection_header
  > .Cr {
  display: flex;
  display: -webkit-flex;
  align-items: center;
  -webkit-align-items: center;
  margin-left: auto;
}

/* end lone collapsed SectionView in Gmailv2 */

.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-block;
  margin-right: 20px;
}

.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-flex;
}

.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  margin-right: 0px;
}

.inboxsdk__resultsSection_collapsed .Cr {
  display: none;
}

.inboxsdk__resultsSection_title {
  white-space: nowrap;
  cursor: pointer;
  display: inline-block;
}
.inboxsdk__resultsSection_title {
  display: flex;
  align-items: center;
  height: 48px;
}

.Wc .inboxsdk__resultsSection_title {
  padding: 3px 0 3px 8px;
}

.inboxsdk__resultsSection_header {
  min-height: 48px;
  line-height: 48px;
}

.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {
  padding-right: 0px;
  margin-right: 0px;
}

.inboxsdk__custom_sections.Wc
  .inboxsdk__resultsSection_header_summaryText:last-child {
  margin-right: 11px;
}

.inboxsdk__custom_sections.Wc .J-JN-M-I {
  margin-right: 13px;
}

.inboxsdk__resultsSection .TB.TC {
  text-align: center;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {
  font-style: italic;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {
  height: 15px;
  width: 15px;
}

.inboxsdk__resultsSection_label_iconHtml,
.inboxsdk__resultsSection_result_iconHtml {
  display: flex;
  justify-content: center;
  align-items: center;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover > .xW {
  /* Gmailv2 tries to hide the "xW" element when a "zA" element is hovered. This prevent that. */
  display: flex;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA > .xW {
  max-width: none;
  flex-basis: auto;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {
  align-items: center;
  -webkit-align-items: center;
}

.inboxsdk__resultsSection .xX {
  width: 20ex;
}

.inboxsdk__resultsSection_result_title span {
  text-overflow: ellipsis;
  display: block;
  overflow: hidden;
}

.inboxsdk__resultsSection tr .xW > span {
  overflow: hidden;
  display: block;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection .V3 {
  overflow: hidden;
  white-space: nowrap;
}

.inboxsdk__resultsSection .at {
  position: relative;
}

.inboxsdk__thread_row_label {
  flex-shrink: 0;
  align-self: center;
}

.inboxsdk__thread_row_label {
  align-self: flex-end;
}

/* label in vertical preview pane */
.apv .inboxsdk__thread_row_label {
  align-self: flex-start;
}

.inboxsdk__resultsSection_label_icon {
  height: 11px;
  width: 11px;
  position: absolute;
  top: 2px;
  margin-left: 4px;
}

.inboxsdk__resultsSection_label_icon {
  margin-top: 1px;
}

.inboxsdk__resultsSection .av,
.inboxsdk__thread_row_label .av {
  /* max-width is set inline, default is 90px */
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection_label_icon + .av,
.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {
  margin-left: 16px;
}

.Wc .inboxsdk__resultsSection_footer {
  padding: 3px 3px 3px 8px;
}

/* end search results section */

/* tooltip */

/* gmail styles */

.inboxsdk__tooltip .T-P {
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  background-color: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  padding: 16px;
  position: absolute;
  z-index: 1201 !important;
}

.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {
  padding: 0px;
}

.inboxsdk__tooltip .aRM {
  outline: none;
  padding: 13px 10px 16px;
  text-align: center;
  font: normal normal normal normal 16px / normal arial, sans-serif;
}

.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {
  padding: 0px;
}

.inboxsdk__tooltip .aRR {
  color: #333;
  font-size: 18px;
  margin-top: 13px;
}

.inboxsdk__tooltip .aRQ {
  color: #777;
  font-size: 13px;
  margin: 3px 0 14px 0;
}

/* end gmail styles */

.inboxsdk__tooltip {
  position: fixed;
  z-index: 1300;
  transition: left 200ms ease, top 200ms ease;
}

.inboxsdk__tooltip .T-P {
  position: relative;
  width: auto;
  max-width: 500px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_arrow {
  position: fixed;
  z-index: 1400;
  margin-top: -1px;
  transition: left 200ms ease, top 200ms ease;
}

.inboxsdk__tooltip .inboxsdk__tooltip_close {
  -webkit-user-select: none;
}

.inboxsdk__tooltip .inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image {
  max-height: 300px;
  max-width: 500px;
  overflow: hidden;
  height: auto;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image > img {
  max-height: 300px;
  max-width: 500px;
}

/* end tooltip */

/* attachment card */

.inboxsdk__attachmentCard img.aQG.aYB {
  max-width: 178px;
  min-width: 178px;
  min-height: 118px;
}

.inboxsdk__attachmentCard img.aZG.aYw {
  background: none;
}

/* add some margins between cards so 4+ cards don't hit each other */

.aQw > .T-I.J-J5-Ji.L3 {
  margin-top: 5px;
}

/* end attachment card */

/* keyboard shortcut help */

table.cf.wd.inboxsdk__shortcutHelp_table {
  margin-bottom: 15px;
}

.inboxsdk__shortcutHelp_table td.Dn {
  display: inline-block;
  width: 50%;
}

.inboxsdk__shortcutHelp_table table.cf {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody tr {
  display: block;
  white-space: nowrap;
}

.inboxsdk__shortcutHelp_table td.wg.Dn {
  display: inline-block;
  width: 45%;
}

.inboxsdk__shortcutHelp_table span.wb {
  margin-left: 3px;
}

.inboxsdk__shortcutHelp_table td.we.Dn {
  width: 60%;
  white-space: normal;
}

.inboxsdk__shortcutHelp_title img.inboxsdk__icon {
  height: 21px;
  width: 21px;
  vertical-align: middle;
  margin-right: 10px;
  border-radius: 4px;
}

/* end keyboard shortcut help */

/* search suggestions */

.asor.inboxsdk__custom_suggestion {
  display: flex;
  display: -webkit-flex;
  justify-content: center;
  -webkit-justify-content: center;
  align-items: center;
  -webkit-align-items: center;
}

.inboxsdk__custom_suggestion img {
  max-width: 32px;
  max-height: 32px;
}

.inboxsdk__custom_suggestion_iconHTML {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  left: 8px;
  height: 32px;
  width: 43px;
}

/* Adjust positioning when no description present */
.gstq_d .inboxsdk__custom_suggestion_iconHTML {
  margin-top: -8px;
}

/* end send suggestions */

/* app toolbar */

.inboxsdk__appButton {
  margin-right: 8px;
}

.inboxsdk__appButton + .inboxsdk__appButton {
  margin-left: 16px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus {
  margin-right: 0px;
}

.inboxsdk__appButton .inboxsdk__button_icon {
  margin-right: 5px;
  position: relative;
}

.inboxsdk__appButton a {
  color: #404040;
  text-decoration: none;
  line-height: 24px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {
  line-height: 30px;
}

.inboxsdk__appButton a:hover {
  text-decoration: underline;
  color: #000;
}

.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {
  color: #eee;
}
.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {
  color: #fff;
}

.inboxsdk__appButton_tooltip {
  outline: none;
  transition: none;
  -webkit-animation: gb__a 0.2s;
}

.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {
  display: none;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {
  padding: 0px;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {
  padding: 0px;
  white-space: initial;
  text-align: center;
  font: normal normal normal normal 16px / normal arial, sans-serif;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {
  transform-origin: top;
  transform: rotateZ(180deg);
  margin-top: 9px;
}

/* resize based on width */

.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {
  display: none;
}

/* end resize based on width */

/* end app toolbar */

/* custom message views */

.inboxsdk__custom_message_view {
  display: flex;
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid #efefef;
  border-collapse: collapse;
}

.inboxsdk__custom_message_view_hidden {
  display: none;
}

/* when cusotm message is right after the last message with its reply */
.h7.ie + .inboxsdk__custom_message_view {
  margin-top: 5px;
}

/* when custom message is after the super collapsed message elements */
.kQ + .inboxsdk__custom_message_view,
.kx + .inboxsdk__custom_message_view {
  margin-top: 1px;
}

.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {
  cursor: pointer;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {
  padding-left: 16px;
  padding-right: 16px;
  flex-shrink: 0;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {
  height: 32px;
  width: 32px;
  border-radius: 50%;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {
  width: 100%;
  min-width: 0px;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {
  cursor: pointer;
}

.inboxsdk__custom_message_view_app_notice_content {
  position: relative;
  display: flex;
  justify-content: center;
  z-index: 1;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {
  position: relative;
  width: auto !important;
  min-width: 32px;
}

.inboxsdk__custom_message_view_app_notice_content {
  align-items: center;
  display: flex;
  font-size: 0.75rem !important;
  justify-content: flex-start;
  margin-left: 0;
  padding: 0px;
  top: 0;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {
  content: none !important;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container
  > span:first-child {
  display: none;
}

.inboxsdk__custom_message_view_app_notice_container::before {
  position: absolute;
}

.inboxsdk__custom_message_view_app_notice_content > * {
  color: #555;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view {
  table-layout: fixed;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {
  display: block;
}

/* end custom message views */

/* butter/snack bar */

.inboxsdk__butterbar.inboxsdk__butterbar_error {
  background-color: #c53929 !important;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {
  color: #fff;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {
  background: rgba(255, 255, 255, 0.08);
}

/* end butter/snack bar */

/* support menu item */
.inboxsdk__support_menuItem:hover {
  background-color: #eeeeee;
  outline: 1px dashed transparent;
}

.inboxsdk__compose_addressList {
  display: flex !important;
}

/* end support menu item */

/* compose popover */
.inboxsdk__linkPopOver_section_container {
  position: absolute;
  width: 100%;
  top: 35px;
  left: 0;
}

.inboxsdk__linkPopOver_section {
  width: 100%;
  background: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  font: 13px arial, sans-serif;
  padding: 5px 8px;
  margin-bottom: 5px;
  box-sizing: border-box;
  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
}

/* end compose popover */

/*
 Toolbar/Thread button style fix for
 when the gmail setting "Button labels" is set to "text"
*/

.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after {
  width: auto;
}
`)},{"../../lib/rewriteCssWithIdMap":734,"@babel/runtime/helpers/interopRequireDefault":15,"ud-kefir":454}],495:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("kefir")),u=t(e("../../lib/stream-wait-for")),r=t(e("../../lib/dom/querySelectorOrFail")),c=t(e("../../lib/dom/make-mutation-observer-chunked-stream"));let s=(0,u.default)(()=>document.body.querySelector('div.b8[role="alert"]')).map(_=>{let y=(0,r.default)(_,".vh:not(.inboxsdk__butterbar)"),g=_.querySelector(".vh.inboxsdk__butterbar");if(!g){g=document.createElement("div"),g.classList.add("vh","inboxsdk__butterbar"),g.style.display="none";let m=document.createElement("span");m.classList.add("aT");let w=document.createElement("span");w.classList.add("inboxsdk__butterbar-text","bAq");let C=document.createElement("span");C.classList.add("inboxsdk__butterbar-buttons","bAo"),C.innerHTML="&nbsp;&nbsp;";let I=document.createElement("div");I.classList.add("inboxsdk__butterbar-close","bBe"),I.innerHTML='<div class="bBf"></div>',I.setAttribute("role","button"),I.tabIndex=0,m.appendChild(w),m.appendChild(C),g.appendChild(m),g.appendChild(I);let S=y.parentNode;if(!S)throw new Error("parentNode not found");S.insertBefore(g,y.nextSibling)}return{noticeContainer:_,googleNotice:y,sdkNotice:g}}).toProperty(),o=s.flatMapLatest(_=>{let{googleNotice:y}=_;return(0,c.default)(y,{childList:!0})}),d=o.filter(_=>_.some(y=>y.addedNodes.length>0)),a=o.filter(_=>!_.some(y=>y.addedNodes.length>0)),p=s.flatMapLatest(_=>{let{sdkNotice:y}=_;return(0,c.default)(y,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(()=>y.getAttribute("data-inboxsdk-id"))}).filter(_=>_==null),f=n.default.merge([a,p]);function b(_,y,g){y.style.display="",_.style.top="-10000px",_.style.position="relative",_.classList.remove("bAp"),g.style.display="none",g.removeAttribute("data-inboxsdk-id")}i.default=class{constructor(){n.default.combine([s,d]).onValue(_=>{let[{googleNotice:y,sdkNotice:g}]=_;y.style.display="",g.style.display="none",g.setAttribute("data-inboxsdk-id","gmail")}),f.onValue(()=>{})}getNoticeAvailableStream(){return f}getSharedMessageQueue(){let _=document.head.getAttribute("data-inboxsdk-butterbar-queue");return _?JSON.parse(_):[]}setSharedMessageQueue(_){let y=JSON.stringify(_);document.head.setAttribute("data-inboxsdk-butterbar-queue",y)}showMessage(_){let y=Date.now()+"-"+Math.random(),g=()=>{s.take(1).onValue(m=>{let{noticeContainer:w,googleNotice:C,sdkNotice:I}=m;I.getAttribute("data-inboxsdk-id")===y&&(_.className&&I.classList.remove(_.className),b(w,C,I))})};return s.take(1).onValue(m=>{let{noticeContainer:w,googleNotice:C,sdkNotice:I}=m;w.style.visibility="visible",w.style.top="",w.classList.add("bAp"),C.style.display="none",I.className=C.className,I.classList.add("inboxsdk__butterbar");let S=(0,r.default)(I,".inboxsdk__butterbar-text");for(;S.firstChild;)S.removeChild(S.firstChild);let O=(0,r.default)(I,".inboxsdk__butterbar-buttons");for(;O.firstChild;)O.removeChild(O.firstChild);_.html?S.innerHTML=_.html:_.el?S.appendChild(_.el):S.textContent=_.text,_.buttons&&_.buttons.forEach(E=>{let D=document.createElement("span");D.classList.add("ag","a8k"),D.onclick=P=>E.onClick(P),D.setAttribute("role","button"),D.tabIndex=0,D.textContent=E.title,O.appendChild(D)});let A=(0,r.default)(I,".inboxsdk__butterbar-close");A&&n.default.fromEvents(A,"click").take(1).onValue(g),_.className&&I.classList.add(_.className),I.style.display="",I.setAttribute("data-inboxsdk-id",y)}),{destroy:g}}hideGmailMessage(){s.take(1).onValue(_=>{let{noticeContainer:y,googleNotice:g,sdkNotice:m}=_;m.getAttribute("data-inboxsdk-id")==="gmail"&&b(y,g,m)})}}},{"../../lib/dom/make-mutation-observer-chunked-stream":700,"../../lib/dom/querySelectorOrFail":706,"../../lib/stream-wait-for":739,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],496:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=n(e("live-set/toValueObservable")),c=e("ud"),s=n(e("transducers.js")),o=n(e("kefir")),d=n(e("kefir-stopper")),a=n(e("kefir-bus")),p=(n(e("asap")),n(e("lodash/includes"))),f=n(e("../../../common/get-or-fail")),b=n(e("./gmail-driver/show-app-id-warning")),_=n(e("./makePageParserTree")),y=n(e("./gmail-element-getter")),g=n(e("./make-xhr-interceptor")),m=n(e("./views/gmail-backdrop")),w=e("./views/gmail-thread-row-view"),C=n(e("./widgets/gmail-top-message-bar-driver")),I=n(e("./widgets/gmail-modal-view-driver")),S=n(e("./widgets/gmail-mole-view-driver")),O=n(e("../inbox/views/inbox-drawer-view")),A=n(e("./views/gmail-route-view/gmail-route-processor")),E=n(e("./gmail-driver/keyboard-shortcut-help-modifier")),D=n(e("./gmail-driver/open-draft-by-message-id")),P=n(e("./gmail-driver/user-info")),j=n(e("./gmail-butter-bar-driver")),k=n(e("./gmail-driver/track-gmail-styles")),M=n(e("./gmail-driver/temporary-track-download-url-validity")),R=n(e("../../driver-common/getGmailThreadIdForRfcMessageId")),V=n(e("./gmail-driver/get-rfc-message-id-for-gmail-thread-id")),T=n(e("../../driver-common/getGmailMessageIdForSyncMessageId")),U=n(e("bimapcache")),W=n(e("./gmail-driver/get-draft-id-for-message-id")),Q=n(e("./gmail-driver/add-nav-item")),X=e("./gmail-driver/add-app-menu-item"),oe=n(e("./gmail-driver/add-support-item")),J=n(e("./gmail-driver/goto-view")),he=n(e("./gmail-driver/show-custom-thread-list")),ae=n(e("./gmail-driver/show-custom-route-view")),ue=n(e("./gmail-driver/show-native-route-view")),ge=n(e("./gmail-driver/register-search-suggestions-provider")),N=n(e("./gmail-driver/setup-compose-view-driver-stream")),F=n(e("./gmail-driver/track-events")),K=n(e("./gmail-driver/gmail-load-event")),H=n(e("./gmail-driver/thread-row-identifier")),$=n(e("./custom-style")),se=n(e("./gmail-driver/override-gmail-back-button")),pe=n(e("./gmail-driver/add-toolbar-button-for-app")),Te=n(e("./gmail-driver/setup-route-view-driver-stream")),$e=n(e("./gmail-driver/get-native-nav-item")),He=n(e("./gmail-driver/create-link")),re=n(e("./gmail-driver/register-search-query-rewriter")),le=n(e("./gmail-driver/open-compose-window")),ve=n(e("./views/gmail-app-sidebar-view")),De=n(e("./gmail-driver/suppressAddon")),xe=n(e("./gmail-driver/getSyncThreadFromSyncThreadId")),Se=n(e("./gmail-driver/getSyncThreadForOldGmailThreadId")),Ee=n(e("../../lib/toItemWithLifetimeStream")),ye=n(e("../../lib/toLiveSet")),Ne=n(e("../../lib/stream-wait-for"));n(e("../../lib/wait-for")),n(e("./views/gmail-nav-item-view"));var Ue=(0,c.defn)(v,class{constructor(de,qe,tt,Re,ce,Le){(0,u.default)(this,"_customRouteIDs",new Set),(0,u.default)(this,"_customListRouteIDs",new Map),(0,u.default)(this,"_customListSearchStringsToRouteIds",new Map),(0,u.default)(this,"_messageIDsToThreadIDs",new Map),(0,u.default)(this,"_stopper",(0,d.default)()),(0,u.default)(this,"_navMarkerHiddenChanged",(0,a.default)()),(0,u.default)(this,"_addonSidebarHiddenChanged",(0,a.default)()),(0,u.default)(this,"_appSidebarView",null),(0,u.default)(this,"_recentSyncDraftIds",new Map),(0,u.default)(this,"_selectedThreadRows",s.default.mapcat(Fe=>Fe.getSelectedThreadRowViewDrivers())),(0,u.default)(this,"_threadRowViewSelectionChanges",(0,a.default)()),(0,$.default)(),this._appId=de,this._logger=Re,this._opts=ce,this._envData=Le,this._page=(0,_.default)(this,document),this._stopper.onValue(()=>this._page.dump());{let Fe=new U.default({key:"inboxsdk__cached_thread_ids",getAfromB:Be=>(0,V.default)(this,Be),getBfromA:Be=>(0,R.default)(this,Be)});this.getGmailThreadIdForRfcMessageId=Be=>Fe.getBfromA(Be),this.getRfcMessageIdForGmailThreadId=Be=>Fe.getAfromB(Be)}{let Fe=new U.default({key:"inboxsdk__cached_sync_thread_id_old_gmail_thread_id",getAfromB:Be=>(0,Se.default)(this,Be).then(nt=>{let{syncThreadID:it}=nt;return it}),getBfromA:Be=>(0,xe.default)(this,Be).then(nt=>{if(nt)return nt.oldGmailThreadID;throw new Error("syncThread not found")})});this.getSyncThreadIdForOldGmailThreadId=Be=>Fe.getAfromB(Be),this.getOldGmailThreadIdFromSyncThreadId=Be=>Fe.getBfromA(Be),this.removeCachedOldGmailThreadIdFromSyncThreadId=Be=>Fe.removeAfromCache(Be)}{try{localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids_2")}catch{}let Fe=new U.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_3",getAfromB:Be=>(0,T.default)(this,Be),getBfromA(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=Be=>Fe.getAfromB(Be),this.removeCachedGmailMessageIdForSyncMessageId=Be=>Fe.removeBfromCache(Be),this.getGmailMessageIdForSyncDraftId=Be=>(0,T.default)(this,Be)}this._gmailRouteProcessor=new A.default,this._keyboardShortcutHelpModifier=new E.default,this._butterBarDriver=new j.default,o.default.later(45e3).takeUntilBy((0,Ee.default)(this._page.tree.getAllByTag("supportMenu"))).onValue(()=>{this._logger.errorSite(new Error("Failed to find gmail supportMenu"))}),this._setupEventStreams(),this.onready.then(()=>{(0,F.default)(this),(0,K.default)(this),(0,se.default)(this,this._gmailRouteProcessor),(0,k.default)(),(0,M.default)(this),ce.suppressAddonTitle!=null&&(0,De.default)(this,ce.suppressAddonTitle)}).catch(Fe=>{this._logger.error(Fe)})}destroy(){this._threadRowViewSelectionChanges.end(),this._keyboardShortcutHelpModifier.destroy(),this._stopper.destroy(),(0,w.removeAllThreadRowUnclaimedModifications)()}getAppId(){return this._appId}getOpts(){return this._opts}getPageCommunicator(){return this._pageCommunicator}getPageCommunicatorPromise(){return this._pageCommunicatorPromise}getLogger(){return this._logger}getTagTree(){return this._page.tree}getCustomListSearchStringsToRouteIds(){return this._customListSearchStringsToRouteIds}getThreadRowIdentifier(){return this._threadRowIdentifier}getButterBarDriver(){return this._butterBarDriver}getButterBar(){return this._butterBar}setButterBar(de){this._butterBar=de}getCustomRouteIDs(){return this._customRouteIDs}getCustomListRouteIDs(){return this._customListRouteIDs}getKeyboardShortcutHelpModifier(){return this._keyboardShortcutHelpModifier}getRouteViewDriverStream(){return this._routeViewDriverStream}getRowListViewDriverStream(){return this._rowListViewDriverStream}getThreadRowViewDriverStream(){return this._threadRowViewDriverKefirStream}getThreadViewDriverStream(){return(0,Ee.default)(this._threadViewDriverLiveSet).map(de=>{let{el:qe}=de;return qe})}getAttachmentCardViewDriverStream(){return this._messageViewDriverStream.flatMap(de=>de.isLoaded()?o.default.constant(de):de.getEventStream().filter(qe=>qe.eventName==="messageLoad").map(()=>de).take(1)).map(de=>de.getAttachmentCardViewDrivers()).flatten()}getComposeViewDriverStream(){return this._composeViewDriverStream}getXhrInterceptorStream(){return this._xhrInterceptorStream}getMessageViewDriverStream(){return this._messageViewDriverStream}getStopper(){return this._stopper}getEnvData(){return this._envData}getTimestampOnReady(){return this._timestampOnready==null?(this._logger.error(new Error("getTimestampOnReady called before ready")),Date.now()):this._timestampOnready}delayToTimeAfterReady(de){let qe=this.getTimestampOnReady()+de,tt=Math.max(0,qe-Date.now());return o.default.later(tt)}getTimings(){return{piMainStarted:this._envData.piMainStarted,piLoadStarted:this._envData.piLoadStarted,globalsFound:this._timestampGlobalsFound,accountSwitcherReady:this._timestampAccountSwitcherReady,onready:this._timestampOnready}}registerThreadButton(de){let qe=(0,d.default)(),tt=ce=>{qe.takeUntilBy(ce.getStopper()).onValue(()=>{ce.destroy()})},Re=(0,r.default)(this._toolbarViewDriverLiveSet).subscribe(ce=>{let{value:Le}=ce;Le.isForThread()?de.positions&&!(0,p.default)(de.positions,"THREAD")||tt(Le.addButton({...de,section:de.threadSection||"METADATA_STATE",onClick:Fe=>{de.onClick({position:"THREAD",dropdown:Fe.dropdown,selectedThreadViewDrivers:[Le.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}})):Le.isForRowList()&&(de.positions&&!(0,p.default)(de.positions,"LIST")||tt(Le.addButton({...de,section:de.listSection||"METADATA_STATE",onClick:Fe=>{let Be=Array.from(Le.getThreadRowViewDrivers()).filter(nt=>nt.isSelected());de.onClick({position:"LIST",dropdown:Fe.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:Be})}})))});if(qe.onValue(()=>{Re.unsubscribe()}),!de.positions||(0,p.default)(de.positions,"ROW")){let ce=Fe=>{Fe.addButton(o.default.constant({hasDropdown:de.hasDropdown,iconClass:de.iconClass,iconUrl:de.iconUrl,orderHint:de.orderHint,onClick:Be=>{de.onClick&&de.onClick({position:"ROW",dropdown:Be.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[Fe]})}}).merge(qe))};this._currentRouteViewDriver&&this._currentRouteViewDriver.getRowListViews().forEach(Fe=>{Fe.getThreadRowViewDrivers().forEach(ce)});let Le=this._threadRowViewDriverKefirStream.observe({value:ce});qe.onValue(()=>{Le.unsubscribe()})}return()=>{qe.destroy()}}hashChangeNoViewChange(de){if(de[0]!=="#")throw new Error("bad hash");window.history.replaceState(null,null,de);var qe=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+"#inboxsdk-fake-no-vc",newURL:document.location.href.replace(/#.*$/,"")+de});window.dispatchEvent(qe)}addCustomRouteID(de){return this._customRouteIDs.add(de),this._pageCommunicator.registerAllowedHashLinkStartTerm(de.split("/")[0]),()=>{this._customRouteIDs.delete(de)}}addCustomListRouteID(de,qe){return this._customListRouteIDs.set(de,qe),this._pageCommunicator.registerAllowedHashLinkStartTerm(de.split("/")[0]),()=>{this._customListRouteIDs.delete(de)}}signalCustomThreadListActivity(de){this._lastCustomThreadListActivity={customRouteID:de,timestamp:new Date}}getLastCustomThreadListActivity(){return this._lastCustomThreadListActivity}showCustomThreadList(de,qe,tt){(0,he.default)(this,de,qe,tt)}showCustomRouteView(de){(0,ae.default)(this,de)}showNativeRouteView(){(0,ue.default)(this)}createLink(de,qe){return(0,He.default)(this._gmailRouteProcessor,de,qe)}goto(de,qe){return(0,J.default)(this,de,qe)}resolveUrlRedirects(de){return this._pageCommunicatorPromise.then(qe=>qe.resolveUrlRedirects(de))}registerSearchSuggestionsProvider(de){(0,ge.default)(this,de)}registerSearchQueryRewriter(de){(0,re.default)(this._pageCommunicator,de)}addToolbarButtonForApp(de){return(0,pe.default)(this,de)}async openNewComposeViewDriver(){try{let de=this.getNextComposeViewDriver();return await(0,le.default)(this),await de}catch(de){throw this._logger.error(de),de}}getNextComposeViewDriver(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1e4;return this._composeViewDriverStream.merge(o.default.later(de,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(()=>new Error("Driver was shut down before a new compose was found")).flatMap(qe=>qe instanceof Error?o.default.constantError(qe):o.default.constant(qe)).take(1).takeErrors(1).toPromise()}openDraftByMessageID(de){return(0,D.default)(this,de)}createModalViewDriver(de){return new I.default(de)}createMoleViewDriver(de){return new S.default(this,de)}createDrawerViewDriver(de){return new O.default(de)}createBackdrop(de,qe){return new m.default(de,qe)}addNavItem(de,qe,tt){return(0,Q.default)(this,de,qe,tt)}addAppMenuItem(de){return(0,X.addAppMenuItem)(this,de)}addSupportItem(de){return(0,oe.default)(this,de)}getSentMailNativeNavItem(){let de=(0,$e.default)(this,"sent");return de.catch(qe=>this._logger.error(qe)),de}setShowNativeNavMarker(de){this._navMarkerHiddenChanged.emit(null);let qe=y.default.getLeftNavContainerElement();qe&&(de?qe.classList.remove("inboxsdk__hide_native_marker"):(qe.classList.add("inboxsdk__hide_native_marker"),this._stopper.takeUntilBy(this._navMarkerHiddenChanged).onValue(()=>{qe.classList.remove("inboxsdk__hide_native_marker")})))}setShowNativeAddonSidebar(de){this._addonSidebarHiddenChanged.emit(null);let qe=y.default.getAddonSidebarContainerElement(),tt=y.default.getMainContentBodyContainerElement();if(qe&&tt){let Re=tt.parentElement;if(!Re)return;de?Re.classList.remove("inboxsdk__hide_addon_container"):(Re.classList.add("inboxsdk__hide_addon_container"),this._stopper.takeUntilBy(this._addonSidebarHiddenChanged).onValue(()=>{Re.classList.remove("inboxsdk__hide_addon_container")}))}}async getGmailActionToken(){return this._pageCommunicator.getActionTokenValue()}getUserEmailAddress(){return this._pageCommunicator.getUserEmailAddress()}isConversationViewDisabled(){return this._pageCommunicator.isConversationViewDisabled()}getUserLanguage(){return this._pageCommunicator.getUserLanguage()}getUserContact(){return{emailAddress:this.getUserEmailAddress(),name:this._userInfo.getUserName()}}getAccountSwitcherContactList(){return this._userInfo.getAccountSwitcherContactList()}activateShortcut(de,qe,tt){this.getKeyboardShortcutHelpModifier().set(de,this._appId,qe,tt),de.once("destroy",()=>{this.getKeyboardShortcutHelpModifier().delete(de)})}_setupEventStreams(){var de=(0,g.default)();this._xhrInterceptorStream=de.xhrInterceptStream.takeUntilBy(this._stopper),this._pageCommunicatorPromise=de.pageCommunicatorPromise,this.onready=this._pageCommunicatorPromise.then(qe=>{this._timestampGlobalsFound=Date.now(),this._pageCommunicator=qe,this._logger.setUserEmailAddress(this.getUserEmailAddress()),this._logger.setIsUsingSyncAPI(qe.isUsingSyncAPI()),this._userInfo=new P.default(this),this._timestampAccountSwitcherReady=Date.now(),this._routeViewDriverStream=(0,Te.default)(this._gmailRouteProcessor,this).takeUntilBy(this._stopper).toProperty(),this._routeViewDriverStream.onValue(tt=>{this._currentRouteViewDriver=tt}),this._rowListViewDriverStream=this._setupRouteSubViewDriver("newGmailRowListView").takeUntilBy(this._stopper),this._setupThreadRowViewDriverKefirStream(),this._threadViewDriverLiveSet=(0,ye.default)(this._setupRouteSubViewDriver("newGmailThreadView").takeUntilBy(this._stopper).flatMap(tt=>tt.getReadyStream().map(()=>tt)).map(tt=>({el:tt,removalStream:tt.getStopper()}))),this._setupToolbarViewDriverStream(),this._setupMessageViewDriverStream(),this._setupComposeViewDriverStream(),this._threadRowIdentifier=new H.default(this),this._timestampOnready=Date.now()})}_setupComposeViewDriverStream(){this._composeViewDriverStream=(0,N.default)(this,this._messageViewDriverStream,this._xhrInterceptorStream).takeUntilBy(this._stopper)}_setupRouteSubViewDriver(de){return this._routeViewDriverStream.flatMap(qe=>qe.getEventStream().filter(tt=>tt.eventName===de).map(tt=>tt.view))}_setupThreadRowViewDriverKefirStream(){this._threadRowViewDriverKefirStream=this._rowListViewDriverStream.flatMap(de=>de.getRowViewDriverStream()).takeUntilBy(this._stopper)}_setupToolbarViewDriverStream(){this._toolbarViewDriverLiveSet=(0,ye.default)(o.default.merge([this._rowListViewDriverStream.map(de=>de.getToolbarView()),this.getThreadViewDriverStream().map(de=>de.getToolbarView())]).filter(Boolean).flatMap(de=>de.waitForReady()).map(de=>({el:de,removalStream:de.getStopper()})).takeUntilBy(this._stopper)),this._toolbarViewDriverLiveSet.subscribe({})}_setupMessageViewDriverStream(){this._messageViewDriverStream=this.getThreadViewDriverStream().flatMap(de=>de.getMessageViewDriverStream()).takeUntilBy(this._stopper)}async addGlobalSidebarContentPanel(de){return await this.waitForGlobalSidebarReady().merge(this._stopper.flatMap(()=>o.default.constantError(new Error("Driver instance was destroyed early")))).take(1).takeErrors(1).toPromise(),this.getGlobalSidebar().addGlobalSidebarContentPanel(de)}waitForGlobalSidebarReady(){let de=()=>y.default.getCompanionSidebarContentContainerElement()&&(y.default.getCompanionSidebarIconContainerElement()||y.default.getAddonSidebarContainerElement());return de()?o.default.constant(void 0):(0,Ne.default)(de).map(()=>{})}getGlobalSidebar(){let de=this._appSidebarView;if(!de){let qe=y.default.getCompanionSidebarContentContainerElement();if(!qe)throw new Error("did not find companionSidebarContentContainerEl");de=this._appSidebarView=new ve.default(this,qe)}return de}isRunningInPageContext(){return!(!t.GLOBALS||!t._GM_main)}isUsingSyncAPI(){return this._pageCommunicator.isUsingSyncAPI()}showAppIdWarning(){(0,b.default)(this)}createTopMessageBarDriver(de){return new C.default(de)}associateThreadAndMessageIDs(de,qe){this._messageIDsToThreadIDs.set(qe,de)}getThreadIDForMessageID(de){return(0,f.default)(this._messageIDsToThreadIDs,de)}getDraftIDForMessageID(de){let qe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return(0,W.default)(this,de,qe)}reportRecentSyncDraftId(de){let qe=(this._recentSyncDraftIds.get(de)??0)+1;this._recentSyncDraftIds.set(de,qe)}reportDraftClosed(de){o.default.later(3e4).takeUntilBy(this._stopper).onValue(()=>{let qe=this._recentSyncDraftIds.get(de),tt;qe==null||qe<1?(tt=0,this._logger.error(new Error("_recentSyncDraftIds count had unexpected value"),{count:qe})):tt=qe-1,tt===0?this._recentSyncDraftIds.delete(de):this._recentSyncDraftIds.set(de,tt)})}isRecentSyncDraftId(de){return this._recentSyncDraftIds.has(de)}getSelectedThreadRowViewDrivers(){return this._currentRouteViewDriver?s.default.toArray(this._currentRouteViewDriver.getRowListViews(),this._selectedThreadRows):[]}signalThreadRowViewSelectionChange(){this._threadRowViewSelectionChanges.value(void 0)}registerThreadRowViewSelectionHandler(de){return this._threadRowViewSelectionChanges.onValue(de),()=>{this._threadRowViewSelectionChanges.offValue(de)}}});i.default=Ue}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../common/get-or-fail":476,"../../driver-common/getGmailMessageIdForSyncMessageId":669,"../../driver-common/getGmailThreadIdForRfcMessageId":670,"../../lib/stream-wait-for":739,"../../lib/toItemWithLifetimeStream":740,"../../lib/toLiveSet":741,"../../lib/wait-for":742,"../inbox/views/inbox-drawer-view":655,"./custom-style":494,"./gmail-butter-bar-driver":495,"./gmail-driver/add-app-menu-item":497,"./gmail-driver/add-nav-item":499,"./gmail-driver/add-support-item":500,"./gmail-driver/add-toolbar-button-for-app":501,"./gmail-driver/create-link":502,"./gmail-driver/get-draft-id-for-message-id":504,"./gmail-driver/get-native-nav-item":505,"./gmail-driver/get-rfc-message-id-for-gmail-thread-id":507,"./gmail-driver/getSyncThreadForOldGmailThreadId":509,"./gmail-driver/getSyncThreadFromSyncThreadId":510,"./gmail-driver/gmail-load-event":511,"./gmail-driver/goto-view":512,"./gmail-driver/keyboard-shortcut-help-modifier":514,"./gmail-driver/open-compose-window":515,"./gmail-driver/open-draft-by-message-id":516,"./gmail-driver/override-gmail-back-button":517,"./gmail-driver/register-search-query-rewriter":518,"./gmail-driver/register-search-suggestions-provider":519,"./gmail-driver/setup-compose-view-driver-stream":520,"./gmail-driver/setup-route-view-driver-stream":521,"./gmail-driver/show-app-id-warning":522,"./gmail-driver/show-custom-route-view":523,"./gmail-driver/show-custom-thread-list":524,"./gmail-driver/show-native-route-view":525,"./gmail-driver/suppressAddon":526,"./gmail-driver/temporary-track-download-url-validity":527,"./gmail-driver/thread-row-identifier":528,"./gmail-driver/track-events":529,"./gmail-driver/track-gmail-styles":530,"./gmail-driver/user-info":531,"./gmail-element-getter":532,"./make-xhr-interceptor":539,"./makePageParserTree":540,"./views/gmail-app-sidebar-view":543,"./views/gmail-backdrop":552,"./views/gmail-nav-item-view":587,"./views/gmail-route-view/gmail-route-processor":588,"./views/gmail-thread-row-view":592,"./widgets/gmail-modal-view-driver":610,"./widgets/gmail-mole-view-driver":611,"./widgets/gmail-top-message-bar-driver":613,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,bimapcache:44,kefir:158,"kefir-bus":155,"kefir-stopper":157,"live-set/toValueObservable":166,"lodash/includes":324,"transducers.js":453,ud:455}],497:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.addAppMenuItem=async function(c,s){let o=await u.default.getAppMenuAsync(),d=new n.GmailAppMenuItemView(c);d.setMenuItemDescriptor(s);try{if(!o||!d.element)return;let a=s.insertIndex?o.childNodes[s.insertIndex]??null:null;o.insertBefore(d.element,a)}catch(a){r.default.error(a)}return d};var n=e("../views/gmail-app-menu-item-view"),u=t(e("../gmail-element-getter")),r=t(e("../../../lib/logger"))},{"../../../lib/logger":729,"../gmail-element-getter":532,"../views/gmail-app-menu-item-view":542,"@babel/runtime/helpers/interopRequireDefault":15}],498:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.addCollapsiblePanel=async function(d,a){let p=await o(),f=new s.CollapsiblePanelView(d);if(f.panelDescriptor=a,!p||!f.element)return;let b=await u.default.getAppMenuAsync();if(!!b)return b.insertAdjacentElement("afterend",f.element),f};var n=t(e("lodash/once")),u=t(e("../gmail-element-getter")),r=t(e("../../../lib/wait-for")),c=t(e("../../../lib/logger")),s=e("../../../views/collapsible-panel-view");let o=(0,n.default)(async()=>{if(!u.default.isStandalone())try{return await(0,r.default)(()=>u.default.getAppMenuContainer())}catch(d){c.default.error(d)}})},{"../../../lib/logger":729,"../../../lib/wait-for":742,"../../../views/collapsible-panel-view":762,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],499:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(b,_,y,g){await p();let m=new u.default(b,_,1);if(m.setNavItemDescriptor(y),!n.default.isStandalone())try{let w=function(C,I){return I?()=>{(0,s.default)(I,C.getElement())}:n.default.shouldAddNavItemsInline()?function(){(0,s.default)(function(){let S=document.querySelector(".inboxsdk__navMenu");return S?(0,d.default)(S,".TK"):function(){let O=document.createElement("div");O.setAttribute("class","LrBjie inboxsdk__navMenu"),O.innerHTML='<div class="TK"></div>';let A=n.default.getSameSectionNavItemMenuInjectionContainer();if(!A)throw new Error("should not happen");return A.insertBefore(O,A.children[2]),(0,o.default)(O,{attributes:!0,attributeFilter:["class"]}).onValue(function(){O.classList.contains("TA")&&O.classList.remove("TA")}),(0,d.default)(O,".TK")}()}(),C.getElement())}:function(){let S=n.default.getSeparateSectionNavItemMenuInjectionContainer();if(!S)throw new Error("should not happen");Array.from(document.querySelectorAll(".Xa.wT:not([data-group-order-hint])")).slice(1).forEach(O=>{O.dataset.groupOrderHint="zz_gmail"}),(0,s.default)(S,C.getElement())}}(m,g);w(),m.getEventStream().filter(C=>C.eventName==="orderChanged").onValue(w)}catch(w){r.default.error(w)}return m},i.waitForMenuReady=void 0;var n=t(e("../gmail-element-getter")),u=t(e("../views/gmail-nav-item-view")),r=t(e("../../../lib/logger")),c=t(e("../../../lib/wait-for")),s=t(e("../../../lib/dom/insert-element-in-order")),o=t(e("../../../lib/dom/make-mutation-observer-stream")),d=t(e("../../../lib/dom/querySelectorOrFail")),a=t(e("lodash/once"));let p=(0,a.default)(async()=>{await n.default.getAppMenuAsync()||await f()});i.waitForMenuReady=p;let f=(0,a.default)(async()=>{n.default.isStandalone()||(await n.default.waitForGmailModeToSettle(),await(0,c.default)(()=>document.querySelector(".aeN[role=navigation], .aeN [role=navigation]")),await(0,c.default)(()=>document.querySelector(".Ls77Lb.aZ6 > .pp")))})},{"../../../lib/dom/insert-element-in-order":694,"../../../lib/dom/make-mutation-observer-stream":701,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/logger":729,"../../../lib/wait-for":742,"../gmail-element-getter":532,"../views/gmail-nav-item-view":587,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],500:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return new n.default(u,r)};var n=t(e("../views/gmail-support-item-view"))},{"../views/gmail-support-item-view":591,"@babel/runtime/helpers/interopRequireDefault":15}],501:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){return n.default.waitForGmailModeToSettle().then(()=>n.default.isStandalone()?new Promise((s,o)=>{}):new u.default(r,c))};var n=t(e("../gmail-element-getter")),u=t(e("../views/gmail-app-toolbar-button-view"))},{"../gmail-element-getter":532,"../views/gmail-app-toolbar-button-view":548,"@babel/runtime/helpers/interopRequireDefault":15}],502:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c,s){if(s=typeof s=="string"?s:s?Object.assign({},s):{},c=r.getCompatibleRouteID(c),typeof s=="string"){var o=c.match(/:/g);if(o&&o.length===1){var d=s;(s={})[c.match(/:(\w+)($|\/)?/)[1]]=d}else s={}}c.match(/:page(?:\/|$)/)&&!s.page&&(s.page=0);let a=c.split("/"),p;try{p=(0,n.default)(c,s)}catch(f){u.default.error(f,{routeID:c,paramsKey:Object.keys(s)}),p=a.map(function(b){if(b.indexOf(":")===-1)return b;let _=b.split(":");return s&&s[_[1]]!==void 0?_[0]+s[_[1]]:_[0]}).map(encodeURIComponent).join("/")}return r.isListRouteName(a[0])&&p.indexOf("p0")===p.length-2&&(p=p.substring(0,p.length-3)),"#"+p};var n=t(e("../../../lib/populateRouteID")),u=t(e("../../../lib/logger"))},{"../../../lib/logger":729,"../../../lib/populateRouteID":732,"@babel/runtime/helpers/interopRequireDefault":15}],503:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c,s){let o=`${c.replace(/^thread-/,"")}+${s}`,d=t.from(o).toString("base64").replace(/=/g,"");return(0,n.convertBase)(d,u,r)};var n=e("@macil/simple-base-converter");let u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="BCDFGHJKLMNPQRSTVWXZbcdfghjklmnpqrstvwxz"}).call(this)}).call(this,e("buffer").Buffer)},{"@macil/simple-base-converter":29,buffer:46}],504:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/memoize")),u=e("ud"),r=t(e("../../../driver-common/gmailAjax")),c=e("../gmail-response-processor"),s=t(e("../../../lib/isStreakAppId"));async function o(p,f){let b=await(0,r.default)({method:"GET",url:document.location.origin+document.location.pathname,data:{ui:"2",ik:p.getPageCommunicator().getIkValue(),view:"cv",th:f,prf:"1",nsc:"1",mb:"0",rt:"j",search:"drafts"}});try{return{draftID:(0,c.readDraftId)(b.text,f),debugData:{responseText:b.text}}}catch(_){throw(0,s.default)(p.getAppId())&&p.getLogger().error(_,{message:"failed to read draft ID",messageID:f,text:b.text}),_}}let d=(0,n.default)(o,(p,f)=>f);var a=(0,u.defn)(v,function(p,f){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?o(p,f):d(p,f)});i.default=a},{"../../../driver-common/gmailAjax":674,"../../../lib/isStreakAppId":728,"../gmail-response-processor":536,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/memoize":344,ud:455}],505:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o){return(0,c.default)(()=>{let d=u.default.getLeftNavContainerElement();return d?d.querySelector(`.aim a[href*="#${o}"]`):null},3e5).then(d=>{let a=(0,r.default)(d,p=>p.classList.contains("aim"));if(!a)throw new Error("native nav item structured weird");return a.__nativeGmailNavItemView||(a.__nativeGmailNavItemView=new n.default(s,a,o)),a.__nativeGmailNavItemView}).catch(d=>{if(u.default.isStandalone())return new Promise((a,p)=>{});throw d})};var n=t(e("../views/native-gmail-nav-item-view")),u=t(e("../gmail-element-getter")),r=t(e("../../../../common/find-parent")),c=t(e("../../../lib/wait-for"))},{"../../../../common/find-parent":474,"../../../lib/wait-for":742,"../gmail-element-getter":532,"../views/native-gmail-nav-item-view":598,"@babel/runtime/helpers/interopRequireDefault":15}],506:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(r,c){let s=(await(0,n.default)(r,{oldGmailMessageID:c})).match(/^Message-ID:\s+(\S+)\s*$/im);if(!s)throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");return(0,u.default)(s[1])};var n=t(e("../../../driver-common/getOriginalMessagePage")),u=t(e("../../../../common/html-to-text"))},{"../../../../common/html-to-text":479,"../../../driver-common/getOriginalMessagePage":671,"@babel/runtime/helpers/interopRequireDefault":15}],507:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(o,d){let a={ui:2,ik:o.getPageCommunicator().getIkValue(),view:"cv",th:d,nsc:1,mb:0,rt:"j",search:"all"},p=await(0,n.default)({method:"POST",url:document.location.origin+document.location.pathname+"?"+u.default.stringify(a),canRetry:!0}),f=r.extractMessageIdsFromThreadBatchRequest(p.text);if(Object.keys(f).length!==1)throw new Error(`Expected to find 1 thread/message ID pair, but got ${Object.keys(f).length}`);let b=f[d];if(!b)throw new Error("Could not find a message ID for given thread ID");return(0,c.default)(o,b)};var n=t(e("../../../driver-common/gmailAjax")),u=t(e("querystring")),r=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=s(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("../gmail-response-processor")),c=t(e("./get-rfc-message-id-for-gmail-message-id"));function s(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(s=function(p){return p?a:d})(o)}},{"../../../driver-common/gmailAjax":674,"../gmail-response-processor":536,"./get-rfc-message-id-for-gmail-message-id":506,"@babel/runtime/helpers/interopRequireDefault":15,querystring:410}],508:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=t.match(/#([^?]*)(?:\?(.*))?/);if(!n)return{name:"inbox",params:[],hash:"",query:void 0};let u=n[1],r=u.split("/");return{name:decodeURIComponent(r[0]),params:r.slice(1).map(c=>c.replace(/\+/g," ")).map(decodeURIComponent),query:n[2],hash:u}}},{}],509:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(c,s){let{threads:o,_text:d}=await(0,u.default)(c,"threadid:"+new n.default(s,16).toString(10)),a=o[0];if(a==null){let p=(0,r.default)(c.getAppId()),f=new Error("Thread not found by getSyncThreadForOldGmailThreadId");throw c.getLogger().error(f,{oldGmailThreadId:p?s:null,responseText:p?d:null}),f}return a},e("ud");var n=t(e("bignumber.js")),u=t(e("../../../driver-common/getSyncThreadsForSearch")),r=(t(e("../../../driver-common/gmailAjax")),t(e("../../../lib/isStreakAppId")));e("../gmail-sync-response-processor")},{"../../../driver-common/getSyncThreadsForSearch":672,"../../../driver-common/gmailAjax":674,"../../../lib/isStreakAppId":728,"../gmail-sync-response-processor":537,"@babel/runtime/helpers/interopRequireDefault":15,"bignumber.js":43,ud:455}],510:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(s,o){let[d,a]=await Promise.all([s.getPageCommunicator().getBtaiHeader(),s.getPageCommunicator().getXsrfToken()]);return c(o,d,a)},i.getThreadFromSyncThreadIdUsingHeaders=c,e("ud");var n=t(e("../../../driver-common/gmailAjax")),u=e("../gmail-sync-response-processor"),r=t(e("../../../driver-common/getAccountUrlPart"));async function c(s,o,d){let a=null;try{let{text:f}=await(0,n.default)({method:"POST",url:`https://mail.google.com/sync${(0,r.default)()}/i/fd`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":d,"X-Gmail-BTAI":o,"X-Google-BTD":"1"},data:JSON.stringify({1:[{1:s,2:1}]})});a=f}catch{let{text:b}=await(0,n.default)({method:"POST",url:`https://mail.google.com/sync${(0,r.default)()}/i/fd?rt=r&pt=ji`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":d,"X-Gmail-BTAI":o,"X-Google-BTD":"1"},data:JSON.stringify([[[s,1]],2])});a=b}let p=(0,u.extractThreadsFromThreadResponse)(a);if(p.length>0){let f=p[0];if(f.oldGmailThreadID)return f}return null}},{"../../../driver-common/getAccountUrlPart":668,"../../../driver-common/gmailAjax":674,"../gmail-sync-response-processor":537,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],511:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(c){let s=c.getPageCommunicator(),o=await s.isConversationViewDisabled();await(0,r.waitForMenuReady)(),c.getLogger().eventSite("gmailSettings",{isGmailIntegratedView:(0,u.default)(),screenWidth:window.screen&&window.screen.width,screenHeight:window.screen&&window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:s.getUserLanguage(),isUsingSyncAPI:s.isUsingSyncAPI(),previewPane:s.getUserOriginalPreviewPaneMode(),isConversationViewDisabled:o,wasAccountSwitcherReadyAtStart:c.getEnvData().wasAccountSwitcherReadyAtStart,timings:Object.assign({responseStart:t.performance&&t.performance.timing.responseStart,responseEnd:t.performance&&t.performance.timing.responseEnd,domLoading:t.performance&&t.performance.timing.domLoading,domInteractive:t.performance&&t.performance.timing.domInteractive,domComplete:t.performance&&t.performance.timing.domComplete,domContentLoadedEventStart:t.performance&&t.performance.timing.domContentLoadedEventStart,domContentLoadedEventEnd:t.performance&&t.performance.timing.domContentLoadedEventEnd,domainLookupEnd:t.performance&&t.performance.timing.domainLookupEnd,domainLookupStart:t.performance&&t.performance.timing.domainLookupStart,fetchStart:t.performance&&t.performance.timing.fetchStart,loadEventStart:t.performance&&t.performance.timing.loadEventStart,loadEventEnd:t.performance&&t.performance.timing.loadEventEnd,navigationStart:t.performance&&t.performance.timing.navigationStart,requestStart:t.performance&&t.performance.timing.requestStart},c.getTimings())})},n(e("../gmail-element-getter"));var u=n(e("./isIntegratedViewGmail")),r=e("./add-nav-item")}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../gmail-element-getter":532,"./add-nav-item":499,"./isIntegratedViewGmail":513,"@babel/runtime/helpers/interopRequireDefault":15}],512:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/includes")),u=function(d,a){if(!a&&d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var p=s(a);if(p&&p.has(d))return p.get(d);var f={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in d)if(_!=="default"&&Object.prototype.hasOwnProperty.call(d,_)){var y=b?Object.getOwnPropertyDescriptor(d,_):null;y&&(y.get||y.set)?Object.defineProperty(f,_,y):f[_]=d[_]}return f.default=d,p&&p.set(d,f),f}(e("ud")),r=e("../../../constants/router"),c=e("../../../lib/dom/simulate-mouse-event");t(e("./get-url-object"));function s(d){if(typeof WeakMap!="function")return null;var a=new WeakMap,p=new WeakMap;return(s=function(f){return f?p:a})(d)}var o=u.defn(v,async function(d,a,p){if(a[0]==="#"){if(p)throw new Error("params parameter can't be passed with resolved URL");a=a.slice(1)}if((0,n.default)(r.NATIVE_ROUTE_IDS,a)){if(d.isUsingSyncAPI()&&p&&typeof p!="string"){let _=p.threadID;if(_&&typeof _=="string"){let y=parseInt(_,16);if(!isNaN(y)){let g=await d.getSyncThreadIdForOldGmailThreadId(_);p={...p,threadID:"#"+g}}}}let f=d.createLink(a,p),b=document.createElement("a");b.style.display="none",b.href=f,document.body.appendChild(b),(0,c.simulateClick)(b),b.remove()}else{let f=d.createLink(a,p);window.location.hash=f}});i.default=o},{"../../../constants/router":492,"../../../lib/dom/simulate-mouse-event":712,"./get-url-object":508,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":324,ud:455}],513:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var t;let n=document.querySelector("div[role=navigation]");return Boolean(n==null||(t=n.firstElementChild)===null||t===void 0?void 0:t.classList.contains("Xa"))}},{}],514:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/escape")),u=(function(f,b){if(!b&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var _=o(b);if(_&&_.has(f))return _.get(f);var y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in f)if(m!=="default"&&Object.prototype.hasOwnProperty.call(f,m)){var w=g?Object.getOwnPropertyDescriptor(f,m):null;w&&(w.get||w.set)?Object.defineProperty(y,m,w):y[m]=f[m]}y.default=f,_&&_.set(f,y)}(e("kefir")),t(e("kefir-stopper"))),r=t(e("../../../lib/dom/make-element-child-stream")),c=t(e("../../../lib/dom/querySelectorOrFail")),s=t(e("../../../lib/dom/make-mutation-observer-chunked-stream"));function o(f){if(typeof WeakMap!="function")return null;var b=new WeakMap,_=new WeakMap;return(o=function(y){return y?_:b})(f)}function d(f){let b=[],_=f.split(/[\s+]/g),y=f.match(/[\s+]/g);for(var g=0;g<_.length;g++)b.push('<span class="wh">'+(0,n.default)(a(_[g]))+"</span>"),y&&y[g]&&b.push(p(y[g]));return b.push(" :"),b.join("")}function a(f){switch(f.toLowerCase()){case"shift":return"<Shift>";case"ctrl":return"<Ctrl>";case"alt":return"<Alt>";case"meta":case"command":return"<\u2318>";case"mod":return/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"<\u2318>":"<Ctrl>";default:return f}}function p(f){switch(f){case" ":return'<span class="wb">then</span> ';case"+":return' <span class="wb">+</span> ';default:return""}}i.default=class{constructor(){this._appId=null,this._appName=null,this._appIconUrl=null,this._stopper=(0,u.default)(),this._shortcuts=new Set,this._monitorKeyboardHelp()}destroy(){this._stopper.destroy(),this._shortcuts.clear()}set(f,b,_,y){this._initializeAppValues(b,_,y),this._shortcuts.add(f)}delete(f){this._shortcuts.delete(f)}_initializeAppValues(f,b,_){this._appId||(this._appId=f),this._appName||(this._appName=b),this._appIconUrl||(this._appIconUrl=_)}_monitorKeyboardHelp(){(0,r.default)(document.body).map(f=>f.el).filter(f=>f&&f.classList&&f.classList.contains("wa")).flatMap(f=>(0,s.default)(f,{attributes:!0,attributeFilter:["class"]}).filter(()=>!f.classList.contains("aou")).toProperty(()=>null).map(()=>f)).takeUntilBy(this._stopper).onValue(f=>this._renderHelp(f))}_renderHelp(f){if(this._shortcuts.size===0)return;this._shortcuts.keys();var b=this._renderHeader(),_=this._renderTable(),y=_.querySelectorAll("tbody tbody"),g=0;this._shortcuts.forEach(C=>{this._renderShortcut(y[g%2],C),g++});let m=(0,c.default)(f,".aov"),w=m.parentElement;if(!w)throw new Error("Could not find parent");w.insertBefore(b,m),w.insertBefore(_,m)}_renderHeader(){let f=document.createElement("div");if(f.setAttribute("class","aov  aox"),f.innerHTML=['<div class="aow">','<span class="inboxsdk__shortcutHelp_title">',(0,n.default)(this._appName||this._appId)+" keyboard shortcuts","</span>","</div>"].join(""),this._appIconUrl){let b=document.createElement("img");this._appIconUrl&&(b.src=this._appIconUrl),b.setAttribute("class","inboxsdk__icon");let _=(0,c.default)(f,".inboxsdk__shortcutHelp_title");_.insertBefore(b,_.firstChild)}return f}_renderTable(){var f=document.createElement("table");return f.setAttribute("cellpadding","0"),f.setAttribute("class","cf wd inboxsdk__shortcutHelp_table"),f.innerHTML=["<tbody>","<tr>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>","</tr","</tbody>"].join(""),f}_renderShortcut(f,b){var _=document.createElement("tr");_.innerHTML=['<td class="wg Dn"> ',d(b.chord),"</td>",'<td class="we Dn"> ',(0,n.default)(b.description||""),"</td>"].join(""),f.appendChild(_)}}},{"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,"lodash/escape":313}],515:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(c){if(await u.default.waitForGmailModeToSettle(),u.default.isStandaloneComposeWindow()||u.default.isStandaloneThreadWindow())throw new Error("Can not open new compose while in standalone window");u.default.getComposeButton()||await(0,r.default)(()=>!!u.default.getComposeButton());let s=u.default.getComposeButton();if(!s)throw new Error("Could not find compose button");(0,n.simulateClick)(s)};var n=e("../../../lib/dom/simulate-mouse-event"),u=t(e("../gmail-element-getter")),r=t(e("../../../lib/wait-for"))},{"../../../lib/dom/simulate-mouse-event":712,"../../../lib/wait-for":742,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15}],516:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(d,a){let p;if(d.isUsingSyncAPI()){let f=await(0,c.default)(d,a),{threads:b}=await(0,u.default)(d,"rfc822msgid:"+f);if(b.length===0)throw new Error("Failed to get sync message id");let _=b[0],y=_.extraMetaData.syncMessageData.find(m=>m.oldMessageID===a);if(!y)throw new Error("Failed to find syncMessageData");let{syncMessageID:g}=y;p=o(window.location.hash,_.syncThreadID,g)}else p=s(window.location.hash,a);window.location.hash=p},i.makeNewHash=s,i.makeNewSyncHash=o;var n=t(e("querystring")),u=t(e("../../../driver-common/getSyncThreadsForSearch")),r=t(e("./encodeDraftUrlId")),c=t(e("./get-rfc-message-id-for-gmail-message-id"));function s(d,a){d="#"+d.replace(/^#/,"");let[p,f]=d.split("?"),b=n.default.parse(f);return b.compose?b.compose+=","+a:b.compose=a,p+"?"+n.default.stringify(b)}function o(d,a,p){d="#"+d.replace(/^#/,"");let[f,b]=d.split("?"),_=n.default.parse(b);return _.compose=(0,r.default)(a,p),f+"?"+n.default.stringify(_)}},{"../../../driver-common/getSyncThreadsForSearch":672,"./encodeDraftUrlId":503,"./get-rfc-message-id-for-gmail-message-id":506,"@babel/runtime/helpers/interopRequireDefault":15,querystring:410}],517:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o){u.default.waitForGmailModeToSettle().then(function(){u.default.isStandalone()||function(d,a){d.getRouteViewDriverStream().scan((p,f)=>{let b,_;return p&&p.gmailRouteView&&p.gmailRouteView.isCustomRouteBelongingToApp()&&(b=p.gmailRouteView.getRouteID(),_=p.gmailRouteView.getParams()),{gmailRouteView:f,lastCustomRouteID:b,lastCustomRouteParams:_}},void 0).changes().onValue(p=>{let{gmailRouteView:f,lastCustomRouteID:b,lastCustomRouteParams:_}=p;c(f,b,_,d,a)})}(s,o)})},t(e("kefir"));var n=e("ud"),u=t(e("../gmail-element-getter")),r=t(e("../../../lib/dom/on-mouse-down-and-up"));let c=(0,n.defn)(v,function(s,o,d,a,p){o&&s.getRouteType()===p.RouteTypes.THREAD&&function(f,b){let _=u.default.getThreadBackButton();!_||(0,r.default)(_).takeUntilBy(b.getStopper()).filter(y=>!y.defaultPrevented).onValue(y=>{window.history.back(),y.preventDefault(),y.stopImmediatePropagation()})}(0,s)})},{"../../../lib/dom/on-mouse-down-and-up":702,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],518:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){t.createCustomSearchTerm(n.term),t.ajaxInterceptStream.filter(u=>u.type==="searchQueryForReplacement"&&u.term===n.term).onValue(u=>{Promise.resolve(n.termReplacer({})).then(r=>{if(typeof r!="string")throw new Error("termReplacer response must be a string");let c="("+r+")",s=u.query.replace(n.term,()=>c);t.setSearchQueryReplacement(u.query,s)})})}},{}],519:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(p,f){let b="inboxsdk__suggestions_"+(""+Date.now()+Math.random()).replace(/\D+/g,""),_=p.getPageCommunicator();_.registerSuggestionsModifier(b);let y=_.ajaxInterceptStream.filter(A=>A.type==="suggestionsRequest").flatMapLatest(A=>{let{query:E}=A;return r.default.fromPromise(Promise.resolve(f(E))).flatMap(D=>{try{let P=(0,a.default)(p,D).map(j=>({...j,providerId:b,id:`${Date.now()}-${Math.random()}`}));return r.default.constant(P)}catch(P){return r.default.constantError(P)}}).mapErrors(D=>(p.getLogger().error(D),[])).map(D=>({query:E,suggestions:D}))}).onValue(A=>{_.provideAutocompleteSuggestions(b,A.query,A.suggestions)}).map(A=>A.suggestions),g=p.getRouteViewDriverStream().toProperty(()=>null).map(()=>d.default.getSearchInput()).filter(Boolean).take(1),m=g.flatMapLatest(A=>r.default.fromEvents(A,"focus")).map(()=>d.default.getSearchSuggestionsBoxParent()).filter(Boolean).flatMapLatest(s.default).map(A=>A.el.firstElementChild).take(1).toProperty(),w=m.flatMap(A=>(0,o.default)(A,{childList:!0}).toProperty(()=>null)).map(()=>null),C=g.flatMap(A=>(0,c.default)(document,"keydown").filter(E=>E.keyCode==13&&E.target===A)),I=m.sampledBy(w).map(A=>Array.from(A.children).filter(E=>E.getElementsByClassName(b).length>0));I.onValue(A=>{if(A[0]&&A[0].previousElementSibling){let E=A[0].previousElementSibling.firstElementChild;E&&E.classList.add("inboxsdk__suggestions_separator_before");let D=A[0].firstElementChild;D&&D.classList.add("inboxsdk__suggestions_separator_after")}});let S=I.flatMapLatest(A=>r.default.merge(A.map(E=>r.default.merge([(0,c.default)(E,"click"),C.filter(()=>E.classList.contains("gssb_i"))]).map(D=>({event:D,row:E}))))),O=r.default.merge([y,g.flatMapLatest(A=>r.default.fromEvents(A,"blur")).map(()=>[])]).toProperty();r.default.combine([S,g],[O]).onValue(A=>{let[{event:E,row:D},P,j]=A,k=D.querySelector("span[data-inboxsdk-suggestion]"),M=k?JSON.parse(k.getAttribute("data-inboxsdk-suggestion")||"null"):null,R=(0,n.default)(()=>{E.stopImmediatePropagation(),E.preventDefault(),P.blur(),P.value=""});if(M){let{id:V}=M,T=(0,u.default)(j,U=>U.id===V);T||p.getLogger().error(new Error("Failed to find suggestion by id")),T&&T.onClick&&(R(),T.onClick.call(null))}M&&M.routeName?(R(),p.goto(M.routeName,M.routeParams)):M&&M.externalURL&&(R(),window.open(M.externalURL))})};var n=t(e("lodash/once")),u=t(e("lodash/find")),r=t(e("kefir")),c=t(e("../../../lib/from-event-target-capture")),s=(e("../../../lib/dom/simulate-mouse-event"),t(e("../../../lib/dom/make-element-child-stream"))),o=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),d=t(e("../gmail-element-getter")),a=t(e("../../../lib/copyAndValidateAutocompleteResults"))},{"../../../lib/copyAndValidateAutocompleteResults":686,"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/from-event-target-capture":716,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/find":315,"lodash/once":347}],520:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(_,y,g){return p.flatMapLatest(m=>m(_,y,g))};var n=t(e("kefir")),u=t(e("ud-kefir")),r=(t(e("../../../lib/stream-wait-for")),t(e("../../../lib/dom/make-mutation-observer-chunked-stream"))),c=t(e("../../../lib/dom/make-element-child-stream")),s=t(e("../../../lib/dom/element-view-mapper")),o=t(e("../../../lib/dom/make-element-stream-merger")),d=t(e("../gmail-element-getter")),a=t(e("../views/gmail-compose-view")),p=(t(e("../../../lib/logger")),(0,u.default)(v,function(_,y,g){return n.default.fromPromise(d.default.waitForGmailModeToSettle()).flatMap(()=>{var m,w=!1;return d.default.isStandaloneComposeWindow()?(m=f(()=>d.default.StandaloneCompose.getComposeWindowContainer()),w=!0):m=d.default.isStandaloneThreadWindow()?n.default.never():f(()=>d.default.getComposeWindowContainer()).flatMap(C=>{var I=C.el.querySelector("div.AD");return I?(0,c.default)(I).takeUntilBy(C.removalStream).map(b("composeFullscreenStateChanged")):n.default.never()}).merge(d.default.getFullscreenComposeWindowContainerStream().flatMap(C=>{let{el:I,removalStream:S}=C;return(0,c.default)(I).takeUntilBy(S)}).map(b("composeFullscreenStateChanged")).map(C=>{let{el:I,removalStream:S}=C,O=I.querySelector("[role=dialog] div.aaZ");if(!O)return null;var A=(0,r.default)(O,{childList:!0}).filter(()=>O.childElementCount===0).map(()=>null);return{el:I,removalStream:S.merge(A).take(1)}}).filter(Boolean)).flatMap(C=>{if(!C)throw new Error("Should not happen");let I=C.el.querySelector("[role=dialog]");return I&&I.querySelector("form")?n.default.constant({el:I,removalStream:C.removalStream}):n.default.never()}).flatMap((0,o.default)()),m.map((0,s.default)(C=>new a.default(C,g,_,{isStandalone:w,isInlineReplyForm:!1})))}).merge(y.flatMap(m=>m.getReplyElementStream().map((0,s.default)(w=>new a.default(w,g,_,{isStandalone:!1,isInlineReplyForm:!0}))))).flatMap(m=>m.ready())}));function f(_){return n.default.interval(2e3).map(_).filter().take(1).flatMap(y=>(0,c.default)(y))}function b(_){return function(y){let g=y&&y.el&&y.el.querySelector&&y.el.querySelector("[role=dialog]");return g&&g.dispatchEvent(new CustomEvent(_,{bubbles:!1,cancelable:!1,detail:null})),y}}},{"../../../lib/dom/element-view-mapper":690,"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-element-stream-merger":698,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/logger":729,"../../../lib/stream-wait-for":739,"../gmail-element-getter":532,"../views/gmail-compose-view":554,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"ud-kefir":454}],521:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(d,a){let p=a.getCustomRouteIDs(),f=a.getCustomListRouteIDs(),b=a.getCustomListSearchStringsToRouteIds(),_=(0,s.default)(document.location.href).hash,y=null;a.getStopper().onValue(()=>{y&&y.destroy()});let g=_,m={},w=n.default.fromEvents(window,"hashchange").filter(S=>!S.oldURL.match(/#inboxsdk-fake-no-vc$/)).map(S=>({new:(0,s.default)(S.newURL),old:(0,s.default)(S.oldURL)})).filter(S=>S.new.hash!==S.old.hash).map(S=>S.new).map(S=>{let{hash:O,name:A}=S;for(let E of p){let D=(0,o.default)(E,O);if(D)return{urlObject:S,type:"CUSTOM",routeID:D}}for(let[E]of f){let D=(0,o.default)(E,A);if(D)return{urlObject:S,type:"CUSTOM_LIST_TRIGGER",routeID:D}}return d.isNativeRoute(S.name)?{urlObject:S,type:"NATIVE"}:{urlObject:S,type:"OTHER_APP_CUSTOM"}}),C=w.filter(S=>{let{type:O}=S;return O!=="NATIVE"}),I=w.filter(S=>{let{type:O}=S;return O==="NATIVE"}).filter(S=>{let{urlObject:O}=S,A=_;return _=O.hash,A===O.hash}).filter(S=>{let{urlObject:O}=S;return O.hash!==g});return n.default.merge([C,I,r.default.getMainContentElementChangedStream().map(S=>({urlObject:(0,s.default)(document.location.href),type:"NATIVE"})).filter(S=>d.isNativeRoute(S.urlObject.name))]).map(S=>{let{type:O,urlObject:A}=S;if(O==="NATIVE"&&A.name==="search"){let E=b.get(A.params[0]);if(E){let D=r.default.getSearchInput();if(!D)throw new Error("Should not happen");if(D.value="",A.params.length===1||A.params.length===2&&A.params[1][0]==="p")return a.hashChangeNoViewChange("#"+E+(A.params[1]?"/"+A.params[1]:"")),{type:"CUSTOM_LIST",urlObject:A,routeID:E}}}return S}).map(S=>{let{urlObject:O}=S;return m[O.hash]||(m[O.hash]={data:{}}),m[O.hash].lastUsedTimestamp=Date.now(),Object.keys(m).length>50&&(m=Object.keys(m).sort((A,E)=>m[E].lastUsedTimestamp-m[A].lastUsedTimestamp).slice(0,25).reduce((A,E)=>({...A,[E]:m[E]}),{})),{...S,cachedRouteData:m[O.hash].data}}).map(S=>{if(S.type==="NATIVE"||S.type==="CUSTOM_LIST")a.showNativeRouteView();else if(S.type==="CUSTOM_LIST_TRIGGER")return void a.showCustomThreadList(S.routeID,(0,u.default)(f,S.routeID),S.urlObject.params);return new c.default(S,d,a)}).filter(Boolean).map(S=>(y&&y.destroy(),y=S,g=(0,s.default)(document.location.href).hash,S))};var n=t(e("kefir")),u=t(e("../../../../common/get-or-fail")),r=t(e("../gmail-element-getter")),c=t(e("../views/gmail-route-view/gmail-route-view")),s=t(e("./get-url-object")),o=t(e("../../../lib/routeIDmatchesHash"))},{"../../../../common/get-or-fail":476,"../../../lib/routeIDmatchesHash":735,"../gmail-element-getter":532,"../views/gmail-route-view/gmail-route-view":589,"./get-url-object":508,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],522:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){let c=document.createElement("div");c.className="inboxsdk__appid_warning",c.innerHTML=`
<div class="inboxsdk__appid_warning_main">
  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>
  <div>You've loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>
</div>
<a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>
<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />
`;let s=r.createTopMessageBarDriver((0,u.default)(n.default,{el:c})),o=c.querySelector(".inboxsdk__x_close_button");if(!o)throw new Error("Should not happen");o.addEventListener("click",function(d){s.remove()})};var n=t(e("kefir")),u=t(e("kefir-cast"));t(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":715,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156}],523:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../gmail-element-getter")),r=e("../../../lib/dom/simulate-mouse-event"),c=(0,n.defn)(v,function(s,o){let d=u.default.getContentSectionElement();if(!d)return;let a=document.getSelection();for(let _=0;_<a.rangeCount;_++){let y=a.getRangeAt(_);if(typeof y.intersectsNode=="function"&&y.intersectsNode(d)){a.removeAllRanges();break}}(function(_){let y=_.querySelector(".inboxsdk__custom_view");return y||(y=document.createElement("div"),y.classList.add("inboxsdk__custom_view"),_.appendChild(y),y)})(d).appendChild(o);let f=d.children;Array.prototype.forEach.call(f,_=>{_.classList.contains("inboxsdk__custom_view")||(_.style.display="none")});let b=u.default.getCompanionSidebarIconContainerElement();if(b){let _=b.querySelector(".J-KU-KO");_&&(0,r.simulateClick)(_)}document.body.classList.add("inboxsdk__custom_view_active")});i.default=c},{"../../../lib/dom/simulate-mouse-event":712,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],524:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(m,w,C,I){let S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:_,O=g(m,w,C,S),A=document.location.hash,E=u.default.getMainContentElementChangedStream().changes().take(1),D=u.default.getSearchInput();if(!D)throw new Error("could not find search input");D.value="",D.style.visibility="hidden",E.onValue(()=>{D.style.visibility="visible"});let P="#search/"+[O,...I].map(encodeURIComponent).join("/");window.history.replaceState(null,null,P);let j=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+A,newURL:document.location.href.replace(/#.*$/,"")+P});window.dispatchEvent(j)};var n=t(e("lodash/find")),u=(t(e("kefir")),t(e("../gmail-element-getter"))),r=a(e("../gmail-response-processor")),c=a(e("../gmail-sync-response-processor")),s=t(e("../../../lib/isStreakAppId")),o=t(e("immutability-helper"));function d(m){if(typeof WeakMap!="function")return null;var w=new WeakMap,C=new WeakMap;return(d=function(I){return I?C:w})(m)}function a(m,w){if(!w&&m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var C=d(w);if(C&&C.has(m))return C.get(m);var I={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in m)if(O!=="default"&&Object.prototype.hasOwnProperty.call(m,O)){var A=S?Object.getOwnPropertyDescriptor(m,O):null;A&&(A.get||A.set)?Object.defineProperty(I,O,A):I[O]=m[O]}return I.default=m,C&&C.set(m,I),I}let p=new Map,f=50;function b(m,w){return m.length>f&&w.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router).")),m.slice(0,f)}function _(m,w){return null}function y(m){if(typeof m=="string")return m[0]=="<"?{rfcId:m}:{gtid:m};if(m){let w={gtid:typeof m.gmailThreadId=="string"&&m.gmailThreadId,rfcId:typeof m.rfcMessageId=="string"&&m.rfcMessageId};if(w.gtid||w.rfcId)return w}}let g=(m,w,C,I)=>{let S=p.get(C);if(S)return S;let O=Date.now()+"-"+Math.random();return m.getPageCommunicator().setupCustomListResultsQuery(O),m.getPageCommunicator().ajaxInterceptStream.filter(A=>A.type==="searchForReplacement"&&A.query===O).onValue(A=>{let{start:E}=A;(async()=>{let D,P;m.signalCustomThreadListActivity(w);try{let W=await Promise.resolve(C(E,f)),Q=function(X,oe,J){if(Array.isArray(J)){X.deprecationWarning("Returning an array from a handleCustomListRoute handler","a CustomListDescriptor object");let he=b(J,X);return{total:he.length,threads:he}}if(typeof J=="object"){let{total:he,hasMore:ae,threads:ue}=J;if(!Array.isArray(ue))throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');if(he!=null&&ae!=null)throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');if(typeof he=="number")return{total:he,threads:b(ue,X)};if(typeof ae=="boolean"){let ge=b(ue,X);return{total:ae?"MANY":oe+ue.length,threads:ge}}throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).')}throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).")}(m.getLogger(),E,W);D=Q.total,P=Q.threads}catch(W){m.getLogger().error(W),D=0,P=[]}let j=P.map(y).filter(Boolean),k=(await Promise.all(j.map(W=>function(Q,X,oe){if(typeof X.rfcId=="string")return Promise.resolve(X);if(typeof X.gtid=="string"){let J=X.gtid;return Q.getRfcMessageIdForGmailThreadId(J).then(he=>({gtid:J,rfcId:he}),he=>oe(J,he))}throw new Error("Should not happen")}(m,W,I)))).filter(Boolean),M=k.length>0?k.map(W=>{let{rfcId:Q}=W;return"rfc822msgid:"+Q}).join(" OR "):""+Math.random()+Date.now();m.getPageCommunicator().setCustomListNewQuery({newQuery:M,newStart:0,query:O,start:E});let R=m.getPageCommunicator().ajaxInterceptStream.filter(W=>W.type==="searchResultsResponse"&&W.query===O&&W.start===E).map(W=>W.response).take(1).toPromise(),V=(await Promise.all(k.map(W=>function(Q,X,oe){return typeof X.gtid=="string"?Promise.resolve(X):Q.getGmailThreadIdForRfcMessageId(X.rfcId).then(J=>({gtid:J,rfcId:X.rfcId}),J=>oe(X.rfcId,J))}(m,W,I)))).filter(Boolean),T=await R,U;m.signalCustomThreadListActivity(w);try{if(m.isUsingSyncAPI()){let W=c.extractThreadsFromSearchResponse(T),Q=V.map(oe=>{let{gtid:J}=oe;return(0,n.default)(W,he=>he.oldGmailThreadID===J)}).filter(Boolean),X;if(W.length!==Q.length||W.some((oe,J)=>oe!==Q[J])){let oe=Date.now();X=Q.map((J,he)=>{let ae=Array.isArray(J.rawResponse),ue=String(oe-he),ge=(0,o.default)(J,{rawResponse:ae?{0:{2:{$set:ue},7:{$set:ue}}}:{1:{3:{$set:ue},8:{$set:ue}}}});return(ae?J.rawResponse[0][4]:J.rawResponse[1][5])&&(ge=(0,o.default)(ge,{rawResponse:ae?{0:{4:N=>N.map(F=>({...F,6:ue,17:ue,30:ue}))}}:{1:{5:N=>N.map(F=>({...F,7:ue,18:ue,31:ue}))}}})),ge})}else X=W;U=c.replaceThreadsInSearchResponse(T,X,{start:E,total:D})}else{let W=r.extractThreads(T),Q=V.map(X=>{let{gtid:oe}=X;return(0,n.default)(W,J=>J.gmailThreadId===oe)}).filter(Boolean);U=r.replaceThreadsInResponse(T,Q,{start:E,total:D})}m.getPageCommunicator().setCustomListResults(O,U)}catch(W){m.getLogger().error(W,{responseReplacementFailure:!0,idPairsLength:V.length});let Q=m.getButterBar();Q&&Q.showError({text:"Failed to load custom thread list"});try{m.isUsingSyncAPI()?m.getPageCommunicator().setCustomListResults(O,c.replaceThreadsInSearchResponse(T,[],{start:E,total:D})):m.getPageCommunicator().setCustomListResults(O,r.replaceThreadsInResponse(T,[],{start:E,total:D}))}catch(X){m.getLogger().error(X),m.getPageCommunicator().setCustomListResults(O,null)}return}setTimeout(()=>{let W=document.querySelector(".vY .vX.UC");if(W&&W.style.display!=="none"&&/#\d+/.test(W.textContent)){let Q=(0,s.default)(m.getAppId());m.getLogger().error(new Error("Gmail error with custom thread list"),{message:W.textContent,completedIDPairsLength:V.length,response:Q?T:null,newResponse:Q?U:null})}},1e3)})().catch(D=>m.getLogger().error(D))}),m.getCustomListSearchStringsToRouteIds().set(O,w),p.set(C,O),O}},{"../../../lib/isStreakAppId":728,"../gmail-element-getter":532,"../gmail-response-processor":536,"../gmail-sync-response-processor":537,"@babel/runtime/helpers/interopRequireDefault":15,"immutability-helper":149,kefir:158,"lodash/find":315}],525:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){let c=n.default.getContentSectionElement();!c||(Array.prototype.forEach.call(c.children,s=>{s.style.display=""}),document.body.classList.contains("inboxsdk__custom_view_active")&&(document.body.classList.remove("inboxsdk__custom_view_active"),(0,u.default)()))};var n=t(e("../gmail-element-getter")),u=t(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":715,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15}],526:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o){(0,r.default)(()=>c.default.getCompanionSidebarIconContainerElement()).map(d=>d.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt")||(s.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found")),null)).filter().flatMap(u.default).filter(d=>{let{el:a}=d;return a.getAttribute("role")==="tab"&&(a.getAttribute("data-tooltip")||a.getAttribute("aria-label"))===o}).takeUntilBy(s.getStopper()).onValue(d=>{let{el:a}=d;(a.classList.contains("J-KU-KO")||a.classList.contains("bse-bvF-I-KO")||a.classList.contains("aT5-aOt-I-KO"))&&(0,n.simulateClick)(a),a.style.display="none"}).onError(d=>{s.getLogger().error(d,"error in suppressAddon")})};var n=e("../../../lib/dom/simulate-mouse-event"),u=t(e("../../../lib/dom/make-element-child-stream")),r=t(e("../../../lib/stream-wait-for")),c=t(e("../gmail-element-getter"))},{"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/stream-wait-for":739,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15}],527:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){u.getAppId()!=="sdk_streak_21e9788951"||!t.fetch||n||(n=!0,u.getAttachmentCardViewDriverStream().filter(r=>r.getAttachmentType()==="FILE").filter(()=>Math.random()<.01).onValue(async r=>{let c=r._getDownloadLink(),s;try{s=await r.getDownloadURL()}catch(o){return void u.getLogger().error(o,{reason:"problem getting download url",downloadLinkBefore:c,downloadLinkAfter:r._getDownloadLink()})}s?u.getLogger().eventSdkPassive("testing.getDownloadURL success"):u.getLogger().error(new Error("no download url found"),{downloadLinkBefore:c,downloadLinkAfter:r._getDownloadLink()})}))};let n=!1}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],528:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud");t(e("kefir")),t(e("./getSyncThreadFromSyncThreadId"));var u=(0,n.defn)(v,class{constructor(r){this._driver=r,this._composeViews=new Set,this._driver.getComposeViewDriverStream().onValue(c=>{this._composeViews.add(c),c.getStopper().onValue(()=>{this._composeViews.delete(c)})})}getThreadIdForThreadRow(r,c){{let s=this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(c[0]);if(s)return s}if(r.getVisibleMessageCount()==0&&r.getVisibleDraftCount()>0){let s=this._findComposeForThreadRow(r);if(s)return s.getMessageID()}return null}async getDraftIdForThreadRow(r){if(r.getVisibleMessageCount()>0||r.getVisibleDraftCount()==0)return Promise.resolve(null);let c=this._findComposeForThreadRow(r);if(c)return c.getDraftID();let{draftID:s}=await this._driver.getDraftIDForMessageID(r.getThreadID());return s}_findComposeForThreadRow(r){let c=[],s=r.getSubject();for(let o of this._composeViews)s===o.getSubject()&&c.push(o);return c.length==1?c[0]:null}});i.default=u},{"./getSyncThreadFromSyncThreadId":510,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],529:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){(function(c){c.getComposeViewDriverStream().onValue(s=>{var o=function(d,a){var p=d.getLogger(),f={isInlineReply:a.isInlineReplyForm(),isReply:a.isReply()};return function(b,_){p.eventSite(b,{...f,..._})}}(c,s);o("compose open"),function(d,a){(function(p,f){var b=p.getElement().querySelector(".a1");b&&n.default.fromEvents(b,"mousedown").takeUntilBy(p.getStopper()).onValue(()=>{f("attachment button clicked"),function(_,y){(0,u.default)(document.body).map(g=>g.el).filter(g=>g&&g.type==="file").take(1).flatMap(g=>n.default.fromEvents(g,"change").map(()=>!0).merge(n.default.fromEvents(_.getBodyElement(),"focus").map(()=>!1).delay(1e3))).take(1).filter(Boolean).takeUntilBy(_.getStopper()).onValue(()=>y("attachment uploaded"))}(p,f)})})(d,a),function(p,f){var b=p.getElement().querySelector(".aA7");b&&n.default.fromEvents(b,"mousedown").takeUntilBy(p.getStopper()).onValue(()=>{f("drive button clicked"),function(_,y){var g=_.getBodyElement().querySelectorAll(".gmail_drive_chip").length;(0,u.default)(document.body).map(m=>m.el).filter(m=>m&&m.classList.contains("picker-dialog")).take(1).flatMap(m=>n.default.fromEvents(_.getBodyElement(),"focus").delay(1e3).map(()=>_.getBodyElement()?_.getBodyElement().querySelectorAll(".gmail_drive_chip").length:0).map(w=>g<w).take(1)).take(1).filter(Boolean).takeUntilBy(_.getStopper()).onValue(()=>y("drive file added"))}(p,f)})}(d,a)}(s,o)})})(r),function(c){(0,u.default)(document.body).map(s=>s.el).filter(s=>s.getAttribute&&s.getAttribute("role")==="alertdialog").takeUntilBy(c.getStopper()).onValue(s=>{var o=s.querySelector("[role=heading]");if(o&&o.textContent.indexOf("exceeds the 25MB")>-1)c.getLogger().eventSite("large attachment suggest drive");else{var d=s.querySelector(".Kj-JD-Jz");d&&d.textContent.indexOf("exceeds the maximum")>-1&&c.getLogger().eventSite("large attachment from drag and drop")}})}(r),function(c){c.getComposeViewDriverStream().flatMapLatest(()=>n.default.fromEvents(document.body,"dragenter").filter(s=>s.toElement).filter(s=>s.toElement.classList.contains("aC7")||s.toElement.classList.contains("aC9")).take(1)).takeUntilBy(c.getStopper()).onValue(()=>c.getLogger().eventSite("compose drag file")),c.getComposeViewDriverStream().flatMapLatest(()=>n.default.fromEvents(document.body,"drop").filter(s=>s.toElement).filter(s=>s.toElement.classList.contains("aC7")||s.toElement.classList.contains("aC9")).take(1)).takeUntilBy(c.getStopper()).onValue(()=>c.getLogger().eventSite("compose drop file"))}(r)};var n=t(e("kefir")),u=t(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":697,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],530:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(document.head.hasAttribute("data-inboxsdk-gmail-style-tracker")||r.default.isStandalone())return;document.head.setAttribute("data-inboxsdk-gmail-style-tracker","true");let s=null,o=null;function d(){let a=function(){let f=document.querySelector(".TO .TN");if(!f)return n.default.error(new Error("Failed to find nav item outer element")),"compact";let b=parseInt(getComputedStyle(f).getPropertyValue("padding-top"),10);return b>=6?"comfortable":b>=3?"cozy":"compact"}();s!==a&&(s&&document.body.classList.remove("inboxsdk__gmail_density_"+s),s=a,document.body.classList.add("inboxsdk__gmail_density_"+s));let p=function(){let f=document.querySelector(".aio");if(!f)return n.default.error(new Error("Failed to find nav item")),!1;let b=getComputedStyle(f).getPropertyValue("color"),_=c.exec(b);if(!_)return n.default.error(new Error("Failed to read color string"),{colorString:b}),!1;let y=+_[1],g=+_[2],m=+_[3];return y===32&&g===33&&m===36?!1:(y===g&&y===m||n.default.error(new Error("Nav item color not grayscale"),{r:y,g,b:m}),y>128)}();o!==p&&(o=p,o?document.body.classList.add("inboxsdk__gmail_dark_theme"):document.body.classList.remove("inboxsdk__gmail_dark_theme"))}(0,u.default)(()=>document.querySelector(".TO .TN")&&document.querySelector(".aio")).then(()=>{let a=new MutationObserver(d),p={characterData:!0,childList:!0};Array.from(document.styleSheets).forEach(f=>{f.ownerNode.tagName=="STYLE"&&a.observe(f.ownerNode,p)}),d()}).catch(a=>{n.default.error(a)})};var n=t(e("../../../lib/logger")),u=t(e("../../../lib/wait-for")),r=t(e("../gmail-element-getter"));let c=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../lib/logger":729,"../../../lib/wait-for":742,"../gmail-element-getter":532,"@babel/runtime/helpers/interopRequireDefault":15}],531:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/find")),u=t(e("lodash/uniqBy"));t(e("../../../../common/censorHTMLstring")),t(e("../../../lib/logger")),t(e("../../../lib/wait-for")),i.default=class{constructor(r){this._failedWaitFor=!1,this._userEmail=r.getUserEmailAddress()}getUserName(){let r=document.querySelector("div.gb_w div.gb_B .gb_D");if(r)return r.textContent;let c=(0,n.default)(this.getAccountSwitcherContactList(),s=>s.emailAddress===this._userEmail);return c&&c.name!=null?c.name:this._userEmail}getAccountSwitcherContactList(){let r=Array.from(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0,1).map(s=>{let o=s.parentElement,d=o.children[0],a=o.children[1];return d&&a?{name:d.textContent,emailAddress:a.textContent}:null}).filter(Boolean),c=Array.from(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map(s=>{let o=s.children[1].textContent.match(/\S+/);if(!o)throw new Error("Failed to match");return{name:s.children[0].textContent,emailAddress:o[0]}});return(0,u.default)(r.concat(c),s=>s.emailAddress.toLowerCase())}}},{"../../../../common/censorHTMLstring":470,"../../../lib/logger":729,"../../../lib/wait-for":742,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":315,"lodash/uniqBy":360}],532:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/once")),u=function(y,g){if(!g&&y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var m=f(g);if(m&&m.has(y))return m.get(y);var w={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in y)if(I!=="default"&&Object.prototype.hasOwnProperty.call(y,I)){var S=C?Object.getOwnPropertyDescriptor(y,I):null;S&&(S.get||S.set)?Object.defineProperty(w,I,S):w[I]=y[I]}return w.default=y,m&&m.set(y,w),w}(e("kefir")),r=t(e("../../lib/dom/make-element-child-stream")),c=t(e("../../lib/dom/querySelectorOrFail")),s=t(e("./gmail-element-getter/wait-for-gmail-mode-to-settle")),o=t(e("./gmail-element-getter/get-main-content-element-changed-stream")),d=t(e("./gmail-driver/isIntegratedViewGmail")),a=t(e("../../lib/logger")),p=t(e("../../lib/wait-for"));function f(y){if(typeof WeakMap!="function")return null;var g=new WeakMap,m=new WeakMap;return(f=function(w){return w?m:g})(y)}let b={getActiveMoreMenu(){let y=document.querySelectorAll(".J-M.aX0.aYO.jQjAxd");for(let g=0;g<y.length;g++)if(y[g].style.display!=="none")return y[g];return null},getAddonSidebarContainerElement:()=>document.querySelector(".no > .nn.bnl"),getCompanionSidebarContentContainerElement:()=>document.querySelector(".brC-brG"),getCompanionSidebarIconContainerElement:()=>document.querySelector(".brC-aT5-aOt-Jw"),getComposeButton:()=>(0,d.default)()?document.querySelector(".aIH .aic div[role=button].L3"):document.querySelector("[gh=cm]"),getComposeWindowContainer:()=>document.querySelector(".dw .nH > .nH > .no"),getContentSectionElement(){let y=document.querySelector("div.nH.bkK > .nH");if((0,d.default)())return y;{let g=b.getLeftNavContainerElement(),m=g?g.nextElementSibling.children[0]:null;return y!==m&&a.default.error(new Error("getContentSectionElement old and new method inconsistency"),{elClassName:y?.className,oldMethodClassName:m?.className}),m}},getFullscreenComposeWindowContainer:()=>document.querySelector(".aSs .aSt"),getFullscreenComposeWindowContainerStream(){if(!document.body)throw new Error;return(0,r.default)(document.body).filter(y=>{let{el:g}=y;return g.classList.contains("aSs")}).flatMap(y=>{let{el:g,removalStream:m}=y;return(0,r.default)(g).takeUntilBy(m)}).filter(y=>{let{el:g}=y;return g.classList.contains("aSt")}).take(1).map(y=>{let{el:g}=y;return{el:g,removalStream:u.never()}}).toProperty()},getGtalkButtons:()=>document.querySelector(".aeN .aj5.J-KU-Jg"),getLeftNavContainerElement:()=>(0,d.default)()?document.querySelector("div[role=navigation] + div.aqn"):document.querySelector(".aeN"),getLeftNavHeightElement:()=>document.querySelector(".aeN"),getMainContentBodyContainerElement:()=>document.querySelector(".no > .nn.bkK"),getMainContentContainer:()=>document.querySelector("div.aeF > div.nH"),getMainContentElementChangedStream:(0,n.default)(function(){return(0,o.default)(this)}),getMoleParent:()=>document.body.querySelector(".dw .nH > .nH > .no"),shouldAddNavItemsInline(){if((0,d.default)())return!0;let y=document.querySelector(".aeN[role=navigation], .aeN [role=navigation]");if(!y)throw new Error("shouldAddNavItemsInline failed to find leftNavElement");return!!y.classList.contains("aZ6")},getAppMenuAsync:(0,n.default)(async()=>{if(!b.isStandalone()){await b.waitForGmailModeToSettle();let y=".aeN.WR.a6o.anZ.nH.oy8Mbf[role=navigation]",g=".aeN.WR.nH.oy8Mbf[role=navigation]";try{let m=await(0,p.default)(()=>document.querySelector(`${y}, ${g}`));return document.querySelector(y)?m:void 0}catch(m){a.default.error(m)}}}),getAppMenuContainer:()=>document.querySelector(".aqk.aql.bkL"),getSeparateSectionNavItemMenuInjectionContainer:()=>document.querySelector(".aeN"),getSameSectionNavItemMenuInjectionContainer:()=>(0,d.default)()?document.querySelector(".yJ .wT > .n3"):document.querySelector(".aeN .n3"),getRowListElements:()=>Array.from(document.querySelectorAll("[gh=tl]")),getScrollContainer:()=>document.querySelector("div.Tm.aeJ"),getSearchInput:()=>document.querySelector("form[role=search] input"),getSearchSuggestionsBoxParent:()=>document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e"),getSidebarContainerElement:()=>document.querySelector("[role=main] table.Bs > tr .y3"),getThreadBackButton(){let y;try{y=b.getToolbarElement()}catch{return null}return y.querySelector(".lS")},getThreadContainerElement:()=>document.querySelector("[role=main] .g.id table.Bs > tr"),getToolbarElement:()=>(0,c.default)(document,"[gh=tm]"),getTopAccountContainer:()=>document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)'),isGplusEnabled(){let y=b.getTopAccountContainer();return!!y&&y.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length===0},isDarkTheme:()=>document.body.classList.contains("inboxsdk__gmail_dark_theme"),isPreviewPane:()=>!!document.querySelector(".aia"),isStandalone(){return this.isStandaloneComposeWindow()||this.isStandaloneThreadWindow()},isStandaloneComposeWindow:()=>document.body.classList.contains("xE")&&document.body.classList.contains("xp"),isStandaloneThreadWindow:()=>document.body.classList.contains("aAU")&&document.body.classList.contains("xE")&&document.body.classList.contains("Su"),StandaloneCompose:{getComposeWindowContainer:()=>document.querySelector("[role=main]")},waitForGmailModeToSettle:()=>(0,s.default)().toPromise()};var _=b;i.default=_},{"../../lib/dom/make-element-child-stream":697,"../../lib/dom/querySelectorOrFail":706,"../../lib/logger":729,"../../lib/wait-for":742,"./gmail-driver/isIntegratedViewGmail":513,"./gmail-element-getter/get-main-content-element-changed-stream":533,"./gmail-element-getter/wait-for-gmail-mode-to-settle":534,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/once":347}],533:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a){let p=function(f){return f.isStandaloneComposeWindow()?u.never():(0,r.default)(()=>f.getMainContentContainer())}(a).flatMap(f=>(0,s.default)(f).filter(b=>{let{el:_}=b;return _.classList.contains("nH")}).flatMap(b=>{let{el:_,removalStream:y}=b;return(0,c.default)(_,{attributes:!0,attributeFilter:["style"]}).map(g=>(0,n.default)(g)).toProperty(()=>({target:_})).filter(d).map(g=>g.target).takeUntilBy(y)})).toProperty();return p.onValue(()=>{}),p};var n=t(e("lodash/last")),u=function(a,p){if(!p&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var f=o(p);if(f&&f.has(a))return f.get(a);var b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in a)if(y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)){var g=_?Object.getOwnPropertyDescriptor(a,y):null;g&&(g.get||g.set)?Object.defineProperty(b,y,g):b[y]=a[y]}return b.default=a,f&&f.set(a,b),b}(e("kefir")),r=t(e("../../../lib/stream-wait-for")),c=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),s=t(e("../../../lib/dom/make-element-child-stream"));function o(a){if(typeof WeakMap!="function")return null;var p=new WeakMap,f=new WeakMap;return(o=function(b){return b?f:p})(a)}function d(a){return a.target.style.display!=="none"}},{"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/stream-wait-for":739,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/last":342}],534:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/once")),u=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),r=(0,n.default)(()=>(0,u.default)(document.body,{attributes:!0,attributeFilter:["class"]}).toProperty(()=>{}).filter(()=>document.body.classList.length>0).map(()=>{}).take(1).toProperty());i.default=r},{"../../../lib/dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],535:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../lib/common-page-communicator")),u=t(e("../../lib/dom/make-mutation-observer-chunked-stream")),r=t(e("kefir"));class c extends n.default{async getMessageDate(o,d){return this._getMessageData(o,d,"data-inboxsdk-sortdate","inboxSDKtellMeThisMessageDate")}async getMessageRecipients(o,d){return this._getMessageData(o,d,"data-inboxsdk-recipients","inboxSDKtellMeThisMessageRecipients")}async _getMessageData(o,d,a,p){let f=d.getAttribute(a);if(!f){let[b,_]=this.isUsingSyncAPI()?await Promise.all([this.getBtaiHeader(),this.getXsrfToken()]):[null,null];d.dispatchEvent(new CustomEvent(p,{bubbles:!0,cancelable:!1,detail:{threadId:o,ikValue:this.getIkValue(),btaiHeader:b,xsrfToken:_}})),f=d.getAttribute(a),f||(await(0,u.default)(d,{attributes:!0,attributeFilter:[a]}).take(1).toPromise(),f=d.getAttribute(a))}return f&&f!=="error"?JSON.parse(f):null}getThreadIdForThreadRowByDatabase(o){let d=o.getAttribute("data-inboxsdk-threadid");return d||(o.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByDatabase",{bubbles:!0,cancelable:!1,detail:null})),d=o.getAttribute("data-inboxsdk-threadid")),d}getThreadIdForThreadRowByClick(o){let d=o.getAttribute("data-inboxsdk-threadid");return d||(o.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByClick",{bubbles:!0,cancelable:!1,detail:null})),d=o.getAttribute("data-inboxsdk-threadid")),d}getCurrentThreadID(o){let d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];o.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId",{bubbles:!0,cancelable:!1,detail:{isPreviewedThread:d}}));let a=o.getAttribute("data-inboxsdk-currentthreadid");if(a==null)throw new Error("Failed to read value");return a}getUserOriginalPreviewPaneMode(){return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode")}getActionTokenValue(){let o=document.head.getAttribute("data-inboxsdk-action-token-value");if(o==null)throw new Error("Failed to read value");return o}isUsingSyncAPI(){let o=document.head.getAttribute("data-inboxsdk-using-sync-api");if(o==null)throw new Error("Failed to read value");return o==="true"}isConversationViewDisabled(){return new Promise(o=>{r.default.fromEvents(document,"inboxSDKgmonkeyResponse").take(1).onValue(d=>{o(d.detail)}),document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled",{bubbles:!1,cancelable:!1,detail:null}))})}registerSuggestionsModifier(o){document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier",{bubbles:!1,cancelable:!1,detail:{providerID:o}}))}provideAutocompleteSuggestions(o,d,a){document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions",{bubbles:!1,cancelable:!1,detail:{providerID:o,query:d,suggestions:JSON.parse(JSON.stringify(a))}}))}setupCustomListResultsQuery(o){document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery",{bubbles:!1,cancelable:!1,detail:{query:o}}))}setCustomListNewQuery(o){document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery",{bubbles:!1,cancelable:!1,detail:o}))}setCustomListResults(o,d){document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults",{bubbles:!1,cancelable:!1,detail:{query:o,newResults:d}}))}createCustomSearchTerm(o){document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm",{bubbles:!1,cancelable:!1,detail:{term:o}}))}setSearchQueryReplacement(o,d){document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady",{bubbles:!1,cancelable:!1,detail:{query:o,newQuery:d}}))}registerComposeRequestModifier(o,d){let a=new Date().getTime()+"_"+d+"_"+Math.random(),p={modifierId:a};return this.isUsingSyncAPI()?p.draftID=o:p.composeid=o,document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier",{detail:p,bubbles:!1,cancelable:!1})),a}unregisterComposeRequestModifier(o,d){document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier",{detail:{keyId:o,modifierId:d},bubbles:!1,cancelable:!1}))}modifyComposeRequest(o,d,a){let p={modifierId:d,composeParams:a};this.isUsingSyncAPI()?p.draftID=o:p.composeid=o,document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified",{detail:p,bubbles:!1,cancelable:!1}))}}i.default=c},{"../../lib/common-page-communicator":685,"../../lib/dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],536:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.cleanupPeopleLine=I,i.deserialize=_,i.deserializeArray=y,i.extractGmailMessageIdFromSentEmail=d,i.extractGmailThreadIdFromMessageIdSearch=function(P){let j=_(P).value,k=E(j,"cs",M=>M[0]==="cs"&&M.length>20);return k?k[1]:null},i.extractGmailThreadIdFromSentEmail=a,i.extractMessageIdsFromThreadBatchRequest=function(P){let{value:j}=_(P);return r.default.toObj(j,C)},i.extractMessages=function(P){let{value:j}=_(P);j.length===1&&(j=j[0]);let k=r.default.toArray(j,O),M=r.default.toArray(j,A),R={};return M.forEach(V=>{R[V.messageID]=V}),k.map(V=>{let{threadID:T,messageIDs:U}=V;return{threadID:T,messages:U.map(W=>R[W])}})},i.extractThreads=function(P){return w(_(P).value)},i.extractThreadsFromDeserialized=w,i.interpretSentEmailResponse=function(P){let j=_(P).value,k=d(j),M=a(j)||k;if(!k||!M)throw new Error("Failed to read email response");return{threadID:M,messageID:k}},i.readDraftId=function(P,j){let k=_(P).value,M=r.default.toArray(k,r.default.compose(r.default.cat,r.default.filter(Array.isArray),r.default.cat,r.default.filter(R=>R[0]==="ms"&&R[1]===j),r.default.take(1),r.default.map(R=>R[60])))[0];if(M){let R=M.match(/^msg-[^:]:(\S+)$/i);return R&&R[1]}return null},i.replaceThreadsInResponse=function(P,j,k){let{start:M,total:R}=k,{value:V,options:T}=_(P),U=V.length===1&&V[0].length===2&&typeof V[0][1]=="string",W=U?V[0][0].map(F=>[F]):V,Q=[],X=[],oe=[],J=[],he=!1;W.forEach(F=>{let K=!1,H=[],$=[];F.forEach(se=>{if(R&&se[0]==="ti"){if(typeof R=="number")se[2]=se[10]=R;else if(R==="MANY"){se[2]=se[10]=1e5,se[3]=1;let pe=se[5];se[6]&&(se[6][0]=[pe,1])}}se[0]==="tb"?(he=K=!0,H.length&&(oe=H),J=$):he?$.push(se):H.push(se)}),K||(he?X.push($):Q.push(H))});let ae=function(F,K){let H=r.default.compose(r.default.map($=>$._originalGmailFormat),r.default.partition(10),(0,c.default)(($,se)=>[["tb",K+10*se,$]]));return r.default.toArray(F,H)}(j,M);oe.length&&(ae[0]=oe.concat(ae[0]||[])),J.length&&(ae.length?ae[ae.length-1]=ae[ae.length-1].concat(J):ae.push(J));let ue=(0,n.default)([Q,ae,X]),ge=(0,n.default)(ue),N=(0,u.default)(ge);if(N[0]!=="e")throw new Error("Failed to find end section");return N[1]=ge.length,g(U?[[(0,n.default)(ue),V[0][1]]]:ue,T)},i.rewriteSingleQuotes=p,i.serialize=g;var n=t(e("lodash/flatten")),u=t(e("lodash/last")),r=t(e("transducers.js")),c=t(e("map-indexed-xf")),s=t(e("assert")),o=t(e("../../../common/html-to-text"));function d(P){let j=E(P,"a",k=>k.length>3&&Array.isArray(k[3])&&k[3].length>0);return j?j[3][0]:null}function a(P){let j=E(P,"csd",function(k){return k.length==3&&Array.isArray(k[2])&&k[2].length>5});return j?j[1]:null}function p(P){let j=0,k=[];for(;;){let M=f(P,j);if(M<0){k.push(P.substr(j));break}if(k.push(P.substr(j,M-j)),k.push('"'),j=M+1,P[M]==='"'){let R=b(P,j,'"');if(R<0)throw new Error("Unclosed double quote");k.push(P.slice(j,R+1)),j=R+1}else{let R=b(P,j,"'");if(R<0)throw new Error("Unclosed single quote");let V=P.slice(j,R).replace(/"/g,'\\"').replace(/\\'/g,"'");k.push(V),k.push('"'),j=R+1}}return k.join("")}function f(P,j){for(let k=j,M=P.length;k<M;k++)if(P[k]==='"'||P[k]==="'")return k;return-1}function b(P,j,k){for(let M=j,R=P.length;M<R;M++)if(P[M]==="\\")M++;else if(P[M]===k)return M;return-1}function _(P){let j={includeLengths:!1,suggestionMode:/^5\n/.test(P),noArrayNewLines:!/^[,\]]/m.test(P),includeExplicitNulls:!0},k=[],M;if(j.suggestionMode){if(M=P.indexOf(`'
`),M===-1)throw new Error("Message was missing beginning header");M+=2}else{if(M=P.indexOf(`

`),M===-1)throw new Error("Message was missing beginning newlines");M+=2}for(;M<P.length;){let R=P.indexOf(`
`,M+1);R===-1?R=P.length:P[R-1]==="\r"&&(R+=1);let V=P.slice(M,R),T;if(/^\d+\s*$/.test(V)){j.includeLengths=!0;let U=+V;T=P.slice(R,R+U),M=R+U}else T=P.slice(M),M=P.length;k.push(y(T))}return{value:k,options:j}}function y(P){P=function(j,k){let M=[],R,V=0,T=!1;for(;(R=b(j,V,'"'))!==-1;)T?M.push(j.slice(V,R+1)):M.push(k(j.slice(V,R+1))),V=R+1,T=!T;if(T)throw new Error("string ended inside quoted section");return M.push(k(j.slice(V))),M.join("")}(P=p(P=P.replace(/[\r\n\t]/g,"")),j=>j.replace(/,\s*(?=,|\])/g,",null").replace(/\[\s*(?=,)/g,"[null"));try{return JSON.parse(P,(j,k)=>k??void 0)}catch{throw new Error("deserialization error")}}function g(P,j){return j.suggestionMode?((0,s.default)(j.includeLengths),function(k,M){let R=`5
)]}'
`;for(let V=0;V<k.length;V++){let T=m(k[V],!1,M);R+=T.length+`\r
`+T}return R}(P,j.includeExplicitNulls)):function(k,M){let{includeLengths:R,noArrayNewLines:V,includeExplicitNulls:T}=M,U=`)]}'
`+(V&&R?"":`
`);for(let W=0;W<k.length;W++){let Q=m(k[W],V,T);R?U+=(V?`
`:"")+(Q.length+(V?2:1))+`
`+Q:U+=Q}if(!R)if(V)U=U.replace(/"([0-9a-f]{8,16})"\]$/,"'$1']");else{let W=U.split(/\r|\n/),Q=W.slice(0,-3),X=W.slice(-3);U=Q.join(`
`),U+=`
`+X[0]+X[1].replace(/"/g,"'")}return U+(V&&R?`
`:"")}(P,j)}function m(P,j,k){let M="[";for(let R=0;R<P.length;R++){let V=P[R],T;T=Array.isArray(V)?m(V,j,k):V==null?k?"null":"":JSON.stringify(V).replace(/</gim,"\\u003c").replace(/=/gim,"\\u003d").replace(/>/gim,"\\u003e").replace(/&/gim,"\\u0026"),R>0&&(M+=","),M+=T}return M+="]"+(j?"":`
`),M}function w(P){return P.length===1&&P[0].length===2&&typeof P[0][1]=="string"&&(P=[P[0][0]]),(j=P,r.default.toArray(j,S)).map(k=>Object.freeze(Object.defineProperty({subject:(0,o.default)(k[9]),shortDate:(0,o.default)(k[14]),timeString:(0,o.default)(k[15]),peopleHtml:I(k[7]),timestamp:k[16]/1e3,isUnread:k[9].indexOf("<b>")>-1,lastEmailAddress:k[28],bodyPreviewHtml:k[10],someGmailMessageIds:[k[1],k[2]],gmailThreadId:k[0]},"_originalGmailFormat",{value:k})));var j}let C=r.default.compose(r.default.cat,r.default.cat,r.default.filter(P=>P[0]==="cs"),r.default.map(P=>[P[1],P[2]]));function I(P){return P.replace(/^[^<]*/,"").replace(/(<span[^>]*) class="[^"]*"/g,"$1")}let S=r.default.compose(r.default.cat,r.default.filter(P=>P[0]==="tb"),r.default.map(P=>P[2]),r.default.cat),O=r.default.compose(r.default.cat,r.default.filter(P=>P[0]==="cs"),r.default.map(P=>({threadID:P[1],messageIDs:P[8]}))),A=r.default.compose(r.default.cat,r.default.filter(P=>P[0]==="ms"),r.default.map(P=>({messageID:P[1],date:P[7]})));function E(P,j,k){let M=function(R,V,T){let U=[],W=[{el:R,path:[]}];for(;W.length>0;){let Q=W.pop();if(Q.path.length<=T)if(Q.el!==null&&typeof Q.el=="object"){let X=Object.keys(Q.el);for(let oe=0;oe<X.length;oe++){let J=X[oe],he={el:Q.el[J],path:Q.path.concat([J])};W.push(he)}}else Q.el===V&&U.push(Q)}return U}(P,j,100);for(let R=0;R<M.length;R++){let V=D(P,M[R].path.slice(0,-1));if(k(V))return V}}function D(P,j){let k=P;for(let M=0;M<j.length;M++)k=k[j[M]];return k}},{"../../../common/html-to-text":479,"@babel/runtime/helpers/interopRequireDefault":15,assert:33,"lodash/flatten":319,"lodash/last":342,"map-indexed-xf":364,"transducers.js":453}],537:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.extractThreadsFromSearchResponse=function(d){let a=JSON.parse(d);if(Array.isArray(a))try{return r(a)}catch{return[]}let p=a&&a[3];return p?p.map((f,b)=>{let _=f[1];return _?{subject:_[1],snippet:_[2],syncThreadID:_[4],oldGmailThreadID:_[18]!=null?new n.default(_[18]).toString(16):_[20],rawResponse:f,extraMetaData:{snippet:a[15]&&a[15][1]&&a[15][1][b]||"",syncMessageData:_[5].map(y=>({syncMessageID:y[1],oldMessageID:y[56],date:+y[7]}))}}:null}).filter(u.default):[]},i.extractThreadsFromSearchResponse_20220909=r,i.extractThreadsFromThreadResponse=function(d){let a=JSON.parse(d);if(Array.isArray(a))return function(f){let b=f&&f[1];if(!b)throw new Error("Failed to process thread response");return b.map(_=>{if(typeof _[0]!="string"||!Array.isArray(_[2])||_[1]&&_[1][0]&&_[1][0][13]&&Array.isArray(_[1][1])){let y=_[1]&&_[1][0];if(!y)return null;let g,m=Array.isArray(_[2])&&_[2];return m?g=m.map(w=>({syncMessageID:w[0],date:+w[1][16],recipients:s(w)})):g=(_[1]&&_[1][1]).map(w=>({syncMessageId:w[0],date:+w[15]})),{subject:y[1],snippet:y[2],syncThreadID:y[0],oldGmailThreadID:new n.default(y[13]).toString(16),rawResponse:_,extraMetaData:{syncMessageData:g,snippet:""}}}return{syncThreadID:_[0],oldGmailThreadID:_[1]&&_[1][0]&&_[1][0][15]||void 0,extraMetaData:{snippet:_[1]&&_[1][0]&&_[1][0][2]||void 0,syncMessageData:(_[2]||[]).filter(y=>Boolean(y[1])).map(y=>({syncMessageID:y[0],date:+y[1][16],recipients:s(y)}))}}}).filter(u.default)}(a);let p=a&&a[2];if(!p)throw new Error("Failed to process thread response");return p.map(f=>{if(typeof f[1]!="string"||!Array.isArray(f[3])||f[2]&&f[2][1]&&f[2][1][14]&&Array.isArray(f[2][2])){let b=f[2]&&f[2][1];if(!b)return null;let _,y=Array.isArray(f[3])&&f[3];return y?_=y.map(g=>({syncMessageID:g[1],date:+g[2][17],recipients:c(g)})):_=(f[2]&&f[2][2]).map(g=>({syncMessageId:g[1],date:+g[16]})),{subject:b[2],snippet:b[3],syncThreadID:b[1],oldGmailThreadID:new n.default(b[14]).toString(16),rawResponse:f,extraMetaData:{syncMessageData:_,snippet:""}}}return{syncThreadID:f[1],oldGmailThreadID:f[2]&&f[2][1]&&f[2][1][16]||void 0,extraMetaData:{snippet:f[2]&&f[2][1]&&f[2][1][3]||void 0,syncMessageData:(f[3]||[]).filter(b=>Boolean(b[2])).map(b=>({syncMessageID:b[1],date:+b[2][17],recipients:c(b)}))}}}).filter(u.default)},i.replaceThreadsInSearchResponse=function(d,a,p){let f=JSON.parse(d);if(Array.isArray(f))try{return o(f,a,p)}catch{return d}return(f[3]||a.length)&&(f[3]=a.map((b,_)=>{let{rawResponse:y}=b;return{...y,2:_}})),(f[15]||a.length)&&(f[15]={...f[15],1:a.map(b=>{let{extraMetaData:_}=b;return _.snippet}),2:a.map(b=>{let{extraMetaData:_}=b;return _.syncMessageData.map(y=>{let{syncMessageID:g}=y;return g})})}),JSON.stringify(f)},i.replaceThreadsInSearchResponse_20220909=o;var n=t(e("bignumber.js")),u=t(e("../../lib/isNotNil"));function r(d){let a=d&&d[2];return a?a.map((p,f)=>{let b=p[0];return b?{subject:b[0],snippet:b[1],syncThreadID:b[3],oldGmailThreadID:b[17]!=null?new n.default(b[17]).toString(16):b[19],rawResponse:p,extraMetaData:{snippet:d[14]&&d[14][0]&&d[14][0][f]||"",syncMessageData:b[4].map(_=>({syncMessageID:_[0],oldMessageID:_[55],date:+_[6]}))}}:null}).filter(u.default):[]}function c(d){if(!d[2])return;let a=d[2][1]||[],p=d[2][2]||[],f=d[2][3]||[];return a.concat(p).concat(f).map(b=>({emailAddress:b[2],name:b[3]}))}function s(d){if(!d[1])return;let a=d[1][0]||[],p=d[1][1]||[],f=d[1][2]||[];return a.concat(p).concat(f).map(b=>({emailAddress:b[1],name:b[2]}))}function o(d,a,p){return(d[2]||a.length)&&(d[2]=a.map((f,b)=>{let{rawResponse:_}=f,y=[..._];return y[1]=b,y})),(d[14]||a.length)&&(d[14]=[...d[14]],d[14][0]=a.map(f=>{let{extraMetaData:b}=f;return b.snippet}),d[14][1]=a.map(f=>{let{extraMetaData:b}=f;return b.syncMessageData.map(_=>{let{syncMessageID:y}=_;return y})})),JSON.stringify(d)}},{"../../lib/isNotNil":727,"@babel/runtime/helpers/interopRequireDefault":15,"bignumber.js":43}],538:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(0,t(e("lodash/once")).default)(()=>![...document.styleSheets].find(u=>{try{if(u.cssRules)return[...u.cssRules].find(r=>r instanceof CSSStyleRule&&r.selectorText===".Hl"&&r.style.width==="24px")}catch{}return!1}));i.default=n},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],539:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var s=new r.default,o=s.ajaxInterceptStream,d=(0,c.injectScript)().then(()=>s);return{xhrInterceptStream:n.default.merge([o.filter(function(a){return a.type==="emailSending"}).map(function(a){if(a.draftID)return a;var p=(0,u.parse)(a.body);return{type:"emailSending",composeId:p.composeid,draft:p.draft}}),o.filter(function(a){return a.type==="emailSent"}).map(function(a){if(a.draftID)return a;var p=(0,u.parse)(a.originalSendBody),f=a.responseText;return{type:"emailSent",composeId:p.composeid,draft:p.draft,response:f}}),o.filter(function(a){return a.type==="emailDraftSaveSending"}).map(function(a){if(a.draftID)return a;var p=(0,u.parse)(a.body);return{type:"emailDraftSaveSending",composeId:p.composeid,draft:p.draft}}),o.filter(function(a){return a.type==="emailDraftReceived"}).map(function(a){if(a.draftID)return a;var p=(0,u.parse)(a.originalSendBody),f=a.responseText;return{type:"emailDraftReceived",composeId:p.composeid,draft:p.draft,response:f,connectionDetails:a.connectionDetails}})]),pageCommunicatorPromise:d}};var n=t(e("kefir")),u=e("querystring"),r=t(e("./gmail-page-communicator")),c=e("../../lib/inject-script")},{"../../lib/inject-script":723,"./gmail-page-communicator":535,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,querystring:410}],540:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(o,d){let a=o;function p(b){return a?{...b,logError(_,y){let g={el:y,html:y?(0,c.default)(y):null};a.getLogger().errorSite(_,g)}}:b}let f=new n.default(d,p(r.default));return s.changes().onValue(b=>{f.replaceOptions(p(b))}),f};var n=t(e("page-parser-tree")),u=t(e("ud-kefir")),r=t(e("./pageParserOptions")),c=t(e("../../../common/censorHTMLtree"));let s=(0,u.default)(v,r.default)},{"../../../common/censorHTMLtree":471,"./pageParserOptions":541,"@babel/runtime/helpers/interopRequireDefault":15,"page-parser-tree":374,"ud-kefir":454}],541:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t={tags:{},watchers:[{sources:[null],tag:"composeLinkPopOverContainer",selectors:["body",".Lf.a5s"]}],finders:{supportMenu:{fn:n=>n.querySelectorAll("header[role=banner] div:not([aria-label]):not([data-ogsr-up]) > div:not(.inboxsdk__appButton) > div[data-tooltip] + div[role=menu]")},composeLinkPopOverContainer:{fn:n=>n.querySelectorAll("body > .Lf.a5s")}}};i.default=t},{}],542:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.NATIVE_CLASS=i.INBOXSDK_CLASS=i.GmailAppMenuItemView=i.ELEMENT_CLASS=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("@babel/runtime/helpers/classPrivateFieldSet")),r=t(e("@babel/runtime/helpers/classPrivateFieldGet")),c=t(e("../../../lib/dom/querySelectorOrFail")),s=e("events"),o=t(e("classnames")),d=t(e("../gmail-element-getter"));function a(he,ae){f(he,ae),ae.add(he)}function p(he,ae,ue){f(he,ae),ae.set(he,ue)}function f(he,ae){if(ae.has(he))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(he,ae,ue){if(!ae.has(he))throw new TypeError("attempted to get private field on non-instance");return ue}i.NATIVE_CLASS="Xa";let _="inboxsdk__appMenuItem";i.INBOXSDK_CLASS=_;let y=`Xa ${_}`;i.ELEMENT_CLASS=y;let g="V6 CL",m="apW",w=".V6.CL",C=".apW";var I=new WeakMap,S=new WeakMap,O=new WeakMap,A=new WeakMap,E=new WeakSet,D=new WeakSet,P=new WeakSet,j=new WeakSet,k=new WeakSet,M=new WeakSet,R=new WeakMap,V=new WeakMap;class T extends s.EventEmitter{get element(){return(0,r.default)(this,S)}setMenuItemDescriptor(ae){(0,u.default)(this,I,ae),b(this,D,W).call(this)}get menuItemDescriptor(){return(0,r.default)(this,I)}constructor(ae){super(),a(this,M),a(this,k),a(this,j),a(this,P),a(this,D),a(this,E),p(this,I,{writable:!0,value:void 0}),p(this,S,{writable:!0,value:void 0}),p(this,O,{writable:!0,value:!1}),p(this,A,{writable:!0,value:void 0}),p(this,R,{writable:!0,value:ue=>{this.emit("blur",ue)}}),p(this,V,{writable:!0,value:ue=>{var ge,N;this.emit("hover",ue),(ge=(0,r.default)(this,I))===null||ge===void 0||(N=ge.onHover)===null||N===void 0||N.call(ge,ue)}}),(0,u.default)(this,S,b(this,E,U).call(this)),(0,u.default)(this,A,ae),ae.getStopper().onValue(()=>this.remove()),(0,r.default)(this,S).addEventListener("click",ue=>b(this,M,J).call(this,ue)),(0,r.default)(this,S).addEventListener("mouseover",(0,r.default)(this,V)),(0,r.default)(this,S).addEventListener("mouseout",(0,r.default)(this,R))}remove(){var ae;(0,r.default)(this,O)||((0,u.default)(this,O,!0),(ae=this.element)===null||ae===void 0||ae.remove(),this.emit("destroy"))}blur(){var ae;(ae=this.element)===null||ae===void 0||ae.classList.remove(T.elementCss.HOVER)}hover(){var ae,ue;(ae=this.element)!==null&&ae!==void 0&&ae.classList.contains(T.elementCss.ACTIVE)||(ue=this.element)===null||ue===void 0||ue.classList.add(T.elementCss.HOVER)}activate(){var ae,ue;(ae=this.element)===null||ae===void 0||ae.classList.remove(T.elementCss.HOVER),(ue=this.element)===null||ue===void 0||ue.classList.add(T.elementCss.ACTIVE)}deactivate(){var ae;(ae=this.element)===null||ae===void 0||ae.classList.remove(T.elementCss.ACTIVE)}}function U(){let he=document.createElement("div");return he.className=y,he.innerHTML=`
      <div class="${g}" aria-label="" role="link" tabindex="-1"></div>
      <div class="${m}" role="heading" aria-level="2"></div>
    `.trim(),he}function W(){var he;let ae=this.element;ae&&(ae.className=(0,o.default)(y,(he=(0,r.default)(this,I))===null||he===void 0?void 0:he.className),b(this,P,Q).call(this,ae),b(this,j,X).call(this,ae),b(this,k,oe).call(this,ae))}function Q(he){var ae;(0,c.default)(he,C).textContent=((ae=(0,r.default)(this,I))===null||ae===void 0?void 0:ae.name)??""}function X(he){let ae=(0,c.default)(he,w),{iconUrl:ue,iconClassName:ge}=(0,r.default)(this,I)??{};if(ue){let N=d.default.isDarkTheme()?ue.darkTheme:ue.lightTheme;ae.style.setProperty("--background-image",`url(${N})`)}ae.className=(0,o.default)(g,ge)}function oe(he){var ae;(0,c.default)(he,w).setAttribute("aria-label",((ae=(0,r.default)(this,I))===null||ae===void 0?void 0:ae.name)??"")}function J(he){var ae,ue,ge,N;this.emit("click"),(ae=(0,r.default)(this,I))===null||ae===void 0||(ue=ae.onClick)===null||ue===void 0||ue.call(ae,he),(ge=(0,r.default)(this,I))!==null&&ge!==void 0&&ge.routeID&&(0,r.default)(this,A).goto((0,r.default)(this,I).routeID,(N=(0,r.default)(this,I))===null||N===void 0?void 0:N.routeParams)}i.GmailAppMenuItemView=T,(0,n.default)(T,"elementCss",{HOVER:"aIk",ACTIVE:"apV"})},{"../../../lib/dom/querySelectorOrFail":706,"../gmail-element-getter":532,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,events:137}],543:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=e("ud"),c=n(e("ud-kefir")),s=n(e("kefir")),o=n(e("kefir-stopper")),d=n(e("./primary")),a=n(e("../../../../driver-common/sidebar/ContentPanelViewDriver"));let p=(0,c.default)(v,null);var f=(0,r.defn)(v,class{constructor(b,_){(0,u.default)(this,"_stopper",(0,o.default)()),this._driver=b;let y=_.getAttribute("data-sdk-sidebar-instance-id");if(y!=null)this._instanceId=y;else{let g=new d.default(b,_);this._instanceId=g.getInstanceId(),p.changes().onValue(()=>{g.destroy(),g=new d.default(b,_),this._instanceId=g.getInstanceId()})}}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}_getShouldThreadAppSidebarOpen(){return t.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")!=="false"}_setShouldThreadAppSidebarOpen(b){try{t.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(b))}catch{}}_getShouldGlobalAppSidebarOpen(){return t.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")==="true"}_setShouldGlobalAppSidebarOpen(b){try{t.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(b))}catch{}}addThreadSidebarContentPanel(b,_){let y=new a.default(this._driver,b,this._instanceId);return s.default.merge([_.getStopper(),this._stopper]).take(1).takeUntilBy(y.getStopper()).onValue(()=>y.remove()),y}addGlobalSidebarContentPanel(b){let _=new a.default(this._driver,b,this._instanceId,!0);return this._stopper.takeUntilBy(_.getStopper()).onValue(()=>_.remove()),_}});i.default=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../../driver-common/sidebar/ContentPanelViewDriver":679,"./primary":547,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,ud:455,"ud-kefir":454}],544:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud");t(e("../../../../../lib/dom/querySelectorOrFail"));let u=".brC-aT5-aOt-bsf-Jw";var r=(0,n.defn)(v,function(c,s,o){let d=o.querySelector(u);if(!d)return void c.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));let a=d.firstElementChild;a?a.insertAdjacentElement("beforebegin",s):c.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"))});i.default=r},{"../../../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],545:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud");t(e("kefir")),t(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),t(e("../../../../../lib/dom/querySelectorOrFail"));let u="[role=tablist],.J-KU-Jg";var r=(0,n.defn)(v,function(c,s,o){let d=o.querySelector(u);if(!d)return void c.error(new Error("addCompanionThreadIconArea: no tablist"));let a=o.querySelector("[role=separator]");if(a){if(!a.parentElement)throw new Error;a.parentElement.insertBefore(s,a.nextElementSibling)}else c.error(new Error("addCompanionThreadIconArea: failed to find separator")),d.insertAdjacentElement("beforebegin",s)});i.default=r},{"../../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],546:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("lodash/findIndex")),r=t(e("../../../../../lib/dom/insert-element-in-order")),c=(0,n.defn)(v,function(s,o,d,a){[...a.querySelectorAll("[data-app-name]")].forEach(f=>{let b=f.getAttribute("data-app-name"),_=(0,u.default)(s.getOrderedItems(),y=>{let{value:g}=y;return g.appName===b});f.setAttribute("data-order-hint",_)});let p=(0,u.default)(s.getOrderedItems(),f=>{let{value:b}=f;return b.appName===o});p>-1&&d.setAttribute("data-order-hint",p),(0,r.default)(a,d,["data-order-hint"])});i.default=c},{"../../../../../lib/dom/insert-element-in-order":694,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/findIndex":316,ud:455}],547:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=(n(e("lodash/find")),n(e("lodash/findIndex"))),c=e("ud"),s=n(e("auto-html")),o=n(e("asap")),d=n(e("kefir")),a=n(e("kefir-bus")),p=n(e("kefir-stopper")),f=n(e("order-manager")),b=n(e("react")),_=n(e("react-dom")),y=n(e("../../../../../driver-common/sidebar/AppSidebar")),g=n(e("../../../gmail-element-getter")),m=n(e("../../../../../lib/idMap")),w=n(e("../../../../../lib/incrementName")),C=n(e("../../../../../lib/dom/querySelectorOrFail")),I=n(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),S=(n(e("../../../../../lib/dom/make-element-child-stream")),e("../../../../../lib/dom/simulate-mouse-event")),O=n(e("../../../../../lib/fake-window-resize")),A=n(e("./add-companion-thread-icon-area")),E=n(e("./add-companion-global-icon-area")),D=n(e("./add-to-icon-area"));let P="brC-brG-btc";var j=(0,c.defn)(v,class{constructor(k,M){(0,u.default)(this,"_stopper",(0,p.default)()),(0,u.default)(this,"_instanceId",`${Date.now()}-${Math.random()}`),(0,u.default)(this,"_instanceIdsToDescriptors",new Map),(0,u.default)(this,"_threadSidebarComponent",null),(0,u.default)(this,"_threadIconArea",null),(0,u.default)(this,"_globalIconArea",null),(0,u.default)(this,"_globalButtonContainers",new Map),(0,u.default)(this,"_threadButtonContainers",new Map),(0,u.default)(this,"_contentContainers",new Map),(0,u.default)(this,"_threadSidebarContainerEl",null),(0,u.default)(this,"_currentIds",new Set),(0,u.default)(this,"_orderManager",new f.default({get(){try{return JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch{}},set(R){try{t.localStorage.setItem("inboxsdk__sidebar_ordering",JSON.stringify(R))}catch{}}})),(0,u.default)(this,"_updateHighlightedAppThreadIconBus",(0,a.default)()),(0,u.default)(this,"_appSidebarRefSetter",R=>{R&&(this._threadSidebarComponent=R)}),(0,u.default)(this,"_closeButton",null),this._driver=k,this._companionSidebarContentContainerEl=M,this._setupElement()}getInstanceId(){return this._instanceId}destroy(){this._stopper.destroy()}_getShouldGlobalAppSidebarOpen(){return t.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")==="true"}_setShouldGlobalAppSidebarOpen(k){try{t.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(k))}catch{}}_getShouldThreadAppSidebarOpen(){return t.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")!=="false"}_setShouldThreadAppSidebarOpen(k){try{t.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(k))}catch{}}_createThreadSidebarIfNeeded(){if(this._threadSidebarContainerEl)return this._threadSidebarContainerEl;let k=this._threadSidebarContainerEl=document.createElement("div");return k.classList.add("thread_app_sidebar",(0,m.default)("app_sidebar_container"),"addon_sidebar"),this._companionSidebarContentContainerEl.insertBefore(k,this._companionSidebarContentContainerEl.firstElementChild),this._containerProp=()=>k,this._updateHighlightedAppThreadIconBus.bufferWithTimeOrCount(150,100).filter(M=>M.length>0).takeUntilBy(this._stopper).onValue(()=>{let M=k.getBoundingClientRect(),R=Array.from(k.querySelectorAll(`.${(0,m.default)("app_sidebar_content_panel")}.${(0,m.default)("expanded")} .${(0,m.default)("app_sidebar_content_panel_top_line")}`)),V=k.scrollTop,T=V+M.height/2,U=R.find(W=>{let Q=W.getBoundingClientRect().bottom+V;return Q>V&&Q<T});if(!U){let W;for(let Q=0;Q<R.length;Q++){let X=R[Q],oe=X.getBoundingClientRect().bottom;if(oe<0)W=X;else if(oe>0)break}U=W}if(U){U.getAttribute("data-instance-id");let W=U.getAttribute("data-app-name");if(!W)return;let Q=this._threadButtonContainers.get(W);if(!Q||!this._threadIconArea)return;let X=this._threadIconArea.querySelector(".sidebar_button_container_active");X&&X.classList.remove("sidebar_button_container_active"),Q.classList.add("sidebar_button_container_active")}}),this._updateHighlightedAppThreadIconBus.plug(d.default.fromEvents(k,"scroll").map(()=>null)),this._renderThreadSidebar(),k}_renderThreadSidebarIfPresent(){this._threadSidebarContainerEl&&this._renderThreadSidebar()}_renderThreadSidebar(){let k=this._threadSidebarContainerEl;if(!k)throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");return new Promise(M=>{_.default.render(b.default.createElement(y.default,{ref:this._appSidebarRefSetter,panels:this._orderManager.getOrderedItems().map(R=>R.value),onMoveEnd:(R,V,T,U)=>{this._orderManager.moveItem(T,U),this._renderThreadSidebar()},onExpandedToggle:()=>{this._updateHighlightedAppThreadIconBus.emit(null)},container:this._containerProp}),k,()=>{if(!this._threadSidebarComponent)throw new Error("Should not happen");M(this._threadSidebarComponent),this._updateHighlightedAppThreadIconBus.emit(null)})})}_getActiveButtonContainer(){let k;return this._globalIconArea&&(k=this._globalIconArea.querySelector(".sidebar_button_container_active")),!k&&this._threadIconArea&&(k=this._threadIconArea.querySelector(".sidebar_button_container_active")),k}_addButton(k,M,R){var V=this;(0,o.default)(()=>{if(!k)throw new Error("should not happen");let T=M.detail.instanceId,U=R&&M.detail.iconUrl?M.detail.iconUrl:M.detail.appIconUrl,W=M.detail.appName,Q=M.detail.iconClass||"",X=R?this._globalButtonContainers.get(W):this._threadButtonContainers.get(W),oe;if(X){let J=Number(X.getAttribute("data-count"))||1;X.setAttribute("data-count",String(J+1)),oe=X}else{oe=document.createElement("div"),oe.className=(0,m.default)("sidebar_button_container"),oe.setAttribute("data-app-name",W),oe.innerHTML=s.default`
          <button class="inboxsdk__button_icon ${Q}" type="button" data-tooltip="${W}">
            <img class="inboxsdk__button_iconImg" src="${U}">
          </button>
          <div class="inboxsdk__button_selectedIndicator"></div>
        `,M.detail.primaryColor&&((0,C.default)(oe,".inboxsdk__button_selectedIndicator").style.backgroundColor=M.detail.primaryColor),R?this._globalButtonContainers.set(W,oe):this._threadButtonContainers.set(W,oe);let J=function(){let he=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(V._getActiveButtonContainer()===oe){if(!V._closeButton)throw new Error;V._closeButton(!0)}else{if(V._closeButton&&V._closeButton(!0),R?V._setShouldGlobalAppSidebarOpen(!0):V._setShouldThreadAppSidebarOpen(!0),V._openSidebarAndActivateButton(oe,R),R){let ae=V._contentContainers.get(W);ae&&(ae.style.display=""),V._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible"),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:T}}))}else{let ae=V._threadSidebarComponent;if(!ae)throw new Error("sidebar not mounted");he||(ae.openPanel(T),ae.scrollPanelIntoView(T,!0))}V._closeButton=ae=>{V._closeButton=null;let ue=V._getActiveButtonContainer();if(!ue)throw new Error("Expected activeButtonContainer");if(V._closeSidebarAndDeactivateButton(ue),R){ae&&V._setShouldGlobalAppSidebarOpen(!1);let ge=V._contentContainers.get(W);ge?ge.style.display="none":V._driver.getLogger().error(new Error("Unexpected: contentEl not set")),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:T}}))}else ae&&V._setShouldThreadAppSidebarOpen(!1);(0,O.default)()},(0,O.default)()}};(0,C.default)(oe,"button").addEventListener("click",he=>{he.stopPropagation(),J()},!0),k&&(0,D.default)(this._orderManager,W,oe,k);{let he=this._getActiveButtonContainer();R?this._getShouldGlobalAppSidebarOpen()&&(this._globalIconArea&&he&&this._globalIconArea.contains(he)||J(!0)):this._getShouldThreadAppSidebarOpen()&&(this._threadIconArea&&he&&this._threadIconArea.contains(he)||J(!0))}}})}_removeButton(k,M,R){let V=k.detail.appName,T=M.get(V);if(!R||!T)throw new Error("should not happen: tried to remove button without container or iconArea");let U=Number(T.getAttribute("data-count"));if(U<=1){if(T===R.querySelector(".sidebar_button_container_active")){if(!this._closeButton)throw new Error;this._closeButton(!1),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible");let W=this._companionSidebarOuterWrapper.previousElementSibling;W&&W.classList.remove("companion_container_app_sidebar_visible")}T.remove(),M.delete(V)}else U===2?T.removeAttribute("data-count"):T.setAttribute("data-count",String(U-1))}_closeSidebarAndDeactivateButton(k){k.classList.remove("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add(P),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible","companion_global_app_sidebar_visible");let M=this._companionSidebarOuterWrapper.previousElementSibling;M&&M.classList.remove("companion_container_app_sidebar_visible")}_openSidebarAndActivateButton(k,M){let R=g.default.getCompanionSidebarIconContainerElement();if(!R)throw new Error("Could not find companion sidebar icon container element");if(this._getActiveButtonContainer())throw new Error("activeButtonContainer should not be true");{let T=R.querySelector(".aT5-aOt-I-KO");T&&(0,S.simulateClick)(T)}k.classList.add("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.add("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("companion_app_sidebar_visible"),this._companionSidebarContentContainerEl.classList.remove(P);let V=this._companionSidebarOuterWrapper.previousElementSibling;V&&V.classList.add("companion_container_app_sidebar_visible"),M&&this._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible")}_setupElement(){let k=g.default.getCompanionSidebarIconContainerElement();if(!k)throw new Error("Could not find companion sidebar icon container element");if(this._companionSidebarContentContainerEl.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._companionSidebarOuterWrapper=this._companionSidebarContentContainerEl.classList.contains("bq9")?this._companionSidebarContentContainerEl:this._companionSidebarContentContainerEl.parentElement,!this._companionSidebarOuterWrapper)throw new Error("should not happen: failed to find companionSidebarOuterWrapper");let M=this._companionSidebarOuterWrapper.previousElementSibling;if(M&&M.classList.add((0,m.default)("companion_container_app_sidebar_in_use")),this._companionSidebarContentContainerEl.classList.add((0,m.default)("app_sidebar_in_use")),!document.body.querySelector("."+(0,m.default)("app_sidebar_waiting_platform"))){let T=document.createElement("div");T.className=(0,m.default)("app_sidebar_waiting_platform"),document.body.appendChild(T)}d.default.fromEvents(window,"storage").filter(T=>T.key==="inboxsdk__sidebar_ordering").takeUntilBy(this._stopper).onValue(()=>{this._orderManager.reload(),this._renderThreadSidebarIfPresent()}),d.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{this._createThreadSidebarIfNeeded();let U=T.detail.id;for(;this._currentIds.has(U);)U=(0,w.default)(U);this._currentIds.add(U);let W=T.detail.appName;this._orderManager.addItem({groupId:T.detail.appId,id:U,orderHint:T.detail.orderHint,value:{id:U,appName:W,appId:T.detail.appId,instanceId:T.detail.instanceId,title:T.detail.title,iconClass:T.detail.iconClass,iconUrl:T.detail.iconUrl,hideTitleBar:T.detail.hideTitleBar,el:T.target}}),this._renderThreadSidebar();let Q=this._threadIconArea=k.querySelector(".sidebar_thread_iconArea");Q||(Q=this._threadIconArea=document.createElement("div"),Q.className=(0,m.default)("sidebar_iconArea"),Q.classList.add("sidebar_thread_iconArea"),(0,A.default)(this._driver.getLogger(),Q,k)),this._addButton(Q,T,!1)}),d.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=this._orderManager.getOrderedItems(),W=(0,r.default)(U,Q=>Q.value.instanceId===T.detail.instanceId);if(W===-1)throw new Error("should not happen: failed to find orderItem");this._orderManager.updateItemValueByIndex(W,{id:U[W].value.id,appId:T.detail.appId,appName:T.detail.appName||T.detail.title,instanceId:T.detail.instanceId,title:T.detail.title,iconClass:T.detail.iconClass,iconUrl:T.detail.iconUrl,hideTitleBar:T.detail.hideTitleBar,el:T.target}),this._renderThreadSidebar()}),d.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=this._orderManager.getOrderedItems(),W=(0,r.default)(U,Q=>Q.value.instanceId===T.detail.instanceId);if(W===-1)throw new Error("should not happen: failed to find orderItem");this._currentIds.delete(U[W].id),this._orderManager.removeItemByIndex(W),this._renderThreadSidebar(),this._removeButton(T,this._threadButtonContainers,this._threadIconArea)}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{this._threadSidebarComponent&&this._threadSidebarComponent.scrollPanelIntoView(T.detail.instanceId)}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{this._threadSidebarComponent&&this._threadSidebarComponent.closePanel(T.detail.instanceId)}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(T=>T.detail.sidebarId===this._instanceId&&!T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{this._renderThreadSidebar().then(U=>{let W=this._instanceIdsToDescriptors.get(T.detail.instanceId);if(!W)return;let Q=this._threadButtonContainers.get(W.appName);if(!Q)throw new Error("missing button container");this._getActiveButtonContainer()!==Q&&(0,C.default)(Q,"button").click()})}),d.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=T.detail.id;for(;this._currentIds.has(U);)U=(0,w.default)(U);this._currentIds.add(U);let W=T.detail.appName,Q=this._globalIconArea=k.querySelector(".sidebar_global_iconArea");Q||(Q=this._globalIconArea=document.createElement("div"),Q.className=(0,m.default)("sidebar_iconArea"),Q.classList.add("sidebar_global_iconArea"),(0,E.default)(this._driver.getLogger(),Q,k));let X=document.createElement("div");X.classList.add("addon_sidebar",(0,m.default)("app_sidebar_container"),"global_app_sidebar"),this._companionSidebarContentContainerEl.insertAdjacentElement("afterbegin",X),this._contentContainers.set(W,X),X.appendChild(T.target),X.style.display="none",this._addButton(Q,T,!0)}),d.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=this._globalButtonContainers.get(T.detail.appName);if(!U)return;let W=T.detail.iconClass||"",Q=T.detail.iconUrl||T.detail.appIconUrl;(0,C.default)(U,"img").setAttribute("src",Q),(0,C.default)(U,"button").setAttribute("class",`inboxsdk__button_icon ${W}`)}),d.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId&&T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{this._currentIds.delete(T.detail.id),this._removeButton(T,this._globalButtonContainers,this._globalIconArea)}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(T=>T.detail.sidebarId===this._instanceId&&T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=this._instanceIdsToDescriptors.get(T.detail.instanceId);if(!U)return;let W=this._globalButtonContainers.get(U.appName);if(!!W&&this._getActiveButtonContainer()===W){if(!this._closeButton)throw new Error("Expected this._closeButton");this._closeButton(!0)}}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(T=>T.detail.sidebarId===this._instanceId&&T.detail.isGlobal).takeUntilBy(this._stopper).onValue(T=>{let U=this._instanceIdsToDescriptors.get(T.detail.instanceId);if(!U)return;let W=this._globalButtonContainers.get(U.appName);!W||this._getActiveButtonContainer()!==W&&(0,C.default)(W,"button").click()}),d.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(T=>{this._instanceIdsToDescriptors.set(T.detail.instanceId,T.detail)}),d.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(T=>{this._instanceIdsToDescriptors.delete(T.detail.instanceId)}),d.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(T=>T.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(T=>{this._instanceIdsToDescriptors.set(T.detail.instanceId,T.detail)});let R=this._companionSidebarContentContainerEl.children[0],V=this._companionSidebarContentContainerEl.children[1];d.default.merge([R,V].map(T=>(0,I.default)(T,{attributes:!0,attributeFilter:["style"]}))).filter(()=>R.style.display!==V.style.display).takeUntilBy(this._stopper).onValue(()=>{let T=this._getActiveButtonContainer();T&&(0,C.default)(T,"button").click()})}});i.default=j}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../../../driver-common/sidebar/AppSidebar":678,"../../../../../lib/dom/make-element-child-stream":697,"../../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../../lib/dom/querySelectorOrFail":706,"../../../../../lib/dom/simulate-mouse-event":712,"../../../../../lib/fake-window-resize":715,"../../../../../lib/idMap":720,"../../../../../lib/incrementName":722,"../../../gmail-element-getter":532,"./add-companion-global-icon-area":544,"./add-companion-thread-icon-area":545,"./add-to-icon-area":546,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/find":315,"lodash/findIndex":316,"order-manager":368,react:437,"react-dom":415,ud:455}],548:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../../../lib/dom/querySelectorOrFail")),r=t(e("../../../../common/censorHTMLtree")),c=(t(e("kefir")),t(e("kefir-stopper"))),s=t(e("../../../driver-common/update-icon")),o=t(e("../gmail-element-getter")),d=t(e("../widgets/gmail-tooltip-view")),a=t(e("../../../widgets/buttons/dropdown-view")),p=t(e("./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react"));i.default=class{constructor(f,b){(0,n.default)(this,"_element",null),this._driver=f,this._stopper=(0,c.default)(),this._iconSettings={},b.takeUntilBy(this._stopper).onValue(_=>{try{this._handleButtonDescriptor(_)}catch(y){this._driver.getLogger().error(y)}}),(0,p.default)()}destroy(){this._stopper.destroy(),this._element&&this._element.remove(),this._activeDropdown&&this._activeDropdown.close()}getStopper(){return this._stopper}getElement(){return this._element}open(){try{this._activeDropdown||this._handleClick()}catch(f){this._driver.getLogger().error(f)}}close(){try{this._activeDropdown&&this._handleClick()}catch(f){this._driver.getLogger().error(f)}}_handleButtonDescriptor(f){if(!f)throw new Error("The application passed an invalid value for buttonDescriptor");let b=this._element=this._element||function(_,y){let g=document.createElement("div");g.setAttribute("class","inboxsdk__appButton"),g.innerHTML=`<a href="#">
               <span class="inboxsdk__appButton_title"></span>
             </a>`,g.addEventListener("click",C=>{C.preventDefault(),y(C)});let m=o.default.getTopAccountContainer();if(!m){let C=new Error("Could not make button"),I=document.querySelector("[role=banner]");throw _.getLogger().error(C,{type:"failed to make appToolbarButton",gbsfwPresent:!!document.getElementById("gbsfw"),bannerHtml:I&&(0,r.default)(I)}),C}let w=m;if(!w){let C=new Error("Could not make button");throw _.getLogger().error(C,{type:"failed to make appToolbarButton",topAccountContainerHTML:(0,r.default)(m)}),C}try{return o.default.isGplusEnabled()||g.classList.add("inboxsdk__appButton_noGPlus"),w.insertBefore(g,w.lastElementChild),g}catch(C){throw _.getLogger().error(C,{type:"failed to make appToolbarButton",insertionElementHTML:(0,r.default)(w)}),C}}(this._driver,()=>{this._handleClick()});this._buttonDescriptor=f,(0,s.default)(this._iconSettings,(0,u.default)(b,"a"),!1,f.iconClass,f.iconUrl),function(_,y){_.textContent=y.title,_.className=`inboxsdk__appButton_title ${y.titleClass||""}`}((0,u.default)(b,"span"),f)}_handleClick(){let f=this._element;if(!f)return;let b=this._buttonDescriptor;if(!b)throw new Error("app toolbar button clicked before receiving button descriptor");if(this._activeDropdown)this._activeDropdown.close();else{var _={},y=new d.default;y.getContainerElement().classList.add("inboxsdk__appButton_tooltip"),y.getContentElement().innerHTML="",b.arrowColor&&((0,u.default)(y.getContainerElement(),".T-P-atC").style.borderTopColor=b.arrowColor),_.dropdown=this._activeDropdown=new a.default(y,f,{manualPosition:!0}),_.dropdown.on("destroy",()=>{this._activeDropdown=null}),b.onClick&&b.onClick.call(null,_),this._element&&y.anchor(this._element,{position:"bottom",offset:{top:8}})}}}},{"../../../../common/censorHTMLtree":471,"../../../driver-common/update-icon":680,"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/dropdown-view":782,"../gmail-element-getter":532,"../widgets/gmail-tooltip-view":612,"./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react":549,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157}],549:[function(e,v,i){(function(t){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let u=t.ResizeObserver;if(!u)return;let r=document.body;if(!r)return;let c=r.querySelector("[role=banner]");!c||c.hasAttribute("inboxsdk__resize_claimed")||(c.setAttribute("inboxsdk__resize_claimed","true"),new u(()=>{c.clientWidth<n?r.classList.add("inboxsdk__searchIsNarrow"):r.classList.remove("inboxsdk__searchIsNarrow")}).observe(c))};let n=900}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],550:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./gmail-attachment-card-view")),r=t(e("../widgets/buttons/button-view")),c=t(e("../../../lib/dom/querySelectorOrFail")),s=t(e("../../../widgets/buttons/basic-button-view-controller")),o=(0,n.defn)(v,class{constructor(d,a,p){this._driver=a,this._messageViewDriver=p,this._elsToCardViews=new WeakMap,d?this._element=d:this._setupElement()}destroy(){this.getAttachmentCardViews().forEach(d=>{d.destroy()})}getElement(){return this._element}getAttachmentCardViews(){let d=this._element.querySelectorAll(".aQH > span");return Array.from(d).map(a=>{let p=this._elsToCardViews.get(a);return p||(p=new u.default({element:a},this._driver,this._messageViewDriver),this._elsToCardViews.set(a,p)),p})}_setupElement(){this._element=document.createElement("div"),this._element.setAttribute("class","hq gt a10"),this._element.innerHTML=['<div class="hp"></div>','<div class="a3I">Attachments area</div>',"<div></div>",'<div class="aQH">','<div class="aZK"></div>',"</div>"].join("")}_createAreaToolbarIfNeeded(){let d=this._element.querySelector(".ho");if(d)return d;let a=document.createElement("div");return a.className="ho",a.innerHTML=`<span class="aVW"><span>${this.getAttachmentCardViews().length}</span> Attachments</span><div class="aZi J-J5-Ji"></div>`,this._element.insertBefore(a,this._element.lastElementChild),this._element.classList.remove("a10"),a}_updateToolbarCardCount(){let d=this.getAttachmentCardViews().length;if(d>1){let a=this._createAreaToolbarIfNeeded();(0,c.default)(a,".aVW > span").textContent=String(d)}}addGmailAttachmentCardView(d){let a=this._element.querySelector(".aXK, .aQH");a?(a.insertBefore(d.getElement(),a.lastElementChild),this._updateToolbarCardCount()):this._driver.getLogger().error(new Error("Could not find attachment zone"))}addButtonToDownloadAllArea(d){var a=new r.default({iconClass:"T-I-J3",iconUrl:d.iconUrl,tooltip:d.tooltip,hasButtonToLeft:!0});a.addClass("aZj"),a.getElement().children[0].className="asa",new s.default({activateFunction:()=>{d.onClick&&d.onClick()},buttonView:a});let p=this._createAreaToolbarIfNeeded();(0,c.default)(p,".aZi").appendChild(a.getElement())}});i.default=o},{"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/basic-button-view-controller":780,"../widgets/buttons/button-view":600,"./gmail-attachment-card-view":551,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],551:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/find")),r=t(e("kefir")),c=t(e("kefir-stopper")),s=(t(e("util")),t(e("auto-html"))),o=e("ud"),d=t(e("../../../lib/from-event-target-capture")),a=t(e("../../../lib/dom/querySelectorOrFail")),p=t(e("../widgets/buttons/button-view")),f=t(e("../../../widgets/buttons/basic-button-view-controller")),b=e("../../../lib/dom/simulate-mouse-event"),_=t(e("../../../lib/wait-for"));t(e("../../../lib/stream-wait-for"));var y=(0,o.defn)(v,class{constructor(g,m,w){(0,n.default)(this,"_stopper",(0,c.default)()),(0,n.default)(this,"_previewClicks",r.default.pool()),this._driver=m,this._messageViewDriver=w,g.element?this._element=g.element:this._createNewElement(g)}destroy(){this._stopper.destroy()}getElement(){return this._element}getMessageViewDriver(){return this._messageViewDriver}getStopper(){return this._stopper}getPreviewClicks(){return this._previewClicks.takeUntilBy(this._stopper)}_isStandardAttachment(){return this.getAttachmentType()==="FILE"}getAttachmentType(){if(this._cachedType)return this._cachedType;let g=this._readAttachmentType();return g!=="UNLOADED"&&(this._cachedType=g),g}_readAttachmentType(){if(this._element.classList.contains("inboxsdk__attachmentCard"))return"CUSTOM";if(this._element.children.length===1&&this._element.children[0].children.length===0)return"UNLOADED";let g=this._getDownloadLink();return!g||g.match(/^https?:\/\/mail\.google\.com\//)?"FILE":g.match(/^https?:\/\/([^/]*\.)?google(usercontent)?\.com\//)?"DRIVE":"UNKNOWN"}addButton(g){var m=new p.default({iconUrl:g.iconUrl,tooltip:g.tooltip});new f.default({activateFunction:()=>{g.onClick&&g.onClick({getDownloadURL:()=>this.getDownloadURL()})},buttonView:m}),this._addButton(m)}getTitle(){let g=this._element.querySelector("span .aV3");return g?g.textContent:""}_getDownloadLink(){let g=this._element.firstElementChild;if(!g)throw new Error("Failed to find link");if(g.tagName==="A"&&g.href){let m=g.href;return m&&m.replace(/([?&])disp=inline(?=&|$)/,"$1disp=safe")}{let m=this._element.getAttribute("download_url");if(m){let w=/:(https:\/\/[^:]+)/.exec(m);return w?w[1]:null}}}async getDownloadURL(){try{if(this._isStandardAttachment()){let g=await(0,_.default)(()=>this._getDownloadLink());if(!g)return null;let m=await this._driver.resolveUrlRedirects(g);if(!/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(m)){let w=new Error("getDownloadURL returned unexpected url");if(this._driver.getLogger().error(w,{finalUrlCensored:m.replace(/\?[^/]+$/,"?[...]")}),/^https:\/\/mail\.google\.com\//.test(m))throw w}return m}{let g=this._element.querySelector("[data-inboxsdk-download-url]");return g?g.getAttribute("data-inboxsdk-download-url"):null}}catch(g){throw this._driver.getLogger().error(g),g}}_extractFileNameFromElement(){return(0,a.default)(this._element,".aQA > span").textContent}_createNewElement(g){this._element=document.createElement("span"),this._element.classList.add("aZo"),this._element.classList.add("inboxsdk__attachmentCard");var m=[s.default`
			<a target="_blank" role="link" class="aQy e" href="">
				<div aria-hidden="true">
					<div class="aSG"></div>
					<div class="aVY aZn">
						<div class="aZm"></div>
					</div>
					<div class="aSH">`];if(m=(m=g.iconThumbnailUrl?m.concat([s.default`
				<div class="aYv">
					<img class="aZG aYw" src="${g.iconThumbnailUrl}">
				</div>`]):m.concat([s.default`
				<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"
					src="${g.previewThumbnailUrl}">`])).concat([s.default`
			<div class="aYy">
				<div class="aYA">
					<img class="aSM" src="${g.fileIconImageUrl}">
				</div>
				<div class="aYz">
					<div class="a12">
						<div class="aQA">
							<span class="aV3 a6U"></span>
						</div>
						<div class="aYp">
							<span class="SaH2Ve"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="aSI">
			<div class="aSJ"></div>
		</div>
	</div>
</a>
<div class="aQw"></div>`]),this._element.innerHTML=m.join(""),this._element.children[0].href=g.previewUrl,g.mimeType&&g.mimeType.split("/")[0]==="image"&&this._element.children[0].classList.add("aZI"),(0,a.default)(this._element,"span .aV3").textContent=g.title,(0,a.default)(this._element,"div.aYp > span").textContent=g.description||"",(0,a.default)(this._element,"div.aSJ").style.borderColor=g.foldColor,this._addHoverEvents(),g.buttons){let w=(0,u.default)(g.buttons,function(C){return C.downloadUrl});w&&this._addDownloadButton(w),this._addMoreButtons(g.buttons)}if(this._previewClicks.plug(r.default.fromEvents(this._element,"click").map(w=>({preventDefault:()=>w.preventDefault()}))),g.previewThumbnailUrl&&g.failoverPreviewIconUrl){let w=(0,a.default)(this._element,".inboxsdk__attachmentCard_previewThumbnailUrl");w.onerror=C=>{var I=document.createElement("div");I.classList.add("aYv"),I.innerHTML='<img class="aZG aYw" src="'+g.failoverPreviewIconUrl+'">';let S=w.parentElement;if(!S)throw new Error("Could not find parent element");S.insertBefore(I,w.nextElementSibling),w.remove()}}}_addHoverEvents(){r.default.merge([r.default.fromEvents(this._element,"mouseenter"),(0,d.default)(this._element,"focus")]).onValue(()=>{this._element.classList.add("aZp")}),r.default.merge([r.default.fromEvents(this._element,"mouseleave"),(0,d.default)(this._element,"blur")]).onValue(()=>{this._element.classList.remove("aZp")});let g=(0,a.default)(this._element,"a");r.default.fromEvents(g,"focus").onValue(()=>{g.classList.add("a1U")}),r.default.fromEvents(g,"blur").onValue(()=>{g.classList.remove("a1U")})}_addDownloadButton(g){let m=new p.default({tooltip:"Download",iconClass:"aSK J-J5-Ji aYr"});m.getElement().setAttribute("data-inboxsdk-download-url",g.downloadUrl),new f.default({activateFunction:function(){let w=!1;if(g.onClick&&g.onClick({preventDefault:function(){w=!0}}),w)return;let C=document.createElement("a");C.href=g.downloadUrl,g.downloadFilename&&(C.download=g.downloadFilename),C.addEventListener("click",function(I){I.stopPropagation()},!0),g.openInNewTab&&C.setAttribute("target","_blank"),document.body.appendChild(C),(0,b.simulateClick)(C),C.remove()},buttonView:m}),this._addButton(m)}_addMoreButtons(g){(g||[]).filter(function(m){return!m.downloadUrl}).forEach(m=>{this.addButton(m)})}_addButton(g){g.addClass("aQv"),this._getButtonContainerElement().appendChild(g.getElement())}_getPreviewImageUrl(){var g=this._getPreviewImage();return g?g.src:null}_getPreviewImage(){return this._element.querySelector("img.aQG")}_getButtonContainerElement(){return(0,a.default)(this._element,".aQw")}});i.default=y},{"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/from-event-target-capture":716,"../../../lib/stream-wait-for":739,"../../../lib/wait-for":742,"../../../widgets/buttons/basic-button-view-controller":780,"../widgets/buttons/button-view":600,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-stopper":157,"lodash/find":315,ud:455,util:52}],552:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=(t(e("kefir")),t(e("kefir-stopper"))),c=(0,u.defn)(v,class{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;(0,n.default)(this,"_stopper",(0,r.default)());let d=document.createElement("div");if(d.className="Kj-JD-Jh inboxsdk__modal_overlay",d.style.zIndex=String(s),!o)throw new Error("no target");o.appendChild(d),this._stopper.onValue(()=>{d.remove()})}getStopper(){return this._stopper}destroy(){this._stopper.destroy()}});i.default=c},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,ud:455}],553:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("lodash/escape")),c=t(e("kefir")),s=t(e("kefir-bus")),o=t(e("../../../../common/defer")),d=t(e("auto-html")),a=t(e("../../../lib/dom/querySelectorOrFail")),p=t(e("../widgets/buttons/inbox-dropdown-button-view")),f=t(e("../widgets/gmail-dropdown-view")),b=t(e("../../../widgets/buttons/dropdown-button-view-controller"));function _(g){let m=g.backgroundColor||"rgb(194, 194, 194)",w=g.foregroundColor||"rgb(255, 255, 255)",C=g.maxWidth||"90px",I=[d.default`<div class="ar as" data-tooltip="${g.title}">
      <div class="at" style="background-color: ${m}; border-color: ${m};">
        <div class="au" style="border-color: ${m};">`],S=g.iconBackgroundColor?d.default`style="background-color: ${g.iconBackgroundColor}"`:"";return g.iconHtml!=null?I.push(d.default`<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"
        ${{__html:S}}
      >
        ${{__html:g.iconHtml}}
      </div>`):g.iconClass?I.push(d.default`<div
        class="inboxsdk__resultsSection_label_icon ${g.iconClass||""}"
        ${{__html:S}}
        >
      </div>`):g.iconUrl&&I.push(d.default`<img
        class="inboxsdk__resultsSection_label_icon"
        ${{__html:S}}
        src="${g.iconUrl}" />`),I.push(d.default`
          <div class="av" style="color: ${w}; max-width: ${C}">
            ${g.title}
          </div>
        </div>
      </div>
    </div>
    `),I.join("")}var y=(0,u.defn)(v,class{constructor(g,m,w,C){(0,n.default)(this,"_collapsibleSectionDescriptor",{}),(0,n.default)(this,"_element",null),(0,n.default)(this,"_headerElement",null),(0,n.default)(this,"_titleElement",null),(0,n.default)(this,"_bodyElement",null),(0,n.default)(this,"_contentElement",null),(0,n.default)(this,"_tableBodyElement",null),(0,n.default)(this,"_collapsedContainer",null),(0,n.default)(this,"_messageElement",null),(0,n.default)(this,"_footerElement",null),(0,n.default)(this,"_isCollapsed",!1),(0,n.default)(this,"_inboxDropdownButtonView",null),(0,n.default)(this,"_dropdownViewController",null),this._driver=g,this._isSearch=w,this._groupOrderHint=m,this._isCollapsible=C,this._eventStream=(0,s.default)(),this._isReadyDeferred=new o.default}destroy(){this._element&&this._element.remove(),this._eventStream&&this._eventStream.end(),this._headerElement&&this._headerElement.remove(),this._titleElement&&this._titleElement.remove(),this._bodyElement&&this._bodyElement.remove(),this._contentElement&&this._contentElement.remove(),this._tableBodyElement&&this._tableBodyElement.remove(),this._collapsedContainer&&this._collapsedContainer.remove(),this._messageElement&&this._messageElement.remove(),this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}getElement(){let g=this._element;if(!g)throw new Error("tried to access element that does not exist");return g}getEventStream(){return this._eventStream}setCollapsibleSectionDescriptorProperty(g){let m=g.takeUntilBy(this._eventStream.filter(()=>!1).beforeEnd(()=>null));m.onValue(w=>this._updateValues(w)),m.take(1).onValue(w=>this._isReadyDeferred.resolve(this))}setCollapsed(g){this._isCollapsible&&this._isReadyDeferred.promise.then(()=>{g?this._collapse():this._expand()})}_updateValues(g){let m=this._element;g?(m&&(m.style.display=""),m?this._updateElement(g):(this._setupElement(g),this._showLoadingMessage()),this._updateHeader(g),this._updateTitle(g),this._updateSubtitle(g),this._updateSummaryText(g),this._updateDropdown(g),this._updateContentElement(g),this._updateTableRows(g),this._updateMessageElement(g),this._updateFooter(g),this._collapsibleSectionDescriptor=g):m&&(m.style.display="none")}_setupElement(g){let m=this._element=document.createElement("div");m.setAttribute("class","inboxsdk__resultsSection"),m.setAttribute("data-group-order-hint",String(this._groupOrderHint)),m.setAttribute("data-order-hint",String(typeof g.orderHint=="number"?g.orderHint:0)),this._isCollapsible||m.classList.add("inboxsdk__resultsSection_nonCollapsible"),this._setupHeader(g);let w=this._bodyElement=document.createElement("div"),C=document.createElement("div");C.classList.add("zE"),w.appendChild(C),m.appendChild(w);let I=this._contentElement=document.createElement("div");C.appendChild(I);let S=this._messageElement=document.createElement("div");C.appendChild(S);let O=this._tableBodyElement=document.createElement("div");C.appendChild(O),this._setupFooter(g),this._isCollapsible&&this._titleElement&&c.default.fromEvents(this._titleElement,"click").onValue(()=>this._toggleCollapseState()),c.default.fromEvents(m,"removeCollapsedContainer").onValue(()=>this._destroyCollapsedContainer()),c.default.fromEvents(m,"readdToCollapsedContainer").onValue(()=>this._addToCollapsedContainer()),this._eventStream.emit({type:"update",property:"orderHint",sectionDescriptor:g})}_setupHeader(g){let m=this._headerElement=document.createElement("div");m.classList.add("inboxsdk__resultsSection_header","Wg"),this._setupGmailv2Header(m,g),this._element&&this._element.appendChild(m)}_setupGmailv2Header(g,m){let w=this._titleElement=document.createElement("div");w.setAttribute("class","inboxsdk__resultsSection_title"),w.innerHTML=['<h3 class="Wr iR">','<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">','<div class="Wn">',(0,r.default)(m.title),"</div>","</h3>"].join("");let C=document.createElement("div");C.classList.add("Cr"),this._isSearch&&C.classList.add("Wg"),g.appendChild(w),g.appendChild(C)}_setupFooter(g){let m=this._footerElement=document.createElement("div");m.classList.add("inboxsdk__resultsSection_footer"),this._bodyElement&&this._bodyElement.appendChild(m)}_updateElement(g){if(this._collapsibleSectionDescriptor.orderHint!==g.orderHint){let m=this._element;m&&m.setAttribute("data-order-hint",""+(typeof g.orderHint=="number"?g.orderHint:0)),this._eventStream.emit({type:"update",property:"orderHint"})}}_updateHeader(g){this._isCollapsible||g.title||g.subtitle||g.titleLinkText||g.hasDropdown?this._headerElement&&(this._headerElement.style.display=""):this._headerElement&&(this._headerElement.style.display="none")}_updateTitle(g){if(this._collapsibleSectionDescriptor.title!==g.title){let m="h3 > .Wn";this._titleElement&&((0,a.default)(this._titleElement,m).textContent=g.title)}}_updateSubtitle(g){let m=this._titleElement;if(!m)return;let w=m.querySelector(".inboxsdk__resultsSection_title_subtitle");if(g.subtitle){if(this._collapsibleSectionDescriptor.subtitle!==g.subtitle){if(!w&&(w=document.createElement("span"),w&&m)){w.classList.add("inboxsdk__resultsSection_title_subtitle");let C=m.querySelector(".Wn");C&&(w.classList.add("aw5"),C.appendChild(w))}w.textContent="("+g.subtitle+")"}}else w&&w.remove()}_updateSummaryText(g){let m=this._headerElement;if(!m)return;let w=m.querySelector(".inboxsdk__resultsSection_header_summaryText");if(g.titleLinkText){if(g.titleLinkText!==this._collapsibleSectionDescriptor.titleLinkText){if(!w){w=document.createElement("div"),w.setAttribute("class","inboxsdk__resultsSection_header_summaryText Wm"),w.innerHTML=['<span class="Di">&nbsp;','<div class="J-J5-Ji amH">','<span class="Dj">',"<span></span>","</span>","&nbsp;","</div>","</span>"].join(""),this._eventStream.plug(c.default.fromEvents(w,"click").map(()=>({eventName:"titleLinkClicked",sectionDescriptor:this._collapsibleSectionDescriptor})));let C=w;w.addEventListener("mouseenter",function(){C.classList.add("aqi")}),w.addEventListener("mouseleave",function(){C.classList.remove("aqi")});let I=m.querySelector(".Cr");I&&I.insertAdjacentElement("afterbegin",w)}(0,a.default)(w,".Dj > *").textContent=g.titleLinkText}}else w&&w.remove()}_updateDropdown(g){if(g.hasDropdown&&g.onDropdownClick){if(g.hasDropdown&&g.onDropdownClick)if(this._inboxDropdownButtonView&&this._dropdownViewController)g.onDropdownClick!==this._collapsibleSectionDescriptor.onDropdownClick&&this._dropdownViewController&&this._dropdownViewController.setDropdownShowFunction(g.onDropdownClick);else{let m=this._inboxDropdownButtonView=new p.default;this._dropdownViewController=new b.default({buttonView:m,dropdownViewDriverClass:f.default,dropdownShowFunction:g.onDropdownClick});let w=this._headerElement;if(w){let C=w.querySelector(".Cr");C&&C.appendChild(m.getElement())}}}else this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}_updateContentElement(g){let m=this._contentElement;m&&(m.innerHTML="",g.contentElement?(m.style.display="",m.appendChild(g.contentElement)):m.style.display="none")}_updateTableRows(g){let{tableRows:m}=g,w=this._tableBodyElement;w&&(w.innerHTML="",m&&m.length!==0?(w.style.display="",this._renderTable(m)):w.style.display="none")}_renderTable(g){let m=document.createElement("table");m.setAttribute("class","F cf zt"),m.innerHTML=["<colgroup>",'<col class="k0vOLb">','<col class="Ci">','<col class="y5">','<col class="WA">','<col class="yY">',"<col>",'<col class="xX">',"</colgroup>","<tbody>","</tbody>"].join(""),this._tableBodyElement&&this._tableBodyElement.appendChild(m);let w=m.querySelector("tbody"),C=this._eventStream;g.forEach(I=>{let S=document.createElement("tr");if(S.setAttribute("class","inboxsdk__resultsSection_tableRow zA "+(I.isRead?"yO":"zE")),S.innerHTML=function(O){let A="";O.iconHtml!=null?A=d.default`<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">
        ${{__html:O.iconHtml}}
      </div>`:O.iconUrl?A=d.default`<img class="inboxsdk__resultsSection_result_icon ${O.iconClass||""}" src="${O.iconUrl}">`:O.iconClass&&(A=d.default`<div class="${O.iconClass}"></div>`);let E=Array.isArray(O.labels)?O.labels.map(_).join(""):"";return['<td class="xY PF"></td>','<td class="xY oZ-x3"></td>','<td class="xY WA">',A,"</td>",'<td class="xY WA"></td>','<td class="xY yX inboxsdk__resultsSection_result_title">','<div class="yW">',"<span "+(O.isRead?"":'class="zF"')+">",(0,r.default)(O.title),"</span>","</div>","</td>",'<td class="xY a4W">','<div class="xS">','<div class="xT">','<div class="yi">',E,"</div>",'<div class="y6">','<span class="bog">',O.isRead?"":"<b>",(0,r.default)(O.body||""),O.isRead?"":"</b>","</span>","</div>","</div>","</div>","</td>",'<td class="xY xW">',"<span"+(O.isRead?"":' class="bq3"')+">",(0,r.default)(O.shortDetailText||""),"</span>","</td>"].join("")}(I),!w)throw new Error("should not happen");w.appendChild(S),C.plug(c.default.fromEvents(S,"click").map(()=>({eventName:"rowClicked",rowDescriptor:I})))})}_updateMessageElement(g){let m=this._messageElement;g.tableRows&&g.tableRows.length>0||g.contentElement?m&&(m.innerHTML="",m.style.display="none"):g.tableRows&&g.tableRows.length===0&&!g.contentElement&&this._showEmptyMessage()}_showLoadingMessage(){let g=this._messageElement;g&&(g.setAttribute("class","TB TC inboxsdk__resultsSection_loading"),g.innerHTML="loading...",g.style.display="")}_showEmptyMessage(){let g=this._messageElement;g&&(g.setAttribute("class","TB TC"),g.innerHTML="No results found",g.style.display="")}_updateFooter(g){let m=this._footerElement;if(m)if(m.innerHTML="",g.footerLinkText||g.footerLinkIconUrl||g.footerLinkIconClass){m.style.display="";let w=document.createElement("span");w.setAttribute("class","e Wb"),w.textContent=g.footerLinkText,this._eventStream.plug(c.default.fromEvents(w,"click").map(()=>({eventName:"footerClicked",sectionDescriptor:this._collapsibleSectionDescriptor}))),m.appendChild(w),m.insertAdjacentHTML("beforeend",'<br style="clear:both;">')}else m.style.display="none"}_toggleCollapseState(){this._isCollapsed?this._expand():this._collapse()}_collapse(){let g=this._element;if(!!g){if(g.classList.add("inboxsdk__resultsSection_collapsed"),this._isSearch||this._addToCollapsedContainer(),this._titleElement){let m=(0,a.default)(this._titleElement,"h3 > img.Wp");m&&(m.classList.remove("Wq"),m.classList.add("Wo"))}this._bodyElement&&(this._bodyElement.style.display="none"),this._isCollapsed=!0,this._eventStream.emit({eventName:"collapsed"})}}_expand(){let g=this._element;if(!!g){if(g.classList.remove("inboxsdk__resultsSection_collapsed"),this._isSearch||this._removeFromCollapsedContainer(),this._titleElement){let m=(0,a.default)(this._titleElement,"h3 > img.Wp");m&&(m.classList.remove("Wo"),m.classList.add("Wq"))}this._bodyElement&&(this._bodyElement.style.display=""),this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}}_addToCollapsedContainer(){let g=this._element;if(g)if(this._headerElement&&this._headerElement.classList.remove("Wg"),this._isCollapsedContainer(g.previousElementSibling)&&this._isCollapsedContainer(g.nextElementSibling)){let m=g.nextElementSibling,w=g.previousElementSibling;if(!w)throw new Error("previousSibling does not exist");if(!m)throw new Error("otherCollapseContainer does not exist");w.children[0].appendChild(g);let C=Array.from(m.children[0].children).concat(Array.from(m.children[1].children));m&&this._pulloutSectionsFromCollapsedContainer(m),this._recollapse(C)}else this._readdToCollapsedContainer()}_removeFromCollapsedContainer(){this._headerElement&&this._headerElement.classList.add("Wg");let g=this._element;if(!g)return;let m=g.parentElement;if(!m)return;let w=m.parentElement;if(!w||!w.classList.contains("inboxsdk__results_collapsedContainer"))return;let C=Array.from(w.children[0].children).concat(Array.from(w.children[1].children));this._pulloutSectionsFromCollapsedContainer(w),this._destroyCollapsedContainer(),this._recollapse(C.filter(I=>I!==g))}_pulloutSectionsFromCollapsedContainer(g){Array.from(g.children[0].children).forEach(m=>g.insertAdjacentElement("beforebegin",m)),Array.from(g.children[1].children).reverse().forEach(m=>g.insertAdjacentElement("afterend",m))}_readdToCollapsedContainer(){let g=this._element;if(!g)return;if(this._collapsedContainer)return void this._collapsedContainer.children[0].insertBefore(g,this._collapsedContainer.children[1].firstElementChild);let m,w;this._isCollapsedContainer(g.previousElementSibling)?(w=!1,m=g.previousElementSibling):this._isCollapsedContainer(g.nextElementSibling)?(w=!0,m=g.nextElementSibling):(w=!0,this._createCollapsedContainer(),m=this._collapsedContainer),w&&m?m.children[0].insertBefore(g,m.children[0].firstElementChild):m&&m.children[0].appendChild(g)}_isCollapsedContainer(g){return g&&g.classList.contains("inboxsdk__results_collapsedContainer")}_recollapse(g){g.forEach(m=>{let w=document.createEvent("CustomEvent");w.initCustomEvent("removeCollapsedContainer",!1,!1,null),m.dispatchEvent(w);let C=document.createEvent("CustomEvent");C.initCustomEvent("readdToCollapsedContainer",!1,!1,null),m.dispatchEvent(C)})}_createCollapsedContainer(){let g=this._collapsedContainer=document.createElement("div");g.setAttribute("class","inboxsdk__results_collapsedContainer Wg"),g.innerHTML='<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';let m=this._element;m&&m.insertAdjacentElement("afterend",g)}_destroyCollapsedContainer(){this._collapsedContainer&&(this._collapsedContainer.remove(),this._collapsedContainer=null)}});i.default=y},{"../../../../common/defer":473,"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/dropdown-button-view-controller":781,"../widgets/buttons/inbox-dropdown-button-view":603,"../widgets/gmail-dropdown-view":608,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-bus":155,"lodash/escape":313,ud:455}],554:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("auto-html")),r=t(e("transducers.js")),c=t(e("lodash/once")),s=t(e("lodash/escape")),o=t(e("lodash/includes")),d=t(e("lodash/constant")),a=t(e("lodash/find")),p=t(e("asap")),f=t(e("pdelay")),b=qe(e("kefir")),_=qe(e("ud")),y=t(e("closest-ng")),g=t(e("kefir-bus")),m=t(e("kefir-stopper")),w=t(e("../../../lib/delay-asap")),C=e("../../../lib/dom/simulate-mouse-event"),I=t(e("../../../lib/dom/simulate-key")),S=t(e("../../../lib/dom/querySelectorOrFail")),O=t(e("../../../../common/isElementVisible")),A=t(e("../../../lib/dom/make-element-child-stream")),E=e("../../../lib/dom/simulate-drag-and-drop"),D=qe(e("../gmail-response-processor")),P=t(e("../gmail-element-getter")),j=t(e("../../../lib/dom/set-css")),k=t(e("../../../lib/wait-for")),M=t(e("../../../lib/stream-wait-for")),R=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),V=t(e("../../../lib/handle-compose-link-chips")),T=t(e("../../../lib/insert-link-chip-into-body")),U=t(e("./gmail-compose-view/add-compose-notice")),W=t(e("./gmail-compose-view/add-status-bar")),Q=t(e("../../../lib/dom/insert-html-at-cursor")),X=t(e("./gmail-compose-view/ensure-grouping-is-open")),oe=t(e("./gmail-compose-view/ensure-app-button-toolbars-are-closed")),J=t(e("./gmail-compose-view/size-fixer")),he=t(e("./gmail-compose-view/add-tooltip-to-button")),ae=t(e("./gmail-compose-view/add-recipient-row")),ue=t(e("./gmail-compose-view/add-button")),ge=t(e("./gmail-compose-view/set-recipients")),N=t(e("./gmail-compose-view/focus")),F=t(e("./gmail-compose-view/monitor-selection-range")),K=t(e("./gmail-compose-view/manage-button-grouping")),H=e("../../../lib/dom/get-selection"),$=t(e("./gmail-compose-view/get-minimized-stream")),se=t(e("../../../../common/censorHTMLstring")),pe=t(e("./gmail-compose-view/insert-link-into-body")),Te=t(e("./gmail-compose-view/get-address-changes-stream")),$e=t(e("./gmail-compose-view/get-body-changes-stream")),He=t(e("./gmail-compose-view/get-recipients")),re=t(e("./gmail-compose-view/get-response-type-changes-stream")),le=t(e("../../../driver-common/compose/getPresendingStream")),ve=t(e("../../../driver-common/compose/getDiscardStream")),De=t(e("./gmail-compose-view/update-insert-more-area-left")),xe=t(e("./gmail-compose-view/setupLinkPopovers")),Se=t(e("./gmail-compose-view/get-formatting-area-offset-left")),Ee=t(e("./gmail-compose-view/override-edit-subject")),ye=t(e("./gmail-compose-view/detectClassicRecipientsArea")),Ne=(t(e("../../../../common/censorHTMLtree")),e("./gmail-compose-view/page-parser")),Ue=(t(e("page-parser-tree")),e("tag-tree"),qe(e("./gmail-compose-view/from-manager")));function de(ce){if(typeof WeakMap!="function")return null;var Le=new WeakMap,Fe=new WeakMap;return(de=function(Be){return Be?Fe:Le})(ce)}function qe(ce,Le){if(!Le&&ce&&ce.__esModule)return ce;if(ce===null||typeof ce!="object"&&typeof ce!="function")return{default:ce};var Fe=de(Le);if(Fe&&Fe.has(ce))return Fe.get(ce);var Be={},nt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var it in ce)if(it!=="default"&&Object.prototype.hasOwnProperty.call(ce,it)){var Ge=nt?Object.getOwnPropertyDescriptor(ce,it):null;Ge&&(Ge.get||Ge.set)?Object.defineProperty(Be,it,Ge):Be[it]=ce[it]}return Be.default=ce,Fe&&Fe.set(ce,Be),Be}let tt=!1;var Re=_.defn(v,class{constructor(ce,Le,Fe,Be){let nt;(0,n.default)(this,"_closedProgrammatically",!1),(0,n.default)(this,"_destroyed",!1),(0,n.default)(this,"_hasSetupLinkPopOvers",!1),this._element=ce,this._element.classList.add("inboxsdk__compose"),Be.isInlineReplyForm&&this._element.classList.add("inboxsdk__compose_inlineReply"),this._isInlineReplyForm=Be.isInlineReplyForm,this._isStandalone=Be.isStandalone,this._isFullscreen=!1,this._emailWasSent=!1,this._messageId=null,this._finalMessageId=null,this._draftSaving=!1,this._draftIDpromise=null,this._driver=Fe,this._stopper=(0,m.default)(),this._managedViewControllers=[],this._requestModifiers={},this._isListeningToAjaxInterceptStream=!1,this._eventStream=(0,g.default)(),this._removedFromDOMStopper=(0,m.default)(),this._isTriggeringADraftSavePending=!1,this._page=(0,Ne.makePageParser)(ce,Fe.getLogger()),this.tagTree=this._page.tree,nt=this._driver.isUsingSyncAPI()?Le.filter(Ge=>Ge.draftID===this._getDraftIDfromForm()).map(Ge=>{switch(Ge.type){case"emailSending":return{eventName:"sending"};case"emailSent":{let Xe=Ge.threadID,rt=Ge.messageID;return Ge.oldMessageID&&(this._messageId=Ge.oldMessageID),Ge.oldThreadID&&(this._threadID=Ge.oldThreadID),Fe.removeCachedGmailMessageIdForSyncMessageId(rt),Fe.removeCachedOldGmailThreadIdFromSyncThreadId(Xe),{eventName:"sent",data:{getThreadID:(0,c.default)(async()=>Ge.oldThreadID?Ge.oldThreadID:await Fe.getOldGmailThreadIdFromSyncThreadId(Xe)),getMessageID:(0,c.default)(async()=>Ge.oldMessageID?Ge.oldMessageID:await Fe.getGmailMessageIdForSyncMessageId(rt))}}}case"emailSendFailed":return{eventName:"sendCanceled"};case"emailDraftReceived":return this._messageId=Ge.oldMessageID,this._threadID=Ge.oldThreadID,{eventName:"draftSaved",data:{getThreadID:()=>Promise.resolve(Ge.oldThreadID),getMessageID:()=>Promise.resolve(Ge.oldMessageID)}};default:return null}}).filter(Boolean):Le.filter(Ge=>Ge.composeId===this.getComposeID()).map(Ge=>{switch(Ge.type){case"emailSending":return[{eventName:"sending"}];case"emailSent":{let Xe=D.interpretSentEmailResponse(Ge.response);if((0,o.default)(["tr","eu"],Xe.messageID))return[{eventName:"sendCanceled"}];this._emailWasSent=!0,Xe.messageID&&(this._finalMessageId=Xe.messageID),this._messageId=null;let rt={getThreadID:()=>Promise.resolve(Xe.threadID),getMessageID:()=>Promise.resolve(Xe.messageID)};return["threadID","gmailThreadId"].forEach(ot=>{Object.defineProperty(rt,ot,{get:()=>(this._driver.getLogger().deprecationWarning(`composeView sent event.${ot}`,"composeView sent event.getThreadID()"),Xe.threadID)})}),["messageID","gmailMessageId"].forEach(ot=>{Object.defineProperty(rt,ot,{get:()=>(this._driver.getLogger().deprecationWarning(`composeView sent event.${ot}`,"composeView sent event.getMessageID()"),Xe.messageID)})}),[{eventName:"sent",data:rt}]}case"emailDraftSaveSending":return this._draftSaving=!0,[{eventName:"draftSaving"}];case"emailDraftReceived":{let Xe;this._draftSaving=!1;try{Xe=D.interpretSentEmailResponse(Ge.response)}catch(ot){throw this._driver.getAppId()==="sdk_streak_21e9788951"&&this._driver.getLogger().error(ot,{connectionDetails:Ge.connectionDetails,response:Ge.response}),ot}if(Xe.messageID==="eu")return[];let rt=[{eventName:"draftSaved",data:Xe}];return Xe.messageID?Xe.messageID&&this._messageId!==Xe.messageID&&(/^[0-9a-f]+$/i.test(Xe.messageID)?(this._messageId=Xe.messageID,rt.push({eventName:"messageIDChange",data:this._messageId})):this._driver.getLogger().error(new Error("Invalid message id from emailDraftReceived"),{value:Xe.messageID})):this._driver.getLogger().error(new Error("Missing message id from emailDraftReceived")),rt}default:return[]}}).flatten().map(Ge=>(this._driver.getLogger().shouldTrackEverything()&&Fe.getLogger().eventSite("compose.debug.xhr",{eventName:Ge.eventName}),Ge)),this._eventStream.plug(b.merge([nt,b.fromEvents(this._element,"buttonAdded").map(()=>({eventName:"buttonAdded"})),b.fromEvents(this._element,"resize").map(()=>({eventName:"resize"})),b.fromEvents(this._element,"composeFullscreenStateChanged").map(()=>(this._updateComposeFullscreenState(),{eventName:"fullscreenChanged",data:{fullscreen:this._isFullscreen}}))])),b.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(()=>{this._closedProgrammatically=!0}),this._buttonViewControllerTooltipMap=new WeakMap;let it=this.getMaybeBodyElement();this.ready=(0,d.default)((it?b.constant(it):(0,M.default)(()=>this.getMaybeBodyElement(),18e4)).takeUntilBy(this._stopper).map(Ge=>(this._seenBodyElement=Ge,this._composeID=this._element.querySelector('input[name="composeid"]').value,this._messageIDElement=this._element.querySelector('input[name="draft"]'),this._messageIDElement||(Fe.getLogger().error(new Error("Could not find compose message id field")),this._messageIDElement=document.createElement("input")),this._setupIDs(),this._setupStreams(),this._setupConsistencyCheckers(),this._updateComposeFullscreenState(),this.getEventStream().filter(Xe=>{let{eventName:rt}=Xe;return rt==="presending"}).takeUntilBy(this._stopper).onValue(()=>{(0,A.default)(document.body).map(Xe=>Xe.el).filter(Xe=>Xe.getAttribute&&Xe.getAttribute("role")==="alertdialog").takeUntilBy(b.merge([this.getEventStream().filter(Xe=>{let{eventName:rt}=Xe;return rt==="sendCanceled"||rt==="sending"}),b.later(15)])).onValue(()=>{this._eventStream.emit({eventName:"sendCanceled"})})}),this)).toProperty()),this.ready().onError(Ge=>{Fe.getLogger().error(Ge,{hasForm:!!this.getElement().querySelector("form"),class:this.getElement().getAttribute("class")})}),this._driver.isUsingSyncAPI()?b.merge([this._removedFromDOMStopper.filterBy(this._eventStream.filter(Ge=>{let{eventName:Xe}=Ge;return Xe==="presending"||Xe==="sendCanceled"}).map(Ge=>{let{eventName:Xe}=Ge;return Xe==="sendCanceled"}).toProperty(()=>!0)),b.combine([this._removedFromDOMStopper,this._eventStream.filter(Ge=>{let{eventName:Xe}=Ge;return Xe==="sent"})])]).take(1).flatMap(()=>(0,w.default)(null)).onValue(()=>this._destroy()):this._removedFromDOMStopper.onValue(()=>this._destroy()),(0,ye.default)()}destroy(){this._removedFromDOMStopper.destroy(),this._page.dump()}_destroy(){this._eventStream.emit({eventName:"destroy",data:{messageID:this.getMessageID(),closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._managedViewControllers.forEach(ce=>{ce.destroy()}),this._requestModifiers={},this._managedViewControllers.length=0,this._stopper.destroy(),this._destroyed=!0}getStopper(){return this._stopper}getEventStream(){return this._eventStream}getGmailDriver(){return this._driver}isDestroyed(){return this._destroyed}_setupStreams(){let ce;this._eventStream.plug((0,Te.default)(this)),this._eventStream.plug((0,$e.default)(this)),this._eventStream.plug((0,re.default)(this)),this._eventStream.plug((0,le.default)({element:this.getElement(),sendButton:this.getSendButton(),sendAndArchive:this.getSendAndArchiveButton()}));try{ce=this.getDiscardButton()}catch{this._driver.getLogger().errorSite(new Error("Failed to find discard button"),{html:(0,se.default)(this._element.outerHTML)})}ce&&this._eventStream.plug((0,ve.default)({element:this.getElement(),discardButton:ce})),this._eventStream.plug(b.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(()=>({eventName:"sendCanceled"}))),this._eventStream.plug(b.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(()=>({eventName:"discardCanceled"}))),this._eventStream.plug(b.later(10).flatMap(()=>(0,$.default)(this)).changes().map(Le=>({eventName:Le?"minimized":"restored"}))),this._driver.isUsingSyncAPI()||(0,R.default)(this._messageIDElement,{attributes:!0,attributeFilter:["value"]}).takeUntilBy(this._eventStream.filter(()=>!1).beforeEnd(()=>null)).map(()=>this._getMessageIDfromForm()).filter(Le=>Le&&!this._emailWasSent&&this._messageId!==Le).onValue(Le=>{this._messageId=Le,this._eventStream.emit({eventName:"messageIDChange",data:this._messageId})})}_setupConsistencyCheckers(){try{(0,V.default)(this),(0,F.default)(this),(0,K.default)(this),(0,J.default)(this._driver,this)}catch(ce){this._driver.getLogger().error(ce)}}_setupIDs(){if(this._driver.isUsingSyncAPI()){let ce=this._getTargetMessageID();ce&&this._driver.getGmailMessageIdForSyncMessageId(ce).then(Be=>this._targetMessageID=Be);let Le=this._getMessageIDfromForm();Le?(this._driver.getGmailMessageIdForSyncDraftId(Le).then(Be=>{this._initialMessageId=Be,this._messageId=Be}).catch(()=>{}),this._driver.reportRecentSyncDraftId(Le),this._stopper.onValue(()=>{this._driver.reportDraftClosed(Le)})):this._driver.getLogger().error(new Error("Draft is missing sync draft id"));let Fe=this._element.querySelector('input[name="lts"]');Fe&&typeof Fe.value=="string"&&(this._threadID=Fe.value)}else this._targetMessageID=this._getTargetMessageID(),this._messageId=this._initialMessageId=this._getMessageIDfromForm(),this._threadID=this._getThreadID()}_updateComposeFullscreenState(){if(this._isInlineReplyForm)this._isFullscreen=!1;else if(this._isStandalone)this._isFullscreen=!0;else{let ce=P.default.getFullscreenComposeWindowContainer();this._isFullscreen=!!ce&&ce.contains(this._element)}}focus(){(0,N.default)(this)}insertBodyTextAtCursor(ce){return this.insertBodyHTMLAtCursor((0,s.default)(ce).replace(/\n/g,"<br>"))}insertBodyHTMLAtCursor(ce){var Le=(0,Q.default)(this.getBodyElement(),ce,this.getLastSelectionRange());return this._triggerDraftSave(),(0,I.default)(this.getBodyElement(),13,13),Le}insertLinkIntoBody(ce,Le){var Fe=(0,pe.default)(this,ce,Le);return this._triggerDraftSave(),Fe}insertLinkChipIntoBody(ce){var Le=(0,T.default)(this,ce);return this._triggerDraftSave(),Le}setSubject(ce){this._element.querySelector("input[name=subjectbox]").value=ce,this._triggerDraftSave()}setBodyHTML(ce){this.getBodyElement().innerHTML=ce,this._triggerDraftSave()}setBodyText(ce){this.getBodyElement().textContent=ce,this._triggerDraftSave()}setToRecipients(ce){(0,ge.default)(this,"to",ce),this._triggerDraftSave()}setCcRecipients(ce){(0,ge.default)(this,"cc",ce),this._triggerDraftSave()}setBccRecipients(ce){(0,ge.default)(this,"bcc",ce),this._triggerDraftSave()}addRecipientRow(ce){return(0,ae.default)(this,ce)}forceRecipientRowsOpen(){return this._element.classList.add("inboxsdk__compose_forceRecipientsOpen"),()=>{this._element.classList.remove("inboxsdk__compose_forceRecipientsOpen")}}hideNativeRecipientRows(){let ce=(0,Ne.getRecipientRowElements)(this._element);return ce.forEach(Le=>{Le.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),()=>{ce.forEach(Le=>{Le.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}hideRecipientArea(){return this._element.classList.add("inboxsdk__compose_hideRecipientArea"),()=>{this._element.classList.remove("inboxsdk__compose_hideRecipientArea")}}getFromContact(){return Ue.getFromContact(this._driver,this)}getFromContactChoices(){return Ue.getFromContactChoices(this._driver,this)}setFromEmail(ce){Ue.setFromEmail(this._driver,this,ce)}addButton(ce,Le,Fe){return(0,ue.default)(this,ce,Le,Fe)}addTooltipToButton(ce,Le,Fe){var Be=(0,he.default)(this,ce,Le,Fe);this._buttonViewControllerTooltipMap.set(ce,Be)}closeButtonTooltip(ce){if(this._buttonViewControllerTooltipMap){var Le=this._buttonViewControllerTooltipMap.get(ce);Le&&(Le.destroy(),this._buttonViewControllerTooltipMap.delete(ce))}}addComposeNotice(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=(0,U.default)(this,ce);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),b.fromEvents(Le,"destroy").flatMap(w.default).takeUntilBy(this._stopper).onValue(()=>{this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),Le}addStatusBar(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=(0,W.default)(this,ce);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),b.fromEvents(Le,"destroy").flatMap(w.default).takeUntilBy(this._stopper).onValue(()=>{this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),Le}hideNativeStatusBar(){let ce=this.getStatusArea(),Le=(0,S.default)(ce,"table"),Fe=this.getFormattingToolbar(),Be=Fe&&Fe.style.display!=="none";return Le.style.display="none",Fe&&Be&&(Fe.style.display="none"),()=>{Le.style.display="",Fe&&Be&&(Fe.style.display="")}}replaceSendButton(ce){let Le=this.getSendButtonGroup(),Fe=this.getSendAndArchiveButton();Le.style.display="none";let Be=Fe&&Fe.parentElement;Be instanceof HTMLElement&&(Be.style.display="none");let nt=document.createElement("div");nt.classList.add("inboxsdk__compose_customSendContainer"),nt.appendChild(ce),Le.insertAdjacentElement("afterend",nt),this._element.setAttribute("data-inboxsdk-send-replaced","");let it=(0,m.default)();return b.fromEvents(this.getBodyElement(),"keydown").takeUntilBy(this._stopper).takeUntilBy(it).filter(Ge=>(Ge.which===9||Ge.keyCode===9)&&!Ge.shiftKey).onValue(Ge=>{let Xe=this.getStatusArea().querySelectorAll("[tabindex]");if(Xe.length===0)return;let rt=Array.from(Xe).find(ot=>ot.offsetParent!==null);rt&&(Ge.preventDefault(),Ge.stopPropagation(),Ge.stopImmediatePropagation(),rt.focus())}),()=>{it.destroy(),nt.remove(),this._element.removeAttribute("data-inboxsdk-send-replaced"),Le.style.display="",Be instanceof HTMLElement&&(Be.style.display="")}}hideDiscardButton(){let ce=this.getDiscardButton();return ce.style.display="none",()=>{ce.style.display=""}}ensureFormattingToolbarIsHidden(){let ce=this.getFormattingToolbarToggleButton(),Le=this.getFormattingToolbar();ce&&Le&&Le.style.display===""&&(0,C.simulateClick)(ce)}close(){this.isInlineReplyForm()||(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),this._isFullscreen?(this._eventStream.filter(ce=>{let{eventName:Le}=ce;return Le==="fullscreenChanged"}).onValue(()=>(0,C.simulateClick)(this.getCloseButton())),(0,C.simulateClick)(this.getMoleSwitchButton())):(0,C.simulateClick)(this.getCloseButton()))}send(ce){let{sendAndArchive:Le}=ce;(0,p.default)(()=>{let Fe=this.getSendAndArchiveButton();Le&&Fe?(0,C.simulateClick)(Fe):(0,C.simulateClick)(this.getSendButton())})}discard(){(0,C.simulateClick)(this.getDiscardButton())}popOut(){if(!this.isInlineReplyForm())throw new Error("Can only pop out inline reply compose views");let ce=(0,S.default)(this._element,".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");(0,C.simulateClick)(ce)}overrideEditSubject(){(0,Ee.default)(this._driver,this)}_hideDropzones(){(0,j.default)("compose dropzone hider","body > .aC7 .aC9 {visibility: hidden;}")}_reenableDropzones(){(0,j.default)("compose dropzone hider",null)}_dropzonesVisible(){return(0,a.default)(document.querySelectorAll("body > .aC7:not(.aWP)"),O.default)!=null}_findDropzoneForThisCompose(ce){let Le=this._element.getBoundingClientRect(),Fe=ce?"body > .aC7:not(.aWP)":"body > .aC7.aWP",Be=r.default.toArray(Array.prototype.slice.call(document.querySelectorAll(Fe)),r.default.compose(r.default.filter(O.default),r.default.filter(nt=>{let it=parseInt(nt.style.top,10),Ge=it+parseInt(nt.style.height,10),Xe=parseInt(nt.style.left,10),rt=Xe+parseInt(nt.style.width,10);return it>=Le.top&&Xe>=Le.left&&rt<=Le.right&&Ge<=Le.bottom}),r.default.take(1)))[0];if(!Be)throw new Error("Failed to find dropzone");return Be}async _attachFiles(ce,Le){this._hideDropzones();let Fe=(0,c.default)(()=>(0,E.simulateDragEnd)(this._element,ce));try{let Be=!0;for(let nt of r.default.partition(nt,3)){Be?Be=!1:await(0,f.default)(500),(0,E.simulateDragOver)(this._element,nt),await(0,k.default)(()=>this._dropzonesVisible(),2e4);let it=this._findDropzoneForThisCompose(Le);(0,E.simulateDrop)(it,nt),Fe(),await(0,k.default)(()=>!this._dropzonesVisible(),2e4)}}catch(Be){this._driver.getLogger().error(Be)}finally{Fe(),this._reenableDropzones()}}attachFiles(ce){return this._attachFiles(ce,!1)}attachInlineFiles(ce){return this._attachFiles(ce,!0)}isForward(){return Boolean(this._element.querySelector(".Un.J-JN-M-I .mI"))}isReply(){return this._isInlineReplyForm||!!this._element.querySelector(".HQ")}isInlineReplyForm(){return this._isInlineReplyForm}getBodyElement(){let ce=this.getMaybeBodyElement();if(!ce)throw new Error("Could not find body element");return ce}getMaybeBodyElement(){return this._element.querySelector(".Ap [g_editable=true]")}getTopFormElement(){return(0,S.default)(this._element,"td > form")}getHTMLContent(){return this.getBodyElement().innerHTML}getTextContent(){return this.getBodyElement().textContent}getSelectedBodyHTML(){return(0,H.getSelectedHTMLInElement)(this.getBodyElement(),this.getLastSelectionRange())}getSelectedBodyText(){return(0,H.getSelectedTextInElement)(this.getBodyElement(),this.getLastSelectionRange())}getSubject(){return this.getSubjectInput().value}getSubjectInput(){return this._element.querySelector("input[name=subjectbox]")}getMetadataFormElement(){let ce=this.getBodyElement().closest(".aoP");if(!ce)throw new Error("Could not find compose container");return(0,S.default)(ce,"form.bAs")}getToRecipients(){return(0,He.default)(this,"to")}getCcRecipients(){return(0,He.default)(this,"cc")}getBccRecipients(){return(0,He.default)(this,"bcc")}getAdditionalActionToolbar(){return e("./gmail-compose-view/get-additional-action-toolbar").default(this)}updateInsertMoreAreaLeft(ce){(0,De.default)(this,ce)}_getFormattingAreaOffsetLeft(){return(0,Se.default)(this)}getFormattingArea(){let ce=this._formattingArea;return ce||(ce=this._formattingArea=this._element.querySelector(".oc")),ce}getFormattingToolbar(){return this._element.querySelector(".aX")}getFormattingToolbarArrow(){let ce=this.getFormattingToolbar();if(!ce)throw new Error("Failed to find formatting toolbar");return(0,S.default)(ce,".aA4")}getFormattingToolbarToggleButton(){let ce=(0,S.default)(this._element,"[role=button] .dv"),Le=(0,y.default)(ce,"[role=button]");if(!Le)throw new Error("failed to find button");return Le}getStatusBarPrependContainer(){return this._element.querySelector(".inboxsdk__compose_statusBarPrependContainer")}getScrollBody(){var ce=this._element.querySelector("table .GP");if(!ce)throw new Error("Failed to find scroll body");return ce}getStatusArea(){let ce=this._element.querySelector(".aDg .aDj > .aDh");if(!ce)throw new Error("Failed to find status area");return ce}getInsertMoreArea(){return(0,S.default)(this._element,".eq")}getInsertLinkButton(){return(0,S.default)(this._element,".e5.aaA.aMZ")}getSendButton(){return(0,S.default)(this._element,".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])")}getSendButtonGroup(){let ce=this._element.querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");return ce?ce.parentElement:this.getSendButton()}getSendAndArchiveButton(){if(!this.isReply())return null;let ce=this._element.querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");if(ce)return ce;let Le=this.getSendButton(),Fe=Le.parentElement;if(!(Fe instanceof HTMLElement))throw new Error("should not happen");if(Fe.childElementCount<=1)return this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1"),null;let Be=Fe.children[0]!==Le?Fe.children[0]:Fe.children[1],nt=Be?Be.querySelector("[role=button]"):null;return nt?this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found"):this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find"),nt}getCloseButton(){return this._element.querySelectorAll(".Hm > img")[2]}getMoleSwitchButton(){return this._element.querySelectorAll(".Hm > img")[1]}getBottomBarTable(){return(0,S.default)(this._element,".aoP .aDh > table")}getBottomToolbarContainer(){return(0,S.default)(this._element,".aoP .aDj")}getDiscardButton(){return(0,S.default)(this._element,".gU .oh")}getComposeID(){return this._composeID}getInitialMessageID(){return this._initialMessageId}_getDraftIDfromForm(){let ce=this._messageIDElement&&this._messageIDElement.value||null;if(typeof ce=="string"&&ce!=="undefined"&&ce!=="null"){if(this._driver.isUsingSyncAPI())return ce.replace("#","").replace("msg-a:","");this._driver.getLogger().error(new Error("Invalid draft id in element"),{value:ce})}return null}_getMessageIDfromForm(){let ce=this._messageIDElement&&this._messageIDElement.value||null;if(typeof ce=="string"&&ce!=="undefined"&&ce!=="null"){if(this._driver.isUsingSyncAPI())return ce.replace("#","");if(/^[0-9a-f]+$/i.test(ce))return ce;this._driver.getLogger().error(new Error("Invalid message id in element"),{value:ce})}return null}getMessageID(){return this._messageId}getTargetMessageID(){return this._targetMessageID}getThreadID(){return this._threadID}async getCurrentDraftID(){if(!this._driver.isUsingSyncAPI())return this.getMessageID()?this.getDraftID():null;{let ce=this._getDraftIDfromForm();if(this._messageId)return ce;{let Le=this._getMessageIDfromForm();if(Le){try{await this._driver.getGmailMessageIdForSyncDraftId(Le)}catch{return null}return ce}}}}getDraftID(){let ce=this._draftIDpromise;return ce||(ce=this._draftIDpromise=this._getDraftIDimplementation()),ce}async _getDraftIDimplementation(){if(this._driver.isUsingSyncAPI()){let ce=this._getDraftIDfromForm();if(this._messageId)return ce;{let Le=this._getMessageIDfromForm();if(Le){try{await this._driver.getGmailMessageIdForSyncDraftId(Le)}catch{await this._eventStream.filter(Be=>{let{eventName:nt}=Be;return nt==="draftSaved"}).beforeEnd(()=>null).map(()=>this._getDraftIDfromForm()).take(1).toPromise()}return ce}}}else{let ce=-1,Le=null;try{if(!this._messageId&&(await this._eventStream.filter(Be=>Be.eventName==="messageIDChange").beforeEnd(()=>null).take(1).toPromise(),!this._messageId))return null;let Fe=null;for(;;){ce++;let Be=this._messageId;if(!Be)throw new Error("Should not happen");if(Fe===Be){if(this._draftSaving){await this._eventStream.filter(Ge=>Ge.eventName==="messageIDChange").beforeEnd(()=>null).take(1).toPromise();continue}throw setTimeout(async()=>{let Ge=this._messageId;if(!Ge)throw new Error("Should not happen");let{draftID:Xe,debugData:rt}=await this._driver.getDraftIDForMessageID(Ge,!0),ot=new Error("Failed to read draft ID -- after check");this._driver.getLogger().error(ot,{message:"getDraftID error -- after check",messageIdChanged:Be!==Ge,gotDraftID:Xe!=null,debugData:Xe?null:rt})},1e4),new Error("Failed to read draft ID")}Fe=Be;let{draftID:nt,debugData:it}=await this._driver.getDraftIDForMessageID(Be);if(Le=it,nt)return nt}}catch(Fe){throw this._driver.getLogger().error(Fe,{message:"getDraftID error",removedFromDOM:!document.contains(this._element),destroyed:this._destroyed,isFullscreen:this._isFullscreen,isStandalone:this._isStandalone,emailWasSent:this._emailWasSent,i:ce,lastDebugData:Le}),Fe}}}addManagedViewController(ce){this._managedViewControllers.push(ce)}ensureGroupingIsOpen(ce){(0,X.default)(this._element,ce)}ensureAppButtonToolbarsAreClosed(){(0,oe.default)(this._element)}isMinimized(){let ce=this.getElement(),Le=this.getMaybeBodyElement(),Fe=(0,a.default)(ce.children,Be=>Be.contains(Le));return Fe?Fe.style.display!=="":(tt||(tt=!0,this._driver.getLogger().error(new Error("isMinimized failed to find bodyContainer"),{bodyElement:!!Le,hasMessageIDElement:!!this._messageIDElement,ended:this._eventStream.ended,bodyElStillInCompose:this._element.contains(this._seenBodyElement),seenBodyElHtml:(0,se.default)(this._seenBodyElement.outerHTML),composeHtml:(0,se.default)(ce.outerHTML)})),!1)}setMinimized(ce){if(ce!==this.isMinimized()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");let Le=(0,S.default)(this._element,".Hm > img");(0,C.simulateClick)(Le)}}setFullscreen(ce){if(ce!==this.isFullscreen()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");let Le=(0,S.default)(this._element,".Hm > img:nth-of-type(2)");(0,C.simulateClick)(Le)}}setTitleBarColor(ce){let Le=(0,S.default)(this._element,".nH.Hy.aXJ table.cf.Ht td.Hm"),Fe=[(0,S.default)(this._element,".nH.Hy.aXJ .pi > .l.o"),(0,S.default)(this._element,".nH.Hy.aXJ .l.m"),(0,S.default)(this._element,".nH.Hy.aXJ .l.m > .l.n")];return Le.classList.add("inboxsdk__compose_customTitleBarColor"),Fe.forEach(Be=>{Be.style.backgroundColor=ce}),()=>{Le.classList.remove("inboxsdk__compose_customTitleBarColor"),Fe.forEach(Be=>{Be.style.backgroundColor=""})}}setTitleBarText(ce){if(this.isInlineReplyForm())throw new Error("setTitleBarText() is not supported on inline compose views");let Le=(0,S.default)(this._element,".nH.Hy.aXJ table.cf.Ht");if(Le.classList.contains("inboxsdk__compose_hasCustomTitleBarText"))throw new Error("Custom title bar text is already registered for this compose view");let Fe=(0,S.default)(Le,"div.Hp").parentElement;if(!(Fe instanceof HTMLElement))throw new Error("Could not locate title bar text parent");Le.classList.add("inboxsdk__compose_hasCustomTitleBarText"),Fe.classList.add("inboxsdk__compose_nativeTitleBarText");let Be=document.createElement("td");return Be.classList.add("inboxsdk__compose_customTitleBarText"),Be.innerHTML=u.default`
      <div class="Hp">
        <h2 class="a3E">
          <div class="aYF">${ce}</div>
        </h2>
      </div>
    `,Fe.insertAdjacentElement("afterend",Be),()=>{Be.remove(),Le.classList.remove("inboxsdk__compose_hasCustomTitleBarText"),Fe.classList.remove("inboxsdk__compose_nativeTitleBarText")}}_triggerDraftSave(){this._isTriggeringADraftSavePending||(this._isTriggeringADraftSavePending=!0,b.later(0).takeUntilBy(this._stopper).onValue(()=>{this._isTriggeringADraftSavePending=!1;let ce=this.getMaybeBodyElement();if(ce){let Le=this._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,I.default)(ce,190,0)}finally{Le()}}}))}_getTargetMessageID(){let ce=this._element.querySelector('input[name="rm"]');return ce&&typeof ce.value=="string"&&ce.value!="undefined"?ce.value.replace("#",""):null}_getThreadID(){let ce=this.getTargetMessageID();try{return ce?this._driver.getThreadIDForMessageID(ce):null}catch(Le){return this._driver.getLogger().error(Le),null}}getElement(){return this._element}isFullscreen(){return this._isFullscreen}getLastSelectionRange(){let ce=this._lastSelectionRange;return ce&&!this.getBodyElement().contains(ce.commonAncestorContainer)&&(this._lastSelectionRange=void 0),this._lastSelectionRange}setLastSelectionRange(ce){this._lastSelectionRange=ce}registerRequestModifier(ce){let Le=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!Le)throw new Error("keyId should be set here");let Fe=this._driver.getPageCommunicator().registerComposeRequestModifier(Le,this._driver.getAppId());this._requestModifiers[Fe]=ce,this._startListeningForModificationRequests(),this._stopper.onValue(()=>{this._driver.getPageCommunicator().unregisterComposeRequestModifier(Le,Fe)})}_startListeningForModificationRequests(){if(this._isListeningToAjaxInterceptStream)return;let ce=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!ce)throw new Error("keyId should be set here");this._driver.getPageCommunicator().ajaxInterceptStream.filter(Le=>{let{type:Fe,composeid:Be,draftID:nt,modifierId:it}=Le;return Fe==="inboxSDKmodifyComposeRequest"&&(Be===ce||ce===nt)&&Boolean(this._requestModifiers[it])}).takeUntilBy(this._stopper).onValue(Le=>{let{modifierId:Fe,composeParams:Be}=Le;this._driver.getLogger().shouldTrackEverything()&&this._driver.getLogger().eventSite("inboxSDKmodifyComposeRequest");let nt=this._requestModifiers[Fe];new Promise(it=>it(nt(Be))).then(it=>this._driver.getPageCommunicator().modifyComposeRequest(ce,Fe,it||Be)).then(it=>(this._driver.getLogger().shouldTrackEverything()&&this._driver.getLogger().eventSite("composeRequestModified"),it)).catch(it=>{this._driver.getPageCommunicator().modifyComposeRequest(ce,Fe,Be),this._driver.getLogger().error(it)})}),this._isListeningToAjaxInterceptStream=!0}setupLinkPopOvers(){this._hasSetupLinkPopOvers||(this._hasSetupLinkPopOvers=!0,this._eventStream.plug((0,xe.default)(this)))}});i.default=Re},{"../../../../common/censorHTMLstring":470,"../../../../common/censorHTMLtree":471,"../../../../common/isElementVisible":480,"../../../driver-common/compose/getDiscardStream":666,"../../../driver-common/compose/getPresendingStream":667,"../../../lib/delay-asap":688,"../../../lib/dom/get-selection":693,"../../../lib/dom/insert-html-at-cursor":695,"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/set-css":708,"../../../lib/dom/simulate-drag-and-drop":710,"../../../lib/dom/simulate-key":711,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/handle-compose-link-chips":718,"../../../lib/insert-link-chip-into-body":724,"../../../lib/stream-wait-for":739,"../../../lib/wait-for":742,"../gmail-element-getter":532,"../gmail-response-processor":536,"./gmail-compose-view/add-button":555,"./gmail-compose-view/add-compose-notice":556,"./gmail-compose-view/add-recipient-row":557,"./gmail-compose-view/add-status-bar":558,"./gmail-compose-view/add-tooltip-to-button":559,"./gmail-compose-view/detectClassicRecipientsArea":560,"./gmail-compose-view/ensure-app-button-toolbars-are-closed":561,"./gmail-compose-view/ensure-grouping-is-open":562,"./gmail-compose-view/focus":563,"./gmail-compose-view/from-manager":564,"./gmail-compose-view/get-additional-action-toolbar":565,"./gmail-compose-view/get-address-changes-stream":566,"./gmail-compose-view/get-body-changes-stream":568,"./gmail-compose-view/get-formatting-area-offset-left":569,"./gmail-compose-view/get-minimized-stream":570,"./gmail-compose-view/get-recipients":571,"./gmail-compose-view/get-response-type-changes-stream":572,"./gmail-compose-view/insert-link-into-body":574,"./gmail-compose-view/manage-button-grouping":575,"./gmail-compose-view/monitor-selection-range":576,"./gmail-compose-view/override-edit-subject":577,"./gmail-compose-view/page-parser":578,"./gmail-compose-view/set-recipients":580,"./gmail-compose-view/setupLinkPopovers":581,"./gmail-compose-view/size-fixer":582,"./gmail-compose-view/update-insert-more-area-left":583,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,"closest-ng":57,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/constant":308,"lodash/escape":313,"lodash/find":315,"lodash/includes":324,"lodash/once":347,"page-parser-tree":374,pdelay:376,"tag-tree":452,"transducers.js":453,ud:455}],555:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(d,a,p,f){return new Promise((b,_)=>{let y;a.takeUntilBy(d.getStopper()).onValue(g=>{let m=function(w,C,I){if(!w)return null;let S={type:"MODIFIER",...w},O=S.onClick;return S.onClick=function(A){I.getLogger().eventSdkActive("composeView.addedButton.click"),O({...C,...A})},S.hasDropdown?S.dropdownShowFunction=S.onClick:S.activateFunction=S.onClick,S.noArrow=!0,S.tooltip=S.tooltip||S.title,delete S.title,S.type==="MODIFIER"?S.buttonColor="flatIcon":S.type==="SEND_ACTION"&&(S.buttonColor="blue"),S}(g,f,d.getGmailDriver());y?y.update(m):m&&(y=function(w,C,I){if(!w.getElement()||!w.getFormattingToolbar())return;let S;return C.type==="MODIFIER"?S=function(O,A,E){var D=o(A);D.getView().getElement().setAttribute("tabindex","1"),D.getView().getElement().setAttribute("data-order-hint",String(A.orderHint||0)),D.getView().getElement().setAttribute("data-group-order-hint",E);var P=O._getFormattingAreaOffsetLeft(),j=D.getView().getElement(),k=O.getAdditionalActionToolbar();return(0,s.default)(k,j),O.updateInsertMoreAreaLeft(P),O.addManagedViewController(D),D}(w,C,I):C.type==="SEND_ACTION"&&(S=function(O,A){let E=o(A);E.getView().removeClass("inboxsdk__composeButton"),E.getView().addClass("inboxsdk__compose_sendButton"),E.getView().getElement().setAttribute("tabindex","1");let D=O.getSendButtonGroup(),P=E.getView().getElement();return D.parentElement.insertBefore(P,D.nextSibling),O.addManagedViewController(E),E}(w,C)),w.getElement().dispatchEvent(new CustomEvent("buttonAdded",{bubbles:!1,cancelable:!1,detail:null})),S}(d,m,p),b({buttonViewController:y,buttonDescriptor:g}))}).onEnd(()=>{b(null)})})},t(e("kefir"));var n=t(e("./gmail-compose-button-view")),u=t(e("../../../../widgets/buttons/basic-button-view-controller")),r=t(e("../../../../widgets/buttons/dropdown-button-view-controller")),c=t(e("../../widgets/gmail-dropdown-view")),s=t(e("../../../../lib/dom/insert-element-in-order"));function o(d){let a={buttonView:new n.default(d),...d},p;return d.hasDropdown?(Object.assign(a,{dropdownViewDriverClass:c.default,dropdownPositionOptions:{vAlign:"top"}}),p=new r.default(a)):p=new u.default(a),p}},{"../../../../lib/dom/insert-element-in-order":694,"../../../../widgets/buttons/basic-button-view-controller":780,"../../../../widgets/buttons/dropdown-button-view-controller":781,"../../widgets/gmail-dropdown-view":608,"./gmail-compose-button-view":573,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],556:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(p,f){let{orderHint:b}={orderHint:0,...f},_=new a(p,b);return p.getStopper().takeUntilBy(u.default.fromEvents(_,"destroy")).onValue(()=>_.destroy()),_};var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-stopper")),c=t(e("../../../../lib/dom/insert-element-in-order")),s=t(e("../../../../lib/logger")),o=t(e("../../../../lib/dom/querySelectorOrFail")),d=t(e("../../../../views/SimpleElementView"));class a extends d.default{constructor(f,b){let _=document.createElement("div");_.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",_.style.fontSize="14px",super(_),(0,n.default)(this,"_stopper",(0,r.default)()),this._gmailComposeView=f,this._orderHint=b,_.className="inboxsdk__compose_notice",_.setAttribute("data-order-hint",String(b)),this._setComposeNotice()}destroy(){this.destroyed||(super.destroy(),this._stopper.destroy())}_setComposeNotice(){try{let f=(0,o.default)(this._gmailComposeView.getElement(),".iN");(0,c.default)(f,this.el,["data-order-hint"],!0)}catch(f){s.default.error(f)}}}},{"../../../../lib/dom/insert-element-in-order":694,"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/logger":729,"../../../../views/SimpleElementView":759,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157}],557:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){let s;return c.takeUntilBy(r.getStopper()).onValue(o=>{s&&(s.remove(),s=null),o&&(s=function(d,a){var p=document.createElement("tr"),f=document.createElement("td"),b=document.createElement("td");if(p.appendChild(f),p.appendChild(b),p.setAttribute("class","inboxsdk__recipient_row"),a.labelText){f.setAttribute("class","ok");var _=document.createElement("span");_.setAttribute("class","gO"),f.appendChild(_),_.textContent=a.labelText,a.labelClass&&f.classList.add(a.labelClass),a.labelTextClass&&_.classList.add(a.labelTextClass)}a.el&&(b.setAttribute("class","az3"),b.appendChild(a.el));var y=(0,u.getRecipientRowElements)(d.getElement())[0],g=y.parentElement;g.insertBefore(p,y.nextSibling);let m=g.closest(".fX");return m&&m.classList.add("inboxsdk__compose_addressList"),p}(r,o),(0,n.default)(s)),r.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),()=>{s&&(s.remove(),s=null,r.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})))}},t(e("kefir"));var n=t(e("../../../../lib/dom/block-and-reemit-keyboard-events")),u=e("./page-parser")},{"../../../../lib/dom/block-and-reemit-keyboard-events":689,"./page-parser":578,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],558:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("kefir")),c=t(e("kefir-stopper")),s=t(e("classnames")),o=t(e("../../../../lib/dom/insert-element-in-order")),d=t(e("../../../../lib/logger")),a=t(e("../../../../lib/dom/querySelectorOrFail")),p=t(e("../../../../views/SimpleElementView")),f=(0,u.defn)(v,function(_,y){let{height:g,orderHint:m,addAboveNativeStatusBar:w}={height:40,orderHint:0,addAboveNativeStatusBar:!1,...y},C=new b(_,g,m,w);return _.getStopper().takeUntilBy(r.default.fromEvents(C,"destroy")).onValue(()=>C.destroy()),C});i.default=f;class b extends p.default{constructor(y,g,m,w){super(function(C,I){let S=document.createElement("div");return S.className=(0,s.default)("aDh","inboxsdk__compose_statusbar",{inboxsdk__addAboveNative:I}),S.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",S.style.fontSize="15.6px",S.setAttribute("data-order-hint",String(C)),S}(m,w)),(0,n.default)(this,"_prependContainer",null),(0,n.default)(this,"_stopper",(0,c.default)()),this._addAboveNativeStatusBar=w,this._gmailComposeView=y,this._nativeStatusContainer=(0,a.default)(y.getElement(),".iN > tbody .aDj"),this._setStatusBar(),this.setHeight(g)}destroy(){this.destroyed||(super.destroy(),this._stopper.destroy(),this._prependContainer&&this._prependContainer.children.length===0&&this._prependContainer.remove(),this._updateTotalHeight())}setHeight(y){this.el.style.height=y+"px",this._updateTotalHeight()}_updateTotalHeight(){let y=Array.from(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map(g=>g.getBoundingClientRect().height).reduce((g,m)=>g+m,0);this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height",y+"px")}_setStatusBar(){try{let y=this._gmailComposeView.getStatusArea();if(this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive"),this._addAboveNativeStatusBar){let g=this._prependContainer=y.querySelector(".inboxsdk__compose_statusBarPrependContainer")||document.createElement("div");g.classList.add("inboxsdk__compose_statusBarPrependContainer"),y.insertAdjacentElement("afterbegin",g),(0,o.default)(g,this.el)}else if(this._gmailComposeView.isInlineReplyForm()){let g=(0,a.default)(this._gmailComposeView.getElement(),".iN > tbody .aDj .aDh .IZ");(0,o.default)(g,this.el)}else(0,o.default)(y,this.el)}catch(y){d.default.error(y)}}}},{"../../../../lib/dom/insert-element-in-order":694,"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/logger":729,"../../../../views/SimpleElementView":759,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:158,"kefir-stopper":157,ud:455}],559:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o,d,a){var p=new r.default(a),f=p.getStopper().merge(s.getStopper());s.getStopper().takeUntilBy(p.getStopper()).onValue(()=>p.destroy()),document.body.appendChild(p.getElement()),c(p,s,o,d),s.getEventStream().filter(g=>g.eventName==="buttonAdded"||g.eventName==="fullscreenChanged").merge(p.getEventStream().filter(g=>{let{eventName:m}=g;return m==="imageLoaded"})).debounce(10).takeUntilBy(f).onValue(c.bind(null,p,s,o,d)),o.getView().getEventStream().takeUntilBy(f).filter(function(g){return g.eventName==="click"}).onValue(p.destroy.bind(p));var b=n.default.interval(50).takeUntilBy(f),_=0,y=0;return b.takeWhile(()=>!!o.getView()&&!!p.getElement()).map(()=>o.getView().getElement().getBoundingClientRect()).filter(g=>g.left!==_||g.top!==y).map(g=>(_=g.left,y=g.top,g)).onValue(p.anchor.bind(p,o.getView().getElement(),{position:"top"})),b.filter(()=>!o.getView()||!o.getView().getElement().offsetParent).onValue(p.destroy.bind(p)),p};var n=t(e("kefir")),u=t(e("../../../../lib/logger")),r=t(e("../../widgets/gmail-tooltip-view"));function c(s,o,d,a){try{o.ensureGroupingIsOpen(a.type),setTimeout(function(){s.anchor(d.getView().getElement(),{position:"top"})},10)}catch(p){u.default.error(p)}}},{"../../../../lib/logger":729,"../../widgets/gmail-tooltip-view":612,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],560:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=(0,t(e("lodash/once")).default)(function(){let u=[...document.styleSheets].find(r=>{try{if(r.cssRules)return[...r.cssRules].find(c=>c instanceof CSSStyleRule&&c.selectorText===".aoI"&&c.style.fontSize&&c.style.color)}catch{}return!1});if(u){if([...u.cssRules].some(r=>r instanceof CSSStyleRule&&r.selectorText===".aoI"&&r.style.overflowY==="visible")||[...u.cssRules].some(r=>r instanceof CSSStyleRule&&r.selectorText===".aaZ > .M9 > .aoI"&&r.style.overflowY==="auto"))return;document.body.classList.add("inboxsdk__classic_gmail_recipients_area")}});i.default=n},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/once":347}],561:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){var u=n.querySelector(".inboxsdk__compose_groupedActionButton");!u||n.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")&&(0,t.simulateClick)(u)};var t=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":712}],562:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n,u){if(u!=="SEND_ACTION"){var r=n.querySelector(".inboxsdk__compose_groupedActionButton");!r||n.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")||(0,t.simulateClick)(r)}};var t=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":712}],563:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){t.getBodyElement().focus();let n=t.getLastSelectionRange(),u=document.getSelection();if(!u)throw new Error;n&&u.anchorNode===u.focusNode&&u.anchorOffset===u.focusOffset&&(u.removeAllRanges(),u.addRange(n))}},{}],564:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.getFromContact=function(c,s){let o=s.getElement().querySelector('input[name="from"]'),d=o?o.value:null;if(!d)return c.getUserContact();let a=r(c,s),p=(0,n.default)(a,b=>b.emailAddress===d),f;return p?f=p.name:(f=d,c.getLogger().error(new Error("getFromContact failed to find name"),{fromContactChoicesLength:a.length})),{emailAddress:d,name:f}},i.getFromContactChoices=r,i.setFromEmail=function(c,s,o){if(s.getFromContact().emailAddress===o)return;let d=s.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");if(!d){if(c.getUserContact().emailAddress!=o)throw new Error("Chosen email from choice was not found");return}let a=(0,n.default)(d.children,p=>p.getAttribute("value")==o);if(!a)throw new Error("Chosen email from choice was not found");(0,u.simulateClick)(a)};var n=t(e("lodash/find")),u=e("../../../../lib/dom/simulate-mouse-event");function r(c,s){let o=s.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");return o.length==0?[c.getUserContact()]:Array.from(o).map(d=>({emailAddress:d.getAttribute("value")||"",name:d.textContent.replace(/<.*/,"").trim()}))}},{"../../../../lib/dom/simulate-mouse-event":712,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":315}],565:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){var u=n.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");if(u)return u;let r=n.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");if(r)return r;if(r=t.get(n),!r){let c=r=function(s){let o=document.createElement("td");o.setAttribute("class","inboxsdk__compose_actionToolbar gU");let d=s.getFormattingArea();if(!d)throw new Error("formatting area missing");d.insertAdjacentElement("beforebegin",o);let a=o.parentElement;for(;a&&a.tagName!=="TABLE";)a=a.parentElement;if(a){let f=a.querySelector("colgroup col");if(f){let b=document.createElement("col");b.setAttribute("class","inboxsdk__compose_actionToolbarColumn");let _=document.createElement("col");_.setAttribute("class","inboxsdk__compose_separatorColumn"),f.insertAdjacentElement("afterend",_),f.insertAdjacentElement("afterend",b)}}var p=document.createElement("div");return o.appendChild(p),p}(n);n.getStopper().onValue(()=>{c.remove()}),t.set(n,r)}return r};let t=new WeakMap},{}],566:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){let b=(0,c.getRecipientRowElements)(f.getElement());if(!b||b.length===0)return n.default.never();let _=n.default.merge([o("to",f),o("cc",f),o("bcc",f)]),y=_.map(d);return n.default.merge([_,y,a(f)])};var n=t(e("kefir")),u=(t(e("transducers.js")),t(e("../../../../lib/logger")),t(e("../../../../lib/dom/make-mutation-observer-stream"))),r=t(e("./get-address-information-extractor")),c=e("./page-parser"),s=(t(e("../../../../lib/dom/make-element-child-stream")),t(e("../../../../lib/toItemWithLifetimeStream")));function o(f,b){let _=b.tagTree.getAllByTag(`${f}Recipient`);return(0,s.default)(_).flatMap(y=>{let{el:g,removalStream:m}=y,w=function(C,I,S){return C.getAttribute("role")==="option"?{name:C.getAttribute("data-name"),emailAddress:C.getAttribute("data-hovercard-id")}:(0,r.default)(I,S)(C)}(g.getValue(),f,b);return w?n.default.constant({eventName:`${f}ContactAdded`,data:{contact:w}}).merge(m.map(()=>({eventName:`${f}ContactRemoved`,data:{contact:w}}))):n.default.never()})}function d(f){let b={to:{added:[],removed:[]},cc:{added:[],removed:[]},bcc:{added:[],removed:[]}},_=f.eventName.split("Contact");return b[_[0]][_[1].toLowerCase()].push(f.data.contact),{eventName:"recipientsChanged",data:b}}function a(f){return n.default.later(0,null).flatMap(()=>{let b=f.getElement().querySelector('input[name="from"]');return n.default.constant(p("fromContactChanged",f.getFromContact())).merge(b?(0,u.default)(b,{attributes:!0,attributeFilter:["value"]}).map(()=>p("fromContactChanged",f.getFromContact())):n.default.never())})}function p(f,b){return{eventName:f,data:{contact:b}}}},{"../../../../lib/dom/make-element-child-stream":697,"../../../../lib/dom/make-mutation-observer-stream":701,"../../../../lib/logger":729,"../../../../lib/toItemWithLifetimeStream":740,"./get-address-information-extractor":567,"./page-parser":578,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"transducers.js":453}],567:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c,s){return function(o){let d=o instanceof HTMLInputElement&&o.getAttribute("name")===c?o:o.querySelector(`input[name='${c}']`);if(!d)return n.default.error(new Error("contactNode can't be found"),{addressType:c,composeViewHtml:(0,r.default)(s.getElement().outerHTML)}),null;var a=d.value;try{return(0,u.default)(a)}catch{return null}}};var n=t(e("../../../../lib/logger")),u=t(e("../../../../lib/extract-contact-from-email-contact-string")),r=t(e("../../../../../common/censorHTMLstring"))},{"../../../../../common/censorHTMLstring":470,"../../../../lib/extract-contact-from-email-contact-string":714,"../../../../lib/logger":729,"@babel/runtime/helpers/interopRequireDefault":15}],568:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){var r=u.getBodyElement();return(0,n.default)(r,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"bodyChanged"}})},t(e("kefir"));var n=t(e("../../../../lib/dom/make-mutation-observer-stream"))},{"../../../../lib/dom/make-mutation-observer-stream":701,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],569:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){if(!c){let d=u.get(r);if(d!=null)return d}let s=r.getFormattingArea();if(!s)return 0;let o=s.getBoundingClientRect().left;return u.set(r,o),(0,n.default)(()=>u.delete(r)),o};var n=t(e("asap"));let u=new WeakMap},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31}],570:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){return c.flatMapLatest(o=>o(s))};var n=t(e("lodash/find")),u=(t(e("kefir")),t(e("ud-kefir"))),r=t(e("../../../../lib/dom/make-mutation-observer-stream"));let c=(0,u.default)(v,function(s){let o=s.getElement(),d=s.getBodyElement(),a=(0,n.default)(o.children,p=>p.contains(d));return(0,r.default)(a,{attributes:!0,attributeFilter:["style"]}).map(()=>s.isMinimized())})},{"../../../../lib/dom/make-mutation-observer-stream":701,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/find":315,"ud-kefir":454}],571:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c,s){let o=(0,n.getRecipientChips)(c.getElement(),s);return Array.from(o).map(d=>d.getAttribute("role")==="option"?{name:d.getAttribute("data-name"),emailAddress:d.getAttribute("data-hovercard-id")}:(0,u.default)(s,c)(d)).filter(r.default)};var n=e("./page-parser"),u=t(e("./get-address-information-extractor")),r=t(e("../../../../lib/isNotNil"))},{"../../../../lib/isNotNil":727,"./get-address-information-extractor":567,"./page-parser":578,"@babel/runtime/helpers/interopRequireDefault":15}],572:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){let o;try{return o=(0,c.default)(s.getElement(),".J-J5-Ji .J-JN-M-I-Jm > img"),(0,r.default)(o,{attributeFilter:["class"],attributes:!0}).map(()=>({data:{isForward:s.isForward()},eventName:"responseTypeChanged"}))}catch(d){return u.default.error(d),n.default.never()}};var n=t(e("kefir")),u=t(e("../../../../lib/logger")),r=t(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),c=t(e("../../../../lib/dom/querySelectorOrFail"))},{"../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/logger":729,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],573:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=function(p,f){if(!f&&p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var b=a(f);if(b&&b.has(p))return b.get(p);var _={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in p)if(g!=="default"&&Object.prototype.hasOwnProperty.call(p,g)){var m=y?Object.getOwnPropertyDescriptor(p,g):null;m&&(m.get||m.set)?Object.defineProperty(_,g,m):_[g]=p[g]}return _.default=p,b&&b.set(p,_),_}(e("kefir")),c=t(e("kefir-bus")),s=t(e("../../../../lib/logger")),o=e("../../../../lib/dom/simulate-mouse-event"),d=t(e("../../../../lib/dom/keyboard-shortcut-stream"));function a(p){if(typeof WeakMap!="function")return null;var f=new WeakMap,b=new WeakMap;return(a=function(_){return _?b:f})(p)}i.default=class{constructor(p){(0,n.default)(this,"_element",document.createElement("div")),(0,n.default)(this,"_iconElement",document.createElement("div")),this._isEnabled=p.enabled!==!1,this._iconClass=p.iconClass,this._iconUrl=p.iconUrl,this._tooltip=p.tooltip||p.title||p.text,this._hasDropdown=!!p.hasDropdown,this._keyboardShortcutHandle=p.keyboardShortcutHandle,this._createElement(p),this._eventStream=(0,c.default)(),this._setupEventStream(),this._setupAestheticEvents(),p.enabled!==!1&&this._setupKeyboardShortcutEvent()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){this.addClass("inboxsdk__composeButton_active")}deactivate(){this.removeClass("inboxsdk__composeButton_active")}addClass(p){this._element.classList.add(p)}removeClass(p){this._element.classList.remove(p)}simulateHover(){(0,o.simulateHover)(this._element)}setEnabled(p){this._setEnabled(p)}isEnabled(){return this._isEnabled}update(p){if(!p)return void(this._element.style.display="none");this._element.style.display==="none"&&(this._element.style.display="");let f=p.tooltip||p.title||p.text;f!=this._tooltip&&this._updateTooltip(f),p.iconUrl!=this._iconUrl&&this._updateIconUrl(p.iconUrl),p.iconClass!=this._iconClass&&this._updateIconClass(p.iconClass),p.enabled!==!1&&p.enabled!==!0||this._setEnabled(p.enabled)}_createElement(p){this._createMainElement(p),this._createIconElement()}_createMainElement(p){this._element.setAttribute("class","inboxsdk__composeButton"),p.tooltip&&this._element.setAttribute("aria-label",p.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0");let f=p.tooltip||p.title||p.text;f&&this._element.setAttribute("data-tooltip",f),p.enabled===!1&&this._element.classList.add("inboxsdk__button_disabled"),p.noOverflow&&this._element.setAttribute("data-no-overflow","")}_createIconElement(){let p=this._iconElement;this._iconClass&&(p.innerHTML="&nbsp;",p.setAttribute("class",this._iconClass)),p.classList.add("inboxsdk__button_icon"),this._element.appendChild(p),this._iconUrl&&this._createIconImgElement()}_createIconImgElement(){this._iconElement.innerHTML="";let p=this._iconImgElement=document.createElement("img");p.classList.add("inboxsdk__button_iconImg"),this._iconUrl?p.src=this._iconUrl:s.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),this._iconElement.appendChild(p)}_updateTooltip(p){this._tooltip=p,p?this._element.setAttribute("data-tooltip",p):this._element.removeAttribute("data-tooltip")}_updateIconUrl(p){this._iconUrl=p,!p&&this._iconImgElement?(this._iconImgElement.remove(),this._iconImgElement=null):p&&!this._iconImgElement?this._createIconImgElement():p&&this._iconImgElement&&(this._iconImgElement.src=p)}_updateIconClass(p){this._iconClass=p,this._iconElement.setAttribute("class","inboxsdk__button_icon "+(p||""))}_setEnabled(p){this._isEnabled!==p&&(this._isEnabled=p,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}_setupEventStream(){let p=r.fromEvents(this._element,"click");p.onValue(function(b){b.stopPropagation(),b.preventDefault()}),this._eventStream.plug(p.filter(()=>this.isEnabled()).map(function(b){return{eventName:"click",domEvent:b}}));let f=r.fromEvents(this._element,"keydown").filter(()=>this.isEnabled()).filter(b=>(0,u.default)([32,13],b.which));this._eventStream.plug(f.map(function(b){return{eventName:"click",domEvent:b}})),f.onValue(function(b){b.stopPropagation(),b.preventDefault()})}_setupKeyboardShortcutEvent(){let p=this._keyboardShortcutHandle;p&&this._eventStream.plug((0,d.default)(p.chord).takeUntilBy(this._eventStream.filter(function(f){return f.eventName==="enabledChanged"&&f.isEnabled===!1})).map(function(f){return{eventName:"click",domEvent:f}}))}_setupAestheticEvents(){r.fromEvents(this._element,"mouseenter").filter(()=>this.isEnabled()).onValue(()=>{this._element.classList.add("inboxsdk__button_hover")}),r.fromEvents(this._element,"mouseleave").onValue(()=>{this._element.classList.remove("inboxsdk__button_hover")})}}},{"../../../../lib/dom/keyboard-shortcut-stream":696,"../../../../lib/dom/simulate-mouse-event":712,"../../../../lib/logger":729,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/includes":324}],574:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n,u,r){return function(c,s,o){c.focus(),c.getBodyElement().focus();let d=document.getSelection();if(!d)throw new Error("selection does't exist, what?");let a=d.getRangeAt(0),p=document.createElement("a");return p.href=o,a.extractContents(),a.insertNode(p),p.textContent=s,d.selectAllChildren(p),d.collapseToEnd(),p}(n,u,r)},e("../../../../lib/dom/simulate-mouse-event"),t(e("../../../../lib/dom/set-value-and-dispatch-event"))},{"../../../../lib/dom/set-value-and-dispatch-event":709,"../../../../lib/dom/simulate-mouse-event":712,"@babel/runtime/helpers/interopRequireDefault":15}],575:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t(e("asap"));var n=e("ud"),u=t(e("./gmail-compose-button-view")),r=t(e("../../../../widgets/buttons/basic-button-view-controller")),c=(t(e("../../../../widgets/buttons/dropdown-button-view-controller")),t(e("../../widgets/gmail-dropdown-view")),t(e("../../../../lib/dom/insert-element-in-order"))),s=e("../../../../lib/dom/simulate-mouse-event"),o=t(e("../../../../lib/wait-for")),d=t(e("../../../../lib/logger")),a=t(e("../../../../lib/dom/querySelectorOrFail")),p=t(e("../../../../../common/censorHTMLtree")),f=t(e("./position-formatting-toolbar")),b=t(e("../../../../../common/get-or-fail"));let _=(0,n.defonce)(v,()=>new Map);var y=(0,n.defn)(v,function(D){if(D.getElement().getAttribute("data-button-grouping-managed")!=="true"){_.set(D,{}),D.getElement().setAttribute("data-button-grouping-managed","true"),D.getEventStream().filter(j=>j.eventName==="fullscreenChanged").debounce(10).onValue(()=>{(function(j){j.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&function(k){let M=(0,b.default)(_,k);M.groupedToolbarButtonViewController&&M.groupedToolbarButtonViewController.destroy(),M.formattingToolbarMutationObserver&&M.formattingToolbarMutationObserver.disconnect();let R=M.groupedActionToolbarContainer.firstElementChild;if(R){I(k,R),R.remove();let V=(0,a.default)(k.getElement(),".inboxsdk__compose_actionToolbar");V.innerHTML="",V.appendChild(R)}}(j),g(j)})(D)}),D.getEventStream().filter(function(j){return j.eventName==="buttonAdded"}).onValue(()=>{g(D)}),D.getEventStream().filter(j=>j.eventName==="resize"||j.eventName==="restored").onValue(()=>{g(D)});var P=D.getElement();D.getStopper().onValue(function(){_.delete(D),P.setAttribute("data-button-grouping-managed","false")})}});function g(D){(function(P){m.has(P)||(m.add(P),window.requestAnimationFrame(()=>{if(m.delete(P),!P.isDestroyed()&&(w(P),function(M){return!M.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&!(M.getElement().querySelectorAll(".inboxsdk__composeButton:not([data-no-overflow])").length<2)&&C(M)>M.getBottomToolbarContainer().clientWidth}(P))){var j=function(M){var R=document.createElement("div");return R.classList.add("inboxsdk__compose_groupedActionToolbar"),R.innerHTML='<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>',(0,b.default)(_,M).groupedActionToolbarContainer=R,R.style.display="none",R}(P),k=function(M){var R=(0,b.default)(_,M),V=function(){var U=new u.default({tooltip:"More Tools",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="});return U.addClass("inboxsdk__compose_groupedActionButton"),U.getElement().setAttribute("tabindex","1"),U}(),T=new r.default({buttonView:V,activateFunction:function(){(function(U,W){O()?function(Q,X){(0,b.default)(_,Q).groupedActionToolbarContainer.style.display="none",Q.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible"),X.getView().deactivate(),localStorage.inboxsdk__compose_groupedActionButton_state="collapsed";let oe=Q.getBottomBarTable();oe.style.position="";let J=Q.getElement().querySelector(".qz");J&&(J.scrollTop=J.scrollTop-1)}(U,W):S(U,W)})(M,T),O()&&(0,b.default)(_,M).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus()}});return R.groupedActionToolbarContainer.addEventListener("keydown",function(U){U.which===27&&(T.activate(),V.getElement().focus(),U.preventDefault(),U.stopPropagation())}),(0,b.default)(_,M).groupedToolbarButtonViewController=T,T}(P);(function(M,R){let V=(0,a.default)(M.getElement(),".inboxsdk__compose_actionToolbar > div"),T=V.parentElement,U=document.createElement("div");U.appendChild(R.getView().getElement()),T.appendChild(U);let W=(0,b.default)(_,M).groupedActionToolbarContainer;W.insertBefore(V,W.firstElementChild),T.appendChild(W),function(Q){let X=(0,a.default)(Q.getElement(),".inboxsdk__compose_actionToolbar > div");I(Q,X)}(M)})(P,k),function(M,R){O()&&S(M,R)}(P,k),function(M,R){(0,o.default)(function(){if(M.isDestroyed())throw"skip";return M.getFormattingToolbar()}).then(V=>{let T=new MutationObserver(function(U){let W=U[0].target;W instanceof HTMLElement&&W.style.display===""&&localStorage.inboxsdk__compose_groupedActionButton_state==="expanded"&&R.activate()});T.observe(V,{attributes:!0,attributeFilter:["style"]}),(0,b.default)(_,M).formattingToolbarMutationObserver=T,M.getStopper().onValue(()=>T.disconnect())}).catch(V=>{if(V!=="skip")throw d.default.error(V),V})}(P,k),P.getElement().classList.remove("inboxsdk__compose_narrow_buttons"),w(P),P.getStopper().onValue(function(){j.remove(),k.destroy()})}}))})(D),function(P){A.has(P)||(A.add(P),window.requestAnimationFrame(()=>{if(A.delete(P),!P.isDestroyed()){(0,f.default)(P);var j=P.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");j&&j.style.display!=="none"&&E(P)}}))}(D)}i.default=y;let m=new WeakSet;function w(D){D.getElement().clientWidth>C(D)||D.getElement().querySelectorAll(".inboxsdk__composeButton").length===0||D.getElement().classList.contains("inboxsdk__compose_narrow_buttons")||(D.getElement().classList.add("inboxsdk__compose_narrow_buttons"),D.getElement().offsetTop)}function C(D){let P=D.getBottomBarTable();return Array.from(P.querySelectorAll(".btC > td")).reduce((j,k)=>j+k.clientWidth,0)}function I(D,P){let j=D.getElement().querySelectorAll(".inboxsdk__composeButton[data-no-overflow]");Array.from(j).forEach(k=>(0,c.default)(P,k,void 0,!0))}function S(D,P){(0,b.default)(_,D).groupedActionToolbarContainer.style.display="",D.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible"),P.getView().activate(),localStorage.inboxsdk__compose_groupedActionButton_state="expanded",E(D);let j=D.getFormattingToolbar();j&&j.style.display===""&&(0,s.simulateClick)(D.getFormattingToolbarToggleButton());let k=D.getElement().querySelector(".qz");k&&(k.scrollTop=k.scrollTop+1)}function O(){return localStorage.inboxsdk__compose_groupedActionButton_state==="expanded"}let A=new WeakSet;function E(D){if(D.isMinimized())return;var P=D.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");if(!P)return;let j=(0,a.default)(D.getElement(),".inboxsdk__compose_groupedActionButton"),k=(0,a.default)(P,".inboxsdk__compose_groupedActionToolbar_arrow");if(P.style.display="",j.offsetLeft+j.clientWidth>P.offsetWidth){var M=j.clientWidth/2-P.offsetWidth/2-3;P.style.left=j.offsetLeft+M+"px",k.style.left=-(M+1)+"px"}else P.style.left="",k.style.left=j.offsetLeft-1+"px";D.getBottomBarTable().style.position="relative";let R=D.getBottomBarTable().clientHeight;if(P.style.bottom=`${R+1}px`,R<1){let V=D.getElement().querySelectorAll("td.HE");d.default.error(new Error("bottom toolbar had bad height"),{bottomToolbarHeight:R,heElementHeights:Array.from(V).map(T=>T.clientHeight),heElementsHTML:Array.from(V).map(p.default)})}}},{"../../../../../common/censorHTMLtree":471,"../../../../../common/get-or-fail":476,"../../../../lib/dom/insert-element-in-order":694,"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/dom/simulate-mouse-event":712,"../../../../lib/logger":729,"../../../../lib/wait-for":742,"../../../../widgets/buttons/basic-button-view-controller":780,"../../../../widgets/buttons/dropdown-button-view-controller":781,"../../widgets/gmail-dropdown-view":608,"./gmail-compose-button-view":573,"./position-formatting-toolbar":579,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,ud:455}],576:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){n.default.merge([(0,u.default)(document.body,"mousedown"),(0,u.default)(r.getBodyElement(),"keydown"),r.getEventStream().filter(c=>c.eventName==="bodyChanged")]).takeUntilBy(r.getStopper()).onValue(c=>{var s=r.getMaybeBodyElement(),o=document.getSelection();s&&o.rangeCount>0&&s.contains(o.anchorNode)&&r.setLastSelectionRange(o.getRangeAt(0))})};var n=t(e("kefir")),u=t(e("../../../../lib/from-event-target-capture"))},{"../../../../lib/from-event-target-capture":716,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],577:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c,s){if(!s.isReply())return;let o=s.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");if(!o)return void(r||(c.getLogger().error(new Error("could not find edit subject item"),{composeElement:(0,n.default)(s.getElement())}),r=!0));o.addEventListener("click",d=>{d.stopPropagation()},!0),o.addEventListener("mouseup",d=>{d.stopPropagation(),function(a,p){let f=p.getToRecipients(),b=p.getCcRecipients(),_=p.getBccRecipients(),y=p.getFromContact(),g=p.getSubject();(function(w){if(w.getBodyElement().querySelector(".gmail_extra"))return;let C=w.getElement().querySelector(".ajR");C&&(0,u.simulateClick)(C)})(p);let m=p.getHTMLContent();p.discard(),a.openNewComposeViewDriver().then(w=>{f.length>0&&w.setToRecipients(f.map(C=>C.emailAddress)),b.length>0&&w.setCcRecipients(b.map(C=>C.emailAddress)),_.length>0&&w.setBccRecipients(_.map(C=>C.emailAddress)),w.setFromEmail(y.emailAddress),w.setSubject(g),w.setBodyHTML(m),setTimeout(function(){w.getSubjectInput().select()},1)})}(c,s)},!0)};var n=t(e("../../../../../common/censorHTMLtree")),u=e("../../../../lib/dom/simulate-mouse-event");let r=!1},{"../../../../../common/censorHTMLtree":471,"../../../../lib/dom/simulate-mouse-event":712,"@babel/runtime/helpers/interopRequireDefault":15}],578:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.getOldRecipientRowForType=s,i.getRecipientChips=c,i.getRecipientRowElements=function(o){return Array.prototype.filter.call(o.querySelectorAll(".GS tr, .GS .anm[name] [role=listbox]"),d=>!d.classList.contains("inboxsdk__recipient_row"))},i.getRecipientRowForType=function(o,d){return o.querySelector(`.GS .anm[name="${d}"] [role=listbox]`)},i.makePageParser=function(o,d){return new u.default(o,{logError(a,p){let f={el:p,html:p?(0,r.default)(p):null};d.errorSite(a,f)},tags:{},watchers:[{sources:[null],tag:"recipientsCommon",selectors:["div","div","div[jsaction]","div[role=region]","table","tbody","tr","td","form","div","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:[null],tag:"recipientsCommon",selectors:["div[role=region]","table","tbody","tr","td","form","div","table[role=presentation]","tbody","tr","td.Iy","div.fX","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:["recipientsCommon"],tag:"toRecipient",selectors:[{$or:[['div.anm[name="to"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:a=>a.querySelector("textarea.vO[name=to], input[name=to]")},{$map:a=>a.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:a=>a.parentElement}]]}]},{sources:["recipientsCommon"],tag:"ccRecipient",selectors:[{$or:[['div.anm[name="cc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:a=>a.querySelector("textarea.vO[name=cc], input[name=cc]")},{$map:a=>a.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:a=>a.parentElement}]]}]},{sources:["recipientsCommon"],tag:"bccRecipient",selectors:[{$or:[['div.anm[name="bcc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:a=>a.querySelector("textarea.vO[name=bcc], input[name=bcc]")},{$map:a=>a.closest("tr")},"td.eV","div","div",".vR","input[type=hidden]",{$map:a=>a.parentElement}]]}]}],finders:{toRecipient:{fn:a=>c(a,"to")},ccRecipient:{fn:a=>c(a,"cc")},bccRecipient:{fn:a=>c(a,"bcc")}}})};var n=t(e("closest-ng")),u=t(e("page-parser-tree")),r=t(e("../../../../../common/censorHTMLtree"));function c(o,d){let a=s(o,d);return a?Array.from(a.querySelectorAll(".vR > input[type=hidden]")).map(p=>p.parentElement):o.querySelectorAll(`.GS .anm[name="${d}"] [role=listbox] [role=option][data-name]`)}function s(o,d){let a=o.querySelector(`.GS tr textarea.vO[name="${d}"], .GS tr input[name="${d}"]`);return a?(0,n.default)(a,"tr"):null}},{"../../../../../common/censorHTMLtree":471,"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,"page-parser-tree":374}],579:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=t.getFormattingToolbar();if(n&&n.style.display===""){let u=t.getFormattingToolbarArrow(),r=t.getFormattingToolbarToggleButton(),c=r.offsetLeft+r.clientWidth/2-u.offsetWidth/2;u.style.left=c+"px";let s=t.getStatusBarPrependContainer();n.style.bottom=s?-1*s.offsetHeight+"px":""}}},{}],580:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function d(a,p,f){if(function(m,w,C){let I=(0,r.default)(m,w).map(S=>S.emailAddress);if(!C)return!!I;if(!I)return!!C;if(C.length!==I.length)return!1;for(let S=0;S<I.length;S++){let O=I[S];if(C.indexOf(O)===-1)return!1}return!0}(a,p,f))return;let b=a.getLastSelectionRange(),_=(0,o.getRecipientRowForType)(a.getElement(),p);function y(m){let w=m.closest(".fX.aiL");w&&w.style.display==="none"&&(0,u.default)(a.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus"))}if(p==="cc"){let m=a.getElement().querySelector("span.pE[role=link]");m&&(y(m),m.click(),_=(0,o.getRecipientRowForType)(a.getElement(),p))}else if(p==="bcc"){let m=a.getElement().querySelector("span.pB[role=link]");m&&(y(m),m.click(),_=(0,o.getRecipientRowForType)(a.getElement(),p))}let g=_;if(g){let m=(0,u.default)(g,"input[role=combobox][aria-autocomplete=list]");if(!(m instanceof HTMLInputElement))throw new Error;Array.from(g.querySelectorAll("div[role=option][data-name] div.afX[aria-label]")).forEach(I=>{I.click()}),m.value="";let w=new DataTransfer;w.setData("text/plain",f.join(",")),m.dispatchEvent(new ClipboardEvent("paste",{clipboardData:w}));let C=g.closest("div.anm[name]");if(f.length>0&&C&&!C.hasAttribute("data-inboxsdk-handled-reset")){let I=String(Number(C.getAttribute("data-inboxsdk-tracking-fresh-compose")||0)+1);C.setAttribute("data-inboxsdk-tracking-fresh-compose",I),setTimeout(()=>{C.getAttribute("data-inboxsdk-tracking-fresh-compose")===I&&(C.removeAttribute("data-inboxsdk-tracking-fresh-compose"),g.querySelectorAll("div[role=option][data-name] div.afX[aria-label]").length===0&&(C.setAttribute("data-inboxsdk-handled-reset","true"),d(a,p,f)))},100)}}else{let m;try{if(m=(0,o.getOldRecipientRowForType)(a.getElement(),p),!m)throw new Error("getOldRecipientRowForType failed")}catch(C){return void n.default.error(C,{addressType:p})}let w=m.querySelector("textarea.vO");if(!(w&&w instanceof HTMLTextAreaElement))return;if(Array.from(m.querySelectorAll(".vR .vM")).forEach(C=>{(0,c.simulateClick)(C)}),w.value=f.join(","),(0,s.default)(w,13,0),(0,u.default)(a.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus")),p==="cc"){let C=(0,u.default)(a.getElement(),"span.aB.gQ.pE");(0,c.simulateClick)(C)}else if(p==="bcc"){let C=(0,u.default)(a.getElement(),"span.aB.gQ.pB");(0,c.simulateClick)(C)}}if(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),b){let m=document.getSelection();if(!m)throw new Error;m.removeAllRanges(),m.addRange(b)}};var n=t(e("../../../../lib/logger")),u=t(e("../../../../lib/dom/querySelectorOrFail")),r=t(e("./get-recipients")),c=e("../../../../lib/dom/simulate-mouse-event"),s=t(e("../../../../lib/dom/simulate-key")),o=e("./page-parser")},{"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/dom/simulate-key":711,"../../../../lib/dom/simulate-mouse-event":712,"../../../../lib/logger":729,"./get-recipients":571,"./page-parser":578,"@babel/runtime/helpers/interopRequireDefault":15}],581:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){return(0,r.default)(f.getGmailDriver().getTagTree().getAllByTag("composeLinkPopOverContainer")).flatMap(b=>{let{el:_,removalStream:y}=b,g=_.getValue(),m=null;return y.onValue(()=>{m&&(m.emit("close"),m=null)}),(0,c.default)(g,{attributes:!0,attributeFilter:["style"]}).toProperty(()=>null).takeUntilBy(y).flatMap(()=>{if(m&&(m.emit("close"),m=null),g.style.visibility==="visible"){let w=function(C){var I;let S=(I=document.getSelection())===null||I===void 0?void 0:I.focusNode;if(!S)return null;var O;if(S instanceof Text){if(S.previousSibling instanceof HTMLAnchorElement&&((O=document.getSelection())===null||O===void 0?void 0:O.anchorOffset)===0)return S.previousSibling;if(S.nextSibling instanceof HTMLAnchorElement)return S.nextSibling}return p(S,C.getBodyElement())}(f);if(w&&f.getElement().contains(w)){let C=new d(w,g);return m=C,u.constant({eventName:"linkPopOver",data:C})}}return u.never()})})};var n=t(e("@babel/runtime/helpers/defineProperty")),u=function(f,b){if(!b&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var _=o(b);if(_&&_.has(f))return _.get(f);var y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in f)if(m!=="default"&&Object.prototype.hasOwnProperty.call(f,m)){var w=g?Object.getOwnPropertyDescriptor(f,m):null;w&&(w.get||w.set)?Object.defineProperty(y,m,w):y[m]=f[m]}return y.default=f,_&&_.set(f,y),y}(e("kefir")),r=t(e("../../../../lib/toItemWithLifetimeStream")),c=t(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),s=t(e("../../../../lib/safe-event-emitter"));function o(f){if(typeof WeakMap!="function")return null;var b=new WeakMap,_=new WeakMap;return(o=function(y){return y?_:b})(f)}class d extends s.default{constructor(b,_){super(),this._linkEl=b,this._popOverEl=_}getLinkElement(){return this._linkEl}addSection(){let b=this._popOverEl.querySelector(".inboxsdk__linkPopOver_section_container");return b||(b=document.createElement("div"),b.className="inboxsdk__linkPopOver_section_container",this._popOverEl.appendChild(b)),new a(this,b)}}class a{constructor(b,_){(0,n.default)(this,"_el",document.createElement("div")),this._el.className="inboxsdk__linkPopOver_section",_.appendChild(this._el),b.on("close",()=>{this.remove()})}getElement(){return this._el}remove(){this._el.remove()}}function p(f,b){return f instanceof HTMLAnchorElement?f:f&&f!==b?p(f.parentElement,b):null}},{"../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../lib/safe-event-emitter":736,"../../../../lib/toItemWithLifetimeStream":740,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],582:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(y,g){if(g.isInlineReplyForm()||g.getElement().classList.contains("inboxsdk__size_fixer"))return;g.getElement().classList.add("inboxsdk__size_fixer");var m=g.getEventStream(),w=m.filter(()=>!1).beforeEnd(()=>null),C=m.filter(P=>(0,n.default)(["resize","fullscreenChanged"],P.eventName)).merge((0,s.default)(null)),I=g.getStatusArea().parentElement,S=g.getScrollBody(),O=b(),A=g.getTopFormElement(),E=g.getElement().id;E||(E=g.getElement().id=`x${Math.random()}x${Date.now()}`);function D(P,j){let k=f+_(E)+" "+P,M=(0,r.default)(O.cssRules,R=>R.selectorText===k);M!==-1&&O.deleteRule(M),O.insertRule(k+" { "+j+" }",0)}(0,o.default)(I,{attributes:!0}).takeUntilBy(w).onValue(()=>{g.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),C.bufferBy(C.flatMap(P=>(0,s.default)(null))).filter(P=>P.length>0).merge((0,o.default)(S,{attributes:!0})).takeUntilBy(w).onValue(()=>{let P=Math.max(I.offsetHeight-a,0)+Math.max(A.offsetHeight-p,0),j=g.getMaybeBodyElement(),k=S.querySelector(".qz"),M=k?.offsetHeight||S.offsetHeight,R=parseInt(S.style.getPropertyValue("max-height"),10),V=g.isFullscreen(),T=R-P,U=M>T?T:null,W=[`max-height: ${T}px !important;`],Q;U&&W.push(`height: ${U}px !important;`),V&&(W.push(`min-height: ${T}px !important;`),Q=`min-height: ${(parseInt(j?.style.minHeight,10)||R)-P}px !important;`),W.length>0&&D(_(S.id),W.join(`
`)),Q&&j&&D(_(j.id),Q)}),w.onValue(()=>{for(let P=O.cssRules.length-1;P>=0;P--)(0,u.default)(O.cssRules[P].selectorText,f+_(E)+" ")&&O.deleteRule(P)})};var n=t(e("lodash/includes")),u=t(e("lodash/startsWith")),r=t(e("lodash/findIndex")),c=t(e("lodash/once")),s=(t(e("kefir")),t(e("../../../../lib/delay-asap"))),o=t(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),d=t(e("../../../../lib/css-selector-escape"));let a=60,p=72,f="body:not(.inboxsdk_hack_disableComposeSizeFixer) ";var b=(0,c.default)(()=>{let y=document.createElement("style");y.type="text/css",y.className="inboxsdk__compose_size_fixer",document.head.appendChild(y);var g=y.sheet;if(!(g instanceof CSSStyleSheet))throw new Error("Could not add stylesheet");return g});function _(y){return"#"+(0,d.default)(y)}},{"../../../../lib/css-selector-escape":687,"../../../../lib/delay-asap":688,"../../../../lib/dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/findIndex":316,"lodash/includes":324,"lodash/once":347,"lodash/startsWith":351}],583:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n,u){t.has(n)||(t.add(n),window.requestAnimationFrame(()=>{if(t.delete(n),!n.isDestroyed()){var r=n._getFormattingAreaOffsetLeft(),c=parseInt(n.getInsertMoreArea().style.left,10),s=r-u;n.getInsertMoreArea().style.left=c+s+"px"}}))};let t=new WeakSet},{}],584:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/sortBy")),r=t(e("lodash/once")),c=t(e("auto-html")),s=(t(e("asap")),e("ud")),o=t(e("kefir")),d=t(e("kefir-bus")),a=t(e("kefir-stopper")),p=t(e("kefir-cast")),f=t(e("./gmail-attachment-area-view")),b=t(e("./gmail-attachment-card-view")),_=t(e("./gmail-message-view/get-updated-contact")),y=t(e("./gmail-message-view/attachment-icon")),g=(t(e("../../../lib/delay-asap")),t(e("../../../lib/wait-for")),t(e("../../../lib/dom/make-mutation-observer-stream"))),m=t(e("../../../lib/dom/querySelectorOrFail")),w=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),C=e("../../../lib/dom/simulate-mouse-event"),I=t(e("../../../../common/censorHTMLtree")),S=t(e("../../../../common/find-parent")),O=t(e("../../../lib/dom/reemitClickEventForReact"));let A=!1;class E{constructor(j,k,M){let R;if((0,n.default)(this,"_eventStream",(0,d.default)()),(0,n.default)(this,"_stopper",(0,a.default)()),(0,n.default)(this,"_messageLoaded",!1),(0,n.default)(this,"_sender",null),(0,n.default)(this,"_recipients",null),(0,n.default)(this,"_recipientEmailAddresses",null),(0,n.default)(this,"_recipientsFull",null),this._element=j,this._threadViewDriver=k,this._driver=M,this._moreMenuItemDescriptors=[],this._moreMenuAddedElements=[],this._replyElement=null,this._replyElementStream=this._eventStream.filter(function(V){return V.eventName==="replyElement"}).map(V=>V.change),this._setupMessageStateStream(),this._monitorEmailAddressHovering(),this._setupMoreMenuWatching(),M.isUsingSyncAPI()){let V=this._element.querySelector("[data-message-id]");if(V){let T=V.getAttribute("data-message-id");if(!T)throw new Error("data-message-id attribute has no value");R=V.hasAttribute("data-legacy-message-id")&&!this._driver.isRecentSyncDraftId(T.replace("#",""))?o.default.constant(null):o.default.fromPromise((async()=>{for(let U=0;U<10;U++)try{let W=await this._driver.getGmailMessageIdForSyncMessageId(T.replace("#",""));return V.setAttribute("data-legacy-message-id",W),null}catch{await new Promise(Q=>setTimeout(Q,200*U))}throw new Error("gmail message id never became available")})())}else R=o.default.constant(null)}else R=o.default.constant(null);this._readyStream=R.takeUntilBy(this._stopper).onValue(()=>this._processInitialState())}destroy(){this._stopper.destroy(),this._eventStream.end(),this._gmailAttachmentAreaView&&this._gmailAttachmentAreaView.destroy(),this._moreMenuAddedElements.forEach(j=>{j.remove()})}getEventStream(){return this._eventStream}getReplyElementStream(){return this._replyElementStream}getElement(){return this._element}getThreadViewDriver(){return this._threadViewDriver}isLoaded(){return this._messageLoaded}getContentsElement(){if(!this._messageLoaded)throw new Error("tried to get message contents before message is loaded");try{return(0,m.default)(this._element,"div.ii.gt")}catch(j){return this._driver.getLogger().error(j),(0,m.default)(this._element,".adP")}}isElementInQuotedArea(j){return(0,S.default)(j,k=>k.nodeName==="BLOCKQUOTE")!=null}getSender(){let j=this._sender;if(j)return j;let k=(0,m.default)(this._element,"td.gF span[email]"),M=k.getAttribute("email");if(!M)throw new Error("Could not find email address");return j=this._sender={name:k.getAttribute("name"),emailAddress:M},j}getRecipients(){let j=this._recipients;if(j)return j;let k=Array.from(this._element.querySelectorAll(".hb span[email]"));return j=this._recipients=k.map(M=>this._getUpdatedContact({name:M.getAttribute("name"),emailAddress:M.getAttribute("email")||""})),j}getRecipientEmailAddresses(){let j=this._recipientEmailAddresses;if(j)return j;let k=Array.from(this._element.querySelectorAll(".hb span[email]"));return j=this._recipientEmailAddresses=k.map(M=>M.getAttribute("email")||""),j}async getRecipientsFull(){let j=this._recipientsFull;if(j)return j;if(this._driver.isUsingSyncAPI()){let k=this._threadViewDriver.getInternalID();j=this._recipientsFull=await this._driver.getPageCommunicator().getMessageRecipients(k,this._element),j||(this._driver.getLogger().error(new Error("Failed to find message recipients from response"),{threadID:k}),j=this._recipientsFull=this.getRecipients())}else{let k=Array.from(this._element.querySelectorAll(".hb span[email]"));j=this._recipientsFull=k.map(M=>this._getUpdatedContact({name:M.getAttribute("name"),emailAddress:M.getAttribute("email")||""}))}return j}getDateString(){return(0,m.default)(this._element,".ads .gK .g3").title}async getDate(){let j=this._threadViewDriver.getInternalID();return await this._driver.getPageCommunicator().getMessageDate(j,this._element)}getAttachmentCardViewDrivers(){return this._gmailAttachmentAreaView?this._gmailAttachmentAreaView.getAttachmentCardViews():[]}addButtonToDownloadAllArea(j){var k=this._getAttachmentArea();k&&k.addButtonToDownloadAllArea(j)}addMoreMenuItem(j){this._moreMenuItemDescriptors=(0,u.default)(this._moreMenuItemDescriptors.concat([j]),k=>k.orderHint),this._updateMoreMenu()}_setupMoreMenuWatching(){this._openMoreMenu=null,this._eventStream.filter(j=>j.eventName==="viewStateChange").toProperty(()=>null).flatMapLatest(()=>{let j=this._getMoreButton();return j?(0,w.default)(j,{attributes:!0,attributeFilter:["aria-expanded"]}).map(()=>j.getAttribute("aria-expanded")==="true"?this._getOpenMoreMenu():null):o.default.constant(null)}).takeUntilBy(this._stopper).onValue(j=>{this._openMoreMenu=j,this._updateMoreMenu()})}_getMoreButton(){return this.getViewState()!=="EXPANDED"?null:this._element.querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]")}_getOpenMoreMenu(){return document.body.querySelector("td > div.nH.a98.iY > div.nH.aHU .b7.J-M[aria-haspopup=true]")||document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]")}_closeActiveEmailMenu(){let j=this._getMoreButton();j&&(0,C.simulateClick)(j)}_updateMoreMenu(){this._moreMenuAddedElements.forEach(k=>{k.remove()}),this._moreMenuAddedElements.length=0;let j=this._openMoreMenu;if(j&&this._moreMenuItemDescriptors.length){let k=j.offsetHeight,M=j.offsetWidth,R=document.createElement("div");R.className="J-Kh",this._moreMenuAddedElements.push(R),j.appendChild(R),this._moreMenuItemDescriptors.forEach(W=>{let Q=document.createElement("div");if(Q.className="J-N",Q.setAttribute("role","menuitem"),Q.innerHTML=c.default`<div class="J-N-Jz">${W.title}</div>`,Q.addEventListener("mouseenter",X=>Q.classList.add("J-N-JT")),Q.addEventListener("mouseleave",X=>Q.classList.remove("J-N-JT")),Q.addEventListener("click",X=>{this._closeActiveEmailMenu(),W.onClick()}),W.iconUrl||W.iconClass){let X=document.createElement("img");X.className=`f4 J-N-JX inboxsdk__message_more_icon ${W.iconClass||""}`,X.src=W.iconUrl||"images/cleardot.gif";let oe=Q.firstElementChild;oe&&oe.appendChild(X)}this._moreMenuAddedElements.push(Q),j.appendChild(Q)});let V=j.getBoundingClientRect(),T=V.width-M;T>0&&(j.style.left=Math.max(0,parseInt(j.style.left)-T)+"px");let U=this._getMoreButton();if(U){let W=U.getBoundingClientRect();if(V.top<W.top){let Q=V.height-k;j.style.top=Math.max(0,parseInt(j.style.top)-Q)+"px"}}}}getMessageID(){if(!(arguments.length>0&&arguments[0]!==void 0&&arguments[0])&&!this._messageLoaded)throw new Error("tried to get message id before message is loaded");let j=this._element.querySelector("[data-legacy-message-id]");if(j){let R=j.getAttribute("data-legacy-message-id");if(!R)throw new Error("message id attribute with no value, wtf?");return R}let k=this._element.querySelector("div.ii.gt");if(!k){let R=new Error("Could not find message id element");throw this._driver.getLogger().error(R,{elementHtml:(0,I.default)(this._element)}),R}let M=k.className.match(/\bm([0-9a-f]+)\b/);if(M)return A||(A=!0,this._driver.getLogger().eventSite("old messageid location")),M[1];{let R=k.firstElementChild;if(!R){let T=new Error("Could not find message id value");throw this._driver.getLogger().error(T,{reason:"Could not find element",messageHtml:(0,I.default)(k)}),T}let V=R.className.match(/\bm([0-9a-f]+)\b/);if(!V){let T=new Error("Could not find message id value");throw this._driver.getLogger().error(T,{reason:"Element was missing message className",messageHtml:(0,I.default)(k)}),T}return V[1]}}async getMessageIDAsync(){return this.getMessageID()}addAttachmentIcon(j){let k=new y.default;if(!this._element)return k;this._element.setAttribute("inboxsdk__message_added_attachment_icon","true");let M=(0,r.default)(()=>{let W=document.createElement("img");return W.src="images/cleardot.gif",W}),R=(0,r.default)(()=>document.createElement("div")),V=(0,r.default)(()=>document.createElement("div")),T=!1,U=null;return this._stopper.onValue(()=>{T&&(R().remove(),V().remove(),M().remove(),T=!1)}),(0,p.default)(o.default,j).combine(this._eventStream.filter(W=>W.eventName==="viewStateChange").toProperty(()=>null),W=>W).takeUntilBy(this._stopper).onValue(W=>{if(W){let Q;Q=this.getViewState()==="COLLAPSED"?(0,m.default)(this._element,".adf.ads td.gH span"):(0,m.default)(this._element,"td.gH div.gK span");let X=W.iconHtml!=null?R():M(),oe=W.onClick;if(oe?(X.onclick=function(J){J.preventDefault(),J.stopPropagation(),oe()},X.style.cursor="pointer"):(X.onclick=null,X.style.cursor=""),W.tooltip&&typeof W.tooltip=="object"&&W.tooltip instanceof HTMLElement){let J=V();J.className="inboxsdk__message_attachment_tooltipWrapper",J.onclick=function(he){he.stopPropagation(),(0,O.default)(he)},J.appendChild(W.tooltip),X.onmouseenter=function(he){he.preventDefault(),he.stopPropagation(),X.appendChild(J),k.emit("tooltipShown")},X.onmouseleave=function(he){he.preventDefault(),he.stopPropagation(),X.removeChild(J),k.emit("tooltipHidden")},X.removeAttribute("data-tooltip")}else W.tooltip&&typeof W.tooltip=="string"?X.setAttribute("data-tooltip",W.tooltip):X.removeAttribute("data-tooltip");X.className=W.iconHtml!=null?`inboxsdk__message_attachment_iconWrapper ${W.iconClass||""}`:"inboxsdk__message_attachment_icon "+(W.iconClass||""),W.iconHtml!=null?(Q.contains(M())&&M().remove(),X.innerHTML=W.iconHtml):U!=W.iconUrl&&(Q.contains(R())&&R().remove(),X.style.background=W.iconUrl?"url("+W.iconUrl+") no-repeat 0 0":"",U=W.iconUrl),Q.contains(X)||(Q.appendChild(X),T=!0)}else T&&(R().remove(),M().remove(),V().remove(),T=!1)}),k}getViewState(){return this._element.classList.contains("kQ")||this._element.classList.contains("kx")?"HIDDEN":this._element.classList.contains("kv")?"COLLAPSED":"EXPANDED"}hasOpenReply(){return Boolean(this._replyElement)}addAttachmentCard(j){var k=new b.default(j,this._driver,this);return this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._getAttachmentArea()),this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._createAttachmentArea()),this._gmailAttachmentAreaView.addGmailAttachmentCardView(k),k}_setupMessageStateStream(){var j=this;this._eventStream.plug((0,g.default)(this._element,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}).takeUntilBy(this._stopper).map(function(k){let M=k.target.classList,R=k.oldValue,V,T;return R.indexOf("kQ")>-1||R.indexOf("kx")>-1?V="HIDDEN":R.indexOf("kv")>-1||R.indexOf("ky")>-1?V="COLLAPSED":R.indexOf("h7")>-1&&(V="EXPANDED"),M.contains("kQ")||M.contains("kx")?T="HIDDEN":M.contains("kv")||M.contains("ky")?T="COLLAPSED":M.contains("h7")&&(T="EXPANDED"),{oldValue:V,newValue:T,currentClassList:M}}).map(function(k){return k.newValue==="EXPANDED"&&k.oldValue!=="EXPANDED"&&j._checkMessageOpenState(k.currentClassList),k}).filter(function(k){return k.newValue!==k.oldValue&&!!k.oldValue&&!!k.newValue}).map(function(k){return{eventName:"viewStateChange",oldValue:k.oldValue,newValue:k.newValue}}))}_processInitialState(){this._checkMessageOpenState(this._element.classList)}_checkMessageOpenState(j){if(!j.contains("h7")||this._messageLoaded)return;let k;try{k=this.getMessageID(!0)}catch(M){return void this._driver.getLogger().error(M)}this._messageLoaded=!0;try{this._driver.associateThreadAndMessageIDs(this._threadViewDriver.getThreadID(),k)}catch(M){this._driver.getLogger().error(M)}this._gmailAttachmentAreaView=this._getAttachmentArea(),this._eventStream.emit({type:"internal",eventName:"messageLoad"}),this._setupReplyStream()}_setupReplyStream(){let j=this._element.querySelector(".ip");if(j){var k=this,M=null;o.default.combine([(0,w.default)(j,{attributes:!0,attributeFilter:["class"]}),o.default.later(1,null)]).merge(o.default.later(1)).takeUntilBy(this._stopper).beforeEnd(()=>"END").onValue(R=>{if(R!=="END"&&j.classList.contains("adB")){if(!M){let T=j.firstElementChild;k._replyElement=T,T&&(M=(0,d.default)(),k._eventStream.emit({type:"internal",eventName:"replyElement",change:{el:T,removalStream:M}}))}}else if(M){var V=M;M=null,V.emit(null),V.end(),k._replyElement=null}})}}_monitorEmailAddressHovering(){var j=this;this._eventStream.plug(o.default.fromEvents(this._element,"mouseover").map(k=>k.target).filter(function(k){return k&&k.getAttribute("email")}).map(function(k){let M=null;return M=j._element.classList.contains("h7")?j._element.querySelector("h3.iw").contains(k)?"sender":"recipient":"sender",{get contact(){return j._getUpdatedContact({name:(R=k).getAttribute("name"),emailAddress:R.getAttribute("email")});var R},contactType:M,eventName:"contactHover",messageViewDriver:j}}))}_getAttachmentArea(){return this._element.querySelector(".hq")?new f.default(this._element.querySelector(".hq"),this._driver,this):null}_createAttachmentArea(){let j=new f.default(null,this._driver,this),k=(0,m.default)(this._element,".hi"),M=k.parentNode;if(!M)throw new Error("parentNode not found");return M.insertBefore(j.getElement(),k),j}_getUpdatedContact(j){return(0,_.default)(j,this._element)}getReadyStream(){return this._readyStream}}var D=(0,s.defn)(v,E);i.default=D},{"../../../../common/censorHTMLtree":471,"../../../../common/find-parent":474,"../../../lib/delay-asap":688,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/make-mutation-observer-stream":701,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/reemitClickEventForReact":707,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/wait-for":742,"./gmail-attachment-area-view":550,"./gmail-attachment-card-view":551,"./gmail-message-view/attachment-icon":585,"./gmail-message-view/get-updated-contact":586,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-cast":156,"kefir-stopper":157,"lodash/once":347,"lodash/sortBy":350,ud:455}],585:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../../../../lib/safe-event-emitter"));class r extends u.default{}var c=(0,n.defn)(v,r);i.default=c},{"../../../../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],586:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o){let d=c[s.emailAddress];if(d){if(d.headerContact.name===s.name)return d.modalContact;delete c[s.emailAddress]}let a=o.querySelector(".ajA.SK"),p=a&&a.style.visibility==="hidden",f=o.querySelector(".ajy[aria-haspopup=true]");if(f&&p){let b=y=>{y.stopPropagation()},_=y=>{y.shouldIgnore=!0};o.addEventListener("click",b),document.addEventListener("focus",_,!0),(0,u.simulateClick)(f);try{(function(y){let g=document.querySelectorAll(".ajC [email]");for(let m=0;m<g.length;m++){let w=g[m],C=w.getAttribute("email");if(!C||c[C])continue;let I={emailAddress:C,name:null},S=w.getAttribute("name");if(S)I.name=S;else{let O=(0,r.default)(w.textContent);C===O.emailAddress&&(I=O)}c[C]={headerContact:y,modalContact:I}}})(s)}catch(y){n.default.error(y)}finally{(0,u.simulateClick)(f),o.removeEventListener("click",b),document.removeEventListener("focus",_,!0)}if(d=c[s.emailAddress],d)return d.modalContact}return s};var n=t(e("../../../../lib/logger")),u=e("../../../../lib/dom/simulate-mouse-event"),r=t(e("../../../../lib/extract-contact-from-email-contact-string"));let c={}},{"../../../../lib/dom/simulate-mouse-event":712,"../../../../lib/extract-contact-from-email-contact-string":714,"../../../../lib/logger":729,"@babel/runtime/helpers/interopRequireDefault":15}],587:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.getLeftIndentationPaddingValue=P;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("auto-html")),r=function(j,k){if(!k&&j&&j.__esModule)return j;if(j===null||typeof j!="object"&&typeof j!="function")return{default:j};var M=O(k);if(M&&M.has(j))return M.get(j);var R={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in j)if(T!=="default"&&Object.prototype.hasOwnProperty.call(j,T)){var U=V?Object.getOwnPropertyDescriptor(j,T):null;U&&(U.get||U.set)?Object.defineProperty(R,T,U):R[T]=j[T]}return R.default=j,M&&M.set(j,R),R}(e("kefir")),c=t(e("kefir-bus")),s=t(e("../gmail-element-getter")),o=t(e("../../../lib/dom/get-insert-before-element")),d=t(e("../../../lib/dom/querySelectorOrFail")),a=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),p=t(e("../widgets/buttons/button-view")),f=t(e("../widgets/buttons/more-dropdown-button-view")),b=t(e("../widgets/buttons/more-parent-accessory-button-view")),_=t(e("../widgets/buttons/create-accessory-button-view")),y=t(e("../widgets/buttons/create-parent-accessory-button-view")),g=t(e("../widgets/gmail-dropdown-view")),m=t(e("../../../widgets/buttons/dropdown-button-view-controller")),w=t(e("../../../widgets/buttons/basic-button-view-controller")),C=t(e("../../../driver-common/update-icon")),I=t(e("../../../driver-common/render-custom-icon")),S=t(e("../../../constants/nav-item-types"));function O(j){if(typeof WeakMap!="function")return null;var k=new WeakMap,M=new WeakMap;return(O=function(R){return R?M:k})(j)}let A=0,E=12;class D{constructor(k,M,R){(0,n.default)(this,"_accessory",null),(0,n.default)(this,"_accessoryViewController",null),(0,n.default)(this,"_expandoElement",null),(0,n.default)(this,"_iconSettings",{}),(0,n.default)(this,"_isActive",!1),(0,n.default)(this,"_isCollapsed",!1),(0,n.default)(this,"_itemContainerElement",null),(0,n.default)(this,"_name",""),(0,n.default)(this,"_type",null),(0,n.default)(this,"_collapseKey",null),this._driver=k,this._eventStream=(0,c.default)(),this._level=R||0,this._navItemNumber=++A,this._orderGroup=M,this._isNewLeftNavParent=!s.default.shouldAddNavItemsInline()&&this._level===1,this._isNewLeftNavParent?this._element=this._setupParentElement():this._element=this._setupChildElement()}addNavItem(k,M){let R=this._type===S.default.GROUPER?this._level:this._level+1,V=new D(this._driver,k,R);return V.getEventStream().filter(T=>T.eventName==="orderChanged").onValue(()=>this._addNavItemElement(V)),V.setNavItemDescriptor(M),this._isNewLeftNavParent&&this._createExpandoParent(),V}destroy(){this._element.remove(),this._accessoryViewController&&this._accessoryViewController.destroy(),this._eventStream&&this._eventStream.end(),this._expandoElement&&this._expandoElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}getNavItemDescriptor(){return this._navItemDescriptor}getOrderGroup(){return this._orderGroup}getOrderHint(){return this._orderHint}getName(){return this._name}isCollapsed(){return this._isCollapsed}remove(){this.destroy()}setActive(k){if(!this._element||this._type===S.default.LINK||this._type===S.default.MANAGE||this._isActive===k||this._isNewLeftNavParent)return;let M=(0,d.default)(this._element,".TO");k?(this._element.classList.add("ain"),M.classList.add("nZ"),M.classList.add("aiq")):(this._element.classList.remove("ain"),M.classList.remove("nZ"),M.classList.remove("aiq")),this._setHeights(),this._isActive=k}setCollapsed(k){this._isCollapsed=k,this._isCollapsible()&&(k?this._collapse():this._expand());try{let M="inboxsdk__navitem_collapsed__"+this._collapseKey;this._isCollapsed?localStorage.setItem(M,"true"):localStorage.removeItem(M)}catch{}}setNavItemDescriptor(k){k.takeUntilBy(this._eventStream.filter(()=>!1).beforeEnd(()=>null)).onValue(M=>this._updateValues(M))}toggleCollapse(){this.setCollapsed(!this._isCollapsed)}_addNavItemElement(k){let M=this._getItemContainerElement(),R=(0,o.default)(k.getElement(),M.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);M.insertBefore(k.getElement(),R);let V=this._type===S.default.GROUPER||this._isNewLeftNavParent?this._level-1:this._level,T=k.getElement();s.default.shouldAddNavItemsInline()?(0,d.default)(T,".TN").style.marginLeft=P()*V+"px":(0,d.default)(T,".TN").style.marginLeft=6*V+"px",this._setHeights()}_collapse(){if(this._isCollapsed=!0,this._isNewLeftNavParent)this._element.classList.remove("Xr");else{let k=this._expandoElement;if(k)k.classList.remove("aih"),k.classList.add("aii");else if(this._type===S.default.GROUPER){let M=this._element.firstElementChild;M&&M.classList.remove("air")}this._itemContainerElement&&(this._itemContainerElement.style.display="none"),this._setHeights()}this._eventStream.emit({eventName:"collapsed"})}_createAccessory(k){switch(k.type){case"CREATE":this._createCreateAccessory(k);break;case"ICON_BUTTON":this._createIconButtonAccessory(k);break;case"DROPDOWN_BUTTON":this._createDropdownButtonAccessory(k);break;case"SETTINGS_BUTTON":this._driver.getLogger().deprecationWarning("SettingsButtonAccessoryDescriptor","DropdownButtonAccessoryDescriptor"),this._createDropdownButtonAccessory({...k,type:"DROPDOWN_BUTTON"})}}_createCreateAccessory(k){this._createPlusButtonAccessory(k)}_createDropdownButtonAccessory(k){if(this._isNewLeftNavParent){let U={...k};U.buttonView=new b.default,U.dropdownViewDriverClass=g.default,U.dropdownPositionOptions={position:"right",hAlign:"left",vAlign:"top"},U.dropdownShowFunction=oe=>{let{dropdown:J}=oe;J.el.style.marginLeft="24px",U.onClick({dropdown:J})};let W=new m.default(U);this._accessoryViewController=W;let Q=(0,d.default)(this._element,".Yh"),X=Q.parentNode;return void(X&&(U.buttonView.getElement().classList.add(...Q.classList),X.replaceChild(U.buttonView.getElement(),Q),this._iconSettings.iconElement=null))}let M={...k};M.buttonView=new f.default,M.dropdownViewDriverClass=g.default,M.dropdownPositionOptions={position:"bottom",hAlign:"left",vAlign:"top"};let R=s.default.getLeftNavContainerElement();if(!R)throw new Error("leftNavContainer not found");M.dropdownShowFunction=U=>{if(R.classList.contains("bhZ")){let W=r.fromEvents(U.dropdown,"destroy");(0,a.default)(R,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(W).toProperty(()=>null).onValue(()=>{R.classList.contains("bym")||R.classList.add("bym")}),W.onValue(()=>{R.classList.remove("bym")})}M.onClick(U),U.dropdown.on("destroy",()=>{M.buttonView.deactivate()})};let V=new m.default(M);this._accessoryViewController=V;let T=(0,d.default)(this._element,".TO");T.addEventListener("mouseenter",()=>T.classList.add("inboxsdk__navItem_hover")),T.addEventListener("mouseleave",()=>T.classList.remove("inboxsdk__navItem_hover")),(0,d.default)(this._element,".TN").appendChild(M.buttonView.getElement()),this._setupContextClickHandler(V)}_createExpando(){if(this._type===S.default.GROUPER)return;let k=this._expandoElement=document.createElement("div");k.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),k.setAttribute("role","link"),k.title=`Expand ${this._name||""}`,k.addEventListener("click",R=>{this.toggleCollapse(),R.stopPropagation()});let M=this._element.querySelector(".TN.aik");M&&M.insertAdjacentElement("afterbegin",k),this._isCollapsed?this._collapse():this._expand()}_createExpandoParent(){let k=(0,d.default)(this._element,".XR");k.style.visibility="visible",this._expandoElement=k,this._isCollapsed?this._collapse():this._expand()}_createIconButtonAccessory(k){if(this._driver.getLogger().deprecationWarning("IconButtonAccessoryDescriptor accessory for a parent level NavItemView","CreateAccessoryDescriptor or DropdownButtonAccessoryDescriptor"),this._isNewLeftNavParent)return;let M={...k,buttonColor:"pureIcon"};M.buttonView=new p.default(M),this._accessoryViewController=new w.default(M),(0,d.default)(this._element,".TN").appendChild(M.buttonView.getElement())}_createItemContainerElement(){let k=this._itemContainerElement=document.createElement("div");return k.classList.add("inboxsdk__navItem_container"),this._element.appendChild(k),this._isCollapsible()&&(this._isCollapsed?this._collapse():this._expand()),k}_createLinkButtonAccessory(k){let M=document.createElement("div");M.setAttribute("class","inboxsdk__navItem_link");let R=document.createElement("a");R.classList.add("CK"),R.textContent=k.name,M.appendChild(R),R.href="#",R.addEventListener("click",V=>{V.stopPropagation(),V.preventDefault(),k.onClick()}),(0,d.default)(this._element,".aio").appendChild(M)}_createPlusButtonAccessory(k){if(this._isNewLeftNavParent){let R={...k};R.buttonView=new y.default,this._accessoryViewController=new w.default(R);let V=(0,d.default)(this._element,".Yh"),T=V.parentNode;return void(T&&(R.buttonView.getElement().classList.add(...V.classList),T.replaceChild(R.buttonView.getElement(),V),this._iconSettings.iconElement=null))}let M={...k};M.buttonView=new _.default,this._accessoryViewController=new w.default(M),(0,d.default)(this._element,".TN").appendChild(M.buttonView.getElement())}_expand(){if(this._isNewLeftNavParent)this._element.classList.add("Xr");else{let k=this._expandoElement;if(k)k.classList.add("aih"),k.classList.remove("aii");else if(this._type===S.default.GROUPER){let M=this._element.firstElementChild;M&&M.classList.add("air")}this._itemContainerElement&&(this._itemContainerElement.style.display=""),this._setHeights()}this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}_getItemContainerElement(){if(this._isNewLeftNavParent)return(0,d.default)(this._element,".TK");{let k=this._itemContainerElement;return k||(k=this._createItemContainerElement(),this._createExpando()),k}}_isCollapsible(){return Boolean(this._expandoElement)||this._type===S.default.GROUPER}_makeEventMapper(k){return function(M){return M.stopPropagation(),M.preventDefault(),{eventName:k,domEvent:M}}}_setHeights(){if(this._level==1)return;let k=(0,d.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";let M=this._element.clientHeight,R=k.clientHeight;this._element.style.height=R+"px",this._element.style.overflow="visible",this._element.style.marginBottom=M-R+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}_setHighlight(k){this._element&&this._type!==S.default.LINK&&this._type!==S.default.MANAGE&&(k?(0,d.default)(this._element,".TO").classList.add("NQ"):(0,d.default)(this._element,".TO").classList.remove("NQ"))}_setupContextClickHandler(k){r.fromEvents(this._element,"contextmenu").takeWhile(()=>this._accessoryViewController===k).onValue(M=>{M.stopPropagation(),M.preventDefault(),k.showDropdown()})}_setupChildElement(){let k=document.createElement("div");k.setAttribute("class","aim inboxsdk__navItem"),k.innerHTML=['<div class="TO">','<div class="TN aik">','<div class="qj" style="">',"</div>",'<div class="aio aip">','<span class="nU" role="link">',"</span>",'<span class="bsU">',"</span>","</div>","</div>","</div>"].join("");let M=(0,d.default)(k,".TO");return r.merge([r.fromEvents(M,"mouseenter").map(this._makeEventMapper("mouseenter")),r.fromEvents(M,"mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue(R=>{this._updateHighlight(R)}),this._eventStream.plug(r.fromEvents(M,"click").map(this._makeEventMapper("click"))),k}_setupParentElement(){let k=document.createElement("div");k.className="Xa wT W8 XJ inboxsdk__navItem",k.innerHTML=['<div class="V6 CL Y2">','<div class="XR" role="button" tabindex="0" type="button" style="visibility: hidden">',"</div>",'<span class="XS">','<span class="WW inboxsdk__navItem_name" role="heading" aria-level="2">',"</span>",'<span class="XU" aria-hidden="true" style="display: none">',"</span>","</span>",'<div class="Yh">',"</div>","</div>",'<div class="V3 ada">','<div class="wT">','<div class="TK">',"</div>","</div>","</div>"].join("");let M=(0,d.default)(k,".V3");r.fromEvents(M,"scroll").debounce(10).onValue(()=>{M.scrollTop>0?M.classList.add("adh"):M.classList.remove("adh")});let R=(0,d.default)(k,".XR");r.fromEvents(R,"click").map(this._makeEventMapper("click")).onValue(()=>{this.toggleCollapse()});let V=(0,d.default)(k,".V6.CL");return this._eventStream.plug(r.fromEvents(V,"click").map(this._makeEventMapper("click"))),k}_setupGrouper(){let k=this._element.firstElementChild;k&&(k.classList.add("n4"),k.addEventListener("click",M=>{M.stopPropagation(),this.toggleCollapse()}),this._isCollapsed?this._collapse():this._expand()),(0,d.default)(this._element,".qj").innerHTML='<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>'}_updateAccessory(k){this._accessory!==k&&(this._accessoryViewController&&(this._accessoryViewController.destroy(),this._accessoryViewController=null),k&&this._createAccessory(k),this._accessory=k)}_updateClickability(k){k.type===S.default.LINK||k.type===S.default.MANAGE?this._element.classList.add("inboxsdk__navItem_nonClickable"):this._element.classList.remove("inboxsdk__navItem_nonClickable")}_updateHighlight(k){let{eventName:M}=k;switch(M){case"mouseenter":this._setHighlight(!0);break;case"mouseleave":this._setHighlight(!1)}}_updateIcon(k){let M=this._isNewLeftNavParent?(0,d.default)(this._element,".Yh"):(0,d.default)(this._element,".qj");if(k.iconElement)(0,I.default)(M,k.iconElement,k.iconPosition!=="BEFORE_NAME");else if((0,C.default)(this._iconSettings,M,k.iconPosition!=="BEFORE_NAME",k.iconClass,k.iconUrl),k.backgroundColor){let R=k.backgroundColor;M.style.borderColor=R}}_updateName(k){if(this._name===k)return;let M=(0,d.default)(this._element,".inboxsdk__navItem_name");M.textContent=k,M.setAttribute("title",k),this._expandoElement&&(this._expandoElement.title=`Expand ${k}`),this._name=k}_updateOrder(k){this._element.setAttribute("data-group-order-hint",""+this._orderGroup),this._element.setAttribute("data-insertion-order-hint",""+this._navItemNumber),k.orderHint=k.orderHint||k.orderHint===0?k.orderHint:Number.MAX_SAFE_INTEGER,k.orderHint!==this._orderHint&&(this._element.setAttribute("data-order-hint",""+k.orderHint),this._eventStream.emit({eventName:"orderChanged"})),this._orderHint=k.orderHint}_updateRole(k){let M=(0,d.default)(this._element,".V6.CL");k?M.setAttribute("role","link"):(M.setAttribute("role","group"),M.classList.add("X9"))}_updateSubtitle(k){this._isNewLeftNavParent||k.accessory&&!["SETTINGS_BUTTON","DROPDOWN_BUTTON"].includes(k.accessory.type)&&k.type!==S.default.GROUPER||((0,d.default)(this._element,".bsU").innerHTML+=u.default`${k.subtitle||""}`)}_updateType(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S.default.NAVIGATION;if(!this._element||(k=k||S.default.NAVIGATION,this._type===k))return;let M=this._element.querySelector(".inboxsdk__navItem_name");switch(k){case S.default.GROUPER:case S.default.NAVIGATION:M&&M.tagName==="SPAN"||((0,d.default)(this._element,".nU").innerHTML+=u.default`<span class="inboxsdk__navItem_name">${this._name}</span>`);break;case S.default.LINK:case S.default.MANAGE:M&&M.tagName==="A"||((0,d.default)(this._element,".nU").innerHTML+=u.default`<a href="#" class="CK inboxsdk__navItem_name">${this._name}</a>`)}this._type=k}_updateValues(k){this._navItemDescriptor=k,this._collapseKey==null&&(this._collapseKey=k.key||`${k.name}`,this._isCollapsed=localStorage.getItem("inboxsdk__navitem_collapsed__"+this._collapseKey)==="true"),this._updateType(k.type),this._updateName(k.name),this._updateSubtitle(k),this._updateOrder(k),this._isNewLeftNavParent&&this._updateRole(k.routeID),this._type!==S.default.GROUPER?(this._updateAccessory(k.accessory),this._updateIcon(k),this._updateClickability(k)):this._setupGrouper()}}function P(){return E}i.default=D},{"../../../constants/nav-item-types":491,"../../../driver-common/render-custom-icon":676,"../../../driver-common/update-icon":680,"../../../lib/dom/get-insert-before-element":692,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/basic-button-view-controller":780,"../../../widgets/buttons/dropdown-button-view-controller":781,"../gmail-element-getter":532,"../widgets/buttons/button-view":600,"../widgets/buttons/create-accessory-button-view":601,"../widgets/buttons/create-parent-accessory-button-view":602,"../widgets/buttons/more-dropdown-button-view":605,"../widgets/buttons/more-parent-accessory-button-view":606,"../widgets/gmail-dropdown-view":608,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-bus":155}],588:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=r;var n=t(e("lodash/includes")),u=e("../../../../constants/router");function r(){this._routeNameToRouteIDMap=null,this._compatibleRouteIDMap=null,this._setupRouteNameToRouteIDMap(),this._setupCompatibleRouteIDMap()}Object.assign(r.prototype,{NativeRouteIDs:u.NATIVE_ROUTE_IDS,NativeListRouteIDs:u.NATIVE_LIST_ROUTE_IDS,RouteTypes:u.ROUTE_TYPES,isListRouteName:function(c){var s=this.getRouteID(c);return!!s&&(0,n.default)(Object.values(u.NATIVE_LIST_ROUTE_IDS),s)},isSettingsRouteName:function(c){return this._routeNameToRouteIDMap[c]===this.NativeRouteIDs.SETTINGS},isContactRouteName:function(c){return this._routeNameToRouteIDMap[c]===this.NativeRouteIDs.CONTACTS||this._routeNameToRouteIDMap[c]===this.NativeRouteIDs.CONTACT},getRouteID:function(c){var s=this._routeNameToRouteIDMap[c];return s||null},getRouteName:function(c){for(var s in this._routeNameToRouteIDMaps)if(this._routeNameToRouteIDMap[s]===c)return s;return null},isNativeRoute:function(c){return!!this._routeNameToRouteIDMap[c]},getCompatibleRouteID:function(c){return this._compatibleRouteIDMap[c]||c},_setupRouteNameToRouteIDMap:function(){this._routeNameToRouteIDMap={inbox:this.NativeRouteIDs.INBOX,section_query:this.NativeRouteIDs.SEARCH,all:this.NativeRouteIDs.ALL_MAIL,imp:this.NativeRouteIDs.IMPORTANT,contacts:this.NativeRouteIDs.CONTACTS,contact:this.NativeRouteIDs.CONTACT,sent:this.NativeRouteIDs.SENT,starred:this.NativeRouteIDs.STARRED,snoozed:this.NativeRouteIDs.SNOOZED,drafts:this.NativeRouteIDs.DRAFTS,label:this.NativeRouteIDs.LABEL,category:this.NativeRouteIDs.LABEL,search:this.NativeRouteIDs.SEARCH,"advanced-search":this.NativeRouteIDs.SEARCH,trash:this.NativeRouteIDs.TRASH,spam:this.NativeRouteIDs.SPAM,apps:this.NativeRouteIDs.SEARCH,circle:this.NativeRouteIDs.LABEL,settings:this.NativeRouteIDs.SETTINGS,chats:this.NativeRouteIDs.CHATS,chat:this.NativeRouteIDs.CHAT_WELCOME,rooms:this.NativeRouteIDs.SPACES,calls:this.NativeRouteIDs.MEET}},_setupCompatibleRouteIDMap:function(){this._compatibleRouteIDMap={},this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX]="inbox/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL]="all/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SENT]="sent/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED]="starred/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS]="drafts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL]="label/:labelName/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH]="trash/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM]="spam/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT]="imp/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH]="search/:query/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD]=this.NativeRouteIDs.THREAD,this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS]="chats/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT]=this.NativeRouteIDs.CHAT,this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS]="contacts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT]=this.NativeRouteIDs.CONTACT,this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS]=this.NativeRouteIDs.SETTINGS}})},{"../../../../constants/router":492,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":324}],589:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=t(e("lodash/last")),c=t(e("lodash/once")),s=t(e("kefir")),o=t(e("kefir-stopper")),d=t(e("kefir-bus")),a=e("querystring"),p=t(e("asap")),f=e("ud"),b=t(e("../../../../lib/dom/make-element-child-stream")),_=t(e("../../../../lib/dom/make-element-view-stream")),y=t(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),g=t(e("../../../../lib/dom/get-insert-before-element")),m=t(e("../gmail-row-list-view")),w=t(e("../gmail-thread-view")),C=t(e("../gmail-collapsible-section-view")),I=t(e("../../gmail-element-getter")),S=e("../../../../lib/dom/simulate-mouse-event"),O=t(e("../../../../lib/dom/querySelectorOrFail")),A=(0,f.defn)(v,class{constructor(E,D,P){let{urlObject:j,type:k,routeID:M,cachedRouteData:R}=E;(0,n.default)(this,"_stopper",(0,o.default)()),(0,n.default)(this,"getParams",(0,c.default)(()=>{let V;if(this._customRouteID)V=this._getCustomParams();else{V=this._getNativeParams();let T=this.getRouteID();if(T){let U=this._extractParamKeysFromRouteID(T),W={};U.forEach(function(Q){V[Q]&&(W[Q]=V[Q])}),V=W}}return Object.freeze(V)})),(0,n.default)(this,"_getThreadContainerElement",(0,c.default)(()=>I.default.getThreadContainerElement())),this._type=k,this._hash=j.hash,this._name=j.name,this._paramsArray=j.params,this._customRouteID=M,this._cachedRouteData=R,this._stopper=(0,o.default)(),this._rowListViews=[],this._gmailRouteProcessor=D,this._driver=P,this._eventStream=(0,d.default)(),this._hasAddedCollapsibleSection=!1,this._type==="CUSTOM"?(this._setupCustomViewElement(),P.getStopper().takeUntilBy(this._stopper.delay(0)).onValue(()=>{P.showNativeRouteView(),window.location.hash="#inbox"})):(0,u.default)(["NATIVE","CUSTOM_LIST"],this._type)&&this._setupSubViews(),this._type==="CUSTOM_LIST"&&s.default.later(500).takeUntilBy(this._stopper).onValue(()=>{var V=P.getLastCustomThreadListActivity();(!V||V.customRouteID!==this._customRouteID||Date.now()-V.timestamp>5e3)&&this.refresh()})}destroy(){this._stopper.destroy(),this._eventStream.end(),this._customViewElement&&this._customViewElement.remove();var E=this._rowListViews;this._rowListViews=[],E.forEach(D=>{D.destroy()}),this._threadView&&(this._threadView.destroy(),this._threadView=null)}getHash(){return this._hash}getEventStream(){return this._eventStream}getStopper(){return this._stopper}getCustomViewElement(){return this._customViewElement}getRowListViews(){return this._rowListViews}getThreadView(){return this._threadView}getType(){return this._type==="OTHER_APP_CUSTOM"?"CUSTOM":this._type}isCustomRouteBelongingToApp(){return this._type==="CUSTOM"}addCollapsibleSection(E,D){return this._addCollapsibleSection(E,D,!0)}addSection(E,D){return this._addCollapsibleSection(E,D,!1)}_addCollapsibleSection(E,D,P){this._hasAddedCollapsibleSection=!0;var j=new C.default(this._driver,D,this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH,P),k=this._getSectionsContainer();return j.getEventStream().filter(function(M){return M.type==="update"&&M.property==="orderHint"}).onValue(function(){var M=k.children,R=(0,g.default)(j.getElement(),M,["data-group-order-hint","data-order-hint"]);R?k.insertBefore(j.getElement(),R):k.appendChild(j.getElement())}),j.setCollapsibleSectionDescriptorProperty(E),j}_setupCustomViewElement(){this._customViewElement=document.createElement("div"),this._customViewElement.classList.add("inboxsdk__custom_view_element"),this._monitorLeftNavHeight(),this._setCustomViewElementHeight()}_monitorLeftNavHeight(){var E=I.default.getLeftNavHeightElement();E&&(0,y.default)(E,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(()=>{this._setCustomViewElementHeight()})}_setCustomViewElementHeight(){let E=I.default.getLeftNavHeightElement(),D=I.default.getGtalkButtons(),P=this._customViewElement;if(!E||!P)throw new Error("Should not happen");P.style.height=`${parseInt(E.style.height,10)+(D?D.offsetHeight:0)}px`}_setupSubViews(){(0,p.default)(()=>{this._eventStream&&(this._setupRowListViews(),this._setupContentAndSidebarView(),this._setupScrollStream())})}_setupRowListViews(){var E=I.default.getRowListElements();Array.prototype.forEach.call(E,D=>{this._processRowListElement(D)})}_processRowListElement(E){var D=E.parentElement;if(!D)throw new Error("no rootElement");var P=new m.default(D,this,this._driver);this._rowListViews.push(P),this._eventStream.emit({eventName:"newGmailRowListView",view:P})}_setupContentAndSidebarView(){let E=this._getThreadContainerElement();if(E){var D=new w.default(E,this,this._driver);this._threadView=D,this._eventStream.emit({eventName:"newGmailThreadView",view:D})}else{let P=document.querySelector("div[role=main] .aia");P&&this._startMonitoringPreviewPaneForThread(P)}}_setupScrollStream(){let E=I.default.getScrollContainer(),{scrollTop:D}=this._cachedRouteData;E&&this._hasAddedCollapsibleSection&&(D&&(E.scrollTop=D),s.default.fromEvents(E,"scroll").throttle(100).map(P=>P.target.scrollTop).takeUntilBy(this._stopper).onValue(P=>{this._cachedRouteData.scrollTop=P}))}_startMonitoringPreviewPaneForThread(E){let D=(0,O.default)(E,"table.Bs > tr"),P=(0,b.default)(D).filter(j=>!!j.el.querySelector(".if")||!!j.el.querySelector(".PeIF1d")||!!j.el.querySelector(".a98.iY"));this._eventStream.plug(P.flatMap((0,_.default)(j=>new w.default(j,this,this._driver,!0))).map(j=>(this._threadView=j,{eventName:"newGmailThreadView",view:j})))}_getSectionsContainer(){let E=document.querySelector("div[role='main']");if(!E)throw new Error("should not happen");let D=E.querySelector(".inboxsdk__custom_sections");return D?D.classList.contains("Wc")&&!this._isSearchRoute()&&D.classList.remove("Wc"):(D=this._sectionsContainer=document.createElement("div"),D.classList.add("inboxsdk__custom_sections"),E.insertBefore(D,E.firstChild)),D}_getCustomParams(){var E=Object.create(null);if(!this._customRouteID)throw new Error("Should not happen, can't get custom params for non-custom view");return this._customRouteID.split("/").slice(1).forEach((D,P)=>{D[0]===":"&&(D=D.substring(1),this._paramsArray[P]&&(E[D]=this._paramsArray[P]))}),E}_getNativeParams(){return this._isSearchRoute()?this._getSearchRouteParams():this._isListRoute()?this._getListRouteParams():this._isThreadRoute()?this._getThreadRouteParams():this._isSettingsRoute()?this._getSettingsRouteParams():{}}_isSearchRoute(){return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH}getRouteType(){return(0,u.default)(["CUSTOM","OTHER_APP_CUSTOM"],this._type)?this._gmailRouteProcessor.RouteTypes.CUSTOM:this._isListRoute()?this._gmailRouteProcessor.RouteTypes.LIST:this._isThreadRoute()?this._gmailRouteProcessor.RouteTypes.THREAD:this._isSettingsRoute()?this._gmailRouteProcessor.RouteTypes.SETTINGS:this._gmailRouteProcessor.RouteTypes.UNKNOWN}_isThreadRoute(){return!!this._getThreadContainerElement()}_isListRoute(){var E=I.default.getRowListElements();return(this._type==="CUSTOM_LIST"||this._gmailRouteProcessor.isListRouteName(this._name))&&E&&E.length>0}_isSettingsRoute(){return this._gmailRouteProcessor.isSettingsRouteName(this._name)}_getSearchRouteParams(){return{query:this._paramsArray[0],includesDriveResults:this._name==="apps",page:this._getPageParam()}}_getListRouteParams(){var E={page:this._getPageParam()};return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.LABEL&&this._paramsArray[0]&&(E.labelName=this._paramsArray[0]),E}_getThreadRouteParams(){if(this._paramsArray&&this._paramsArray.length>0){let P=(0,r.default)(this._paramsArray);if(P&&(P.length===16||P[0]==="#"))return{threadID:P.replace("#","")}}let E=this._getThreadContainerElement(),D;if(E)try{D=this._driver.getPageCommunicator().getCurrentThreadID(E)}catch{}return D||(D=(0,a.parse)(document.location.search,null,null).th||""),{threadID:D}}_getSettingsRouteParams(){return{tabName:this._paramsArray[0]}}_getPageParam(){for(var E=1;E<this._paramsArray.length;E++)if(this._paramsArray[E].match(/p\d+/))return parseInt(this._paramsArray[E].replace(/[a-zA-Z]/,""),10);return 1}getRouteID(){return this._customRouteID?this._customRouteID:this._isThreadRoute()?this._gmailRouteProcessor.NativeRouteIDs.THREAD:this._gmailRouteProcessor.getRouteID(this._name)}refresh(){var E=I.default.getToolbarElement().querySelector("div.T-I.nu");if(E){var D=document.activeElement,P=E.className;(0,S.simulateClick)(E),E.className=P,D?D.focus():E.blur()}}setFullWidth(E){}_extractParamKeysFromRouteID(E){return E.split("/").filter(D=>D[0]===":").map(D=>D.substring(1))}});i.default=A},{"../../../../lib/dom/get-insert-before-element":692,"../../../../lib/dom/make-element-child-stream":697,"../../../../lib/dom/make-element-view-stream":699,"../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../lib/dom/querySelectorOrFail":706,"../../../../lib/dom/simulate-mouse-event":712,"../../gmail-element-getter":532,"../gmail-collapsible-section-view":553,"../gmail-row-list-view":590,"../gmail-thread-view":595,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/includes":324,"lodash/last":342,"lodash/once":347,querystring:410,ud:455}],590:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("lodash/find")),c=t(e("lodash/zip")),s=(t(e("asap")),t(e("assert"))),o=t(e("kefir")),d=t(e("kefir-bus")),a=(t(e("../../../../common/get-or-fail")),t(e("../../../lib/delay-asap"))),p=t(e("../../../lib/dom/querySelectorOrFail")),f=t(e("./gmail-toolbar-view")),b=t(e("./gmail-thread-row-view")),_=(t(e("../../../lib/stream-wait-for")),t(e("../../../lib/dom/make-element-child-stream")));t(e("../../../lib/dom/make-element-view-stream"));let y=/\bx7\b/;var g=(0,u.defn)(v,class{constructor(m,w,C){(0,n.default)(this,"_threadRowViewDrivers",new Set),(0,n.default)(this,"_elementsToViews",new Map),(0,n.default)(this,"_selectedThreadRowViews",new Set),(0,n.default)(this,"_batchedSignalThreadRowViewSelectionChangeScheduled",!1),this._eventStreamBus=(0,d.default)(),this._stopper=this._eventStreamBus.ignoreValues().beforeEnd(()=>null),this._gmailDriver=C,this._element=m,this._routeViewDriver=w,this._selectionMutationObserver=new MutationObserver(I=>{let S=!1;for(let O=0,A=I.length;O<A;O++){let E=I[O],D=E.target,P=y.test(E.oldValue),j=y.test(D.className);if(P!==j){let k=this._elementsToViews.get(D);k&&(S=!0,j?this._selectedThreadRowViews.add(k):this._selectedThreadRowViews.delete(k))}}S&&this._gmailDriver.signalThreadRowViewSelectionChange()}),this._pendingExpansions=new Map,this._pendingExpansionsSignal=(0,d.default)(),this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(a.default)).filter(I=>I.length>0).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this)),this._setupToolbarView(),this._startWatchingForRowViews()}destroy(){this._selectionMutationObserver.disconnect(),this._threadRowViewDrivers.forEach(m=>m.destroy()),this._eventStreamBus.end(),this._toolbarView&&this._toolbarView.destroy(),this._selectedThreadRowViews.size&&(this._selectedThreadRowViews.clear(),this._gmailDriver.signalThreadRowViewSelectionChange())}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getToolbarView(){return this._toolbarView}getSelectedThreadRowViewDrivers(){return this._selectedThreadRowViews}getThreadRowViewDrivers(){return this._threadRowViewDrivers}getRowViewDriverStream(){return this._rowViewDriverStream}getEventStream(){return this._eventStreamBus}_setupToolbarView(){var m=this._findToolbarElement();this._toolbarView=m?new f.default(m,this._gmailDriver,this._routeViewDriver,this):null}_findToolbarElement(){let m=this._element.querySelector("[gh=mtb]");if(m)return m;let w=(0,r.default)(document.querySelectorAll("[gh=tm]"),C=>C.parentElement.parentElement===this._element.parentElement.parentElement.parentElement.parentElement.parentElement||C.parentElement.parentElement===this._element.parentElement);return w?w.querySelector("[gh=mtb]"):null}_fixColumnWidths(m){if(!m||!m.parentElement)return;let w=m.parentElement.firstElementChild;if(w!==m&&w){let C=w.querySelectorAll("table.cf > colgroup > col"),I=m.querySelectorAll("table.cf > colgroup > col");s.default.strictEqual(C.length,I.length),(0,c.default)(C,I).forEach(S=>{let[O,A]=S;A.style.width=O.style.width})}}expandColumn(m,w){let C=this._pendingExpansions.get(m);(!C||w>C)&&(this._pendingExpansions.set(m,w),this._pendingExpansionsSignal.emit())}_expandColumnJob(){this._pendingExpansions.forEach((m,w)=>{Array.prototype.forEach.call(this._element.querySelectorAll("table.cf > colgroup > "+w),C=>{let I=parseInt(C.style.width,10);(isNaN(I)||I<m)&&(C.style.width=m+"px")})}),this._pendingExpansions.clear()}_batchedSignalThreadRowViewSelectionChange(){this._batchedSignalThreadRowViewSelectionChangeScheduled||(this._batchedSignalThreadRowViewSelectionChangeScheduled=!0,(0,a.default)(null).takeUntilBy(this._stopper).onValue(()=>{this._batchedSignalThreadRowViewSelectionChangeScheduled=!1,this._gmailDriver.signalThreadRowViewSelectionChange()}))}_startWatchingForRowViews(){let m=Array.from(this._element.querySelectorAll("div.Cp")),w=o.default.merge(m.map(_.default)).flatMap(I=>{this._fixColumnWidths(I.el);let S=(0,p.default)(I.el,"table > tbody");return(0,_.default)(S).takeUntilBy(I.removalStream).filter(O=>O.el.id)}),C=o.default.later(2);this._rowViewDriverStream=w.map(I=>{let S=I.el;this._selectionMutationObserver.observe(S,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0});let O=new b.default(S,this,this._gmailDriver);return this._elementsToViews.set(S,O),S.classList.contains("x7")&&(this._selectedThreadRowViews.add(O),this._batchedSignalThreadRowViewSelectionChange()),I.removalStream.take(1).onValue(()=>{this._selectedThreadRowViews.has(O)&&(this._selectedThreadRowViews.delete(O),this._batchedSignalThreadRowViewSelectionChange()),this._elementsToViews.delete(S),O.destroy()}),O}).flatMap(I=>I.getAlreadyHadModifications()?C.flatMap(()=>I.waitForReady()).takeUntilBy(I.getStopper()):I.waitForReady().takeUntilBy(I.getStopper())).takeUntilBy(this._stopper),this._rowViewDriverStream.onValue(I=>this._addThreadRowView(I))}_addThreadRowView(m){this._threadRowViewDrivers.add(m),m.getStopper().takeUntilBy(this._stopper).onValue(()=>{this._threadRowViewDrivers.delete(m)})}});i.default=g},{"../../../../common/get-or-fail":476,"../../../lib/delay-asap":688,"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-element-view-stream":699,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/stream-wait-for":739,"./gmail-thread-row-view":592,"./gmail-toolbar-view":597,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,assert:33,kefir:158,"kefir-bus":155,"lodash/find":315,"lodash/zip":363,ud:455}],591:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir-stopper"));i.default=class{constructor(r,c){(0,n.default)(this,"_stopper",(0,u.default)()),(0,n.default)(this,"_insertElementContainer",null),this._driver=r,this._setup(c)}destroy(){this._stopper.destroy(),this._insertElementContainer&&(this._insertElementContainer.remove(),this._insertElementContainer=null)}_setup(r){let c=this._driver.getTagTree().getAllByTag("supportMenu").subscribe(s=>{s.forEach(o=>{o.type==="add"?this._addSupportElement(o.value.getValue(),r):o.type==="remove"&&this._insertElementContainer&&(this._insertElementContainer.remove(),this._insertElementContainer=null)})});this._stopper.onValue(()=>c.unsubscribe())}_addSupportElement(r,c){let s=document.createElement("div"),o=r.children.item(0).attributes;for(let a of o)if(a.name!=="aria-label")if(a.name!=="class")s.setAttribute(a.name,a.value);else{let p=`${a.value} inboxsdk__support_menuItem`;s.setAttribute(a.name,p)}s.append(c.element);let d=null;for(let a of r.children)a.getAttribute("role")==="separator"&&(d=a);d?d.insertAdjacentElement("beforebegin",s):r.append(s),s.onclick=a=>{a.preventDefault(),a.stopPropagation(),c.onClick(),this._closeSupportMenu(r)},s.onkeypress=a=>{a.key==="Enter"&&(c.onClick(),this._closeSupportMenu(r))}}_closeSupportMenu(r){if(r.getAttribute("aria-hidden")!="true"){let c=r.previousElementSibling;c&&c.click()}}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":157}],592:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.removeAllThreadRowUnclaimedModifications=function(){setTimeout(()=>{let R=document.querySelectorAll("tr[data-inboxsdk-thread-row]");Array.prototype.forEach.call(R,V=>{let T=D.get(V);T&&M(T)})},15)};var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/once")),r=t(e("lodash/flatten")),c=t(e("lodash/includes")),s=t(e("lodash/intersection")),o=t(e("lodash/uniqBy")),d=t(e("lodash/flatMap")),a=e("ud"),p=t(e("assert")),f=t(e("kefir")),b=t(e("asap")),_=(t(e("kefir-bus")),t(e("../../../lib/dom/querySelectorOrFail"))),y=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),g=t(e("../../../lib/dom/insert-element-in-order")),m=t(e("kefir-cast")),w=t(e("../../../lib/delay-asap")),C=t(e("kefir-stopper")),I=t(e("../widgets/gmail-dropdown-view")),S=t(e("../../../widgets/buttons/dropdown-view")),O=t(e("../widgets/gmail-label-view")),A=t(e("../widgets/gmail-action-button-view")),E=t(e("../../../driver-common/update-icon"));let D=(0,a.defonce)(v,()=>new WeakMap);function P(R){this.focus(),R.stopImmediatePropagation()}function j(R){let V=this.firstElementChild.contains(R.target),T=!V&&this!==R.target;if(!V&&(R.stopImmediatePropagation(),!T||R.type=="mouseover")){let U=document.createEvent("MouseEvents");U.initMouseEvent(R.type,R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,R.clientX,R.clientY,R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget),this.parentElement.dispatchEvent(U)}}var k=(0,a.defn)(v,class{constructor(R,V,T){if((0,n.default)(this,"_stopper",(0,C.default)()),(0,n.default)(this,"_isDestroyed",!1),(0,p.default)(R.hasAttribute("id"),"check element is main thread row"),this._isVertical=(0,s.default)(Array.from(R.classList),["zA","apv"]).length===2,this._isVertical){let W=R.nextElementSibling;if(!W)throw new Error("threadRow2 not found");let Q=W.nextElementSibling,X=Q&&Q.classList.contains("apw");this._elements=X?[R,R.nextElementSibling,R.nextElementSibling.nextElementSibling]:[R,R.nextElementSibling]}else this._elements=[R];let U=D.get(this._elements[0]);U?(this._modifications=U,this._alreadyHadModifications=!0):(this._alreadyHadModifications=!1,this._modifications={label:{unclaimed:[],claimed:[]},action:{unclaimed:[],claimed:[]},button:{unclaimed:[],claimed:[]},image:{unclaimed:[],claimed:[]},replacedDate:{unclaimed:[],claimed:[]},replacedDraftLabel:{unclaimed:[],claimed:[]}},D.set(this._elements[0],this._modifications)),this._rowListViewDriver=V,this._driver=T,this._userView=null,this._cachedThreadID=null,this._refresher=null,this._subjectRefresher=null,this._imageRefresher=null,this._counts=null,this._elements[0].setAttribute("data-inboxsdk-thread-row","true")}destroy(){this._elements.length&&(this._isDestroyed=!0,this._modifications.label.unclaimed=this._modifications.label.claimed.concat(this._modifications.label.unclaimed),this._modifications.label.claimed.length=0,this._modifications.action.unclaimed=this._modifications.action.claimed.concat(this._modifications.action.unclaimed),this._modifications.action.claimed.length=0,this._modifications.button.unclaimed=this._modifications.button.claimed.concat(this._modifications.button.unclaimed),this._modifications.button.claimed.length=0,this._modifications.image.unclaimed=this._modifications.image.claimed.concat(this._modifications.image.unclaimed),this._modifications.image.claimed.length=0,this._modifications.replacedDate.unclaimed=this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed),this._modifications.replacedDate.claimed.length=0,this._modifications.replacedDraftLabel.unclaimed=this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed),this._modifications.replacedDraftLabel.claimed.length=0,(0,d.default)(this._elements,R=>Array.from(R.getElementsByClassName("inboxsdk__thread_row_addition"))).forEach(R=>{R.remove()}),this._stopper.destroy(),this._elements.length=0)}getElement(){return this._elements[0]}_removeUnclaimedModifications(){M(this._modifications)}getAlreadyHadModifications(){return this._alreadyHadModifications}waitForReady(){let R=[0,10,100,1e3,15e3],V=()=>{if(this._threadIdReady())return(0,b.default)(()=>{this._elements.length&&this._removeUnclaimedModifications()}),f.default.constant(this);{let T=R.shift();return T==null?f.default.never():f.default.later(T).flatMap(V)}};return V()}setUserView(R){this._userView=R}getCounts(){let R=this._counts;if(!R){let V=(0,_.default)(this._elements[0],"td div.yW");if(this._driver.isUsingSyncAPI()){let T=V.querySelectorAll(".boq").length,U=V.querySelector(".bx0"),W=U&&U.innerHTML?+U.innerHTML:T?0:1;R=this._counts={messageCount:W,draftCount:T}}else{let[T,U]=V.innerHTML.split(/<font color=[^>]+>[^>]+<\/font>/),W=T.replace(/<span\b[^>]*>.*?<\/span>/g,"").match(/\((\d+)\)/),Q=W?+W[1]:T?1:0,X=U&&U.match(/\((\d+)\)/),oe=X?+X[1]:U!=null?1:0;R=this._counts={messageCount:Q,draftCount:oe}}}return R}_expandColumn(R,V){this._rowListViewDriver.expandColumn(R,V)}addLabel(R){if(!this._elements.length)return;let V=(0,m.default)(f.default,R).takeUntilBy(this._stopper).toProperty(),T=null;V.combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(U=>{let[W]=U;if(W){if(!T){if(T=this._modifications.label.unclaimed.shift(),!T){let X=new O.default({classes:["inboxsdk__thread_row_label"]}),oe=X.getElement();T={gmailLabelView:X,remove:oe.remove.bind(oe)}}this._modifications.label.claimed.push(T)}T.gmailLabelView.updateLabelDescriptor(W);let Q=this._getLabelParent();Q!==T.gmailLabelView.getElement().parentElement&&Q.insertAdjacentElement("afterbegin",T.gmailLabelView.getElement())}else T&&(T.remove(),this._modifications.label.claimed.splice(this._modifications.label.claimed.indexOf(T),1),T=null)})}addImage(R){if(!this._elements.length)return;let V=(0,m.default)(f.default,R).toProperty().combine(f.default.merge([this._getRefresher(),this._getSubjectRefresher(),this._getImageContainerRefresher()])).takeUntilBy(this._stopper),T=null;V.onValue(U=>{let[W]=U;if(W){T||(T=this._modifications.image.unclaimed.shift(),T||(T={iconSettings:{},iconWrapper:document.createElement("div"),remove(){this.iconWrapper.remove()}},T.iconWrapper.className="inboxsdk__thread_row_icon_wrapper"),this._modifications.image.claimed.push(T));let{iconSettings:Q,iconWrapper:X}=T;(0,E.default)(Q,X,!1,W.imageClass,W.imageUrl),(this._elements.length===3?this._elements[2]:this._elements[0]).classList.add("inboxsdk__thread_row_image_added"),W.tooltip?X.setAttribute("data-tooltip",W.tooltip):X.removeAttribute("data-tooltip");let oe=this._getLabelParent();oe.contains(X)||(0,_.default)(oe,".y6").insertAdjacentElement("beforebegin",X)}else T&&(T.remove(),this._modifications.image.claimed.splice(this._modifications.image.claimed.indexOf(T),1),T=null)})}addButton(R){if(!this._elements.length||this._elements.length!=1)return;let V=null,T=null,U=(0,m.default)(f.default,R).toProperty().takeUntilBy(this._stopper);U.merge(this._stopper).onValue(W=>{W||V&&(V.close(),V=null)}),this._stopper.onValue(()=>{T&&T.buttonSpan&&(T.buttonSpan.onclick=null)}),U.combine(this._getRefresher()).onValue(W=>{let[Q]=W,X=Q;if(X){let oe,J;X.className&&(X.iconClass=X.className,delete X.className);let he=this._elements[0].querySelector("ul[role=toolbar]");T||(T=this._modifications.button.unclaimed.shift(),T||(he?(oe=document.createElement("li"),oe.classList.add("bqX")):(oe=document.createElement("span"),oe.classList.add("T-KT")),oe.classList.add("inboxsdk__thread_row_button"),X.title?oe.setAttribute("title",X.title):oe.removeAttribute("title"),oe.setAttribute("tabindex","-1"),oe.setAttribute("data-order-hint",String(X.orderHint||0)),oe.addEventListener("onmousedown",P),J={},T={buttonSpan:oe,iconSettings:J,remove:oe.remove.bind(oe)}),this._modifications.button.claimed.push(T));let ae=he?null:(0,_.default)(this._elements[0],"td.apU.xY, td.aqM.xY");oe=T.buttonSpan,J=T.iconSettings,X.onClick&&(oe.onclick=ue=>{let ge={dropdown:null,threadRowView:this._userView};if(X.hasDropdown){if(V)return this._elements[0].classList.remove("inboxsdk__dropdown_active"),this._elements[0].classList.remove("buL"),V.close(),void(V=null);{this._elements[0].classList.add("inboxsdk__dropdown_active"),this._elements[0].classList.add("buL"),ge.dropdown=V=new S.default(new I.default,oe,null),V.setPlacementOptions({position:"bottom",hAlign:"left",vAlign:"top"});let N=this._elements[0];V.on("destroy",()=>{setTimeout(()=>{N.classList.remove("inboxsdk__dropdown_active"),N.classList.remove("buL"),V=null},1)})}}X.onClick.call(null,ge)}),(0,E.default)(J,oe,!1,X.iconClass,X.iconUrl),he&&oe.parentElement!==he?(0,g.default)(he,oe,void 0,!0):ae&&oe.parentElement!==ae&&((0,g.default)(ae,oe),this._expandColumn("col.y5",26*ae.children.length),ae.onmouseover=ae.onclick=j)}else T&&(T.remove(),this._modifications.button.claimed.splice(this._modifications.button.claimed.indexOf(T),1),T=null)})}addActionButton(R){if(this._elements.length!==1)return;let V=(0,m.default)(f.default,R).takeUntilBy(this._stopper).toProperty(),T=null;this._stopper.onEnd(()=>{T&&T.gmailActionButtonView.setOnClick(null)}),V.takeUntilBy(this._stopper).onValue(U=>{if(!(U&&U.type!=="LINK"))if(U){if(!T){if(T=this._modifications.action.unclaimed.shift(),!T){let oe=new A.default,J=oe.getElement();T={gmailActionButtonView:oe,remove:J.remove.bind(J)}}this._modifications.action.claimed.push(T)}T.gmailActionButtonView.updateDescriptor(U);let{url:W,onClick:Q}=U;T.gmailActionButtonView.setOnClick(oe=>{oe.stopPropagation(),window.open(W,"_blank"),Q&&Q.call(null,{})});let X=this._elements[0].querySelector("td.a4W .a4X .aKS")||this._elements[0].querySelector("td.a4W div.xS");if(!X)throw new Error("Failed to find actionParentDiv");(0,c.default)(X.children,T.gmailActionButtonView.getElement())||X.insertBefore(T.gmailActionButtonView.getElement(),X.firstChild)}else T&&(T.remove(),this._modifications.action.claimed.splice(this._modifications.action.claimed.indexOf(T),1),T=null)})}addAttachmentIcon(R){if(!this._elements.length)return;let V=(0,u.default)(()=>{let Q=document.createElement("img");return Q.src="images/cleardot.gif",Q}),T=(0,u.default)(()=>document.createElement("div"));var U,W=!1;(0,m.default)(f.default,R).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(Q=>{let[X]=Q,oe=(0,_.default)(this._elements[0],"td.yf.xY");if(X){let J=X.iconHtml!=null?T():V();X.tooltip?J.setAttribute("data-tooltip",X.tooltip):J.removeAttribute("data-tooltip"),J.className=X.iconHtml!=null?"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper "+(X.iconClass||""):"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon "+(X.iconClass||""),X.iconHtml!=null?(oe.contains(V())&&V().remove(),J.innerHTML=X.iconHtml):U!=X.iconUrl&&(oe.contains(T())&&T().remove(),J.style.background=X.iconUrl?"url("+X.iconUrl+") no-repeat 0 0":"",U=X.iconUrl),oe.contains(J)||(oe.appendChild(J),W=!0,this._expandColumn("col.yg",16*oe.children.length),this._elements.length>1&&this._fixDateColumnWidth()),oe.classList.add("inboxsdk__thread_row_attachment_icons_present")}else W&&(T().remove(),V().remove(),W=!1,oe.querySelector(".inboxsdk__thread_row_attachment_icon")||oe.classList.remove("inboxsdk__thread_row_attachment_icons_present"))})}_fixDateColumnWidth(){(0,b.default)(()=>{if(!this._elements.length)return;let R=this._elements[0].querySelector("td.xW, td.yf > div.apm");if(!R)return;let V=R.querySelector(".inboxsdk__thread_row_custom_date")||R.firstElementChild;if(!(V&&V instanceof HTMLElement))return;let T=this._elements[0].querySelectorAll("td.yf > img").length;this._expandColumn("col.xX",V.offsetWidth+8+2+20+16*T)})}replaceDraftLabel(R){if(!this._elements.length)return;let V,T,U;(0,m.default)(f.default,R).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(W=>{let[Q]=W,X=(0,_.default)(this._elements[0],"td > div.yW"),oe=X.parentElement;if(!oe)throw new Error("Should not happen");if(Q){Q=Object.assign({count:1},Q),V||(V=this._modifications.replacedDraftLabel.unclaimed.shift(),V||(V={el:Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_label"}),remove(){this.el.remove()}}),this._modifications.replacedDraftLabel.claimed.push(V));let J=!(0,c.default)(oe.children,V.el);if(J||!T){V.el.innerHTML=X.innerHTML;let he=Array.from(V.el.querySelectorAll(".boq"));if(he.length>0)he.forEach(ae=>ae.remove()),T=Object.assign(document.createElement("span"),{className:"boq"}),V.el.appendChild(T);else{if(T=V.el.querySelector("font"),!T)return;let ae=T.nextElementSibling;ae&&ae.remove()}T.classList.add("inboxsdk__thread_row_custom_draft_part"),U=Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_count"}),V.el.appendChild(U)}T.textContent=Q.text,U.textContent=Q.count!==1?` (${Q.count})`:"",J&&oe.insertBefore(V.el,X)}else V&&(V.remove(),this._modifications.replacedDraftLabel.claimed.splice(this._modifications.replacedDraftLabel.claimed.indexOf(V),1),V=null)})}replaceDate(R){if(!this._elements.length)return;let V;(0,m.default)(f.default,R).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(T=>{let[U]=T,W=(0,_.default)(this._elements[0],"td.xW, td.yf > div.apm");W.firstElementChild,U?(V||(V=this._modifications.replacedDate.unclaimed.shift(),V||(V={el:Object.assign(document.createElement("span"),{className:"inboxsdk__thread_row_custom_date"}),remove(){this.el.remove(),W.classList.remove("inboxsdk__thread_row_custom_date_container")}}),this._modifications.replacedDate.claimed.push(V)),V.el.textContent=U.text,U.tooltip?(V.el.setAttribute("data-tooltip",U.tooltip),V.el.setAttribute("aria-label",U.tooltip)):(V.el.removeAttribute("data-tooltip"),V.el.removeAttribute("aria-label")),V.el.style.color=U.textColor||"",(0,c.default)(W.children,V.el)||(W.insertBefore(V.el,W.firstChild),W.classList.add("inboxsdk__thread_row_custom_date_container")),this._fixDateColumnWidth()):V&&(V.remove(),this._modifications.replacedDate.claimed.splice(this._modifications.replacedDate.claimed.indexOf(V),1),V=null)})}getEventStream(){return this._stopper}getStopper(){return this._stopper}getSubject(){return this._elements.length>1?(0,_.default)(this._elements[1],"div.xS div.xT div.y6 > span[id]").textContent:(0,_.default)(this._elements[0],"td.a4W div.xS div.xT div.y6 > span[id]").textContent}getDateString(){return(0,_.default)(this._elements[0],"td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title}_threadIdReady(){return!!this._getThreadID()}_getThreadID(){if(this._cachedThreadID)return this._cachedThreadID;if(this._driver.isUsingSyncAPI()){let R=(0,r.default)(this._elements.map(V=>Array.from(V.querySelectorAll("[data-thread-id][data-legacy-thread-id]")))).filter(Boolean)[0];if(R)return this._cachedSyncThreadID=R.getAttribute("data-thread-id").replace("#",""),this._cachedThreadID=R.getAttribute("data-legacy-thread-id").replace("#",""),this._cachedThreadID;{let V=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);this._cachedSyncThreadID=V,V&&this._driver.getOldGmailThreadIdFromSyncThreadId(V).then(T=>{this._cachedThreadID=T})}}else this._cachedThreadID=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);return this._cachedThreadID}getThreadID(){let R=this._getThreadID();if(!R)throw new Error("Should not happen: thread id was null");return R}getSyncThreadID(){return Promise.resolve(this._cachedSyncThreadID)}async getThreadIDAsync(){return this.getThreadID()}getDraftID(){if(this._cachedSyncDraftIDPromise)return this._cachedSyncDraftIDPromise;if(this._driver.isUsingSyncAPI()){let R=(0,r.default)(this._elements.map(V=>Array.from(V.querySelectorAll("[data-standalone-draft-id]")))).filter(Boolean)[0];this._cachedSyncDraftIDPromise=Promise.resolve(R?R.getAttribute("data-standalone-draft-id").replace("#msg-a:",""):null)}else this._cachedSyncDraftIDPromise=this._driver.getThreadRowIdentifier().getDraftIdForThreadRow(this);return this._cachedSyncDraftIDPromise}getVisibleDraftCount(){return this.getCounts().draftCount}getVisibleMessageCount(){return this.getCounts().messageCount}getContacts(){let R=this._elements[0].querySelectorAll("[email]"),V=Array.from(R).map(T=>({emailAddress:T.getAttribute("email"),name:T.getAttribute("name")}));return(0,o.default)(V,T=>T.emailAddress)}isSelected(){return!!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]")}_getLabelParent(){return this._elements.length>1?(0,_.default)(this._elements[this._elements.length===2?0:2],"div.apu"):(0,_.default)(this._elements[0],"td.a4W div.xS div.xT")}_getWatchElement(){return this._elements.length===1?this._elements[0]:this._elements[0].children[2]}_getRefresher(){let R=this._refresher;return R||(R=this._refresher=(0,y.default)(this._getWatchElement(),{childList:!0}).map(()=>null).takeUntilBy(this._stopper).toProperty(()=>null)),R}_getSubjectRefresher(){let R=this._subjectRefresher;if(!R)if(this._isVertical)R=this._subjectRefresher=f.default.constant(null);else{let V=this._getWatchElement(),T=(0,_.default)(V,".y6");R=this._subjectRefresher=(0,y.default)(T,{childList:!0}).map(()=>null).takeUntilBy(this._stopper).toProperty(()=>null)}return R}_getImageContainerRefresher(){let R=this._imageRefresher;if(!R)if(this._isVertical){let V=this._elements.length===3?this._elements[2]:this._elements[0],T=(0,y.default)(V,{attributes:!0,attributeFilter:["class"]});R=this._imageRefresher=T.bufferBy(T.flatMapLatest(()=>(0,w.default)())).filter(()=>V.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length>0&&!V.classList.contains("inboxsdk__thread_row_image_added")).map(()=>null).takeUntilBy(this._stopper).toProperty(()=>null)}else R=this._imageRefresher=f.default.constant(null);return R}});function M(R){for(let V=0;V<R.label.unclaimed.length;V++)R.label.unclaimed[V].remove();R.label.unclaimed.length=0;for(let V=0;V<R.button.unclaimed.length;V++)R.button.unclaimed[V].remove();R.button.unclaimed.length=0;for(let V=0;V<R.image.unclaimed.length;V++)R.image.unclaimed[V].remove();R.image.unclaimed.length=0;for(let V=0;V<R.replacedDate.unclaimed.length;V++)R.replacedDate.unclaimed[V].remove();R.replacedDate.unclaimed.length=0;for(let V=0;V<R.replacedDraftLabel.unclaimed.length;V++)R.replacedDraftLabel.unclaimed[V].remove();R.replacedDraftLabel.unclaimed.length=0}i.default=k},{"../../../driver-common/update-icon":680,"../../../lib/delay-asap":688,"../../../lib/dom/insert-element-in-order":694,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/dropdown-view":782,"../widgets/gmail-action-button-view":607,"../widgets/gmail-dropdown-view":608,"../widgets/gmail-label-view":609,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,assert:33,kefir:158,"kefir-bus":155,"kefir-cast":156,"kefir-stopper":157,"lodash/flatMap":318,"lodash/flatten":319,"lodash/includes":324,"lodash/intersection":325,"lodash/once":347,"lodash/uniqBy":360,ud:455}],593:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=n(e("lodash/findIndex")),c=n(e("asap")),s=e("ud"),o=n(e("auto-html")),d=n(e("kefir")),a=n(e("kefir-stopper")),p=n(e("kefir-bus")),f=n(e("react")),b=n(e("react-dom")),_=n(e("../../../../common/find-parent")),y=(n(e("../../../lib/delay-asap")),n(e("../../../lib/from-event-target-capture")),n(e("order-manager"))),g=n(e("../../../lib/idMap")),m=n(e("../../../lib/incrementName")),w=n(e("../../../lib/dom/querySelectorOrFail")),C=n(e("../../../lib/dom/make-mutation-observer-chunked-stream")),I=n(e("../../../lib/dom/make-element-child-stream")),S=e("../../../lib/dom/simulate-mouse-event"),O=n(e("../../../lib/fake-window-resize")),A=n(e("../../../driver-common/sidebar/AppSidebar")),E=n(e("../../../driver-common/sidebar/ContentPanelViewDriver")),D=n(e("../gmail-element-getter")),P=n(e("./gmail-thread-sidebar-view/add-icon-area")),j=n(e("./gmail-app-sidebar-view/primary/add-to-icon-area"));let k=".J-KU-Jz",M=".J-KU-KO";var R=(0,s.defn)(v,class{constructor(V,T,U,W){(0,u.default)(this,"_stopper",(0,a.default)()),this._driver=V;let Q=U||T;if(!Q)throw new Error("should not happen");let X=Q.getAttribute("data-sdk-sidebar-instance-id");X!=null?this._instanceId=X:this._createElement(T,U,W)}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}_getShouldAppSidebarOpen(){return t.localStorage.getItem("inboxsdk__app_sidebar_should_open")!=="false"}_setShouldAppSidebarOpen(V){try{t.localStorage.setItem("inboxsdk__app_sidebar_should_open",String(V))}catch{}}_createElement(V,T,U){let W,Q,X;this._instanceId=`${Date.now()}-${Math.random()}`;{let pe=T||V;if(!pe)throw new Error("should not happen");pe.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._stopper.onValue(()=>{pe.removeAttribute("data-sdk-sidebar-instance-id")})}let oe=document.createElement("div");oe.className=(0,g.default)("app_sidebar_container");let J=new Map,he,ae=!1,ue=!1,ge=(0,p.default)();if(this._stopper.onEnd(()=>{ge.end()}),T){let pe=D.default.getMainContentBodyContainerElement();if(pe){if(he=pe.parentElement,!he)throw new Error("should not happen");he.classList.add("container_app_sidebar_in_use"),(0,w.default)(T,k).insertAdjacentElement("beforebegin",oe),T.classList.add("app_sidebar_visible"),T.classList.add((0,g.default)("app_sidebar_in_use")),he.classList.add("container_app_sidebar_visible"),oe.textContent="x";let Te=oe.getBoundingClientRect();oe.textContent="",T.classList.remove("app_sidebar_visible"),he.classList.remove("container_app_sidebar_visible");let $e=window.innerWidth>=1024&&window.innerHeight>=600;!t._APP_SIDEBAR_TEST&&(Te.width==0||Te.height==0||$e&&Math.floor(Te.right)>Math.floor(window.innerWidth))?this._driver.getLogger().error(new Error("SDK sidebar inserted into add-ons sidebar was not visible"),{rect:{top:Te.top,bottom:Te.bottom,left:Te.left,right:Te.right,width:Te.width,height:Te.height},window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight}}):ue=!0,ue||(he&&he.classList.remove("container_app_sidebar_in_use"),T.classList.remove((0,g.default)("app_sidebar_in_use")))}}let N=ue?T:null,F=ue?T:V;if(!F)throw new Error("should not happen");if(ue||(F.insertBefore(oe,F.firstElementChild),F.classList.add((0,g.default)("app_sidebar_in_use"))),!document.body.querySelector("."+(0,g.default)("app_sidebar_waiting_platform"))){let pe=document.createElement("div");pe.className=(0,g.default)("app_sidebar_waiting_platform"),document.body.appendChild(pe)}if(N)W=()=>oe,oe.classList.add("addon_sidebar");else{let pe=(0,_.default)(F,Te=>window.getComputedStyle(Te).overflowY!=="visible");W=pe?()=>pe:void 0}let K=new Set,H=new y.default({get(){try{return JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch{}},set(pe){try{t.localStorage.setItem("inboxsdk__sidebar_ordering",JSON.stringify(pe))}catch{}}});ge.bufferWithTimeOrCount(150,100).filter(pe=>pe.length>0).takeUntilBy(this._stopper).onValue(()=>{let pe=oe.getBoundingClientRect(),Te=pe.top+oe.scrollTop,$e=Te+pe.height,He=Array.from(oe.querySelectorAll(`.${(0,g.default)("app_sidebar_content_panel")}.${(0,g.default)("expanded")} .${(0,g.default)("app_sidebar_content_panel_top_line")}`)).find(re=>{let le=re.getBoundingClientRect();return le.bottom>Te&&le.bottom<$e});if(He){He.getAttribute("data-instance-id");let re=He.getAttribute("data-app-name");if(!re)return;let le=J.get(re);if(!le||!Q)return;let ve=Q.querySelector(".sidebar_button_container_active");ve&&ve.classList.remove("sidebar_button_container_active"),le.classList.add("sidebar_button_container_active")}});let $=pe=>{pe&&(X=pe)},se=()=>{b.default.render(f.default.createElement(A.default,{ref:$,panels:H.getOrderedItems().map(pe=>pe.value),onMoveEnd:(pe,Te,$e,He)=>{H.moveItem($e,He),se()},onExpandedToggle:()=>{ge.emit(null)},container:W}),oe,()=>{ge.emit(null)})};if(se(),d.default.fromEvents(window,"storage").filter(pe=>pe.key==="inboxsdk__sidebar_ordering").takeUntilBy(this._stopper).onValue(()=>{H.reload(),se()}),this._stopper.onValue(()=>{b.default.unmountComponentAtNode(oe),oe.remove(),F.classList.remove((0,g.default)("app_sidebar_in_use")),F.classList.remove("app_sidebar_visible"),Q&&Q.remove();let pe=D.default.getMainContentBodyContainerElement();pe&&(he=pe.parentElement,he&&(he.classList.remove("container_app_sidebar_in_use"),he.classList.remove("container_app_sidebar_visible")))}),d.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(pe=>pe.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(pe=>{let Te=pe.detail.id;for(;K.has(Te);)Te=(0,m.default)(Te);K.add(Te);let $e=pe.detail.appName;H.addItem({groupId:pe.detail.appId,id:Te,orderHint:pe.detail.orderHint,value:{id:Te,appName:$e,appId:pe.detail.appId,instanceId:pe.detail.instanceId,title:pe.detail.title,iconClass:pe.detail.iconClass,iconUrl:pe.detail.iconUrl,hideTitleBar:pe.detail.hideTitleBar,el:pe.target}}),se(),N&&(Q=N.querySelector("."+(0,g.default)("sidebar_iconArea")),Q||(Q=document.createElement("div"),Q.className=(0,g.default)("sidebar_iconArea"),(0,P.default)(Q,N,this._stopper)),(0,c.default)(()=>{if(!Q)throw new Error("should not happen");let He=pe.detail.instanceId,re=pe.detail.appIconUrl,le=J.get($e),ve;if(le){let De=Number(le.getAttribute("data-count"))||1;le.setAttribute("data-count",String(De+1)),ve=le}else ve=document.createElement("div"),ve.className=(0,g.default)("sidebar_button_container"),ve.setAttribute("data-app-name",$e),ve.setAttribute("data-count",String(1)),ve.innerHTML=o.default`
              <button class="inboxsdk__button_icon" type="button" data-tooltip="${$e}">
                <img class="inboxsdk__button_iconImg" src="${re}">
              </button>
              <div class="inboxsdk__button_selectedIndicator"></div>
            `,pe.detail.primaryColor&&((0,w.default)(ve,".inboxsdk__button_selectedIndicator").style.backgroundColor=pe.detail.primaryColor),J.set($e,ve),(0,w.default)(ve,"button").addEventListener("click",De=>{De.stopPropagation();let xe=Q?Q.querySelector(".sidebar_button_container_active"):null;if(xe&&xe.classList.remove("sidebar_button_container_active"),xe===ve)N&&N.classList.remove("app_sidebar_visible"),he&&he.classList.remove("container_app_sidebar_visible"),this._setShouldAppSidebarOpen(!1);else{if(N&&N.classList.add("app_sidebar_visible"),ve.classList.add("sidebar_button_container_active"),he&&he.classList.add("container_app_sidebar_visible"),this._setShouldAppSidebarOpen(!0),N){let Se=N.querySelector(M);Se&&(0,S.simulateClick)(Se),(0,O.default)();let Ee=N.firstElementChild;if(!Ee)return;let ye=Ee.firstElementChild;if(!ye)return;ye.style.display!=="none"&&(ae=!0,(0,C.default)(ye,{attributes:!0,attributeFilter:["style"]}).toProperty(()=>null).map(()=>ye.style.display==="none").filter(Boolean).take(1).delay(150).takeUntilBy(this._stopper).onValue(()=>{ae=!1}))}X.openPanel(He),X.scrollPanelIntoView(He,!0)}},!0),Q&&(0,j.default)(H,$e,ve,Q),U&&U.fixWidths(),this._getShouldAppSidebarOpen()&&(Q.querySelector(".sidebar_button_container_active")||(ve.classList.add("sidebar_button_container_active"),N&&N.classList.add("app_sidebar_visible"),he&&he.classList.add("container_app_sidebar_visible"),(0,O.default)()))}))}),d.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(pe=>pe.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(pe=>{let Te=H.getOrderedItems(),$e=(0,r.default)(Te,He=>He.value.instanceId===pe.detail.instanceId);if($e===-1)throw new Error("should not happen: failed to find orderItem");H.updateItemValueByIndex($e,{id:Te[$e].value.id,appId:pe.detail.appId,appName:pe.detail.appName||pe.detail.title,instanceId:pe.detail.instanceId,title:pe.detail.title,iconClass:pe.detail.iconClass,iconUrl:pe.detail.iconUrl,hideTitleBar:pe.detail.hideTitleBar,el:pe.target}),se()}),d.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(pe=>pe.detail.sidebarId===this._instanceId).takeUntilBy(this._stopper).onValue(pe=>{let Te=H.getOrderedItems(),$e=(0,r.default)(Te,le=>le.value.instanceId===pe.detail.instanceId);if($e===-1)throw new Error("should not happen: failed to find orderItem");if(K.delete(Te[$e].id),H.removeItemByIndex($e),H.getOrderedItems().length===0?this.destroy():se(),!N||(Q=N.querySelector("."+(0,g.default)("sidebar_iconArea")),!Q))return;U&&U.fixWidths();let He=pe.detail.appName,re=J.get(He);if(re){let le=Number(re.getAttribute("data-count"));if(le<=1){let ve=oe.querySelector(".sidebar_button_container_active");re.remove(),J.delete(He),re===ve&&(N&&(N.classList.remove("app_sidebar_visible"),he&&he.classList.remove("container_app_sidebar_visible")),this._setShouldAppSidebarOpen(!1))}else le===2?re.removeAttribute("data-count"):re.setAttribute("data-count",String(le-1))}}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(pe=>{X.scrollPanelIntoView(pe.detail.instanceId)}),d.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").takeUntilBy(this._stopper).onValue(pe=>{X.closePanel(pe.detail.instanceId)}),N){let pe=(0,w.default)(N,k);(0,I.default)(pe).flatMap(Te=>{let{el:$e,removalStream:He}=Te;return(0,C.default)($e,{attributes:!0,attributeFilter:["style"]}).toProperty(()=>null).map(()=>$e.style.display!=="none")}).takeUntilBy(this._stopper).onValue(Te=>{if(Te){if(he&&he.classList.add("container_addon_sidebar_visible"),ae){let He=N.querySelector(M);return void(He&&(0,S.simulateClick)(He))}this._setShouldAppSidebarOpen(!1);let $e=Q?Q.querySelector(".sidebar_button_container_active"):null;$e&&(N.classList.remove("app_sidebar_visible"),$e.classList.remove("sidebar_button_container_active"),he&&he.classList.remove("container_app_sidebar_visible"))}else he&&he.classList.remove("container_addon_sidebar_visible")})}N&&d.default.fromEvents(oe,"scroll").takeUntilBy(this._stopper).onValue(()=>{ge.emit(null)})}addSidebarContentPanel(V){let T=new E.default(this._driver,V,this._instanceId);return this._stopper.takeUntilBy(T.getStopper()).onValue(()=>{T.remove()}),T}});i.default=R}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../../common/find-parent":474,"../../../driver-common/sidebar/AppSidebar":678,"../../../driver-common/sidebar/ContentPanelViewDriver":679,"../../../lib/delay-asap":688,"../../../lib/dom/make-element-child-stream":697,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/fake-window-resize":715,"../../../lib/from-event-target-capture":716,"../../../lib/idMap":720,"../../../lib/incrementName":722,"../gmail-element-getter":532,"./gmail-app-sidebar-view/primary/add-to-icon-area":546,"./gmail-thread-sidebar-view/add-icon-area":594,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/findIndex":316,"order-manager":368,react:437,"react-dom":415,ud:455}],594:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("kefir")),r=(t(e("kefir-stopper")),t(e("../../../../lib/dom/make-mutation-observer-chunked-stream")));t(e("../../../../lib/dom/querySelectorOrFail"));let c="[role=tablist],.J-KU-Jg";var s=(0,n.defn)(v,function(o,d,a){let p=d.firstElementChild;if(!p)return;let f=p.firstElementChild;if(!f)return;let b=d.querySelector(c);if(!b)return;let _=(0,r.default)(f,{attributes:!0,attributeFilter:["style"]}).toProperty(()=>null).map(()=>f.style.display!=="none").takeUntilBy(a),y=(0,r.default)(b,{attributes:!0,attributeFilter:["role"]}).toProperty(()=>null).filter(()=>b.getAttribute("role")==="tablist").takeUntilBy(a);b.insertAdjacentElement("beforebegin",o),u.default.combine([_.filter(g=>!g),y]).onValue(()=>{b.insertAdjacentElement("afterbegin",o),function(g,m,w){(0,r.default)(m,{childList:!0}).filter(()=>g.parentElement!==m).takeUntilBy(w).onValue(()=>{m.insertAdjacentElement("afterbegin",g)})}(o,b,u.default.merge([_.filter(Boolean),a]))}),_.filter(Boolean).onValue(()=>{let g=document.createElement("div");g.innerHTML=f.innerHTML,g.classList.add("inboxsdk__addon_icon_loading"),b.insertAdjacentElement("beforebegin",o),o.insertAdjacentElement("afterend",g),u.default.merge([_.filter(m=>!m),a]).take(1).onValue(()=>{g.remove()})})});i.default=s},{"../../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,ud:455}],595:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("lodash/constant")),t(e("asap")),t(e("pdelay"))),r=e("ud"),c=(t(e("util")),t(e("kefir"))),s=(e("querystring"),t(e("kefir-bus"))),o=t(e("kefir-stopper")),d=t(e("../../../../common/find-parent")),a=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),p=t(e("../../../lib/dom/querySelectorOrFail")),f=t(e("../../../lib/idMap")),b=t(e("../../../views/SimpleElementView")),_=t(e("../../../views/conversations/custom-message-view")),y=(t(e("../../../lib/delay-asap")),t(e("../gmail-element-getter"))),g=t(e("./gmail-message-view")),m=t(e("./gmail-toolbar-view")),w=(t(e("./gmail-thread-sidebar-view")),t(e("./gmail-thread-view/width-manager")));let C=!1;var I=(0,r.defn)(v,class{constructor(S,O,A){let E=arguments.length>3&&arguments[3]!==void 0&&arguments[3];(0,n.default)(this,"_stopper",(0,o.default)()),(0,n.default)(this,"_threadSidebar",null),(0,n.default)(this,"_widthManager",null),(0,n.default)(this,"_customMessageViews",new Set),(0,n.default)(this,"_hiddenCustomMessageViews",new Set),(0,n.default)(this,"_subjectContainerSelectors",{"2022_10_21":".a98.iY > .nH","2022_10_12":".PeIF1d > .nH",2018:".if > .nH"}),this._element=S,this._routeViewDriver=O,this._driver=A,this._isPreviewedThread=E,this._eventStream=(0,s.default)(),this._messageViewDrivers=[],this._logAddonElementInfo().catch(j=>this._driver.getLogger().error(j));let D=this._driver.waitForGlobalSidebarReady().merge(this._driver.delayToTimeAfterReady(15e3).flatMap(()=>c.default.constantError(new Error("15 second timeout while waiting for sidebar fired")))).take(1).takeErrors(1).flatMapErrors(j=>(this._driver.getLogger().error(j),c.default.constant(null))).toProperty(),P;P=A.getOpts().REQUESTED_API_VERSION===1&&A.isUsingSyncAPI()?c.default.combine([D,c.default.fromPromise(this.getThreadIDAsync())]):D,this._readyStream=P.map(()=>(this._setupToolbarView(),this._setupMessageViewStream(),null)).takeUntilBy(this._stopper).toProperty(),this._listenToExpandCollapseAll(),this._stopper.take(1).onValue(()=>{this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise()})}getMessageViewDriverStream(){return c.default.constant(this._messageViewDrivers).flatten().merge(this._eventStream.filter(S=>S.type==="internal"&&S.eventName==="messageCreated").map(S=>S.view))}isLoadingStub(){return!1}getStopper(){return this._stopper}getEventStream(){return this._eventStream}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getIsPreviewedThread(){return this._isPreviewedThread}getToolbarView(){return this._toolbarView}getMessageViewDrivers(){return this._messageViewDrivers}destroy(){this._eventStream.end(),this._stopper.destroy(),this._toolbarView&&this._toolbarView.destroy(),this._threadSidebar&&this._threadSidebar.destroy(),this._messageViewDrivers.forEach(S=>{S.destroy()}),this._messageViewDrivers.length=0,this._newMessageMutationObserver&&this._newMessageMutationObserver.disconnect();for(let S of this._customMessageViews)S.destroy()}addSidebarContentPanel(S){return this._driver.getGlobalSidebar().addThreadSidebarContentPanel(S,this)}addNoticeBar(){let S=document.createElement("div"),O,A;S.className=(0,f.default)("thread_noticeBar");for(let[D,P]of Object.entries(this._subjectContainerSelectors)){let j=this._element.querySelector(P);if(j){O=D,A=j;break}}if(!A)throw new Error("Failed to find subject container");this._driver.getLogger().eventSdkPassive("addNoticeBar subjectContainer",{version:O}),A.insertAdjacentElement("afterend",S);let E=new b.default(S);return this._stopper.takeUntilBy(c.default.fromEvents(E,"destroy")).onValue(()=>E.destroy()),E}registerHiddenCustomMessageNoticeProvider(S){this._hiddenCustomMessageNoticeProvider=S}addCustomMessage(S){let O=this._element.parentElement;if(!O)throw new Error("missing parent element");let A=new _.default(S,()=>{this._readyStream.onValue(async()=>{let E=this._element.querySelector("[role=list]");if(!E)return;let D,P=Number.MIN_SAFE_INTEGER,j=!1,k=[...await Promise.all(this._messageViewDrivers.map(async R=>({sortDatetime:await R.getDate()||0,isHidden:R.getViewState()==="HIDDEN",element:R.getElement()}))),...Array.from(this._customMessageViews).filter(R=>R!==A&&R.getElement().parentElement).map(R=>{let V=R.getSortDate();return{sortDatetime:(V?V.getTime():null)||0,isHidden:R.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),element:R.getElement()}})].sort((R,V)=>R.sortDatetime-V.sortDatetime),M=A.getSortDate();if(M){for(let R of k){if(j=R.isHidden,M.getTime()>=P&&M.getTime()<=R.sortDatetime){D=R.element;break}P=R.sortDatetime}D?D.insertAdjacentElement("beforebegin",A.getElement()):E.insertAdjacentElement("beforeend",A.getElement()),j&&this._setupHiddenCustomMessage(A),O.classList.add("inboxsdk__thread_view_with_custom_view")}})});return this._customMessageViews.add(A),A.on("destroy",()=>{this._customMessageViews.delete(A),this._customMessageViews.size>0?O.classList.add("inboxsdk__thread_view_with_custom_view"):O.classList.remove("inboxsdk__thread_view_with_custom_view")}),A}_setupHiddenCustomMessage(S){this._hiddenCustomMessageViews.add(S),S.getElement().classList.add("inboxsdk__custom_message_view_hidden");let O=this._element.querySelector(".adv"),A=!0;if(!O){A=!1;let E=Array.from(this._element.querySelectorAll(".kQ"));if(E.length<2)return;O=E[1]}(0,a.default)(O,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(c.default.merge([this._stopper,c.default.fromEvents(S,"destroy")])).filter(()=>O&&!O.classList.contains("kQ")).onValue(()=>{S.getElement().classList.remove("inboxsdk__custom_message_view_hidden"),this._hiddenCustomMessageNoticeElement&&this._hiddenCustomMessageNoticeElement.remove(),this._hiddenCustomMessageNoticeElement=null}),this._updateHiddenNotice(O,A),c.default.fromEvents(S,"destroy").takeUntilBy(this._stopper).take(1).onValue(()=>{this._hiddenCustomMessageViews.delete(S),O&&this._updateHiddenNotice(O,A)})}_updateHiddenNotice(S,O){let A=this._hiddenCustomMessageNoticeElement;A&&(A.remove(),this._hiddenCustomMessageNoticeElement=null,this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise());let E=this._hiddenCustomMessageNoticeProvider;if(!E)return;let D=this._hiddenCustomMessageNoticeElement=document.createElement("span");D.classList.add("inboxsdk__custom_message_view_app_notice_content");let P=this._hiddenCustomMessageViews.size,j=null;if(O){let R=(0,p.default)(S,".adx span");if(j=Number(R.innerHTML),isNaN(j))throw new Error("Couldn't find number of native hidden messages in dom structure")}let k=E(P,j,new Promise(R=>{this._resolveUnmountHiddenNoticePromise=R}));if(!k)return;if(D.appendChild(k),!O){let R=document.createElement("span");R.classList.add("adx"),(0,p.default)(S,".G3").appendChild(R)}let M=(0,p.default)(S,".adx");M.classList.add("inboxsdk__custom_message_view_app_notice_container"),M.appendChild(D)}getSubject(){var S=this._element.querySelector(".ha h2");return S?S.querySelector("img[data-emoji]")?Array.from(S.childNodes).map(O=>{if(O instanceof HTMLElement&&O.nodeName==="IMG")return O.getAttribute("data-emoji");if(O.nodeName==="#text")return O.wholeText}).filter(O=>O!=null).join(""):S.textContent:""}getInternalID(){return this._syncThreadID||this.getThreadID()}getThreadID(){if(this._threadID)return this._threadID;let S;if(this._driver.isUsingSyncAPI()){let O=this._element.querySelector("[data-thread-perm-id]");if(!O)throw new Error("threadID element not found");if(!(this._syncThreadID=O.getAttribute("data-thread-perm-id")))throw new Error("syncThreadID attribute with no value");if(S=O.getAttribute("data-legacy-thread-id"),!S){let A=new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");this._driver.getLogger().error(A)}}if(!S)if(this._isPreviewedThread)S=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{let O=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!O||!O.threadID){let A=new Error("Failed to get id for thread");throw this._driver.getLogger().error(A),A}S=O.threadID}return this._threadID=S,S}async getThreadIDAsync(){let S;if(this._driver.isUsingSyncAPI()){let O=this._element.querySelector("[data-thread-perm-id]");if(!O)throw new Error("threadID element not found");let A=this._syncThreadID=O.getAttribute("data-thread-perm-id");if(!A)throw new Error("syncThreadID attribute with no value");this._threadID=S=O.getAttribute("data-legacy-thread-id"),S||(this._threadID=S=await this._driver.getOldGmailThreadIdFromSyncThreadId(A))}else{if(this._isPreviewedThread)S=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{let O=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!O||!O.threadID){let A=new Error("Failed to get id for thread");throw this._driver.getLogger().error(A),A}S=O.threadID}this._threadID=S}if(this._threadID)return this._threadID;throw new Error("Failed to get id for thread")}addLabel(){let S=this._element.querySelector(".ha .J-J5-Ji");if(!S)throw new Error("Thread view label container not found");let O=document.createElement("span");S.appendChild(O);let A=new b.default(O),E=new MutationObserver(D=>{D.some(P=>P.type==="childList"&&P.removedNodes&&P.removedNodes.length&&P.removedNodes.length>0)&&(S.contains(O)||S.appendChild(O))});return E.observe(S,{childList:!0}),this._stopper.takeUntilBy(c.default.fromEvents(A,"destroy")).onValue(()=>A.destroy()),c.default.fromEvents(A,"destroy").take(1).onValue(()=>{E.disconnect()}),A}_setupToolbarView(){let S=this._findToolbarElement();if(!S)throw new Error("No toolbar element found");let O=S.parentElement;O&&O.classList.add("inboxsdk__thread_toolbar_parent"),this._toolbarView=new m.default(S,this._driver,this._routeViewDriver,this)}_findToolbarElement(){for(var S=document.querySelectorAll("[gh=tm]"),O=0;O<S.length;O++)if(this._isToolbarContainerRelevant(S[O]))return S[O].querySelector("[gh=mtb]");return null}_isToolbarContainerRelevant(S){if(S.parentElement.parentElement===this._element.parentElement.parentElement||S.parentElement.getAttribute("role")!=="main"&&this._element.parentElement.getAttribute("role")!=="main")return!0;if(S.parentElement.getAttribute("role")==="main"&&S.parentElement.querySelector(".if, .PeIF1d, .a98.iY")&&S.parentElement.querySelector(".if, .PeIF1d, .a98.iY").parentElement===this._element){let O="2018";return S.parentElement.querySelector(".a98.iY")?O="2022-10-20":S.parentElement.querySelector(".PeIF1d")&&(O="2022-10-12"),this._driver.getLogger().eventSdkPassive("gmailThreadView_isToolbarContainerRelevant",{version:O}),!0}return!1}_setupMessageViewStream(){var S=this._element.querySelector(".h7");if(S){var O=S.parentElement;this._initializeExistingMessages(O),this._observeNewMessages(O)}else{var A=this;setTimeout(function(){A._element&&A._setupMessageViewStream()},500)}}_initializeExistingMessages(S){var O=this,A=S.children;Array.prototype.forEach.call(A,function(E){O._createMessageView(E)})}_observeNewMessages(S){this._newMessageMutationObserver=new MutationObserver(this._handleNewMessageMutations.bind(this)),this._newMessageMutationObserver.observe(S,{childList:!0})}_handleNewMessageMutations(S){var O=this;S.forEach(function(A){Array.prototype.forEach.call(A.addedNodes,function(E){E.classList.contains("inboxsdk__custom_message_view")||O._createMessageView(E)})})}_createMessageView(S){var O=new g.default(S,this,this._driver);this._eventStream.plug(O.getEventStream()),this._messageViewDrivers.push(O),this._eventStream.emit({type:"internal",eventName:"messageCreated",view:O})}_setupWidthManager(){let S=this._widthManager;if(!S){let O=y.default.getAddonSidebarContainerElement();if(!O)throw new Error("addonSidebarElement not found");let A=y.default.getMainContentBodyContainerElement();if(!A)throw new Error("mainContentBodyContainerElement not found");let E=A.parentElement;if(!E)throw new Error("mainContentBodyContainerElement has no parent element");this._widthManager=S=new w.default(E,O)}return S}getReadyStream(){return this._readyStream}async _logAddonElementInfo(){if(C)return;function S(){let A=y.default.getAddonSidebarContainerElement();if(!A)return null;let E={parent:A.parentElement?A.parentElement.style.display==="none":null,self:A.style.display==="none",children:Array.from(A.children).map(P=>P.style?P.style.display==="none":null)},D=A.getBoundingClientRect();return{isDisplayNone:E,size:{width:D.width,height:D.height}}}let O={time:{}};O.time[0]=S(),await Promise.all([30,5e3].map(async A=>{await(0,u.default)(A),this._stopper.stopped||(O.time[A]=S())})),this._stopper.stopped||(this._driver.getLogger().eventSdkPassive("gmailSidebarElementInfo",O),C=!0)}_listenToExpandCollapseAll(){let S=this._element.querySelector("img.gx");if(S){let A=(0,d.default)(S,E=>E.getAttribute("role")==="button");A&&c.default.merge([c.default.fromEvents(A,"click"),c.default.fromEvents(A,"keydown").filter(E=>E.which===13)]).takeUntilBy(this._stopper).onValue(()=>{for(let E of this._customMessageViews)E.expand()})}let O=this._element.querySelector("img.gq");if(O){let A=(0,d.default)(O,E=>E.getAttribute("role")==="button");A&&c.default.merge([c.default.fromEvents(A,"click"),c.default.fromEvents(A,"keydown").filter(E=>E.which===13)]).takeUntilBy(this._stopper).onValue(()=>{for(let E of this._customMessageViews)E.collapse()})}}});i.default=I},{"../../../../common/find-parent":474,"../../../lib/delay-asap":688,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/idMap":720,"../../../views/SimpleElementView":759,"../../../views/conversations/custom-message-view":768,"../gmail-element-getter":532,"./gmail-message-view":584,"./gmail-thread-sidebar-view":593,"./gmail-thread-view/width-manager":596,"./gmail-toolbar-view":597,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/constant":308,pdelay:376,querystring:410,ud:455,util:52}],596:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../../../lib/idMap"));i.default=class{constructor(u,r){this._contentContainerEl=u,this._addonSidebarContainerEl=r}fixWidths(){let u=this._addonSidebarContainerEl.querySelector("[role=tablist]");if(!!u){if(this._addonSidebarContainerEl.classList.contains((0,n.default)("app_sidebar_in_use")))return void this._contentContainerEl.classList.remove((0,n.default)("container_app_sidebar_no_icons"));[...u.children].some(r=>r.style.display!=="none")?this._contentContainerEl.classList.remove((0,n.default)("container_app_sidebar_no_icons")):this._contentContainerEl.classList.add((0,n.default)("container_app_sidebar_no_icons"))}}}},{"../../../../lib/idMap":720,"@babel/runtime/helpers/interopRequireDefault":15}],597:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("lodash/uniq")),t(e("lodash/escape"))),r=t(e("asap")),c=e("ud"),s=t(e("kefir")),o=t(e("kefir-stopper")),d=t(e("../../../lib/stream-wait-for")),a=t(e("../../../lib/dom/make-mutation-observer-stream")),p=t(e("../../../lib/dom/insert-element-in-order")),f=t(e("../../../../common/isElementVisible")),b=t(e("../gmail-element-getter")),_=t(e("../widgets/buttons/button-view")),y=t(e("../widgets/gmail-dropdown-view")),g=t(e("../../../widgets/buttons/basic-button-view-controller")),m=t(e("../../../widgets/buttons/dropdown-button-view-controller")),w=t(e("./gmail-thread-view")),C=t(e("./gmail-row-list-view")),I=e("../../../constants/toolbars"),S=t(e("../../../lib/logger")),O=(0,c.defn)(v,class{constructor(A,E,D,P){if((0,n.default)(this,"_buttonViewControllers",new Set),(0,n.default)(this,"_moreMenuItems",[]),(0,n.default)(this,"_isUpdateButtonClassesScheduled",!1),(0,n.default)(this,"_moreMenuItemsContainer",null),this._element=A,this._driver=E,this._stopper=(0,o.default)(),this._routeViewDriver=D,this._getMoveSectionElement()?this._ready=s.default.constant(this):this._ready=(0,d.default)(()=>!!this._getMoveSectionElement()).takeUntilBy(this._stopper).map(()=>this).toProperty(),this._ready.onValue(()=>{this._startMonitoringMoreMenu(),this._determineToolbarState(),this._determineToolbarIconMode(),this._setupToolbarStateMonitoring()}),P instanceof w.default)this._threadViewDriver=P,this._ready.onValue(()=>{this._element.setAttribute("data-thread-toolbar","true")});else{if(!(P instanceof C.default))throw new Error("Invalid parent");this._rowListViewDriver=P,this._ready.onValue(()=>{this._element.setAttribute("data-rowlist-toolbar","true")})}}getStopper(){return this._stopper}getElement(){return this._element}getRouteViewDriver(){return this._routeViewDriver}getThreadViewDriver(){return this._threadViewDriver}isForRowList(){return this._rowListViewDriver!=null}isForThread(){return this._threadViewDriver!=null}getThreadRowViewDrivers(){return this._rowListViewDriver?this._rowListViewDriver.getThreadRowViewDrivers():new Set}addButton(A,E){let D=(0,o.default)();this._stopper.takeUntilBy(D).onValue(()=>{D.destroy()}),this._driver.getAppId();let P=I.SECTION_NAMES;return this._ready.takeUntilBy(D).onValue(()=>{if(A.section===P.OTHER){let j={buttonDescriptor:A};this._moreMenuItems.push(j),this._addToOpenMoreMenu(A),D.onValue(()=>{this._moreMenuItems=this._moreMenuItems.filter(k=>k!==j),this._addMoreItems()})}else{let j=this._getSectionElement(A.section,P);if(j){let k=this._createButtonViewController(A);this._buttonViewControllers.add(k),D.onValue(()=>{this._buttonViewControllers.delete(k),k.destroy()}),k.getView().getElement().__addButton_ownedByExtension=!0,k.getView().getElement().setAttribute("data-add-button-debug",JSON.stringify({id:E,title:A.title,hasThreadViewDriver:this.isForThread(),hasRowListViewDriver:this.isForRowList()})),k.getView().getElement().setAttribute("data-order-hint",String(A.orderHint||0)),(0,p.default)(j,k.getView().getElement()),s.default.merge([s.default.constant(-1),s.default.later(1e3,1e3)]).map(M=>({delay:M,duplicates:Array.from(j.children).filter(R=>k.getView().getElement().getAttribute("data-rowlist-toolbar")===R.getAttribute("data-rowlist-toolbar")&&k.getView().getElement().getAttribute("data-toolbar-expanded")===R.getAttribute("data-toolbar-expanded")).filter(R=>R.hasAttribute("data-add-button-debug")).map(R=>Object.assign({ownedByExtension:!!R.__addButton_ownedByExtension},JSON.parse(R.getAttribute("data-add-button-debug")||"null"))).filter(R=>{let{title:V}=R;return V===A.title})})).filter(M=>{let{duplicates:R}=M;return R.length>1}).take(1).takeUntilBy(this._stopper).onValue(M=>{let{delay:R,duplicates:V}=M;S.default.error(new Error("Duplicate toolbar button"),{delay:R,duplicates:V,dataThreadToolbar:this._element.getAttribute("data-thread-toolbar"),dataRowlistToolbar:this._element.getAttribute("data-rowlist-toolbar")})}),this._updateButtonClasses(this._element),k.getView().setEnabled(this._toolbarState==="EXPANDED")}}}),{getStopper:()=>D,destroy:()=>{D.destroy()}}}waitForReady(){return this._ready}_createButtonViewController(A){let E=this._getButtonView(A);A.buttonView=E;let D=null;return D=A.hasDropdown?new m.default({buttonView:E,dropdownViewDriverClass:y.default,dropdownShowFunction:A.onClick,dropdownPositionOptions:{position:"bottom",hAlign:"left"}}):new g.default(A),D}_getButtonView(A){let E=new _.default({...A,noArrow:!0});return this._rowListViewDriver?(E.getElement().setAttribute("data-rowlist-toolbar","true"),E.getElement().setAttribute("data-toolbar-expanded","true")):this._threadViewDriver&&E.getElement().setAttribute("data-thread-toolbar","true"),E.getElement().setAttribute("role","button"),E}_startMonitoringMoreMenu(){let A=this._element.querySelector(".nf[role=button]");A&&(0,a.default)(A,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(()=>null).takeUntilBy(this._stopper).map(()=>A.getAttribute("aria-expanded")).onValue(E=>{E!=="true"?this._clearMoreItems():this._addMoreItems()})}_determineToolbarState(){let A=this._getMoveSectionElement();if(!A)throw new Error("No move section element");A.style.display==="none"?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED"}_determineToolbarIconMode(){let A=this._getMoveSectionElement();if(!A)throw new Error("No move section element");let E=Array.from(A.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some(D=>D.hasAttribute("title")||D.hasAttribute("data-tooltip"));this._element.setAttribute("data-toolbar-icononly",E?"true":"false")}_setupToolbarStateMonitoring(){let A=this._getMoveSectionElement();if(!A)throw new Error("No move section element");(0,a.default)(A,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(E=>{E.target instanceof HTMLElement&&E.target.style.display==="none"?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED",this._updateButtonClasses(this._element),this._updateButtonEnabledState()})}_getSectionElement(A,E){switch(A){case E.INBOX_STATE:return this._getArchiveSectionElement();case E.METADATA_STATE:return this._getMoveSectionElement();default:return null}}_getArchiveSectionElement(){return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk")}_getCheckboxSectionElement(){return this._getSectionElementForButtonSelector(".T-Jo-auh")}_getMoveSectionElement(){return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw")}_getSectionElementForButtonSelector(A){let E=this._element.querySelectorAll(".G-Ni");for(let D=0;D<E.length;D++)if(E[D].querySelector(A))return E[D];return null}_updateButtonClasses(A){this._isUpdateButtonClassesScheduled||(this._isUpdateButtonClassesScheduled=!0,(0,r.default)(()=>{this._toolbarState==="EXPANDED"?A.setAttribute("data-toolbar-expanded","true"):this._toolbarState==="COLLAPSED"&&A.setAttribute("data-toolbar-expanded","false");let E=A.querySelectorAll(".G-Ni > [role=button]");Array.prototype.forEach.call(E,D=>{let P=D;for(let j=0;j<1e5;j++){if(!P.previousElementSibling){D.classList.remove("T-I-Js-Gs");break}if(!P.previousElementSibling.classList.contains("inboxsdk__button")){D.classList.add("T-I-Js-Gs");break}if((0,f.default)(P.previousElementSibling)){D.classList.add("T-I-Js-Gs");break}P=P.previousElementSibling}P=D;for(let j=0;j<1e5;j++){if(!P.nextElementSibling){D.classList.remove("T-I-Js-IF");break}if(!P.nextElementSibling.classList.contains("inboxsdk__button")){D.classList.add("T-I-Js-IF");break}if((0,f.default)(P.nextElementSibling)){D.classList.add("T-I-Js-IF");break}P=P.nextElementSibling}}),this._isUpdateButtonClassesScheduled=!1}))}_updateButtonEnabledState(){let A=this._toolbarState==="EXPANDED";this._buttonViewControllers.forEach(E=>{E.getView().setEnabled(A)})}_addMoreItems(){this._clearMoreItems(),this._toolbarState==="EXPANDED"&&this._moreMenuItems.forEach(A=>{this._addToOpenMoreMenu(A.buttonDescriptor)})}_clearMoreItems(){this._moreMenuItemsContainer&&(this._moreMenuItemsContainer.remove(),this._moreMenuItemsContainer=null)}_addToOpenMoreMenu(A){let E=b.default.getActiveMoreMenu();if(!E)return;let D=this._getMoreMenuItemsContainer(E),P=this._getMoreMenuItemElement(A);(0,p.default)(D,P)}_getMoreMenuItemsContainer(A){if(this._moreMenuItemsContainer)return this._moreMenuItemsContainer;let E=this._moreMenuItemsContainer=document.createElement("div");return E.setAttribute("data-group-order-hint",this._driver.getAppId()),E.innerHTML='<div class="J-Kh"></div>',(0,p.default)(A,E),E}_getMoreMenuItemElement(A){let E=document.createElement("div");return E.setAttribute("class","J-N inboxsdk__menuItem"),E.setAttribute("role","menuitem"),E.setAttribute("data-order-hint",String(A.orderHint||0)),E.innerHTML=['<div class="J-N-Jz" style="-webkit-user-select: none;">',A.iconUrl?'<img class="J-N-JX" src="'+(0,u.default)(A.iconUrl)+'" />':"",A.iconClass?'<span class="inboxsdk__icon J-N-JX '+(0,u.default)(A.iconClass)+'"></span>':"",(0,u.default)(A.title),"</div>"].join(""),E.addEventListener("mouseenter",D=>E.classList.add("J-N-JT")),E.addEventListener("mouseleave",D=>E.classList.remove("J-N-JT")),E.addEventListener("click",D=>{A.onClick&&A.onClick({})}),E}destroy(){let A=this._element;this._threadViewDriver?this._element.removeAttribute("data-thread-toolbar"):this._rowListViewDriver&&this._element.removeAttribute("data-rowlist-toolbar"),this._clearMoreItems(),this._stopper.destroy(),this._updateButtonClasses(A)}});i.default=O},{"../../../../common/isElementVisible":480,"../../../constants/toolbars":493,"../../../lib/dom/insert-element-in-order":694,"../../../lib/dom/make-mutation-observer-stream":701,"../../../lib/logger":729,"../../../lib/stream-wait-for":739,"../../../widgets/buttons/basic-button-view-controller":780,"../../../widgets/buttons/dropdown-button-view-controller":781,"../gmail-element-getter":532,"../widgets/buttons/button-view":600,"../widgets/gmail-dropdown-view":608,"./gmail-row-list-view":590,"./gmail-thread-view":595,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-stopper":157,"lodash/escape":313,"lodash/uniq":359,ud:455}],598:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-bus")),c=t(e("../../../lib/dom/get-insert-before-element")),s=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),o=(t(e("../../../lib/dom/make-mutation-observer-stream")),t(e("../../../lib/dom/querySelectorOrFail"))),d=t(e("../../../../common/find-parent")),a=(t(e("../gmail-element-getter")),function(f,b){if(!b&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var _=p(b);if(_&&_.has(f))return _.get(f);var y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in f)if(m!=="default"&&Object.prototype.hasOwnProperty.call(f,m)){var w=g?Object.getOwnPropertyDescriptor(f,m):null;w&&(w.get||w.set)?Object.defineProperty(y,m,w):y[m]=f[m]}return y.default=f,_&&_.set(f,y),y}(e("./gmail-nav-item-view")));function p(f){if(typeof WeakMap!="function")return null;var b=new WeakMap,_=new WeakMap;return(p=function(y){return y?_:b})(f)}i.default=class{constructor(f,b,_){(0,n.default)(this,"_activeMarkerElement",null),(0,n.default)(this,"_isActive",!1),(0,n.default)(this,"_itemContainerElement",null),this._driver=f,this._element=b,this._eventStream=(0,r.default)(),this._elementBus=(0,r.default)(),this._elementStream=this._elementBus.toProperty(()=>this._element),this._navItemName=_;let y=this._element.parentElement;y&&(0,s.default)(y,{childList:!0}).map(()=>y.querySelector(`.aim a[href*="#${this._navItemName}"]`)).filter(Boolean).map(g=>(0,d.default)(g,m=>m.classList.contains("aim"))).filter(Boolean).filter(g=>g!==this._element).onValue(g=>{if(g){let m=this._itemContainerElement;m&&(m.remove(),this._itemContainerElement=null),this._elementBus.emit(g)}}),this._elementStream.onValue(g=>{this._element=g,this._monitorElementForActiveChanges(),this.setActive(this._isActive)})}destroy(){this._element.classList.remove("inboxsdk__navItem_claimed"),this._eventStream.end(),this._elementBus.end(),this._activeMarkerElement&&this._activeMarkerElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}addNavItem(f,b){let _=new a.default(this._driver,f,2);return u.default.merge([_.getEventStream().filter(y=>y.eventName==="orderChanged"),this._elementStream]).onValue(()=>this._addNavItemElement(_)),_.setNavItemDescriptor(b),_}setActive(f){this._isActive=f;let b=(0,o.default)(this._element,".TO");f?(this._element.classList.add("ain"),b.classList.add("nZ"),b.classList.add("aiq")):(this._element.classList.remove("ain"),b.classList.remove("nZ"),b.classList.remove("aiq")),this._setHeights()}toggleCollapse(){this._toggleCollapse()}setCollapsed(f){localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]=f,this._element.querySelector(".inboxsdk__expando")&&(f?this._collapse():this._expand())}remove(){}_monitorElementForActiveChanges(){this._element.classList.add("inboxsdk__navItem_claimed");let f=this._element,b=(0,s.default)(f,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(this._eventStream.filter(()=>!1).beforeEnd(()=>null)).toProperty(()=>[]).map(()=>f);b.filter(_=>_.classList.contains("ain")).onValue(()=>this._createActiveMarkerElement()),b.filter(_=>!_.classList.contains("ain")).onValue(()=>this._removeActiveMarkerElement())}_addNavItemElement(f){let b=this._getItemContainerElement(),_=(0,c.default)(f.getElement(),b.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);b.insertBefore(f.getElement(),_);let y=f.getElement();(0,o.default)(y,".TN").style.marginLeft=(0,a.getLeftIndentationPaddingValue)()+"px",this._setHeights()}_getItemContainerElement(){let f=this._itemContainerElement;return f||(f=this._itemContainerElement=this._element.querySelector(".inboxsdk__navItem_container"),f||(f=this._createItemContainerElement(),this._createExpando())),f}_createItemContainerElement(){let f=this._itemContainerElement=document.createElement("div");return f.classList.add("inboxsdk__navItem_container"),this._element.appendChild(f),f}_createExpando(){let f=this._element.querySelector("a"),b=document.createElement("div");b.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),b.setAttribute("role","link"),b.title=`Expand ${f?f.title||f.textContent:""}`,b.addEventListener("click",y=>{this._toggleCollapse(),y.stopPropagation(),y.preventDefault(),y.stopImmediatePropagation()},!0);let _=this._element.querySelector(".TN");_&&_.insertAdjacentElement("afterbegin",b),localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]==="collapsed"?this._collapse():this._expand()}_toggleCollapse(){this._element.querySelector(".inboxsdk__expando")?localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]==="collapsed"?this._expand():this._collapse():localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]==="collapsed"?localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="expanded":localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="collapsed"}_collapse(){let f=(0,o.default)(this._element,".inboxsdk__expando");f.classList.remove("aih"),f.classList.add("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display="none"),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"collapsed"),this._eventStream.emit({eventName:"collapsed"}),this._setHeights()}_expand(){let f=(0,o.default)(this._element,".inboxsdk__expando");f.classList.add("aih"),f.classList.remove("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display=""),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"expanded"),this._eventStream.emit({eventName:"expanded"}),this._setHeights()}_isExpanded(){return!!this._element.querySelector(".inboxsdk__expando.aih")}_setHeights(){let f=(0,o.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";let b=this._element.clientHeight,_=f.clientHeight;this._element.style.height=_+"px",this._element.style.overflow="visible",this._element.style.marginBottom=b-_+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}_createActiveMarkerElement(){this._removeActiveMarkerElement();let f=this._activeMarkerElement=document.createElement("div");f.classList.add("inboxsdk__navItem_marker"),f.classList.add("ain"),f.innerHTML="&nbsp;",this._element.insertBefore(f,this._element.firstElementChild)}_removeActiveMarkerElement(){let f=this._activeMarkerElement;f&&(f.remove(),this._activeMarkerElement=null)}}},{"../../../../common/find-parent":474,"../../../lib/dom/get-insert-before-element":692,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/make-mutation-observer-stream":701,"../../../lib/dom/querySelectorOrFail":706,"../gmail-element-getter":532,"./gmail-nav-item-view":587,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155}],599:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t={default:{INACTIVE_CLASS:"T-I-ax7",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-Kq"},flatIcon:{INACTIVE_CLASS:"J-Z-I",HOVER_CLASS:"J-Z-I-JW",ACTIVE_CLASS:"J-Z-I-KO"},pureIcon:{INACTIVE_CLASS:"inboxsdk__button_pureIcon_inactive",HOVER_CLASS:"inboxsdk__button_pureIcon_hover",ACTIVE_CLASS:"inboxsdk__button_pureIcon_active"},blue:{INACTIVE_CLASS:"T-I-atl",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},red:{INACTIVE_CLASS:"T-I-KE",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},green:{INACTIVE_CLASS:"inboxsdk__button_green_inactive",HOVER_CLASS:"inboxsdk__button_green_hover",ACTIVE_CLASS:"inboxsdk__button_green_active"}};i.default=t},{}],600:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=function(f,b){if(!b&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var _=p(b);if(_&&_.has(f))return _.get(f);var y={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in f)if(m!=="default"&&Object.prototype.hasOwnProperty.call(f,m)){var w=g?Object.getOwnPropertyDescriptor(f,m):null;w&&(w.get||w.set)?Object.defineProperty(y,m,w):y[m]=f[m]}return y.default=f,_&&_.set(f,y),y}(e("kefir")),c=t(e("kefir-bus")),s=t(e("../../../../lib/logger")),o=e("../../../../lib/dom/simulate-mouse-event"),d=t(e("../../../../lib/dom/keyboard-shortcut-stream")),a=t(e("./button-color-classes"));function p(f){if(typeof WeakMap!="function")return null;var b=new WeakMap,_=new WeakMap;return(p=function(y){return y?_:b})(f)}i.default=class{constructor(f){(0,n.default)(this,"_element",document.createElement("div")),(0,n.default)(this,"_innerElement",document.createElement("div")),this._hasDropdown=!1,this._isEnabled=f.enabled!==!1,this._iconClass=f.iconClass,this._iconUrl=f.iconUrl,this._title=f.text||f.title,this._tooltip=f.tooltip||f.title,this._hasDropdown=!!f.hasDropdown,this._buttonColor=f.buttonColor||"default",this._keyboardShortcutHandle=f.keyboardShortcutHandle,this._createElement(f),this._eventStream=(0,c.default)(),this._setupEventStream(),this._setupAestheticEvents(),f.enabled!==!1&&this._setupKeyboardShortcutEvent()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){this.addClass(a.default[this._buttonColor].ACTIVE_CLASS),this.addClass(a.default[this._buttonColor].HOVER_CLASS)}deactivate(){this.removeClass(a.default[this._buttonColor].ACTIVE_CLASS),this.removeClass(a.default[this._buttonColor].HOVER_CLASS)}addClass(f){this._element.classList.add(f)}removeClass(f){this._element.classList.remove(f)}simulateHover(){(0,o.simulateHover)(this._element)}setEnabled(f){this._setEnabled(f)}isEnabled(){return this._isEnabled}update(f){f?(this._element.style.display==="none"&&(this._element.style.display=""),f.buttonColor!=this._buttonColor&&this._buttonColor&&this._updateButtonColor(f.buttonColor),f.title!=this._title&&this._updateTitle(f.title),f.tooltip!=this._tooltip&&this._updateTooltip(f.tooltip),f.iconUrl!=this._iconUrl&&this._updateIconUrl(f.iconUrl),f.iconClass!=this._iconClass&&this._updateIconClass(f.iconClass),f.enabled!==!1&&f.enabled!==!0||this._setEnabled(f.enabled)):this._element.style.display="none"}_createElement(f){this._setupMainElement(f),this._setupInnerElement(f),this._createTextElement(),this._createIconElement()}_setupMainElement(f){this._element.setAttribute("class","T-I J-J5-Ji ar7 inboxsdk__button "+a.default[this._buttonColor].INACTIVE_CLASS),f.tooltip&&this._element.setAttribute("aria-label",f.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),f.hasButtonToRight&&this._element.classList.add("T-I-Js-IF"),f.hasButtonToLeft&&this._element.classList.add("T-I-Js-Gs"),(f.tooltip||f.title)&&this._element.setAttribute("data-tooltip",String(f.tooltip||f.title)),f.enabled===!1&&this._element.classList.add("inboxsdk__button_disabled")}_setupInnerElement(f){this._innerElement.classList.add("asa"),this._hasDropdown&&!f.noArrow&&(this._innerElement.innerHTML='<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>'),this._element.appendChild(this._innerElement)}_createTextElement(){if(this._title)if(this._textElement=document.createElement("span"),this._textElement.setAttribute("class","inboxsdk__button_text"),this._textElement.textContent=this._title,this._iconElement){let f=this._iconElement.parentElement;if(!f)throw new Error("Could not find parent");f.insertBefore(this._textElement,this._iconElement.nextSibling)}else this._innerElement.insertBefore(this._textElement,this._innerElement.firstElementChild)}_createIconElement(){if(!this._iconClass&&!this._iconUrl)return;let f=this._iconElement=document.createElement("div");f.classList.add("inboxsdk__button_icon"),this._iconClass&&(f.innerHTML="&nbsp;",f.setAttribute("class","inboxsdk__button_icon "+this._iconClass)),this._iconUrl&&this._createIconImgElement(),this._innerElement.insertBefore(f,this._innerElement.firstElementChild)}_createIconImgElement(){this._iconElement||this._createIconElement();let f=this._iconElement;if(!f)throw new Error("Should not happen");f.innerHTML!==""&&(f.innerHTML="");let b=this._iconImgElement=document.createElement("img");b.classList.add("inboxsdk__button_iconImg"),this._iconUrl?b.src=this._iconUrl:s.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),f.appendChild(b)}_updateButtonColor(f){this._element.classList.remove(a.default[this._buttonColor].INACTIVE_CLASS),this._buttonColor=f,this._element.classList.add(a.default[this._buttonColor].INACTIVE_CLASS)}_updateTitle(f){!this._title&&f?(this._title=f,this._createTextElement()):this._title&&!f&&this._textElement?(this._textElement.remove(),this._textElement=void 0,this._title=f):this._textElement&&(this._textElement.textContent=f,this._title=f)}_updateTooltip(f){this._tooltip=f,f?this._element.setAttribute("data-tooltip",f):this._element.removeAttribute("data-tooltip")}_updateIconUrl(f){this._iconUrl=f,this._iconImgElement&&!f?(this._iconImgElement.remove(),this._iconImgElement=void 0):!this._iconImgElement&&f&&this._createIconImgElement(),this._iconImgElement&&f&&(this._iconImgElement.src=f)}_updateIconClass(f){!this._iconElement||f||this._iconUrl?!this._iconElement&&f&&this._createIconElement():(this._iconElement.remove(),this._iconElement=void 0),this._iconClass=f,this._iconElement&&this._iconElement.setAttribute("class","inboxsdk__button_icon "+(f||""))}_setEnabled(f){this._isEnabled!==f&&(this._isEnabled=f,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}_setupEventStream(){let f=r.fromEvents(this._element,"click");f.onValue(function(_){_.stopPropagation(),_.preventDefault()}),this._eventStream.plug(f.filter(()=>this.isEnabled()).map(function(_){return{eventName:"click",domEvent:_}}));let b=r.fromEvents(this._element,"keydown").filter(()=>this.isEnabled()).filter(_=>(0,u.default)([32,13],_.which));this._eventStream.plug(b.map(function(_){return{eventName:"click",domEvent:_}})),b.onValue(function(_){_.stopPropagation(),_.preventDefault()})}_setupKeyboardShortcutEvent(){let f=this._keyboardShortcutHandle;f&&this._eventStream.plug((0,d.default)(f.chord).takeUntilBy(this._eventStream.filter(function(b){return b.eventName==="enabledChanged"&&b.isEnabled===!1})).map(function(b){return{eventName:"click",domEvent:b}}))}_setupAestheticEvents(){r.fromEvents(this._element,"mouseenter").filter(()=>this.isEnabled()).onValue(()=>{this._element.classList.add(a.default[this._buttonColor].HOVER_CLASS),this._element.classList.add("inboxsdk__button_hover")}),r.fromEvents(this._element,"mouseleave").onValue(()=>{this._element.classList.remove(a.default[this._buttonColor].HOVER_CLASS),this._element.classList.remove("inboxsdk__button_hover")}),r.fromEvents(this._element,"focus").onValue(()=>{this._element.classList.add("T-I-JO")}),r.fromEvents(this._element,"blur").onValue(()=>{this._element.classList.remove("T-I-JO")})}}},{"../../../../lib/dom/keyboard-shortcut-stream":696,"../../../../lib/dom/simulate-mouse-event":712,"../../../../lib/logger":729,"./button-color-classes":599,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/includes":324}],601:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=s(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("kefir")),r=t(e("kefir-bus")),c=t(e("kefir-stopper"));function s(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(s=function(p){return p?a:d})(o)}i.default=class{constructor(){(0,n.default)(this,"_element",document.createElement("div")),(0,n.default)(this,"_eventStream",(0,r.default)()),(0,n.default)(this,"_stopper",(0,c.default)()),this._setupElement(),this._setupEventStream()}update(){}setEnabled(){throw new Error("not implemented")}destroy(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){let o=this._element.firstElementChild;o&&o.classList.add("aj1")}deactivate(){let o=this._element.firstElementChild;o&&o.classList.remove("aj1")}_setupElement(){this._element.setAttribute("class","nL aig"),this._element.setAttribute("style","left: 7px"),this._element.innerHTML=['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">','<div class="p6">','<div class="p8">\u25BC</div>',"</div>","</div>"].join("")}_setupEventStream(){let o=u.fromEvents(this._element,"click");o.onValue(d=>{d.stopPropagation(),d.preventDefault()}),this._eventStream.plug(o.map(d=>({eventName:"click",domEvent:d})))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157}],602:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=s(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("kefir")),r=t(e("kefir-bus")),c=t(e("kefir-stopper"));function s(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(s=function(p){return p?a:d})(o)}i.default=class{constructor(){(0,n.default)(this,"_element",document.createElement("div")),(0,n.default)(this,"_eventStream",(0,r.default)()),(0,n.default)(this,"_stopper",(0,c.default)()),this._setupElement(),this._setupEventStream()}activate(){let o=this._element.firstElementChild;o&&o.classList.add("aj1")}deactivate(){let o=this._element.firstElementChild;o&&o.classList.remove("aj1")}destroy(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}getElement(){return this._element}getEventStream(){return this._eventStream}setEnabled(){throw new Error("not implemented")}update(){}_setupElement(){this._element.setAttribute("class","Yh inboxsdk__navItem_parent_accessory_button"),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),this._element.setAttribute("type","button")}_setupEventStream(){let o=u.fromEvents(this._element,"click");o.onValue(d=>{d.stopPropagation(),d.preventDefault()}),this._eventStream.plug(o.map(d=>({eventName:"click",domEvent:d})))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157}],603:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../../../lib/dom/generic-button-view"));class u extends n.default{constructor(){let c=document.createElement("div");c.setAttribute("class","aAE qi J-J5-Ji J-JN-M-I"),c.innerHTML='<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>',c.addEventListener("mouseenter",function(){c.classList.add("J-JN-M-I-JW")}),c.addEventListener("mouseleave",function(){c.classList.remove("J-JN-M-I-JW")}),super(c)}activate(){this.getElement().classList.add("J-JN-M-I-JO"),this.getElement().classList.add("J-JN-M-I-Kq")}deactivate(){this.getElement().classList.remove("J-JN-M-I-JO"),this.getElement().classList.remove("J-JN-M-I-Kq")}}i.default=u},{"../../../../lib/dom/generic-button-view":691,"@babel/runtime/helpers/interopRequireDefault":15}],604:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=s(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("kefir")),c=t(e("kefir-bus"));function s(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(s=function(p){return p?a:d})(o)}i.default=class{constructor(o){(0,n.default)(this,"_element",document.createElement("button")),(0,n.default)(this,"_eventStream",(0,c.default)()),this._isEnabled=o.enabled!==!1,this._title=o.text||o.title,this._tooltip=o.tooltip||o.title,this._buttonColor=o.buttonColor||"default",this._createElement(o),this._eventStream=(0,c.default)(),this._setupEventStream()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}setEnabled(o){this._setEnabled(o)}update(){throw new Error("not implemented")}isEnabled(){return this._isEnabled}_createElement(o){o.isPrimary&&this._element.classList.add("J-at1-auR"),this._element.innerText=o.text||o.title||"",o.tooltip&&this._element.setAttribute("aria-label",o.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),(o.tooltip||o.title)&&this._element.setAttribute("data-tooltip",String(o.tooltip||o.title))}_setEnabled(o){this._isEnabled!==o&&(this._isEnabled=o,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}))}_setupEventStream(){let o=r.fromEvents(this._element,"click");o.onValue(function(a){a.stopPropagation(),a.preventDefault()}),this._eventStream.plug(o.filter(()=>this.isEnabled()).map(function(a){return{eventName:"click",domEvent:a}}));let d=r.fromEvents(this._element,"keydown").filter(()=>this.isEnabled()).filter(a=>(0,u.default)([32,13],a.which));this._eventStream.plug(d.map(function(a){return{eventName:"click",domEvent:a}})),d.onValue(function(a){a.stopPropagation(),a.preventDefault()})}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/includes":324}],605:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../../../../lib/dom/generic-button-view"));class r extends u.default{constructor(){super(document.createElement("div")),(0,n.default)(this,"_isActive",!1);let s=this._element;s.setAttribute("class","nL aig");let o=document.createElement("div");o.setAttribute("class","pM aj0"),s.appendChild(o),s.addEventListener("click",()=>{this._isActive=!0}),s.addEventListener("mouseenter",()=>{o.classList.add("aj1")}),s.addEventListener("mouseleave",()=>{this._isActive||o.classList.remove("aj1")})}activate(){this.getElement().children[0].classList.add("aj1")}deactivate(){this.getElement().children[0].classList.remove("aj1"),this._isActive=!1}}i.default=r},{"../../../../lib/dom/generic-button-view":691,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],606:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("./create-parent-accessory-button-view"));class u extends n.default{constructor(){super(),this.getElement().style.backgroundImage="url(https://www.gstatic.com/images/icons/material/system_gm/2x/more_vert_black_20dp.png)"}}i.default=u},{"./create-parent-accessory-button-view":602,"@babel/runtime/helpers/interopRequireDefault":15}],607:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("lodash/isEqual")),r=t(e("../../../lib/dom/querySelectorOrFail")),c=(0,n.defn)(v,class{constructor(){this._element=document.createElement("div"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.className="inboxsdk__gmail_action ",this._element.innerHTML=`
			<div>
			</div>`,this._actionDescriptor=null}getElement(){return this._element}updateDescriptor(s){s?(0,u.default)(this._actionDescriptor,s)||(this._updateTitle(s.title),this._element.className="inboxsdk__gmail_action "+(s.className||""),this._actionDescriptor=s):this._actionDescriptor=s}setOnClick(s){this._element.onclick=s}_updateTitle(s){this._actionDescriptor&&this._actionDescriptor.title===s||((0,r.default)(this._element,"div").textContent=s)}});i.default=c},{"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":332,ud:455}],608:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../../lib/dom/block-and-reemit-keyboard-events"));i.default=class{constructor(){this._containerElement=document.createElement("div"),this._containerElement.setAttribute("class","inboxsdk__menu"),this._contentElement=document.createElement("div"),this._contentElement.setAttribute("class","inboxsdk__menuContent"),this._containerElement.appendChild(this._contentElement),(0,n.default)(this._containerElement)}destroy(){this._containerElement.remove()}getContainerElement(){return this._containerElement}getContentElement(){return this._contentElement}}},{"../../../lib/dom/block-and-reemit-keyboard-events":689,"@babel/runtime/helpers/interopRequireDefault":15}],609:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("lodash/isEqual")),r=t(e("../../../driver-common/update-icon")),c=t(e("../../../lib/dom/querySelectorOrFail")),s=(0,n.defn)(v,class{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._element=document.createElement("div"),this._element.className="inboxsdk__gmail_label ar as "+(o.classes||[]).join(" "),this._element.innerHTML=`
			<div class="at">
				<div class="au">
					<div class="av"></div>
				</div>
			</div>`,this._labelDescriptor={},this._iconSettings={}}getElement(){return this._element}updateLabelDescriptor(o){this._handleNewLabelDescriptor(o)}_handleNewLabelDescriptor(o){o?(o=Object.assign({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)",maxWidth:"90px"},o),(0,u.default)(this._labelDescriptor,o)||((0,r.default)(this._iconSettings,(0,c.default)(this._element,".at"),!1,o.iconClass,o.iconUrl,void 0,o.iconHtml),o.iconClass||o.iconUrl||o.iconHtml?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(o.backgroundColor),this._updateForegroundColor(o.foregroundColor),this._updateIconBackgroundColor(o.iconBackgroundColor),this._updateTitle(o.title,o.titleHtml),this._updateTextMaxWidth(o.maxWidth),this._labelDescriptor=o)):this._labelDescriptor={}}_updateTextMaxWidth(o){if(this._labelDescriptor.maxWidth===o)return;let d=this._element.querySelector(".av");d&&(d.style.maxWidth=o)}_updateBackgroundColor(o){if(this._labelDescriptor.backgroundColor===o)return;let d=(0,c.default)(this._element,".at");d.style.backgroundColor=o,d.style.borderColor=o,(0,c.default)(this._element,".au").style.borderColor=o}_updateForegroundColor(o){this._labelDescriptor.foregroundColor!==o&&((0,c.default)(this._element,".at").style.color=o)}_updateIconBackgroundColor(o){let d=this.getElement().querySelector(".inboxsdk__button_icon");d&&(d.style.backgroundColor=o||"")}_updateTitle(o,d){if(this._labelDescriptor.title===o&&this._labelDescriptor.titleHtml===d)return;if(d)return void((0,c.default)(this._element,".au").innerHTML=d||"");let a;try{a=(0,c.default)(this._element,".av")}catch{let f=(0,c.default)(this._element,".au");f.innerHTML="",a=document.createElement("div"),a.setAttribute("class","av"),f.appendChild(a)}a.textContent=o,this._element.children[0].setAttribute("data-tooltip",o)}});i.default=s},{"../../../driver-common/update-icon":680,"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":332,ud:455}],610:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/sortBy")),u=(t(e("kefir")),t(e("kefir-bus"))),r=e("ud"),c=t(e("./buttons/modal-button-view")),s=t(e("../../../widgets/buttons/basic-button-view-controller")),o=t(e("../../../lib/dom/querySelectorOrFail")),d=(0,r.defn)(v,class{constructor(a){this._setupModalContainerElement(a),this._processOptions(a),this._eventStream=(0,u.default)(),this._setupEventStream()}destroy(){this._modalContainerElement.remove(),this._eventStream.end()}getModalContainerElement(){return this._modalContainerElement}getEventStream(){return this._eventStream}_processOptions(a){this.setTitle(a.title),this.setContentElement(a.el),this.setButtons(a.buttons||[]),this.setChromeClass(a.chrome,a.showCloseButton,(a.buttons||[]).length>0)}setTitle(a){let p=(0,o.default)(this._modalContainerElement,"[role=heading]");a?(p.style.display="",p.textContent=a):p.style.display="none"}setContentElement(a){let p=(0,o.default)(this._modalContainerElement,".inboxsdk__modal_content");p.innerHTML="",typeof a=="string"?p.innerHTML=a:a instanceof Element&&p.appendChild(a)}setButtons(a){let p=(0,o.default)(this._modalContainerElement,".inboxsdk__modal_buttons");p.innerHTML="",a.length===0?(p.style.display="none",this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons")):(p.style.display="",this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons")),(0,n.default)(a,f=>f.orderHint||0).forEach(this._addButton.bind(this,p))}setChromeClass(a,p,f){this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom"),a===!1&&(this._modalContainerElement.classList.add("inboxsdk__modal_hideSides"),p||this._modalContainerElement.classList.add("inboxsdk__modal_hideTop"),f||this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom"))}_setupModalContainerElement(a){let p=a.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var f=`
    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">
      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow ${p}">
        <span class="Kj-JD-K7-K0" role="heading"></span>
        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>
      </div>
      <div class="Kj-JD-Jz inboxsdk__modal_content">
      </div>
      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>
    </div>
    `;this._modalContainerElement.innerHTML=f}_addButton(a,p){let f={...p};["blue","red","green"].includes(p.color)&&p.color,f.isPrimary=p.type==="PRIMARY_ACTION";let b=new c.default(f);f.buttonView=b,new s.default(f),p.type==="PRIMARY_ACTION"?a.insertBefore(b.getElement(),a.firstElementChild):a.appendChild(b.getElement())}_setupEventStream(){(0,o.default)(this._modalContainerElement,".inboxsdk__modal_close").addEventListener("click",a=>{this._eventStream.emit({eventName:"closeClick",domEvent:a})})}});i.default=d},{"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/basic-button-view-controller":780,"./buttons/modal-button-view":604,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/sortBy":350,ud:455}],611:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/last")),r=e("ud"),c=t(e("kefir")),s=t(e("kefir-bus")),o=t(e("kefir-stopper")),d=t(e("../../../lib/stream-wait-for")),a=t(e("../../../lib/dom/querySelectorOrFail")),p=t(e("../../../../common/find-parent")),f=t(e("../gmail-element-getter")),b=t(e("../../gmail/is-compose-titlebar-light-color")),_=(0,r.defn)(v,class{constructor(g,m){if((0,n.default)(this,"_eventStream",(0,s.default)()),(0,n.default)(this,"_stopper",(0,o.default)()),this._driver=g,this._element=Object.assign(document.createElement("div"),{className:"inboxsdk__mole_view "+(m.className||""),innerHTML:y(m)}),m.chrome===!1)this._element.classList.add("inboxsdk__mole_view_chromeless");else{(0,a.default)(this._element,".inboxsdk__mole_view_titlebar").addEventListener("click",C=>{this.setMinimized(!this.getMinimized()),C.preventDefault(),C.stopPropagation()}),(0,a.default)(this._element,".Hl").addEventListener("click",C=>{this.setMinimized(!0),C.preventDefault(),C.stopPropagation()}),(0,a.default)(this._element,".Hk").addEventListener("click",C=>{this.setMinimized(!1),C.preventDefault(),C.stopPropagation()}),(0,a.default)(this._element,".Ha").addEventListener("click",C=>{this.destroy(),C.preventDefault(),C.stopPropagation()}),m.titleEl?this._setTitleEl(m.titleEl):this.setTitle(m.title||""),m.minimizedTitleEl&&this._setMinimizedTitleEl(m.minimizedTitleEl);let w=m.titleButtons;if(w){let C=(0,a.default)(this._element,".inboxsdk__mole_title_buttons"),I=C.lastElementChild;w.forEach(S=>{let O=document.createElement("img");S.iconClass&&(O.className=S.iconClass),O.setAttribute("data-tooltip",S.title),O.addEventListener("click",A=>{A.preventDefault(),A.stopPropagation(),S.onClick.call(null)}),O.src=S.iconUrl,C.insertBefore(O,I)})}}(0,a.default)(this._element,".inboxsdk__mole_view_content").appendChild(m.el)}show(){let g=w=>{w.insertBefore(this._element,(0,u.default)(w.children));let C=(0,p.default)(w,I=>I.nodeName==="DIV"&&I.classList.contains("dw"));C&&C.classList.add("inboxsdk__moles_in_use")},m=f.default.getMoleParent();if(m)g(m);else{let w=(0,d.default)(()=>f.default.getMoleParent()).takeUntilBy(this._stopper).onValue(g);c.default.fromPromise(f.default.waitForGmailModeToSettle()).flatMap(()=>this._driver.delayToTimeAfterReady(1e4)).takeUntilBy(w).takeUntilBy(this._stopper).onValue(()=>{this._driver.getLogger().eventSdkActive("mole parent force load"),this._driver.openNewComposeViewDriver().then(C=>{C.close()})})}}setMinimized(g){if(g)this._element.classList.add("inboxsdk__minimized"),this._eventStream.emit({eventName:"minimize"});else{this._element.classList.remove("inboxsdk__minimized");let m=this._element.parentElement;m&&this._element.getBoundingClientRect().left<0&&m.insertBefore(this._element,(0,u.default)(m.children)),this._eventStream.emit({eventName:"restore"})}}getMinimized(){return this._element.classList.contains("inboxsdk__minimized")}setTitle(g){let m=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");m&&(m.textContent=g)}_setTitleEl(g){let m=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");m&&(m.textContent="",m.appendChild(g))}_setMinimizedTitleEl(g){let m=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");m&&(this._element.classList.add("inboxsdk__mole_use_minimize_title"),m.textContent="",m.appendChild(g))}getEventStream(){return this._eventStream}destroy(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}});function y(g){let m=!(0,b.default)();return`
    <div class="inboxsdk__mole_view_inner ${m?"inboxsdk__original_view":""}">
      ${function(w){if(w.chrome===!1)return"";{let C=!(0,b.default)();return`
      <div class="inboxsdk__mole_view_titlebar${C?" inboxsdk__original_view":""}">
        <div class="inboxsdk__mole_title_buttons${C?" inboxsdk__original_view":""}">
          <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize"><!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--><img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">
        </div>
        <h2 class="inboxsdk__mole_default"></h2>
        <h2 class="inboxsdk__mole_minimized"></h2>
      </div>`}}(g)}
      <div class="inboxsdk__mole_view_content ${m?"inboxsdk__original_view":""}"></div>
    </div>
  `}i.default=_},{"../../../../common/find-parent":474,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/stream-wait-for":739,"../../gmail/is-compose-titlebar-light-color":538,"../gmail-element-getter":532,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/last":342,ud:455}],612:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/sortBy")),r=t(e("lodash/escape")),c=t(e("asap")),s=(t(e("kefir")),t(e("kefir-bus"))),o=t(e("kefir-stopper")),d=t(e("../../../lib/dom/querySelectorOrFail")),a=t(e("./buttons/button-view")),p=t(e("../../../widgets/buttons/basic-button-view-controller"));i.default=class{constructor(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,n.default)(this,"_eventStream",(0,s.default)()),(0,n.default)(this,"_stopper",(0,o.default)()),this._setupElement(f)}destroy(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}getElement(){return this._element}getStopper(){return this._stopper}getEventStream(){return this._eventStream}anchor(f,b){if(f&&this._element){var _,y=f.getBoundingClientRect(),g=this._element.getBoundingClientRect();if(b&&b.position)switch(b.position){case"top":_={type:"top",value:this._getTopPositionBoundingBox(y,g)};break;case"bottom":_={type:"bottom",value:this._getBottomPositionBoundingBox(y,g)}}_||(_=this._getAutomaticPlacementBoundingBox(y,g));var m=this._containBoundingBox(_.value,b&&b.offset);this._setPositionAtBoundingBox(m),this._setArrowPosition(_.type,m,y)}}getContainerElement(){return this._element}getContentElement(){return(0,d.default)(this._element,".aRM")}close(){this.destroy()}_setupElement(f){if(this._element=document.createElement("div"),this._element.setAttribute("class","inboxsdk__tooltip"),f.el){let b=`<div class="T-P aRL">
						<div class="T-P-Jz-UR">
							<div class="aRM" tabindex="0">
							</div>
						</div>

						<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">
							<div class="T-P-atD"></div>
							<div class="T-P-atC"></div>
						</div>
					</div>`;this._element.innerHTML=b,this._element.classList.add("inboxdk__tooltip_content"),(0,d.default)(this._element,".aRM").appendChild(f.el)}else{let b=['<div class="T-P aRL">','<div class="T-P-Jz-UR">','<div class="aRM" tabindex="0">','<div class="aVn inboxsdk__tooltip_image">',"</div>",'<div class="aRR">',(0,r.default)(f.title||""),"</div>",'<div class="aRQ">',(0,r.default)(f.subtitle||""),"</div>",'<div class="inboxsdk__tooltip_button">',"</div>","</div>","</div>",'<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>','<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">','<div class="T-P-atD"></div>','<div class="T-P-atC"></div>',"</div>","</div>"].join("");this._element.innerHTML=b;let _=this._element.querySelector(".inboxsdk__tooltip_close");if(_&&_.addEventListener("click",y=>{this.destroy()}),f.imageUrl){let y=document.createElement("img");y.src=f.imageUrl,(0,d.default)(this._element,".inboxsdk__tooltip_image").appendChild(y),y.addEventListener("load",g=>{(0,c.default)(()=>{this._eventStream.emit({eventName:"imageLoaded"})})})}if(f.button){let y=Object.assign({},f.button);y.buttonColor="blue";let g=y.onClick;y.onClick=()=>{this.destroy(),g&&g()},y.buttonView=new a.default(y),new p.default(y),(0,d.default)(this._element,".inboxsdk__tooltip_button").appendChild(y.buttonView.getElement())}}}_getAutomaticPlacementBoundingBox(f,b){var _=[{type:"top",value:this._getTopPositionBoundingBox(f,b)},{type:"left",value:this._getLeftPositionBoundingBox(f,b)},{type:"right",value:this._getRightPositionBoundingBox(f,b)},{type:"bottom",value:this._getBottomPositionBoundingBox(f,b)}];return this._figureOutBestBoundingBox(_)}_getTopPositionBoundingBox(f,b){var _=f.top-b.height-9,y=f.left+f.width/2-b.width/2;return[{x:y,y:_},{x:y+b.width,y:_+b.height}]}_getRightPositionBoundingBox(f,b){var _=f.right+9,y=f.top+f.height/2-b.height/2;return[{x:_,y},{x:_+b.width,y:y+b.height}]}_getBottomPositionBoundingBox(f,b){var _=f.bottom+9,y=f.left+f.width/2-b.width/2;return[{x:y,y:_},{x:y+b.width,y:_+b.height}]}_getLeftPositionBoundingBox(f,b){var _=f.left-9-b.width,y=f.top+f.height/2-b.height/2;return[{x:_,y},{x:_+b.width,y:y+b.height}]}_figureOutBestBoundingBox(f){for(var b=0;b<f.length;b++)f[b].smallestDistance=this._getSmallestDistance(f[b]);return(0,u.default)(f,function(_){return _.smallestDistance}).reverse()[0]}_getSmallestDistance(f){var b=[f.value[0].y,f.value[0].x,document.body.clientWidth-f.value[1].x,document.body.clientHeight-f.value[1].y];return(0,u.default)(b,function(_){return _})[0]}_containBoundingBox(f,b){var _=f[1].y-f[0].y,y=f[1].x-f[0].x;return f[0].y<-1?(f[0].y=0,f[1].y=f[0].y+_):f[1].y>document.body.clientHeight&&(f[0].y=document.body.clientHeight-_,f[1].y=f[0].y+_),f[0].x<-1?(f[0].x=0,f[1].x=f[0].x+y):f[1].x>document.body.clientWidth&&(f[0].x=document.body.clientWidth-y-20,f[1].x=f[0].x+y),b&&(b.left&&(f[0].x+=b.left,f[1].x+=b.left),b.top&&(f[0].y+=b.top,f[1].y+=b.top)),f}_setPositionAtBoundingBox(f){this._element.style.left=f[0].x+"px",this._element.style.top=f[0].y+"px"}_setArrowPosition(f,b,_){var y={};switch(f){case"top":y.top=b[1].y,y.left=_.left+_.width/2;break;case"left":y.top=(b[0].y+b[1].y)/2-9,y.left=b[1].x;break;case"right":y.top=(b[0].y+b[1].y)/2-9,y.left=b[0].x-9+1;break;case"bottom":y.top=b[0].y-9+1,y.left=(b[0].x+b[1].x)/2}let g=(0,d.default)(this._element,".inboxsdk__tooltip_arrow");g.style.left=y.left+"px",g.style.top=y.top+"px"}}},{"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/basic-button-view-controller":780,"./buttons/button-view":600,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/escape":313,"lodash/sortBy":350}],613:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,n(e("kefir"));var u=n(e("kefir-bus")),r=n(e("../../../lib/fake-window-resize"));i.default=class{constructor(c){this._eventStream=(0,u.default)();let s=t.ResizeObserver;s&&(this._resizeObserver=new s(()=>{this.setTopMessageBarHeight()})),c.takeUntilBy(this._eventStream.filter(()=>!1).beforeEnd(()=>null)).onValue(o=>{if(o){if(o){var d=this._element;d||((d=this._element=document.createElement("div")).classList.add("inboxsdk__topMessageBar"),document.body.insertBefore(d,document.body.firstChild),document.body.classList.add("inboxsdk__hasTopMessageBar"),(0,r.default)()),o.el!==d.children[0]&&(d.innerHTML="",o.el&&(d.appendChild(o.el),this._resizeObserver&&this._resizeObserver.observe(d),this.setTopMessageBarHeight()))}}else this._element&&(this._element.remove(),this._element=null)})}destroy(){this._element&&(this._element.remove(),this._element=null),this._eventStream.end(),this._resizeObserver&&this._resizeObserver.disconnect(),document.querySelectorAll(".inboxsdk__topMessageBar").length===0?document.body.classList.remove("inboxsdk__hasTopMessageBar"):this.setTopMessageBarHeight(),(0,r.default)()}getEventStream(){return this._eventStream}remove(){this.destroy()}setTopMessageBarHeight(){let c=[...document.querySelectorAll(".inboxsdk__topMessageBar")].reduce((s,o)=>s+o.offsetHeight,0);document.body.style.setProperty("--inboxsdk__topMessageBar-height",`${c}px`)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../lib/fake-window-resize":715,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155}],614:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o,d){let a=new n.default(s,0);return(0,c.default)(o).take(1).map(p=>{let{el:f}=p;return f.getValue()}).onValue(p=>{if(a.getEventStream().filter(f=>f.eventName==="orderChanged").onValue(()=>(0,u.default)(d,a.getElement())),!p.contains(d)){let f=p.querySelectorAll(".inboxsdk__navItem_appContainer");if(f.length>0)f[f.length-1].insertAdjacentElement("afterend",d);else{let b=(0,r.default)(p,'ul > li > img[src*="ic_draft"]'),_=b.parentElement&&b.parentElement.parentElement;if(!_)throw new Error("could not locate insertion point");_.insertAdjacentElement("afterend",d)}}(0,u.default)(d,a.getElement())}),a},t(e("kefir"));var n=t(e("./views/inboxNavItemView")),u=t(e("../../lib/dom/insert-element-in-order")),r=t(e("../../lib/dom/querySelectorOrFail")),c=t(e("../../lib/toItemWithLifetimeStream"))},{"../../lib/dom/insert-element-in-order":694,"../../lib/dom/querySelectorOrFail":706,"../../lib/toItemWithLifetimeStream":740,"./views/inboxNavItemView":664,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],615:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){let s=null,o=r.getBCCRow(),d=(0,n.default)();return c.takeUntilBy(r.getStopper()).takeUntilBy(d).onValue(a=>{s&&(s.remove(),s=null),a&&(s=u(a),o.insertAdjacentElement("afterend",s))}),d.merge(r.getStopper()).take(1).onValue(()=>{s&&(s.remove(),s=null)}),()=>{d.destroy()}},t(e("closest-ng")),t(e("kefir"));var n=t(e("kefir-stopper"));let u=r=>{let{labelText:c,el:s}=r,o=document.createElement("div"),d=document.createElement("span"),a=document.createElement("div");return o.classList.add("inboxsdk__recipient_row"),d.classList.add("inboxsdk__recipient_label"),a.classList.add("inboxsdk__recipient_content"),c&&(d.textContent=c,o.appendChild(d)),s&&(a.appendChild(s),o.appendChild(a)),o}},{"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,kefir:158,"kefir-stopper":157}],616:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c,s,o){if((0,n.default)(Object.values(r.NATIVE_ROUTE_IDS),s))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!c.getCustomRouteIDs().has(s))throw new Error(`Invalid routeID: ${s}`);return"#"+(0,u.default)(s,o)};var n=t(e("lodash/includes")),u=t(e("../../lib/populateRouteID")),r=e("../../constants/router")},{"../../constants/router":492,"../../lib/populateRouteID":732,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":324}],617:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!c.getElementById("inboxsdk__style")){let s=c.createElement("style");if(s.id="inboxsdk__style",r.onValue(o=>{s.textContent=(0,u.default)(o)}),!c.head)throw new Error("missing head");c.head.appendChild(s)}};var n=t(e("ud-kefir")),u=t(e("../../lib/rewriteCssWithIdMap")),r=(0,n.default)(v,`.inboxsdk__appButton_container {
  position: absolute;
  right: 192px;
  top: 16px;
  white-space: nowrap;
}

.inboxsdk__appButton {
  position: relative;
  line-height: 0;
  margin-right: 16px;
  display: inline-block;
}

.inboxsdk__appButton .inboxsdk__button_iconImg {
  width: 24px;
  height: 24px;
}

.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active,
.inboxsdk__appButton.inboxsdk__button_icon:focus {
  outline: none;
}
.inboxsdk__compose_actionToolbar .inboxsdk__button_icon::before,
.inboxsdk__list_toolbar > .inboxsdk__button_icon::before,
.inboxsdk__navItem_accessory > .inboxsdk__button_icon::before,
.inboxsdk__appButton.inboxsdk__button_icon::before {
  content: ' ';
  position: absolute;
  top: -4px;
  bottom: -4px;
  left: -4px;
  right: -4px;
  margin: auto;
  padding: 4px;
  border-radius: 50%;
}
.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active::before,
.inboxsdk__appButton.inboxsdk__button_icon:focus::before {
  background-color: rgba(0, 0, 0, 0.1);
}
.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active::before,
.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus::before,
.inboxsdk__navItem_accessory > .inboxsdk__button_icon.inboxsdk__active::before,
.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus::before {
  background-color: rgba(0, 0, 0, 0.12);
}

.inboxsdk__appButton_tooltip_container {
  outline: none;
  right: 30px;
  position: fixed;
  z-index: 25;
  text-align: center;
}

.inboxsdk__appButton_tooltip {
  display: inline-block;
  max-width: 500px;
  white-space: initial;
  text-align: center;
  font: normal normal normal normal 16px / normal arial, sans-serif;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(0, 0, 0, 0.2);
  background: white;
}

.inboxsdk__compose_actionToolbar {
  display: inline-block;
}

/* custom view */

.inboxsdk__custom_view {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  /* needs to take up the whole screen so that it blocks clicks to elements behind it. */
  display: flex;
  display: -webkit-flex;
  min-height: 100%;
  background: rgb(242, 242, 242);
}

.IDMAP_custom_view_container {
  margin-top: 56px;
}

.IDMAP_custom_view_min_margins {
  flex: 1;
  -webkit-flex: 1;
  min-width: 0;
}

/* sidebar */

.IDMAP_app_sidebar {
  background: #f2f2f2;
  position: fixed;
  top: 56px;
  bottom: 0;
  right: 0;
  width: 232px;
  z-index: 5;
}

.IDMAP_app_sidebar_main {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  overflow-y: auto;
}

.IDMAP_app_sidebar_content_area {
  padding: 12px 8px;
}

.IDMAP_app_sidebar_container[data-open='false'] {
  display: none;
}

.IDMAP_app_sidebar_content_area_padding {
  -webkit-flex: 1;
  flex: 1;
}

.IDMAP_app_sidebar_content_panel {
  background: #f2f2f2;
}

/* thread sidebar icon */

.IDMAP_sidebar_iconArea {
  position: absolute;
  right: -16px;

  /* needed to prevent rendering bug in chrome where the element is
  visibly duplicated when the parent becomes position:fixed. */
  will-change: top;
}

.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {
  position: relative;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_icon {
  margin-top: 10px;
  transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  transition-delay: 0.01s;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);
  border: none;
  border-radius: 50%;
  background: #fff;
  height: 26px;
  width: 26px;
  overflow: hidden;
  padding: 0;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,
.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);
}

.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {
  width: 26px;
  height: 26px;
}

.inboxsdk__button_icon {
  -moz-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  cursor: pointer;
  position: relative;
}

.inboxsdk__button_iconImg {
  user-drag: none;
  -moz-user-select: none;
  -webkit-user-drag: none;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {
  display: inline-block;
  position: relative;
  width: 24px;
  height: 24px;
  opacity: 0.6;
  margin: 8px 12px 4px 2px;
  vertical-align: middle;
}
.inboxsdk__compose_actionToolbar .inboxsdk__button_icon.inboxsdk__active,
.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:hover,
.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus {
  opacity: 1;
  outline: none;
}
.inboxsdk__compose_actionToolbar
  .inboxsdk__button_icon.inboxsdk__active::before,
.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus::before {
  background-color: rgba(0, 0, 0, 0.1);
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {
  width: 24px;
  height: 24px;
  vertical-align: middle;
}

.inboxsdk__compose_customSendContainer {
  display: inline-block;
  margin: 0;
  line-height: 2.8;
}

.inboxsdk__recipient_row {
  padding: 0 20px;
  display: -webkit-flex;
  display: flex;
  -webkit-flex: 0 0 auto;
  flex: 0 0 auto;
}

.inboxsdk__recipient_row > .inboxsdk__recipient_label {
  color: #757575;
  display: inline-block;
  padding-right: 6px;
  padding-top: 9px;
  min-width: 34px;
  -webkit-flex-grow: 0;
  flex-grow: 0;
}

.inboxsdk__recipient_row > .inboxsdk__recipient_content {
  display: flex;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-direction: column;
  flex-direction: column;
  position: relative;
  padding: 7px 0;
  min-height: 35px;
  box-sizing: border-box;
}

.inboxsdk__compose_forceRecipientRowHidden {
  display: none !important;
}

.inboxsdk__list_toolbar > .inboxsdk__button_icon {
  display: inline-block;
  margin-left: 8px;
  vertical-align: middle;
  width: 24px;
  height: 24px;
  opacity: 0.6;
  background-position: center;
  -webkit-mask-position: center;
  mask-position: center;
}

.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active,
.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus,
.inboxsdk__list_toolbar > .inboxsdk__button_icon:hover {
  outline: none;
  opacity: 1;
}

.inboxsdk__list_toolbar > .inboxsdk__button_icon > img {
  max-width: 24px;
  max-height: 24px;
}

.inboxsdk__dropdown {
  padding: 0;
  margin: 0;
  overflow: visible;
  z-index: 100;
  outline: none;
}
.inboxsdk__dropdown_content {
  background: #fff;
  color: #212121;
  min-width: 1em;
  min-height: 1em;
  padding: 0;
  margin: 0;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);
  border-radius: 2px;
  position: relative;
}

.inboxsdk__tooltip {
  z-index: 1300;
  position: fixed;
  /*transition: left 200ms ease, top 200ms ease;*/
  background: white;
  min-width: 1em;
  min-height: 1em;
  padding: 29px 36px 32px;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(0, 0, 0, 0.2);
  font: normal normal normal normal 16px / normal arial, sans-serif;
}

.inboxsdk__tooltip.inboxsdk__tooltip_chromeless {
  padding: 0;
}

.inboxsdk__tooltip > .inboxsdk__close_button {
  position: absolute;
  top: 4px;
  right: 4px;
}

.inboxsdk__tooltip h1 {
  color: #333;
  font-size: 18px;
  font-weight: normal;
  margin: 13px 0 0;
}

.inboxsdk__tooltip .inboxsdk__subtitle {
  color: #777;
  font-size: 13px;
  margin: 3px 0 14px 0;
}

.inboxsdk__tooltip_arrow {
  z-index: 1301;
  position: fixed;
  width: 0;
  height: 0;
  border: none;
  border-color: white; /* You can override this to change the tooltip's color! */
}
.inboxsdk__tooltip_arrow::before {
  content: ' ';
  position: absolute;
  border: 8px solid;
}
.inboxsdk__tooltip_arrow::after {
  content: ' ';
  position: absolute;
  border: 7px solid;
  border-color: transparent;
}
.inboxsdk__tooltip_arrow.inboxsdk__top::before {
  border-bottom-width: 0;
  border-color: rgba(0, 0, 0, 0.2) transparent;
  left: -9px;
}
.inboxsdk__tooltip_arrow.inboxsdk__top::after {
  border-bottom-width: 0;
  border-top-color: inherit;
  border-bottom-color: inherit;
  left: -8px;
}
.inboxsdk__tooltip_arrow.inboxsdk__bottom::before {
  border-top-width: 0;
  border-color: rgba(0, 0, 0, 0.2) transparent;
  top: -8px;
  left: -9px;
}
.inboxsdk__tooltip_arrow.inboxsdk__bottom::after {
  border-top-width: 0;
  border-top-color: inherit;
  border-bottom-color: inherit;
  top: -7px;
  left: -8px;
}
.inboxsdk__tooltip_arrow.inboxsdk__left {
}
.inboxsdk__tooltip_arrow.inboxsdk__left::before {
  border-right-width: 0;
  border-color: transparent rgba(0, 0, 0, 0.2);
  top: -8px;
}
.inboxsdk__tooltip_arrow.inboxsdk__left::after {
  border-right-width: 0;
  border-left-color: inherit;
  border-right-color: inherit;
  top: -7px;
}
.inboxsdk__tooltip_arrow.inboxsdk__right {
}
.inboxsdk__tooltip_arrow.inboxsdk__right::before {
  border-left-width: 0;
  border-color: transparent rgba(0, 0, 0, 0.2);
  top: -8px;
  left: -8px;
}
.inboxsdk__tooltip_arrow.inboxsdk__right::after {
  border-left-width: 0;
  border-left-color: inherit;
  border-right-color: inherit;
  top: -7px;
  left: -7px;
}

.inboxsdk__tooltip_img {
  max-width: 500px;
  max-height: 300px;
}

/* modal */
.inboxsdk__modal_fullscreen {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 503;
  display: -webkit-flex;
  display: flex;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  align-items: center;
  padding: 110px 50px 50px 50px;
  pointer-events: none;
}
.inboxsdk__modal_container {
  position: relative;
  background: #fff;
  color: #000;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(0, 0, 0, 0.333);
  outline: 0;
  padding: 30px 42px;
  pointer-events: auto;
}
.inboxsdk__modal_toprow [role='heading'] {
  font-size: 16px;
  line-height: 24px;
  margin: 0 0 16px;
  font: bold 1em arial, sans-serif;
  padding-right: 20px;
}
.inboxsdk__modal_content {
  margin: 30px 0;
  line-height: 1.4em;
  word-wrap: break-word;
  font: normal 0.8em arial, sans-serif;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless
  .inboxsdk__modal_container {
  padding-left: 0;
  padding-right: 0;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless
  .inboxsdk__modal_content {
  margin-left: 0;
  margin-right: 0;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)
  .inboxsdk__modal_container {
  padding-top: 0;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)
  .inboxsdk__modal_content {
  margin-top: 0;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_hasButtons)
  .inboxsdk__modal_container {
  padding-bottom: 0;
}
.inboxsdk__modal_fullscreen:not(.inboxsdk__modal_hasButtons)
  .inboxsdk__modal_content {
  margin-bottom: 0;
}
.inboxsdk__modal_buttons input {
  margin-right: 5px;
}
.inboxsdk__modal_buttons input.inboxsdk__primary {
  margin-right: 7px;
}
.inboxsdk__modal_toprow .inboxsdk__close_button {
  position: absolute;
  right: 0;
  top: 0;
  margin: 17px;
}
.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)
  .inboxsdk__modal_toprow
  .inboxsdk__close_button {
  display: none;
}
.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {
  display: -webkit-flex;
  display: flex;
}

.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {
  -webkit-flex: 1;
  flex: 1;
  width: 0;
  word-wrap: break-word;
}

.inboxsdk__attachment_card {
  cursor: pointer;
  display: inline-block;
  position: relative;
  text-decoration: none;
  vertical-align: top;
  margin-right: 12px;
  margin-bottom: 12px;

  box-shadow: 0 0 1px rgba(0, 0, 0, 0.11), 0 1px 2px rgba(0, 0, 0, 0.22);
  box-sizing: border-box;
  overflow: hidden;
  height: 88px;
  width: 132px;
  z-index: 0;
  justify-content: center;
  background: rgba(0, 0, 0, 0.03);
  border-radius: 2px;
  transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1),
    outline-color 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid transparent;
  outline: 1px solid transparent;
}
.inboxsdk__attachment_card:hover {
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.13), 0 3px 6px rgba(0, 0, 0, 0.26);
}
.inboxsdk__attachment_card:active,
.inboxsdk__attachment_card:focus {
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.3);
  border-color: #f2f2f2;
  outline-color: #4285f4;
}
.inboxsdk__attachment_card_nohover,
.inboxsdk__attachment_card_hover_overlay {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 12px;
}
.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay {
  background: rgba(255, 255, 255, 0.7);
}
.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay,
.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_nohover {
  display: none;
}
.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_hover_overlay {
  display: block;
}
.inboxsdk__attachment_card_buttons {
  line-height: normal;
  position: absolute;
  bottom: 6px;
  left: 12px;
  right: 6px;
}
.inboxsdk__attachment_card_button {
  cursor: pointer;
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid #c6c6c6;
  border-radius: 3px;
  margin-right: 3px;
  box-sizing: content-box;
  width: 30px;
  height: 24px;
  padding: 0;
  color: #333;
  vertical-align: top;
  text-align: center;
}
.inboxsdk__attachment_card_button:hover {
  background: rgba(0, 0, 0, 0.8);
  border-color: rgba(0, 0, 0, 0.8);
}
.inboxsdk__attachment_card_button > div {
  height: 21px;
  width: 21px;
  display: inline-block;
  vertical-align: middle;
}
.inboxsdk__attachment_card_button > img {
  max-height: 16px;
  max-width: 16px;
}
.inboxsdk__attachment_card_title {
  margin-top: 2px;
  line-height: 20px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: #212121;
}
.inboxsdk__attachment_card_description {
  color: #757575;
  line-height: 16px;
  margin-top: 23px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.inboxsdk__attachment_card_description > img {
  display: inline-block;
  margin-right: 8px;
  vertical-align: middle;
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  height: 16px;
  width: 16px;
}
.inboxsdk__attachment_card_description > span {
  vertical-align: middle;
}

.inboxsdk__attachment_overlay_button {
  border: none;
  cursor: pointer;
  margin-left: 8px;
  background-color: rgba(255, 255, 255, 0);
  box-sizing: border-box;
  border-radius: 2px;
  height: 40px;
  min-width: 40px;
  padding: 8px 0;
  color: #333;
  vertical-align: middle;
  text-align: center;
  opacity: 0.87;
  transition: background-color 0.1s, opacity 0.1s;
}
.inboxsdk__attachment_overlay_button:hover,
.inboxsdk__attachment_overlay_button:focus {
  outline: none;
  opacity: 1;
  color: rgba(255, 255, 255, 1);
  background-color: rgba(255, 255, 255, 0.25);
}
.inboxsdk__attachment_overlay_button > img {
  display: inline-block;
  vertical-align: middle;
  height: 24px;
  width: 24px;
}

.inboxsdk__search_suggestion_group {
  border-top: 1px solid #ddd;
  margin-top: 6px;
  padding-top: 6px;
}

/*
When we're displaying custom results alongside Inbox's native results,
we need to put some padding/margin/border above the first group of custom results
to separate them from the native ones. When Inbox doesn't have any results to show,
however, we need to remove all that visual separation. Since the first group
of custom results will also be the first element in the container in that case
first-child will do the trick.
*/
.inboxsdk__search_suggestion_group:first-child {
  border-top: 0;
  margin-top: 0;
  padding-top: 0;
}

.inboxsdk__search_suggestion {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  min-height: 37px;
  padding: 5px 24px;
  box-sizing: border-box;
  cursor: pointer;
  overflow: hidden;
}

.inboxsdk__search_suggestion.inboxsdk__selected {
  background-color: rgba(0, 0, 0, 0.03);
}

.inboxsdk__search_suggestion > img {
  opacity: 0.6;
  flex-shrink: 0;
  border-radius: 12px;
  height: 24px;
  width: 24px;
  margin-right: 24px;
  -webkit-user-drag: none;
}

.inboxsdk__search_suggestion > span {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.inboxsdk__search_suggestion_name {
  font-weight: bold;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.inboxsdk__search_suggestion_desc {
  color: #757575;
  font-size: 0.95em;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.inboxsdk__thread_row_force_toolbar_visible {
  display: block !important;
}

.inboxsdk__inbox_thread_row_label {
  border-radius: 2px;
  display: -webkit-flex;
  font-size: 11px;
  display: flex;
  margin-right: 0.333em;
  outline: 1px solid transparent;
  padding: 0 8px;
  -webkit-flex: 0 0 auto;
  flex: 0 0 auto;
  -webkit-align-items: center;
  align-items: center;
}

.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon,
.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {
  height: 11px;
  width: 11px;
}

.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon {
  margin-right: 5px;
}

.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {
  position: absolute;
}

.inboxsdk__thread_row_icon_wrapper {
  width: 20px;
  min-width: 20px;
  min-height: 20px;
  margin-right: 5px;
  position: relative;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon {
  height: 20px;
  width: 20px;
  margin-top: -10px;
  position: absolute;
  top: 50%;
  overflow: hidden;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
}

.inboxsdk__thread_row_draft_label_replaced
  > span:not(.inboxsdk__thread_row_custom_draft_label) {
  display: none;
}

.inboxsdk__thread_row_custom_draft_label {
  color: rgb(210, 63, 49);
}

.inboxsdk__thread_row_draft_count_replaced
  span:not(.inboxsdk__thread_row_custom_draft_count) {
  display: none;
}

.inboxsdk__thread_row_custom_draft_count {
  color: rgb(117, 117, 117);
  font-weight: normal;
  -webkit-flex-shrink: 0;
  flex-shrink: 0;
}

.inboxsdk__navItem_appContainer {
  border-bottom: 1px solid #ddd;
  box-sizing: border-box;
  list-style: none;
  padding: 0 0 8px 0;
  margin: 13px 0;
  position: relative;
}

.inboxsdk__navItem_appContainer:empty {
  display: none;
}

.inboxsdk__navItem_appContainer:focus,
.inboxsdk__navItem_wrapper:focus,
.inboxsdk__navItem_name:focus,
.inboxsdk__navItem_subNav:focus {
  outline: none;
}

.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)
  > .inboxsdk__navItem_subNav,
.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)
  > .inboxsdk__navItem
  > .inboxsdk__navItem_expander,
.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)
  > .inboxsdk__navItem
  > .inboxsdk__navItem_expander
  > svg {
  display: none;
}

.inboxsdk__navItem {
  cursor: pointer;
  align-items: center;
  -webkit-align-items: center;
  display: -webkit-flex;
  display: flex;
  padding-left: 16px;
  padding-right: 12px;
}

.inboxsdk__navItem:not(.inboxsdk__navItem_link):hover {
  background-color: rgba(0, 0, 0, 0.03);
  border-radius: 2px;
}

.inboxsdk__navItem:focus {
  background-color: rgba(0, 0, 0, 0.05);
  outline: 2px solid transparent;
}

.inboxsdk__navItem.inboxsdk__navItem_active {
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 2px;
  color: #212121;
  font-weight: bold;
}

.inboxsdk__navItem_expander {
  position: relative;
  width: 24px;
  height: 24px;
  margin-right: 24px;
  border-radius: 50%;
  -moz-user-select: none;
  -webkit-user-select: none;
  user-select: none;
}

.inboxsdk__navItem_expander:hover {
  background-color: rgba(0, 0, 0, 0.12);
}

.inboxsdk__navItem_expander > svg {
  width: 100%;
  height: 100%;
  transition: transform 150ms ease-out;
}

.inboxsdk__navItem_expander > svg > polygon {
  fill: #616161;
}

.inboxsdk__navItem_wrapper.inboxsdk__navItem_collapsed
  > .inboxsdk__navItem
  > .inboxsdk__navItem_expander
  > svg {
  transform: rotate(-90deg);
}

.inboxsdk__navItem_name {
  display: inline-block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  -webkit-flex: 1;
  flex: 1;
}

.inboxsdk__navItem_hasIcon > .inboxsdk__navItem_name {
  padding-left: 24px;
}

.inboxsdk__navItem_level0:not(.inboxsdk__navItem_disabled):not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)
  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon),
.inboxsdk__navItem_level1:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)
  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon) {
  padding-left: 64px;
}

.inboxsdk__navItem_link > .inboxsdk__navItem_name {
  color: #3c80f6;
}

.inboxsdk__navItem_link:hover > .inboxsdk__navItem_name,
.inboxsdk__navItem_link:focus > .inboxsdk__navItem_name,
.inboxsdk__navItem_link:active > .inboxsdk__navItem_name {
  color: #1c3aa9;
}

.inboxsdk__navItem .inboxsdk__button_icon,
.inboxsdk__navItem .inboxsdk__button_iconImg {
  width: 24px;
  height: 24px;
}

.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_icon,
.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_iconImg {
  width: 18px;
  height: 18px;
}

.inboxsdk__navItem > .inboxsdk__navItem_accessory {
  line-height: 18px;
  display: none;
}

.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus {
  outline: 2px solid transparent;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem,
.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:hover,
.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:focus,
.inboxsdk__navItem_level0.inboxsdk__navItem_disabled
  > .inboxsdk__navItem:active {
  background-color: transparent;
  border-radius: 0;
  outline: none;
  font-size: 0.9em;
  font-weight: normal;
  line-height: 24px;
  white-space: normal;
  outline: none;
  cursor: default;
  padding-left: 16px;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_disabled {
  border-top: 1px solid #ddd;
  margin: 13px 0;
  padding-top: 13px;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:first-child {
  border-top: none;
  margin-top: 0;
  padding-top: 0;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:last-child {
  margin-bottom: 0;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_disabled
  > .inboxsdk__navItem
  > .inboxsdk__button_icon {
  display: none;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem
  > .inboxsdk__navItem_expander {
  display: none;
}

.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem
  > .inboxsdk__navItem_name,
.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem:hover
  > .inboxsdk__navItem_name,
.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem:focus
  > .inboxsdk__navItem_name,
.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem:active
  > .inboxsdk__navItem_name {
  color: #616161;
}

.inboxsdk__navItem_wrapper.inboxsdk__navItem_hasAccessory
  > .inboxsdk__navItem
  > .inboxsdk__navItem_accessory {
  display: block;
  position: relative;
}

.inboxsdk__navItem_accessory > .inboxsdk__button_icon {
  opacity: 0;
}

.inboxsdk__navItem:hover
  > .inboxsdk__navItem_accessory
  > .inboxsdk__button_icon,
.inboxsdk__navItem.inboxsdk__navItem_active
  > .inboxsdk__navItem_accessory
  > .inboxsdk__button_icon {
  opacity: 0.6;
}

.inboxsdk__navItem
  > .inboxsdk__navItem_accessory
  > .inboxsdk__button_icon:hover,
.inboxsdk__navItem
  > .inboxsdk__navItem_accessory
  > .inboxsdk__button_icon:focus,
.inboxsdk__navItem
  > .inboxsdk__navItem_accessory
  > .inboxsdk__button_icon.inboxsdk__active {
  opacity: 1;
}

.inboxsdk__navItem_subNav,
.inboxsdk__navItem_subNavInner {
  overflow: hidden;
}

.inboxsdk__navItem_subNav {
  transition: height 150ms ease-in-out;
}

.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren
  .inboxsdk__navItem_subNav {
  padding-left: 48px;
}

.inboxsdk__navItem_level2.inboxsdk__navItem_hasChildren
  .inboxsdk__navItem_subNav {
  padding-left: 34px;
}

.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem_subNav {
  padding-left: 48px;
}

.inboxsdk__navItem_level2 {
  line-height: 26px;
}

.inboxsdk__navItem_level2 .inboxsdk__navItem_expander {
  margin-right: 10px;
}

.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren
  > .inboxsdk__navItem_hasIcon
  > .inboxsdk__navItem_name,
.inboxsdk__navItem_level2
  > .inboxsdk__navItem_hasIcon
  > .inboxsdk__navItem_name,
.inboxsdk__navItem_level3
  > .inboxsdk__navItem_hasIcon
  > .inboxsdk__navItem_name {
  padding-left: 10px;
}

.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_icon,
.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_iconImg,
.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_icon,
.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_iconImg {
  width: 18px;
  height: 18px;
}

/* appid warning inbox specific parts */
.inboxsdk__appid_warning {
  margin: 68px 240px -68px;
}
.inboxsdk__appid_warning .inboxsdk__close_button {
  float: right;
}

/* mole */

.inboxsdk__mole_view {
  box-sizing: border-box;
  direction: ltr;
  margin-right: 15px;
  display: table-cell;
}

.inboxsdk__mole_view_mid {
  position: relative;
}

.inboxsdk__mole_view_inner {
  position: absolute;
  bottom: 0;
  right: 0;
  outline: none;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.45);
  border-top-left-radius: 7.5px;
  border-top-right-radius: 7.5px;
  transform: translateZ(0);
  background: white;
  /* copied from the compose's CSS */
  max-height: calc(100vh - 56px - 20px - 24px - 1px - 8px);
}

.inboxsdk__mole_view_titlebar {
  background: #424242;
  color: #fff;
  height: 18px;
  line-height: 18px;
  outline: none;
  padding: 11px 20px;
  transform: translateZ(0);
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
  display: -webkit-flex;
  display: flex;
}

.inboxsdk__mole_view_title {
  display: inline-block;
  flex: 1;
  -webkit-flex: 1;
  height: 18px;
  overflow: hidden;
  padding: 0 10px 0 0;
  text-overflow: ellipsis;
  vertical-align: top;
  white-space: nowrap;

  /* Because of flex, the title can become wider than this if the mole contents are */
  width: 98px;
}

.inboxsdk__mole_title_buttons > button {
  height: 24px;
  width: 24px;
  opacity: 0.6;
  padding: 0 0 3px 7px;

  margin-right: 4px;
  vertical-align: top;

  user-drag: none;
  -webkit-user-drag: none;
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -moz-user-select: none;

  outline: none;
  background-color: transparent;
  border: none;
  cursor: pointer;
}

.inboxsdk__mole_title_buttons > button:focus,
.inboxsdk__mole_title_buttons > button:hover {
  opacity: 1;
  outline: none;
}

.inboxsdk__mole_title_buttons
  > button.inboxsdk__mole_custom_title_button
  > img {
  width: 18px;
  height: 18px;
}

.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content {
  display: none;
}
`)},{"../../lib/rewriteCssWithIdMap":734,"@babel/runtime/helpers/interopRequireDefault":15,"ud-kefir":454}],618:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){let c=new n.default("appToolbarLocation");c.run("children check",()=>{if(r.childElementCount<2)throw new Error("expected more children")}),c.run("position check",()=>{let d=r.getBoundingClientRect();if(d.top>100)throw new Error("expected element to border top of screen");if(window.innerWidth-d.right>100)throw new Error("expected element to border right side of screen");if(d.width>500)throw new Error("expected element to span only the right of the screen");if(d.height>150)throw new Error("expected element to span only the right of the screen")});let s=c.run("chatSidebarButton",()=>(0,u.default)(r,'div[role=button][jsaction*="global.toggle_chat_roster"]')),o=1-c.errorCount()/c.runCount();return{elements:{chatSidebarButton:s},score:o,errors:c.getErrorLogs()}};var n=t(e("../../../../lib/ErrorCollector")),u=t(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15}],619:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){let r=new n.default("attachmentCard");r.run("tabindex",()=>{if(!u.hasAttribute("tabindex"))throw new Error("expected tabindex")});let c=1-r.errorCount()/r.runCount();return{elements:{},attributes:{type:"FILE"},score:c,errors:r.getErrorLogs()}};var n=t(e("../../../../lib/ErrorCollector"));t(e("../../../../lib/dom/querySelectorOne")),t(e("bignumber.js"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15,"bignumber.js":43}],620:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("transducers.js")),r=n(e("../../../../lib/ErrorCollector"));n(e("../../../../lib/dom/querySelectorOne"));var c=(0,e("ud").defn)(v,function(s){let o=new r.default("attachmentOverlay");o.run("tabindex",()=>{if(!s.hasAttribute("tabindex"))throw new Error("expected tabindex")});let d=o.run("downloadButton",()=>{let a=u.default.toArray(Array.prototype.slice.call(s.querySelectorAll("div[role=button][tabindex][data-tooltip]:not([aria-disabled=true]):not([aria-pressed]):not([aria-expanded])")),u.default.compose(u.default.filter(p=>p.childElementCount===1&&p.firstElementChild.childElementCount===0),u.default.filter(p=>t.document?!(p.getBoundingClientRect().top>100):p.parentElement.classList.contains("ndfHFb-c4YZDc-Wrql6b-C7uZwb-b0t70b")),u.default.filter(p=>{let f=Array.prototype.indexOf.call(p.parentElement.children,p),b=Array.prototype.filter.call(p.parentElement.children,(_,y)=>y>f&&_.nodeName==="DIV")[0];return b&&b.getAttribute("aria-haspopup")==="true"}),u.default.take(1)))[0];if(!a)throw new Error("Failed to find element");if(a.getAttribute("aria-label")==="Print")throw new Error("Found print button instead");return a});return{elements:{downloadButton:d,buttonContainer:d?d.parentElement:null},attributes:{},score:1-o.errorCount()/o.runCount(),errors:o.getErrorLogs()}});i.default=c}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15,"transducers.js":453,ud:455}],621:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../../../lib/ErrorCollector"));t(e("../../../../lib/dom/querySelectorOne"));var u=(0,e("ud").defn)(v,function(r){let c=new n.default("chatSidebar");return c.run("position:fixed",()=>{if(getComputedStyle(r.parentElement).position!=="fixed")throw new Error("expected position:fixed in parent")}),c.run("id",()=>{if(!r.id)throw new Error("expected id")}),{elements:{},attributes:{},score:1-c.errorCount()/c.runCount(),errors:c.getErrorLogs()}});i.default=u},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],622:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../../../lib/ErrorCollector")),u=t(e("../../../../lib/dom/querySelectorOne")),r=t(e("closest-ng")),c=(0,e("ud").defn)(v,function(s){let o=new n.default("compose"),d=s.getAttribute("role")!=="dialog",a=o.run("send button",()=>(0,u.default)(s,'div[jstcache] > div[role=button][jsaction$=".send"], div[jstcache] > div[role=button][disabled]:not([title]):not([data-tooltip])')),p=o.run("attach button",()=>(0,u.default)(s,'div[role=button][jsaction$=".attach"]')),f=o.run("body",()=>(0,u.default)(s,'div[contenteditable][g_editable], div[id][tabindex][aria-label][jsaction*=".quick_compose_handle_input"]')),b=d?null:o.run("subject",()=>{let U=(0,u.default)(s,'div[jstcache][jsan] > div > input[type=text][title][placeholder][jsaction*="input:"]');if(!(U instanceof HTMLInputElement))throw new Error("Wrong type");return U}),_=d?o.run("pop-out button",()=>(0,u.default)(s,'button[jsaction$=".quick_compose_popout_mole"]')):null,y=o.run("discard button",()=>(0,u.default)(s,'button[jsaction$=".discard_draft"]')),g=d?null:o.run("title bar",()=>(0,u.default)(s,'div[jsaction$=".focus_mole"]')),m=d?null:o.run("fullscreen button",()=>(0,u.default)(s,'button[jsaction$=".toggle_full_screen"]')),w=d?null:o.run("fullscreen button image",()=>(0,u.default)(s,'button[jsaction$=".toggle_full_screen"] img')),C=d?null:o.run("close button",()=>(0,u.default)(s,'div[jstcache][jsan][jsaction] > button[jsaction$=".close_mole"]')),I=d?null:o.run("minimize button",()=>(0,u.default)(s,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"]')),S=d?null:o.run("minimize button image",()=>(0,u.default)(s,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"] img')),O=d?null:o.run("body placeholder",()=>{let U=f&&f.previousElementSibling;if(!(U instanceof HTMLElement)||U.nodeName!=="LABEL")throw new Error(`compose body placeholder wrong type ${U?U.nodeName:"undefined"}`);return U}),A=s.querySelector("div[role=button][jsaction*=toggle_custom_from_menu]"),E=A?o.run("from picker email span",()=>(0,u.default)(A,"span")):null,D=d?null:o.run("recipient fields",()=>{let U=s.querySelectorAll("input[type=text][role=combobox]");if(U.length!=3)throw new Error(`Found ${U.length} recipient fields, expected 3`);return U}),[P,j,k]=D||[],M=d?null:o.run("toggle cc/bcc button",()=>(0,u.default)(s,'button[jsaction*=".toggle_cc_bcc"]')),R=d?null:o.run("to row",()=>{if(!P)throw new Error("Could not locate To input");let U=(0,r.default)(P,'div > button[jsaction$=".toggle_cc_bcc"] + div'),W=U&&U.parentElement;if(!(W instanceof HTMLElement))throw new Error("Could not locate To row");return W}),V=d?null:o.run("cc row",()=>{if(!j)throw new Error("Could not locate CC input");let U=(0,r.default)(j,"div[class] > label + div"),W=U&&U.parentElement;if(!(W instanceof HTMLElement))throw new Error("Could not locate CC row");return W}),T=d?null:o.run("bcc row",()=>{if(!k)throw new Error("Could not locate BCC input");let U=(0,r.default)(k,"div[class] > label + div"),W=U&&U.parentElement;if(!(W instanceof HTMLElement))throw new Error("Could not locate BCC row");return W});return{elements:{sendBtn:a,attachBtn:p,body:f,subject:b,popOutBtn:_,discardBtn:y,titleBar:g,toggleFullscreenButton:m,toggleFullscreenButtonImage:w,closeBtn:C,minimizeBtn:I,minimizeBtnImage:S,bodyPlaceholder:O,fromPicker:A,fromPickerEmailSpan:E,toInput:P,ccInput:j,bccInput:k,toRow:R,ccRow:V,bccRow:T,toggleCcBccButton:M},attributes:{isInline:d},score:1-o.errorCount()/o.runCount(),errors:o.getErrorLogs()}});i.default=c},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,ud:455}],623:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){let s=new u.default("compose");s.run("tabindex",()=>{if(!c.hasAttribute("tabindex"))throw new Error("expected tabindex")});let o=s.run("message id",()=>{let I=/msg-[^:]+:[^:\d]*\d+/.exec(c.getAttribute("data-msg-id")||"");if(!I)throw new Error("message id regex failed");return I[0]}),d=s.run("heading",()=>{let I=c.querySelector("div[role=heading]");if(!I)throw new Error("failed to find heading");return I}),a=c.querySelector("div[role=heading] ~ div:not(:empty)"),p=c.querySelector('div[jsaction$=".message_toggle_collapse"]'),f=a!=null&&(p==null||p.getAttribute("role")==="heading"),b=f?"EXPANDED":a!=null?"COLLAPSED":"HIDDEN",_=f&&d&&!d.querySelector("span[email]"),y=!_&&d&&a?s.run("sender",()=>(0,r.default)(d,"[email]:first-child")):null,g=_?null:c.querySelectorAll("[role=heading] [email]:not(:first-child), [role=heading] + div [email]"),m=_||!a||b!=="EXPANDED"?null:s.run("attachments area",()=>{let I=(0,n.default)(a.parentElement.querySelectorAll("section:last-child"));if(!I)throw new Error("element not found");return I}),w={heading:d,body:a,sender:y,toggleCollapse:p,attachmentsArea:m},C=1-s.errorCount()/s.runCount();return{elements:w,attributes:{loaded:f,viewState:b,inboxMessageId:o,recipientElements:g,isDraft:_},score:C,errors:s.getErrorLogs()}};var n=t(e("lodash/last")),u=t(e("../../../../lib/ErrorCollector")),r=t(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/last":342}],624:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){let u=[];n.childElementCount<2&&u.push("expected more children");let r=n.getBoundingClientRect();return r.top>100&&u.push("expected element to border top of screen"),window.innerWidth-r.right>100&&u.push("expected element to border right side of screen"),window.innerHeight-r.bottom>100&&u.push("expected element to border bottom side of screen"),{elements:{},score:u.length===0?1:0,errors:u}},t(e("../../../../lib/ErrorCollector")),t(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15}],625:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){let c=new n.default("searchBar"),s=r.getBoundingClientRect();return c.run("position check",()=>{if(s.top>100)throw new Error("expected element to border top of screen")}),{elements:{searchInput:c.run("searchInput",()=>(0,u.default)(r,"div[role=search] input[role=combobox]"))},score:1-c.errorCount()/c.runCount(),errors:c.getErrorLogs()}};var n=t(e("../../../../lib/ErrorCollector")),u=t(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15}],626:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){let s=new n.default("threadRow"),o=!c.hasAttribute("aria-multiselectable");s.run("tabindex",()=>{if(!c.hasAttribute("tabindex"))throw new Error("expected tabindex")});let d=s.run("subject",()=>(0,u.default)(c,'div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child) > div:not([style]):not(:first-child):not(:last-child):not([class*="inboxsdk"])')),a=s.run("checkbox",()=>(0,u.default)(c,"div[jsaction] > div > div[jsaction] > div[role=checkbox]")),p=s.run("recipients",()=>c.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span[email]")),f=s.run("isOnlyDraft",()=>!(p&&p.length>0)),b=s.run("draftLabels",()=>{let E=c.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span");return Array.from(E).filter(D=>{let P=getComputedStyle(D).getPropertyValue("color"),j=r.exec(P);if(!j)throw new Error("Failed to read color string");let k=+j[1],M=+j[2],R=+j[3];return k>200&&M<100&&R<100})}),_=s.run("recipientParent",()=>{if(p&&p.length>0)return p[0].parentElement;if(!(b&&b.length>0))throw new Error("Could not locate draft labels");return b[0].parentElement}),y=s.run("thread id",()=>{let E=/thread-[^:]+:[^:\d]*(\d+)/.exec(c.getAttribute("data-item-id")||"");if(!E)throw new Error("thread row id regex failed");return E[0]}),g=s.run("messageCountParent",()=>_&&_.nextElementSibling),m=s.run("visibleMessageCount",()=>{let E=g&&g.querySelector("span"),D=E&&/^\((\d+)\)$/.exec(E.textContent);return D?parseInt(D[1]):1}),w=s.run("visibleDraftCount",()=>{if(f&&m)return m;if(!b)throw new Error("Could not locate draft labels");return b.length}),C=s.run("contacts",()=>p?Array.from(p).map(E=>{let D=E.getAttribute("email");return D?{name:null,emailAddress:D}:null}).filter(Boolean):null),I=s.run("labelParent",()=>(0,u.default)(c,"div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child)")),S=s.run("toolbar",()=>(0,u.default)(c,"div[jsaction] div[jsaction] > ul[aria-label]")),O={subject:d,checkbox:a,labelParent:I,toolbar:S,recipientParent:_,messageCountParent:g},A=1-s.errorCount()/s.runCount();return{elements:O,attributes:{isOnlyDraft:f,inBundle:o,inboxThreadId:y,visibleMessageCount:m,visibleDraftCount:w,contacts:C},score:A,errors:s.getErrorLogs()}};var n=t(e("../../../../lib/ErrorCollector")),u=t(e("../../../../lib/dom/querySelectorOne"));let r=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15}],627:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){let c=new n.default("thread"),s=!r.hasAttribute("aria-multiselectable");c.run("tabindex",()=>{if(!r.hasAttribute("tabindex"))throw new Error("expected tabindex")});let o=c.run("thread id",()=>{let y=/thread-[^:]+:[^:\d]*(\d+)/.exec(r.getAttribute("data-item-id")||"");if(!y)throw new Error("thread id regex failed");return y[0]}),d=c.run("heading",()=>r.querySelector("div[role=heading]")),a=d?c.run("stickyHeading",()=>{let y=d.firstElementChild;if(y instanceof HTMLDivElement)return y;throw new Error("child missing")}):null,p=a?c.run("toolbar",()=>(0,u.default)(a,"ul")):null,f=c.run("list",()=>r.querySelector("div[role=list]")),b={heading:d,stickyHeading:a,toolbar:p,list:f},_=1-c.errorCount()/c.runCount();return{elements:b,attributes:{inBundle:s,inboxThreadId:o},score:_,errors:c.getErrorLogs()}};var n=t(e("../../../../lib/ErrorCollector")),u=t(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":681,"../../../../lib/dom/querySelectorOne":705,"@babel/runtime/helpers/interopRequireDefault":15}],628:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(a,p){let f=m=>{let{el:w,removalStream:C}=m;return{el:w.getValue(),removalStream:C}},b=(0,s.default)(p.getAllByTag("inlineCompose")).map(f),_=(0,s.default)(p.getAllByTag("regularCompose")).map(f),y=(0,s.default)(p.getAllByTag("fullscreenCompose")).map(f),g=n.default.merge([b,_.merge(y).flatMap((0,o.default)())]).map(m=>{let{el:w,removalStream:C}=m,I=(0,d.default)(w);I.errors.length&&a.getLogger().errorSite(new Error("parse errors (compose)"),{score:I.score,errors:I.errors,html:(0,r.default)(w)});let S=new c.default(a,w,I);return C.take(1).onValue(()=>S.removedFromDOM()),S});return new u.default({scheduler:p.getAllByTag("inlineCompose").getScheduler(),read:()=>new Set,listen(m,w){m(new Set);let C=g.observe({value(I){w.add(I),I.getStopper().onValue(()=>{w.remove(I)})},error(I){function S(){return{mainLength:document.querySelectorAll("[role=main]").length,regularLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noJsActionLength:document.querySelectorAll("body > div[id] > div[id][class]:not([role]) > div[class] > div[id]").length,noNotLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class] > div[class] > div[id]").length,noBodyDirectChildLength:document.querySelectorAll("body div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noBodyLength:document.querySelectorAll("div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,classLength:document.querySelectorAll("div.ek div.md > div").length,classEkLength:document.querySelectorAll(".ek").length,classMdLength:document.querySelectorAll(".md").length,composeHtml:Array.from(document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id], div.ek div.md > div")).map(E=>(0,r.default)(E))}}let O=S(),A=18e4;a.getLogger().error(I,O),setTimeout(()=>{let E=S();a.getLogger().eventSdkPassive("waitfor compose data",{startStatus:O,waitTime:A,laterStatus:E})},A)}});return()=>{C.unsubscribe()}}})};var n=t(e("kefir")),u=t(e("live-set")),r=t(e("../../../common/censorHTMLtree")),c=t(e("./views/inbox-compose-view")),s=t(e("../../lib/toItemWithLifetimeStream")),o=t(e("../../lib/dom/make-element-stream-merger")),d=t(e("./detection/compose/parser"))},{"../../../common/censorHTMLtree":471,"../../lib/dom/make-element-stream-merger":698,"../../lib/toItemWithLifetimeStream":740,"./detection/compose/parser":622,"./views/inbox-compose-view":653,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"live-set":163}],629:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../../driver-common/inboxAjax")),r=t(e("../../driver-common/getAccountUrlPart")),c=e("./inboxResponseProcessor"),s=(0,n.defn)(v,async function(o,d){let{text:a}=await(0,u.default)({method:"POST",url:`https://inbox.google.com/sync${(0,r.default)()}/i/fd`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":await o.getPageCommunicator().getXsrfToken(),"X-Gmail-BTAI":await o.getPageCommunicator().getBtaiHeader(),"X-Google-BTD":"1"},data:JSON.stringify({1:[{1:d,3:[]}]})}),[p]=(0,c.extractMessageIdsFromThreadResponse)(a);if(!p)throw new Error("Failed to find inbox message ID for thread");return p});i.default=s},{"../../driver-common/getAccountUrlPart":668,"../../driver-common/inboxAjax":675,"./inboxResponseProcessor":635,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],630:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/difference")),u=t(e("lodash/once")),r=t(e("lodash/flatMap")),c=t(e("lodash/last")),s=t(e("transducers.js")),o=t(e("postcss-selector-parser")),d=t(e("../../lib/logger")),a=t(e("../../lib/dom/querySelectorOrFail"));let p=(0,o.default)();var f=(0,u.default)(()=>{let _=Array.from((0,a.default)(document,"[role=application]").classList).map(E=>new RegExp("\\."+E+"\\b"));if(_.length===0)throw new Error("no class names on element");let y=s.default.toArray(Array.prototype.slice.call(document.styleSheets),s.default.compose(s.default.filter(E=>{try{return E.cssRules&&E.cssRules.length}catch{return!1}}),s.default.mapcat(E=>Array.prototype.slice.call(E.cssRules||[])),s.default.mapcat(b),s.default.filter(E=>_.some(D=>D.test(E.selectorText))),s.default.filter(E=>E.style["margin-left"]&&E.style["margin-right"]))),g=s.default.toArray(Array.prototype.slice.call(y),s.default.compose(s.default.filter(E=>parseFloat(E.style["margin-left"])>parseFloat(E.style["margin-right"])),s.default.take(1)))[0],m=s.default.toArray(Array.prototype.slice.call(y),s.default.compose(s.default.filter(E=>parseFloat(E.style["margin-left"])<parseFloat(E.style["margin-right"])),s.default.take(1)))[0];if(!g||!m){let E=new Error("Failed to parse element CSS rules");throw d.default.error(E,{rulesCount:y.length,hasOnlyNavSidebarRule:!!g,hasOnlyChatSidebarRule:!!m}),E}function w(E){switch(E.type){case"root":case"selector":return(0,r.default)(E.nodes,w);case"class":return[E.value];default:return[]}}let C=w(p.process(g.selectorText).res),I=w(p.process(m.selectorText).res),S=(0,n.default)(I,C),O=(0,n.default)(C,I),A=(0,c.default)(C)===(0,c.default)(I)?(0,c.default)(C):null;return S.length===1&&O.length===1&&A||d.default.error(new Error("Failed to find sidebar classnames"),{onlyNavSidebarRuleClassNames:C,onlyChatSidebarRuleClassNames:I,chatSidebarClassNames:S,navSidebarClassNames:O,centerListClassName:A}),{chat:S[0],nav:O[0],centerList:A}});function b(_){return _ instanceof window.CSSMediaRule?(0,r.default)(_.cssRules,b):_ instanceof window.CSSStyleRule?[_]:[]}i.default=f},{"../../lib/dom/querySelectorOrFail":706,"../../lib/logger":729,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/difference":311,"lodash/flatMap":318,"lodash/last":342,"lodash/once":347,"postcss-selector-parser":378,"transducers.js":453}],631:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o,d){if((0,n.default)(Object.values(c.NATIVE_ROUTE_IDS),o))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!s.getCustomRouteIDs().has(o)){let a=o[0]==="#";a&&(o=o.slice(1));let p=!1;if(!d){for(let f of s.getCustomRouteIDs())if((0,r.default)(f,o)){p=!0;break}}if(!p)throw new Error(`Invalid routeID: ${o}`);a||s.getLogger().deprecationWarning('Router.goto resolved routeID without "#" prefix')}document.location.hash=(0,u.default)(o,d)};var n=t(e("lodash/includes")),u=t(e("../../lib/populateRouteID")),r=t(e("../../lib/routeIDmatchesHash")),c=e("../../constants/router")},{"../../constants/router":492,"../../lib/populateRouteID":732,"../../lib/routeIDmatchesHash":735,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/includes":324}],632:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("kefir")),u=t(e("../../lib/stream-wait-for")),r=(t(e("../../lib/dom/querySelectorOrFail")),t(e("../../lib/dom/make-mutation-observer-chunked-stream")));let c=(0,u.default)(()=>document.querySelector("body > div[id][jsaction] > div[id] > div[class][jsaction][aria-hidden]")).map(d=>{let a=d.parentElement;if(!a)throw new Error("Should not happen");let p=a.querySelector(".inboxsdk__butterbar");return p||(p=document.createElement("div"),p.className=d.className+" inboxsdk__butterbar",p.style.display="none",a.insertBefore(p,d.nextSibling)),{noticeContainer:a,googleNotice:d,sdkNotice:p}}).toProperty(),s=c.flatMapLatest(d=>{let{sdkNotice:a}=d;return(0,r.default)(a,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(()=>a.getAttribute("data-inboxsdk-id"))}),o=s.filter(d=>d==null);i.default=class{constructor(){o.onValue(()=>{})}getNoticeAvailableStream(){return o}getSharedMessageQueue(){let d=document.head.getAttribute("data-inboxsdk-butterbar-queue");return d?JSON.parse(d):[]}setSharedMessageQueue(d){let a=JSON.stringify(d);document.head.setAttribute("data-inboxsdk-butterbar-queue",a)}showMessage(d){let a=Date.now()+"-"+Math.random();return c.take(1).onValue(p=>{let{noticeContainer:f,googleNotice:b,sdkNotice:_}=p;_.className=b.className,_.classList.add("inboxsdk__butterbar"),d.html?_.innerHTML=d.html:d.el?(_.innerHTML="",_.appendChild(d.el)):_.textContent=d.text,d.className&&_.classList.add(d.className),_.style.display==="block"&&getComputedStyle(_).opacity==="1"?(Object.assign(_.style,{opacity:"0",transform:"none",transition:"none"}),_.offsetHeight,Object.assign(_.style,{opacity:"1",transition:""})):(Object.assign(_.style,{opacity:"0",transform:"",transition:"",display:"block"}),_.offsetHeight,Object.assign(_.style,{opacity:"1",transform:"none"})),_.setAttribute("data-inboxsdk-id",a)}),{destroy(){c.take(1).onValue(p=>{let{noticeContainer:f,googleNotice:b,sdkNotice:_}=p;_.getAttribute("data-inboxsdk-id")===a&&(d.className&&_.classList.remove(d.className),function(y,g,m){Object.assign(m.style,{opacity:"0",transform:"",transition:"opacity 100ms"}),m.removeAttribute("data-inboxsdk-id"),n.default.fromEvents(m,"transitionend").merge(n.default.later(200)).takeUntilBy(s.filter(w=>w!=null)).onValue(()=>{Object.assign(m.style,{display:"none",opacity:"",transition:""})})}(0,0,_))})}}}hideGmailMessage(){}}},{"../../lib/dom/make-mutation-observer-chunked-stream":700,"../../lib/dom/querySelectorOrFail":706,"../../lib/stream-wait-for":739,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],633:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=n(e("lodash/once")),c=(n(e("lodash/constant")),n(e("lodash/includes"))),s=(n(e("auto-html")),n(e("kefir"))),o=n(e("kefir-bus")),d=n(e("kefir-stopper")),a=e("ud"),p=n(e("live-set")),f=(n(e("live-set/filter")),n(e("live-set/merge"))),b=n(e("live-set/flatMap")),_=n(e("live-set/mapWithRemoval")),y=n(e("live-set/toValueObservable")),g=n(e("./makePageParserTree")),m=(n(e("../../lib/logger")),n(e("../../lib/toItemWithLifetimeStream"))),w=e("../../lib/inject-script"),C=n(e("../../lib/from-event-target-capture")),I=n(e("bimapcache")),S=n(e("./getInboxMessageIdForInboxThreadId")),O=n(e("../../driver-common/getGmailMessageIdForSyncMessageId")),A=n(e("../../driver-common/getThreadIdFromMessageId")),E=n(e("../../driver-common/gmailAjax")),D=n(e("../../driver-common/getAccountUrlPart")),P=n(e("../../lib/dom/simulate-key")),j=n(e("../../lib/dom/set-css")),k=n(e("../../lib/dom/querySelectorOrFail")),M=n(e("./custom-style")),R=(n(e("../../../common/censorHTMLstring")),n(e("../../../common/censorHTMLtree"))),V=n(e("./getComposeViewDriverLiveSet")),T=n(e("./addNavItem")),U=n(e("../../lib/dom/querySelectorOne")),W=n(e("../../lib/idMap")),Q=n(e("../../lib/dom/make-mutation-observer-chunked-stream")),X=n(e("./getSidebarClassnames")),oe=n(e("./inbox-butter-bar-driver")),J=n(e("./createLink")),he=n(e("./gotoView")),ae=n(e("./detection/thread/parser")),ue=n(e("./detection/thread-row/parser")),ge=n(e("./detection/message/parser")),N=n(e("./detection/attachmentCard/parser")),F=n(e("./detection/attachmentOverlay/parser")),K=n(e("./detection/nativeDrawer/parser")),H=n(e("./detection/searchBar/parser")),$=n(e("./detection/chatSidebar/parser")),se=n(e("./detection/appToolbarLocation/parser")),pe=n(e("./setupRouteViewDriverStream")),Te=n(e("./views/inbox-thread-view")),$e=n(e("./views/inbox-thread-row-view")),He=n(e("./views/inbox-message-view")),re=n(e("./views/inbox-attachment-card-view")),le=n(e("./views/inbox-attachment-overlay-view")),ve=n(e("./views/inbox-chat-sidebar-view")),De=n(e("./views/InboxToolbarView")),xe=n(e("./views/InboxMoleViewDriver")),Se=n(e("./views/inbox-app-sidebar-view")),Ee=n(e("./registerSearchSuggestionsProvider")),ye=n(e("./views/inbox-app-toolbar-button-view")),Ne=n(e("./inbox-page-communicator")),Ue=n(e("./views/inbox-modal-view")),de=n(e("./views/inbox-drawer-view")),qe=n(e("./views/inbox-backdrop")),tt=(0,a.defn)(v,class{constructor(Re,ce,Le,Fe,Be,nt){(0,u.default)(this,"_threadViewElements",new WeakMap),(0,u.default)(this,"_messageViewElements",new WeakMap),(0,u.default)(this,"_butterBarDriver",new oe.default),(0,u.default)(this,"_lastInteractedAttachmentCardView",null),(0,u.default)(this,"_lastInteractedAttachmentCardViewSet",(0,o.default)()),(0,u.default)(this,"_appSidebarView",null),(0,u.default)(this,"_customRouteIDs",new Set),(0,u.default)(this,"getGmailActionToken",(0,r.default)(async()=>{let Ge=(await(0,E.default)({url:`https://mail.google.com/mail${(0,D.default)()}/`,xhrFields:{withCredentials:!0},canRetry:!0})).text.match(/var GM_ACTION_TOKEN=("[^"]+")/);if(!Ge)throw new Error("Could not find GM_ACTION_TOKEN");return JSON.parse(Ge[1])})),(0,M.default)(),this._appId=Re,this._logger=Fe,this._opts=Be,this._envData=nt,this._stopper=(0,d.default)(),this._pageCommunicator=new Ne.default,this._page=(0,g.default)(this,document),this._stopper.onValue(()=>this._page.dump()),this.onready=(0,w.injectScript)().then(()=>{this._logger.setUserEmailAddress(this.getUserEmailAddress())}),this._setupThreadIdStats();{t.localStorage&&t.localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids");let Ge=new I.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_2",getAfromB:Xe=>(0,O.default)(this,Xe),getBfromA(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=Xe=>Ge.getAfromB(Xe)}{let Ge=new I.default({key:"inboxsdk__cached_inbox_message_and_inbox_thread_ids",getAfromB:Xe=>(this._threadIdStats.threadRows.threadsWithFetch+=1,(0,S.default)(this,Xe)),getBfromA(){throw new Error("should not happen")}});this.getInboxMessageIdForInboxThreadId=Xe=>Ge.getAfromB(Xe)}{let Ge=new I.default({key:"inboxsdk__cached_thread_and_message_ids",getAfromB:Xe=>(0,A.default)(this,Xe),getBfromA(){throw new Error("should not happen")}});this.getThreadIdFromMessageId=Xe=>Ge.getAfromB(Xe)}this._threadRowViewDriverLiveSet=(0,_.default)(this._page.tree.getAllByTag("collapsedThreadRow"),(Ge,Xe)=>{let rt=Ge.getValue(),ot=(0,ue.default)(rt);ot.errors.length&&this._logger.errorSite(new Error("parse errors (threadRow)"),{score:ot.score,errors:ot.errors,html:(0,R.default)(rt)});let Ct=new $e.default(rt,this,ot);return Xe.then(()=>{Ct.destroy()}),Ct}),this._threadViewDriverLiveSet=(0,b.default)(this._page.tree.getAllByTag("thread"),Ge=>{let Xe=Ge.getValue(),rt=(0,ae.default)(Xe);return rt.errors.length&&this._logger.errorSite(new Error("parse errors (thread)"),{score:rt.score,errors:rt.errors,html:(0,R.default)(Xe)}),new p.default({read(){throw new Error},listen:(ot,Ct)=>{ot(new Set);let Et=(0,d.default)(),It=wt=>{wt||(rt=(0,ae.default)(Xe),rt.errors.length>0&&this._logger.errorSite(new Error("thread reparse errors"),{score:rt.score,errors:rt.errors,html:(0,R.default)(Xe)}));let Lt=new Te.default(Xe,this,rt);Lt.getStopper().takeUntilBy(Et).onValue(()=>{Ct.remove(Lt),It(!1)}),Et.takeUntilBy(Lt.getStopper()).onValue(()=>{Lt.destroy()}),Ct.add(Lt)};return It(!0),()=>{Et.destroy()}}})}),this._messageViewDriverLiveSet=(0,b.default)(this._page.tree.getAllByTag("message"),Ge=>{let Xe=Ge.getValue(),rt=(0,ge.default)(Xe);return rt.errors.length>0&&this._logger.errorSite(new Error("parse errors (message)"),{score:rt.score,errors:rt.errors,html:(0,R.default)(Xe)}),rt.attributes.isDraft?p.default.constant(new Set):new p.default({read(){throw new Error},listen:(ot,Ct)=>{ot(new Set);let Et=(0,d.default)(),It=wt=>{wt||(rt=(0,ge.default)(Xe),rt.errors.length>0&&this._logger.errorSite(new Error("message reparse errors"),{score:rt.score,errors:rt.errors,html:(0,R.default)(Xe)}));let Lt=new He.default(Xe,this,rt);Lt.getStopper().takeUntilBy(Et).onValue(()=>{Ct.remove(Lt),It(!1)}),Et.takeUntilBy(Lt.getStopper()).onValue(()=>{Lt.destroy()}),Ct.add(Lt)};return It(!0),()=>{Et.destroy()}}})}),this._attachmentCardViewDriverLiveSet=(0,_.default)(this._page.tree.getAllByTag("attachmentCard"),(Ge,Xe)=>{let rt=Ge.getValue(),ot=(0,N.default)(rt);ot.errors.length&&this._logger.errorSite(new Error("parse errors (attachmentCard)"),{score:ot.score,errors:ot.errors,html:(0,R.default)(rt)});let Ct=new re.default({element:rt,parsed:ot},this);return Xe.then(()=>{Ct.destroy()}),Ct}),this._attachmentOverlayViewDriverLiveSet=(0,b.default)(this._page.tree.getAllByTag("attachmentOverlay"),Ge=>{let Xe=Ge.getValue(),rt=(0,F.default)(Xe);rt.errors.length&&this._logger.errorSite(new Error("parse errors (attachmentOverlay)"),{score:rt.score,errors:rt.errors,html:(0,R.default)(Xe)});let ot=this.getLastInteractedAttachmentCardView();return ot?new p.default({read(){throw new Error},listen:Ct=>{let Et=new le.default(this,Xe,rt,ot);return Ct(new Set([Et])),()=>{Et.destroy()}}}):(this._logger.error(new Error("Encountered overlay without knowing cardView")),p.default.constant(new Set))}),this._attachmentOverlayViewDriverLiveSet.subscribe({}),this._composeViewDriverLiveSet=(0,V.default)(this,this._page.tree),this._chatSidebarViewLiveSet=(0,_.default)(this._page.tree.getAllByTag("chatSidebar"),(Ge,Xe)=>{let rt=Ge.getValue(),ot=(0,$.default)(rt);ot.errors.length&&this._logger.errorSite(new Error("parse errors (chatSidebar)"),{score:ot.score,errors:ot.errors,html:(0,R.default)(rt)});let Ct=new ve.default(rt,ot);return Xe.then(()=>{Ct.destroy()}),Ct}),this._chatSidebarViewLiveSet.subscribe({}),this._routeViewDriverStream=(0,pe.default)(this),this._routeViewDriverStream.takeUntilBy(this._stopper).onValue(Ge=>{this._currentRouteViewDriver=Ge}),this._rowListViewDriverStream=s.default.never(),s.default.later(3e4).takeUntilBy((0,m.default)(this._page.tree.getAllByTag("appToolbarLocation"))).onValue(()=>{this._logger.errorSite(new Error("Failed to find appToolbarLocation"))}),(0,y.default)(this._page.tree.getAllByTag("searchBar")).subscribe(Ge=>{let{value:Xe}=Ge,rt=Xe.getValue(),ot=(0,H.default)(rt);ot.errors.length&&this._logger.errorSite(new Error("parse errors (searchBar)"),{score:ot.score,errors:ot.errors,html:(0,R.default)(rt)})}),s.default.later(3e4).takeUntilBy((0,m.default)(this._page.tree.getAllByTag("searchBar"))).onValue(()=>{this._logger.errorSite(new Error("Failed to find searchBar"))}),(0,y.default)(this._page.tree.getAllByTag("nativeDrawer")).subscribe(Ge=>{let{value:Xe}=Ge,rt=Xe.getValue(),ot=(0,K.default)(rt);ot.errors.length&&this._logger.errorSite(new Error("parse errors (nativeDrawer)"),{score:ot.score,errors:ot.errors,html:(0,R.default)(rt)})});let it=null;this._threadViewDriverLiveSet.subscribe(Ge=>{Ge.forEach(Xe=>{if(Xe.type==="add"){let rt=Xe.value;it&&it.removePanels(),it=rt}})}),this._toolbarViewDriverLiveSet=(0,f.default)([(0,_.default)(this._page.tree.getAllByTag("listToolBar"),(Ge,Xe)=>{let rt=Ge.getValue(),ot=new De.default(rt,this,null);return Xe.then(()=>{ot.destroy()}),ot}),(0,_.default)(this._threadViewDriverLiveSet,(Ge,Xe)=>{let rt=Ge.getToolbarElement(),ot=new De.default(rt,this,Ge);return Xe.then(()=>{ot.destroy()}),ot})])}_setupThreadIdStats(){this._resetThreadIdStats(),setInterval(()=>{if(this._threadIdStats.threadRows.totalCalls===0)return;let{threadRows:Re}=this._threadIdStats,ce={};ce.threadRows=Object.assign({},Re,{totalThreads:Re.totalThreads.size,threadsWithoutGmailId:Re.threadsWithoutGmailId.size}),this._logger.eventSdkPassive("inboxThreadIdStats",ce),this._resetThreadIdStats()},36e5)}_resetThreadIdStats(){this._threadIdStats={threadRows:{totalThreads:new Set,totalCalls:0,threadsWithoutGmailId:new Set,callsWithoutGmailId:0,threadsWithFetch:0}}}trackThreadRowIdCall(Re,ce){this._threadIdStats.threadRows.totalCalls+=1,this._threadIdStats.threadRows.totalThreads.add(ce),Re||(this._threadIdStats.threadRows.callsWithoutGmailId+=1,this._threadIdStats.threadRows.threadsWithoutGmailId.add(ce))}destroy(){this._stopper.destroy()}getAppId(){return this._appId}getOpts(){return this._opts}getLogger(){return this._logger}getStopper(){return this._stopper}getRouteViewDriverStream(){return this._routeViewDriverStream}getCurrentRouteViewDriver(){return this._currentRouteViewDriver}getRowListViewDriverStream(){return s.default.never()}getComposeViewDriverLiveSet(){return this._composeViewDriverLiveSet}getComposeViewDriverStream(){return(0,m.default)(this._composeViewDriverLiveSet).map(Re=>{let{el:ce}=Re;return ce})}getThreadRowViewDriverLiveSet(){return this._threadRowViewDriverLiveSet}getThreadRowViewDriverStream(){return(0,m.default)(this._threadRowViewDriverLiveSet).map(Re=>{let{el:ce}=Re;return ce})}getThreadViewDriverStream(){return(0,m.default)(this._threadViewDriverLiveSet).map(Re=>{let{el:ce}=Re;return ce})}getMessageViewDriverStream(){return(0,m.default)(this._messageViewDriverLiveSet).map(Re=>{let{el:ce}=Re;return ce})}getAttachmentCardViewDriverStream(){return(0,m.default)(this._attachmentCardViewDriverLiveSet).map(Re=>{let{el:ce}=Re;return ce})}getButterBarDriver(){return this._butterBarDriver}getButterBar(){return this._butterBar}setButterBar(Re){this._butterBar=Re}getPageCommunicator(){return this._pageCommunicator}getThreadViewElementsMap(){return this._threadViewElements}getMessageViewElementsMap(){return this._messageViewElements}getTagTree(){return this._page.tree}getCustomRouteIDs(){return this._customRouteIDs}getCurrentChatSidebarView(){let Re=Array.from(this._chatSidebarViewLiveSet.values())[0];if(!Re)throw new Error("No chat sidebar found");return Re}getAppSidebarView(){return this._appSidebarView||(this._appSidebarView=new Se.default(this)),this._appSidebarView}getChatSidebarButton(){let Re=Array.from(this._page.tree.getAllByTag("appToolbarLocation").values())[0],ce=Re?(0,se.default)(Re.getValue()):null,Le=ce?ce.elements.chatSidebarButton:null;if(!Le)throw new Error("No chat sidebar button found");return Le}getLastInteractedAttachmentCardView(){return this._lastInteractedAttachmentCardView}setLastInteractedAttachmentCardView(Re){this._lastInteractedAttachmentCardViewSet.emit(),this._lastInteractedAttachmentCardView=Re,Re&&Re.getStopper().merge((0,C.default)(document.body,"click")).take(1).takeUntilBy(this._lastInteractedAttachmentCardViewSet).takeUntilBy(this._stopper).onValue(()=>{this._lastInteractedAttachmentCardView=null})}openNewComposeViewDriver(){let Re=this.getNextComposeViewDriver();return(0,U.default)(document.body,'nav[role=banner] ~ div[aria-expanded] button:not([tabindex="-1"])').click(),Re}getNextComposeViewDriver(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1e4;return s.default.stream(ce=>{let Le=this._composeViewDriverLiveSet.subscribe({next:Fe=>{let Be=Fe.filter(nt=>nt.type==="add")[0];if(Be){if(Be.type!=="add")throw new Error("should not happen");ce.value(Be.value)}},complete:ce.end});return()=>Le.unsubscribe()}).merge(s.default.later(Re,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(()=>new Error("Driver was shut down before a new compose was found")).flatMap(ce=>ce instanceof Error?s.default.constantError(ce):s.default.constant(ce)).take(1).takeErrors(1).toPromise()}activateShortcut(Re,ce,Le){}getUserEmailAddress(){let Re=document.head.getAttribute("data-inboxsdk-user-email-address");if(Re==null)throw new Error("should not happen");return Re}isConversationViewDisabled(){return Promise.resolve(!1)}getUserLanguage(){return this._pageCommunicator.getUserLanguage()}getUserContact(){return{emailAddress:this.getUserEmailAddress(),name:this.getUserEmailAddress()}}getAccountSwitcherContactList(){return[this.getUserContact()]}registerThreadButton(Re){let ce=(0,d.default)(),Le=Be=>{ce.takeUntilBy(Be.getStopper()).onValue(()=>{Be.destroy()})},Fe=(0,y.default)(this._toolbarViewDriverLiveSet).subscribe(Be=>{let{value:nt}=Be;if(nt.isForThread()){if(!Re.positions||(0,c.default)(Re.positions,"THREAD")){if(Re.threadSection==="OTHER")return;Le(nt.addButton({...Re,onClick:it=>{Re.onClick({position:"THREAD",dropdown:it.dropdown,selectedThreadViewDrivers:[nt.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}}))}}else if(nt.isForRowList()&&(!Re.positions||(0,c.default)(Re.positions,"LIST"))){if(Re.listSection==="OTHER")return;Le(nt.addButton({...Re,onClick:it=>{Re.onClick({position:"LIST",dropdown:it.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:this.getSelectedThreadRowViewDrivers()})}}))}});if(ce.onValue(()=>{Fe.unsubscribe()}),!Re.positions||(0,c.default)(Re.positions,"ROW")){let Be=(0,y.default)(this._threadRowViewDriverLiveSet).subscribe(nt=>{let{value:it}=nt;Le(it.addToolbarButton({...Re,onClick:Ge=>{Re.onClick({position:"ROW",dropdown:Ge.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[it]})}}))});ce.onValue(()=>{Be.unsubscribe()})}return()=>{ce.destroy()}}getSelectedThreadRowViewDrivers(){return Array.from(this.getThreadRowViewDriverLiveSet().values()).filter(Re=>Re.isSelected())}async addNavItem(Re,ce){return this._navMenuContainer||(this._navMenuContainer=document.createElement("div"),this._navMenuContainer.classList.add("inboxsdk__navItem_appContainer")),(0,T.default)(ce,this._page.tree.getAllByTag("leftNav"),this._navMenuContainer)}addSupportItem(Re){}getSentMailNativeNavItem(){return new Promise((Re,ce)=>{})}createLink(Re,ce){return(0,J.default)(this,Re,ce)}async goto(Re,ce){(0,he.default)(this,Re,ce)}addCustomRouteID(Re){return this._customRouteIDs.add(Re),this._pageCommunicator.registerAllowedHashLinkStartTerm(Re.split("/")[0]),()=>{this._customRouteIDs.delete(Re)}}addCustomListRouteID(Re,ce){return()=>{}}showCustomRouteView(Re){let ce=document.querySelector("body > .inboxsdk__custom_view");if(!ce){let Fe=ce=document.createElement("div");ce.className="inboxsdk__custom_view";let{chat:Be,nav:nt}=(0,X.default)();(0,j.default)("custom_view_base_margins",`
        .inboxsdk__custom_view.${nt||"nav_sidebar"} >
        .${(0,W.default)("custom_view_container")}.${(0,W.default)("custom_view_min_margins")} {
          margin-left: 232px;
        }
        .inboxsdk__custom_view.${Be||"chat_sidebar"} >
        .${(0,W.default)("custom_view_container")}.${(0,W.default)("custom_view_min_margins")} {
          margin-right: 232px;
        }
      `);let it=(0,k.default)(document,"body > div[class][id][jsaction][jslog]");(0,Q.default)(it,{attributes:!0,attributeFilter:["class"]}).toProperty(()=>null).onValue(()=>{[Be,nt].filter(Boolean).forEach(Ge=>{it.classList.contains(Ge)?Fe.classList.add(Ge):Fe.classList.remove(Ge)})}),document.body.appendChild(ce)}ce.innerHTML="",ce.appendChild(Re),ce.style.display="",document.body.classList.add("inboxsdk__custom_view_active");let Le=document.querySelector("[id][jsaction] > div[token][class]");Le&&(Le.style.display="none")}showNativeRouteView(){document.body.classList.remove("inboxsdk__custom_view_active");let Re=document.querySelector("body > .inboxsdk__custom_view");Re&&(Re.style.display="none",Re.innerHTML="");let ce=document.querySelector("[id][jsaction] > div[token][class]");ce&&(ce.style.display="")}setShowNativeNavMarker(Re){}setShowNativeAddonSidebar(Re){}registerSearchSuggestionsProvider(Re){(0,Ee.default)(this,Re)}registerSearchQueryRewriter(Re){}addToolbarButtonForApp(Re){return new ye.default(Re,this._page.tree.getAllByTag("appToolbarLocation"),this._page.tree.getAllByTag("searchBar")).waitForReady()}addGlobalSidebarContentPanel(Re){return Promise.resolve(null)}isRunningInPageContext(){return!(!t.gbar||!t.gbar._CONFIG)}showAppIdWarning(){let Re=document.createElement("div");Re.className="inboxsdk__appid_warning",Re.innerHTML=`
  <button type="button" value="" title="Close" class="inboxsdk__close_button"></button>
  <div class="inboxsdk__appid_warning_main">
    <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>
    <div>You've loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>
  </div>
  <a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>
  `,document.body.insertBefore(Re,document.body.firstChild);let ce=Re.querySelector(".inboxsdk__close_button");if(!ce)throw new Error("Should not happen");ce.addEventListener("click",function(Le){Re.remove()})}openDraftByMessageID(Re){throw new Error("Not implemented")}createMoleViewDriver(Re){return new xe.default(Re,this)}createModalViewDriver(Re){return new Ue.default(Re)}createTopMessageBarDriver(Re){throw new Error("Not implemented")}createDrawerViewDriver(Re){let ce=new de.default(Re);return s.default.fromESObservable(this._page.tree.getAllByTag("nativeDrawer")).takeUntilBy(ce.getClosingStream()).onValue(Le=>{for(let Fe of Le)if(Fe.type==="add"){ce.close();break}}),ce}createBackdrop(Re,ce){return new qe.default(Re,ce)}closeOpenThread(){(0,P.default)(document.body,27,27)}registerThreadRowViewSelectionHandler(Re){return()=>{}}});i.default=tt}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../common/censorHTMLstring":470,"../../../common/censorHTMLtree":471,"../../driver-common/getAccountUrlPart":668,"../../driver-common/getGmailMessageIdForSyncMessageId":669,"../../driver-common/getThreadIdFromMessageId":673,"../../driver-common/gmailAjax":674,"../../lib/dom/make-mutation-observer-chunked-stream":700,"../../lib/dom/querySelectorOne":705,"../../lib/dom/querySelectorOrFail":706,"../../lib/dom/set-css":708,"../../lib/dom/simulate-key":711,"../../lib/from-event-target-capture":716,"../../lib/idMap":720,"../../lib/inject-script":723,"../../lib/logger":729,"../../lib/toItemWithLifetimeStream":740,"./addNavItem":614,"./createLink":616,"./custom-style":617,"./detection/appToolbarLocation/parser":618,"./detection/attachmentCard/parser":619,"./detection/attachmentOverlay/parser":620,"./detection/chatSidebar/parser":621,"./detection/message/parser":623,"./detection/nativeDrawer/parser":624,"./detection/searchBar/parser":625,"./detection/thread-row/parser":626,"./detection/thread/parser":627,"./getComposeViewDriverLiveSet":628,"./getInboxMessageIdForInboxThreadId":629,"./getSidebarClassnames":630,"./gotoView":631,"./inbox-butter-bar-driver":632,"./inbox-page-communicator":634,"./makePageParserTree":636,"./registerSearchSuggestionsProvider":638,"./setupRouteViewDriverStream":640,"./views/InboxMoleViewDriver":642,"./views/InboxToolbarView":644,"./views/inbox-app-sidebar-view":645,"./views/inbox-app-toolbar-button-view":646,"./views/inbox-attachment-card-view":648,"./views/inbox-attachment-overlay-view":649,"./views/inbox-backdrop":650,"./views/inbox-chat-sidebar-view":651,"./views/inbox-drawer-view":655,"./views/inbox-message-view":658,"./views/inbox-modal-view":659,"./views/inbox-thread-row-view":661,"./views/inbox-thread-view":662,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,bimapcache:44,kefir:158,"kefir-bus":155,"kefir-stopper":157,"live-set":163,"live-set/filter":160,"live-set/flatMap":161,"live-set/mapWithRemoval":164,"live-set/merge":165,"live-set/toValueObservable":166,"lodash/constant":308,"lodash/includes":324,"lodash/once":347,ud:455}],634:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("kefir")),u=t(e("../../lib/common-page-communicator"));class r extends u.default{getDraftIDForComposeView(s){s.hasAttribute("data-inboxsdk-draft-id")||s.dispatchEvent(new CustomEvent("inboxSDKgetDraftIDforComposeView",{bubbles:!0,cancelable:!1,detail:null}));let o=s.getAttribute("data-inboxsdk-draft-id");if(!o)throw new Error("could not find draft ID");return o}notifyEmailSending(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewIsSending",{bubbles:!1,cancelable:!1,detail:null}))}notifyEmailSendCanceled(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewSendCanceled",{bubbles:!1,cancelable:!1,detail:null}))}clickAndGetNewIframeSrc(s){let o=n.default.fromEvents(s,"inboxSDKclickAndGetNewIframeSrcResult").take(1).flatMap(d=>{let{detail:a}=d;return a.type==="success"?n.default.constant(a.src):n.default.constantError(Object.assign(new Error(a.message),{stack:a.stack}))}).toPromise();return s.dispatchEvent(new CustomEvent("inboxSDKclickAndGetNewIframeSrc",{bubbles:!0,cancelable:!1,detail:null})),o}fakeWindowResize(){document.dispatchEvent(new CustomEvent("inboxSDKinboxFakeWindowResize",{bubbles:!1,cancelable:!1,detail:null}))}}i.default=r},{"../../lib/common-page-communicator":685,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],635:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.extractMessageIdsFromThreadResponse=function(t){let n=JSON.parse(t),u=n&&n[2]&&n[2][0]&&n[2][0][3];if(!u)throw new Error("Failed to process thread response");return u.map(r=>r[1]).filter(Boolean)}},{}],636:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(o,d){let a=o;function p(b){return a?{...b,logError(_,y){let g={el:y,html:y?(0,c.default)(y):null};a.getLogger().errorSite(_,g)}}:b}let f=new n.default(d,p(r.default));return s.changes().onValue(b=>{f.replaceOptions(p(b))}),f};var n=t(e("page-parser-tree")),u=t(e("ud-kefir")),r=t(e("./pageParserOptions")),c=t(e("../../../common/censorHTMLtree"));let s=(0,u.default)(v,r.default)},{"../../../common/censorHTMLtree":471,"./pageParserOptions":637,"@babel/runtime/helpers/interopRequireDefault":15,"page-parser-tree":374,"ud-kefir":454}],637:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../lib/logger")),u=t(e("../../../common/censorHTMLtree")),r=t(e("transducers.js")),c=t(e("lodash/find")),s=t(e("lodash/uniq")),o=t(e("closest-ng")),d={tags:{message:{ownedBy:["thread"]},attachmentCard:{ownedBy:["message","threadRow","bundleRow"]},inlineCompose:{ownedBy:["thread"]}},finders:{leftNav:{interval:(a,p)=>a===0&&p<6e4?300:12e4,fn:a=>a.querySelectorAll("nav[aria-hidden]:not([role]) div[role=menu]")},thread:{fn:a=>a.querySelectorAll('div[aria-expanded=true][data-item-id*="thread-"], div.scroll-list-item-open[data-item-id*="thread-"]')},message:{fn:a=>a.querySelectorAll('div[role=listitem][aria-expanded][data-msg-id*="msg-"]')},attachmentCard:{fn:a=>a.querySelectorAll(`
          div[data-msg-id] section > div > div[tabindex][title],
          div[jsaction*="update_chip_carousel_arrows"] div[role=listitem][tabindex][jsaction]
        `)},attachmentOverlay:{fn:function(){let a=r.default.compose(r.default.filter(p=>p.style.display!=="none"),r.default.mapcat(p=>Array.prototype.slice.call(p.contentDocument.querySelectorAll("div[role=dialog]:not([aria-hidden=true])"))));return p=>r.default.toArray(Array.prototype.slice.call(p.querySelectorAll("iframe[frameborder]:not([src])")),a)}()},nativeDrawer:{fn(a){let p=a.querySelector('div[jsaction="global.exit_full_screen"] div[role=dialog][aria-busy=true] div[role=link][jsaction$=".open_local_file_picker"]');if(p){let f=(0,o.default)(p,"[role=dialog]");if(f)return[f]}return[]}},searchBar:{interval:(a,p)=>a===0&&p<6e4?300:12e4,fn:a=>a.querySelectorAll('nav[role=banner] div[jsaction*="scroll_to_top"] > :last-child > div:empty + div:not(:empty)')},searchAutocompleteResults:{fn:a=>a.querySelectorAll('div[jsaction*="clickonly:global.empty_space_click"] div[role=listbox] ul:last-of-type')},chatSidebar:{interval:a=>a===0?5e3:12e4,fn:a=>[a.querySelector("#in")].filter(Boolean)},appToolbarLocation:{interval:(a,p)=>a===0&&p<6e4?300:12e4,fn(a){let p=a.querySelector('div[role=button][jsaction*="global.toggle_chat_roster"]'),f=p?p.parentElement.parentElement.parentElement:null;return f?[f]:[]}},inlineCompose:{fn(a){let p=Array.prototype.filter.call(a.querySelectorAll('div[role=main] div[role=list] div[role=listitem] div[jsvs] button[jsaction$=".quick_compose_popout_mole"]'),b=>b.style.display!=="none").map(b=>(0,o.default)(b,"[jsvs]")),f=Array.prototype.map.call(a.querySelectorAll('div[role=main] div[role=list] ~ div div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"], div[role=main] div[role=listitem][aria-multiselectable] div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"]'),b=>(0,o.default)(b,"[jsvs]"));return(0,s.default)(p.concat(f))}},regularCompose:{fn:a=>Array.prototype.filter.call(a.querySelectorAll("div[role=dialog]:not(.inboxsdk__mole_view)"),p=>p.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]')&&!(0,o.default)(p,'div[tabindex][jsaction*="exit_full_screen"]'))},fullscreenCompose:{fn:a=>Array.prototype.filter.call(a.querySelectorAll('div[tabindex][jsaction*="exit_full_screen"] div[role=dialog]'),p=>p.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]'))}},watchers:[{sources:[null],tag:"leftNav",selectors:["body","[id][jsaction]","nav[aria-hidden]:not([role])","div[role=menu]"]},{sources:[null],tag:"topRow",selectors:["body","[id][jsaction]","div[jsaction]:not([role])","*",{$or:[["[role=main]"],[":not([role])","*","[role=main]"]]},"[role=application]","[role=list]","*","*",".scroll-list-section-body","[role=listitem]"]},{sources:["topRow"],tag:"bundleRow",selectors:[{$filter:a=>!/thread-/.test(a.getAttribute("data-item-id")||"")}]},{sources:["topRow"],tag:"threadRow",selectors:[{$filter:a=>/thread-/.test(a.getAttribute("data-item-id")||"")}]},{sources:["bundleRow"],tag:"threadRow",selectors:[{$watch:{attributeFilter:["aria-expanded"],cond:"[aria-expanded=true]"}},"[role=list]","*",":not([id])","*","*","[role=listitem]"]},{sources:["threadRow"],tag:"collapsedThreadRow",selectors:[{$watch:{attributeFilter:["class"],cond:":not(.scroll-list-item-open), .scroll-list-item-measuring-open"}},":first-child",{$map:a=>a.parentElement}]},{sources:["threadRow"],tag:"thread",selectors:[{$watch:{attributeFilter:["class"],cond:".scroll-list-item-open"}}]},{sources:["thread"],tag:"message",selectors:["*",":not([role=heading])","[role=list]","div",{$watch:{attributeFilter:["role","data-msg-id"],cond:"[role=listitem][data-msg-id]"}}]},{sources:["message"],tag:"attachmentCard",selectors:["*","*","section","*",{$filter:a=>a.style.display!=="none"},"div[tabindex]",{$filter:a=>a.style.display!=="none"}]},{sources:["bundleRow","threadRow"],tag:"attachmentCard",selectors:["*","[jsaction]","[role=list][jsaction]","*","div[role=listitem]",{$watch:{attributeFilter:["tabindex"],cond:"[tabindex]"}},{$filter:a=>a.style.display!=="none"}]},{sources:[null],tag:"attachmentOverlay",selectors:["body","iframe[id][frameborder]:not([src])",{$map:a=>a.contentDocument&&a.contentDocument.body},"div[aria-label][role=dialog]",{$watch:{attributeFilter:["aria-hidden"],cond:":not([aria-hidden=true])"}}]},{sources:[null],tag:"chatSidebar",selectors:["body","[id][jsaction]","div[id]","div[class]","div.in#in"]},{sources:[null],tag:"searchAutocompleteResults",selectors:["body","[id][jsaction]","[id][jsaction]","div[class]","div[class]","[role=listbox]","ul:last-of-type"]},{sources:["thread"],tag:"inlineCompose",selectors:["*",":not([role=heading])",":not([role=list])","*","[jsvs]",{$map(a){let p=(0,c.default)(a.children,b=>b.nodeName==="BUTTON");if(p)return p;let f=a.querySelector('div[jsaction="global.none"] > div[role=button]');if(f)return f.parentElement;n.default.error(new Error("inline compose button not found"),{el:a,html:(0,u.default)(a)})}},{$watch:{attributeFilter:["style"],cond:a=>a.style.display!=="none"}},{$map:a=>a.parentElement}]},{sources:[null],tag:"regularCompose",selectors:["body","div[id][jsaction]","div[id][class]:not([role])","div[class]","div[id]","div[jstcache][class]:not([aria-hidden]):not([tabindex])",{$map(a){let p=a.querySelector("div[role=dialog]:not(.inboxsdk__mole_view)");return p||n.default.error(new Error("compose dialog element not found"),{html:(0,u.default)(a)}),p}}]},{sources:[null],tag:"fullscreenCompose",selectors:["body","[id][jsaction]","div[id]:not([jsaction])",'div[tabindex][jsaction*="exit_full_screen"]',"*","*","*","*","*","[role=dialog]:not(.inboxsdk__drawer_view)"]},{sources:["searchBar"],tag:"listToolBar",selectors:[{$map:a=>a.parentElement},"div:empty + div:not(:empty) + div","ul[jsaction]"]}]};i.default=d},{"../../../common/censorHTMLtree":471,"../../lib/logger":729,"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,"lodash/find":315,"lodash/uniq":359,"transducers.js":453}],638:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(y,g){let m=(0,u.default)(),w=b();return(0,r.default)(y.getTagTree().getAllByTag("searchBar")).flatMap(C=>{let{el:I,removalStream:S}=C,{searchInput:O}=(0,o.default)(I.getValue()).elements;return O instanceof HTMLInputElement?n.default.constant({searchInput:O,searchInputRemovalStream:S}):n.default.never()}).flatMap(C=>{let{searchInput:I,searchInputRemovalStream:S}=C;return(0,r.default)(y.getTagTree().getAllByTag("searchAutocompleteResults")).takeUntilBy(S).map(O=>{let{el:A,removalStream:E}=O;return{searchInput:I,searchInputRemovalStream:S,resultsEl:A.getValue(),resultsElRemovalStream:E}})}).flatMap(C=>{let{searchInput:I,searchInputRemovalStream:S,resultsEl:O,resultsElRemovalStream:A}=C,E=n.default.fromEvents(I,"input").takeUntilBy(S).takeUntilBy(A),D=n.default.fromEvents(I,"keydown").filter(P=>{let{keyCode:j}=P;return j===13||j===9}).takeUntilBy(S).takeUntilBy(A);return E.map(P=>({event:P,searchInput:I,resultsEl:O,inputStream:E,enterAndTabPresses:D,resultsElRemovalStream:A}))}).flatMapLatest(C=>{let I=y.getPageCommunicator().ajaxInterceptStream.filter(O=>{let{type:A}=O;return A==="searchSuggestionsReceieved"}),S=n.default.merge([C.inputStream.take(1).flatMap(()=>I),C.inputStream.filter(O=>{let{target:{value:A}}=O;return A===""}),C.resultsElRemovalStream]).take(1);return n.default.combine([n.default.fromPromise(Promise.resolve(g(C.event.target.value))),I.take(1)]).takeUntilBy(S).map(O=>{let[A,E]=O;return{...C,removalStream:S,results:A}})}).takeUntilBy(m).flatMap(C=>{let{resultsEl:I,searchInput:S,resultsElRemovalStream:O,removalStream:A,enterAndTabPresses:E,results:D}=C;try{let P=(0,d.default)(y,D);return n.default.constant({resultsEl:I,searchInput:S,resultsElRemovalStream:O,removalStream:A,enterAndTabPresses:E,results:P})}catch(P){return n.default.constantError(P)}}).filter(C=>{let{results:I}=C;return I.length>0}).onError(C=>y.getLogger().error(C)).onValue(C=>{let{resultsEl:I,searchInput:S,resultsElRemovalStream:O,removalStream:A,enterAndTabPresses:E,results:D}=C;(0,a.default)({resultsEl:I,resultsElRemovalStream:O,searchInput:S});let P=_({driver:y,searchInput:S,removalStream:A,results:D,providerOrder:w});(0,s.default)(I,P),I.style.display="block",I.style.padding="6px 0",A.onValue(()=>{P.remove(),(S.value===""||I.matches(":empty"))&&(I.style.display="none")}),E.takeUntilBy(A).take(1).onValue(()=>{I.style.display="none"}),(0,c.default)(I,{childList:!0}).takeUntilBy(E).takeUntilBy(A).onValue(()=>{I.style.display="block",P.parentElement!==I&&(0,s.default)(I,P)})}),()=>m.destroy()};var n=t(e("kefir")),u=(t(e("kefir-bus")),t(e("kefir-stopper"))),r=t(e("../../lib/toItemWithLifetimeStream")),c=t(e("../../lib/dom/make-mutation-observer-chunked-stream")),s=(t(e("../../lib/from-event-target-capture")),t(e("../../lib/dom/insert-element-in-order"))),o=t(e("./detection/searchBar/parser")),d=t(e("../../lib/copyAndValidateAutocompleteResults")),a=t(e("./setupCustomAutocompleteSelectionHandling")),p=t(e("auto-html"));let f="data-inboxsdk-search-provider-count",b=()=>{let{documentElement:y}=document;if(!y)throw new Error;let g=y.getAttribute(f),m=(g?parseInt(g)+1:0).toString();return y.setAttribute(f,m),m},_=y=>{let{driver:g,searchInput:m,removalStream:w,results:C,providerOrder:I}=y,S=document.createElement("div");return S.setAttribute("data-order-hint",I),S.classList.add("inboxsdk__search_suggestion_group"),C.forEach(O=>{let A=document.createElement("li"),E=O.description||O.descriptionHTML?p.default`
      <span class="inboxsdk__search_suggestion_desc">
        ${O.description||{__html:O.descriptionHTML}}
      </span>
    `:"";A.classList.add("inboxsdk__search_suggestion"),A.innerHTML=p.default`
      <img src="${O.iconUrl||"//www.gstatic.com/images/icons/material/system/2x/search_black_24dp.png"}">
      <span>
        <span class="inboxsdk__search_suggestion_name" role="option">
          ${O.name||{__html:O.nameHTML}}
        </span>
        ${{__html:E}}
      </span>
    `,n.default.fromEvents(A,"click").takeUntilBy(w).onValue(D=>(P=>{let{driver:j,searchInput:k,result:M,event:R}=P;typeof M.onClick=="function"&&M.onClick(),typeof M.externalURL=="string"&&window.open(M.externalURL),M.routeName&&M.routeParams&&j.goto(M.routeName,M.routeParams),typeof M.searchTerm=="string"&&(k.value=M.searchTerm,k.dispatchEvent(new Event("input")))})({driver:g,searchInput:m,result:O,event:D})),S.appendChild(A)}),S}},{"../../lib/copyAndValidateAutocompleteResults":686,"../../lib/dom/insert-element-in-order":694,"../../lib/dom/make-mutation-observer-chunked-stream":700,"../../lib/from-event-target-capture":716,"../../lib/toItemWithLifetimeStream":740,"./detection/searchBar/parser":625,"./setupCustomAutocompleteSelectionHandling":639,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-stopper":157}],639:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){let{resultsEl:b,resultsElRemovalStream:_,searchInput:y}=f;if(b.hasAttribute(c))return;b.setAttribute(c,"true");let g=y.parentElement;if(!g)throw new Error;let m=(0,u.default)(g,"keydown").takeUntilBy(_),w=m.filter(S=>{let{keyCode:O}=S;return O===38}),C=m.filter(S=>{let{keyCode:O}=S;return O===40}),I=m.filter(S=>{let{keyCode:O}=S;return O===13});w.onValue(S=>{let O=d(b),A=b.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),E=A&&(0,r.default)(A,".inboxsdk__search_suggestion_group");if(!O){if(A&&E&&A.matches(":first-child")&&E.matches(":first-of-type"))A.classList.remove("inboxsdk__selected");else if(o(b)&&!A){S.stopPropagation();let D=b.querySelector(".inboxsdk__search_suggestion_group:last-of-type > .inboxsdk__search_suggestion:last-child");D&&D.classList.add("inboxsdk__selected")}else if(A&&E)if(S.stopPropagation(),A.classList.remove("inboxsdk__selected"),A.matches(":first-child")){let D=E.previousElementSibling,P=D&&D.querySelector(".inboxsdk__search_suggestion:last-child");P&&P.classList.add("inboxsdk__selected")}else{let D=A.previousElementSibling;D&&D.classList.add("inboxsdk__selected")}}}),C.onValue(S=>{let O=d(b),A=b.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),E=A&&(0,r.default)(A,".inboxsdk__search_suggestion_group");if(!O||O.matches(":last-of-type"))if(O)a(b);else if(A&&E&&A.matches(":last-child")&&E.matches(":last-of-type"))S.stopPropagation(),A.classList.remove("inboxsdk__selected");else if(A){if(A&&E)if(S.stopPropagation(),A.classList.remove("inboxsdk__selected"),A.matches(":last-child")){let D=E.nextElementSibling,P=D&&D.querySelector(".inboxsdk__search_suggestion:first-child");P&&P.classList.add("inboxsdk__selected")}else{let D=A.nextElementSibling;D&&D.classList.add("inboxsdk__selected")}}else{if(s(b))return;a(b)}}),I.onValue(S=>{let O=b.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected");O&&(S.stopPropagation(),O.dispatchEvent(new MouseEvent("click")))}),m.onEnd(()=>b.removeAttribute(c)),p(b,_)};var n=t(e("kefir")),u=t(e("../../lib/from-event-target-capture")),r=t(e("closest-ng"));let c="data-inboxsdk-selection-master-claimed",s=f=>f.querySelectorAll("li:not(.inboxsdk__search_suggestion)").length>0,o=f=>f.querySelectorAll(".inboxsdk__search_suggestion").length>0,d=f=>{let b=f.querySelectorAll("li:not(.inboxsdk__search_suggestion)");return Array.from(b).find(_=>{let{backgroundColor:y}=getComputedStyle(_),g=y.match(/([\d.]+)/g);return g&&parseFloat(g[3])>0})},a=f=>{let b=f.querySelector(".inboxsdk__search_suggestion_group:first-of-type > .inboxsdk__search_suggestion:first-child");b&&b.classList.add("inboxsdk__selected")},p=(f,b)=>{n.default.fromEvents(f,"mouseover").takeUntilBy(b).map(_=>{let{target:y}=_;return(0,r.default)(y,".inboxsdk__search_suggestion:not(.inboxsdk__selected)")}).filter(Boolean).onValue(_=>{let y=f.querySelectorAll(".inboxsdk__search_suggestion.inboxsdk__selected");Array.from(y).forEach(g=>g.classList.remove("inboxsdk__selected")),_.classList.add("inboxsdk__selected")}),n.default.fromEvents(f,"mouseout").takeUntilBy(b).map(_=>{let{target:y}=_;return(0,r.default)(y,".inboxsdk__search_suggestion.inboxsdk__selected")}).filter(Boolean).onValue(_=>_.classList.remove("inboxsdk__selected"))}},{"../../lib/from-event-target-capture":716,"@babel/runtime/helpers/interopRequireDefault":15,"closest-ng":57,kefir:158}],640:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){let o=s.getCustomRouteIDs(),d=null;return s.getStopper().onValue(()=>{d&&d.destroy()}),n.default.merge([n.default.merge([n.default.fromEvents(document,"inboxSDKpushState"),n.default.fromEvents(window,"popstate")]).map(a=>document.location.href),n.default.fromEvents(window,"hashchange").map(a=>a.newURL).filter(a=>/#/.test(a))]).toProperty(()=>document.location.href).map(a=>{let p=/#([^?]*)/.exec(a);if(!p)return{type:"NATIVE"};let f=p[1];for(let b of o){let _=(0,c.default)(b,f);if(_)return{hash:f,type:"CUSTOM",routeID:_}}return{type:"OTHER_APP_CUSTOM"}}).map(a=>a.type==="CUSTOM"?new u.default(a.routeID,a.hash):a.type==="NATIVE"?(s.showNativeRouteView(),new r.default("NATIVE")):a.type==="OTHER_APP_CUSTOM"?new r.default("OTHER_APP_CUSTOM"):(s.getLogger().error(new Error("should not happen")),new r.default("UNKNOWN"))).map(a=>(d&&d.destroy(),d=a,a))};var n=t(e("kefir")),u=(t(e("./inbox-driver")),t(e("./views/inbox-route-view")),t(e("./views/inbox-custom-route-view"))),r=t(e("./views/inbox-dummy-route-view")),c=t(e("../../lib/routeIDmatchesHash"))},{"../../lib/routeIDmatchesHash":735,"./inbox-driver":633,"./views/inbox-custom-route-view":654,"./views/inbox-dummy-route-view":657,"./views/inbox-route-view":660,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],641:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("lodash/isEqual")),r=t(e("../../../driver-common/update-icon")),c=t(e("../../../lib/dom/querySelectorOrFail")),s=(0,n.defn)(v,class{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._element=document.createElement("div"),this._element.className="inboxsdk__inbox_thread_row_label "+(o.classes||[]).join(" "),this._element.innerHTML="<span></span>",this._labelDescriptor={},this._iconSettings={}}getElement(){return this._element}updateLabelDescriptor(o){this._handleNewLabelDescriptor(o)}_handleNewLabelDescriptor(o){o?(o=Object.assign({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)"},o),(0,u.default)(this._labelDescriptor,o)||((0,r.default)(this._iconSettings,this._element,!1,o.iconClass,o.iconUrl),o.iconClass||o.iconUrl?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(o.backgroundColor),this._updateForegroundColor(o.foregroundColor),this._updateIconBackgroundColor(o.iconBackgroundColor),this._updateTitle(o.title),this._labelDescriptor=o)):this._labelDescriptor={}}_updateBackgroundColor(o){this._labelDescriptor.backgroundColor!==o&&(this._element.style.backgroundColor=o)}_updateForegroundColor(o){this._labelDescriptor.foregroundColor!==o&&(this._element.style.color=o)}_updateIconBackgroundColor(o){let d=this.getElement().querySelector(".inboxsdk__button_icon");d&&(d.style.backgroundColor=o||"")}_updateTitle(o){this._labelDescriptor.title!==o&&((0,c.default)(this._element,"span").textContent=o)}});i.default=s},{"../../../driver-common/update-icon":680,"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/isEqual":332,ud:455}],642:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("asap")),r=e("ud"),c=t(e("lodash/find")),s=t(e("react")),o=t(e("react-dom")),d=t(e("kefir")),a=t(e("kefir-stopper")),p=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),f=t(e("../../../lib/dom/querySelectorOrFail")),b=t(e("../../../lib/from-event-target-capture")),_=t(e("../../../lib/react/ElementContainer")),y=t(e("../../../lib/dom/reemitClickEventForReact")),g=t(e("kefir-bus"));function m(I){return!I.classList.contains("inboxsdk__mole_view")&&I.hasAttribute("jsaction")}var w=(0,r.defn)(v,class{constructor(I,S){(0,n.default)(this,"_stopper",(0,a.default)()),(0,n.default)(this,"_eventStream",(0,g.default)()),this._options=I,this._driver=S,this._element=document.createElement("div"),this._element.className="inboxsdk__mole_view "+(I.className||""),this._element.setAttribute("jsaction","global.none"),this._title=String(this._options.title||""),this._render(),this._element.firstElementChild.style.zIndex="1",d.default.fromEvents(this._element,"click").takeUntilBy(this._stopper).onValue(O=>{(0,y.default)(O)})}_render(){o.default.render(s.default.createElement(C,{title:this._title,titleEl:this._options.titleEl,el:this._options.el,chrome:this._options.chrome,titleButtons:this._options.titleButtons,minimized:this.getMinimized(),onClose:()=>{(0,u.default)(()=>{this.destroy()})},onSetMinimize:I=>this.setMinimized(I)}),this._element)}show(){if(this._element.parentElement)throw new Error("show was called twice");let I=document.getElementById("OPOhoe");if(!I){let S=new Error("could find element to insert moleview into");throw this._driver.getLogger().error(S),S}I.insertBefore(this._element,I.firstElementChild),(0,u.default)(()=>{this._setupWidth()}),(0,p.default)(I,{childList:!0}).takeUntilBy(this._stopper).onValue(S=>{S.some(O=>Array.prototype.some.call(O.addedNodes,A=>A.nodeType===1&&!A.classList.contains("inboxsdk__mole_view")))&&I.insertBefore(this._element,I.firstElementChild),this._setupWidth()}),(0,p.default)(this._options.el,{attributes:!0,attributeFilter:["class","style"]}).takeUntilBy(this._stopper).onValue(()=>{this._setupWidth()}),d.default.fromEvents(this._element,"click").merge((0,b.default)(this._element,"focus")).takeUntilBy(this._stopper).onValue(()=>{this._bringToFront()})}_setupWidth(){let I=(0,f.default)(this._element,".inboxsdk__mole_view_inner").getBoundingClientRect().width;(0,u.default)(()=>{this._element.style.width=I+"px";let S=this._element.parentElement;S&&Array.prototype.indexOf.call(S.children,this._element)===S.children.length-2?this._element.style.paddingLeft=I+"px":this._element.style.paddingLeft=""})}_bringToFront(){if(this._element.classList.contains("inboxsdk__mole_at_front"))return;this._element.classList.add("inboxsdk__mole_at_front");let I=this._element.parentElement;if(!(I instanceof HTMLElement))throw new Error("mole not in document");let S=Array.prototype.indexOf.call(I.children,this._element);if(S<0)throw new Error("should not happen");let O=I.children.length,A=(0,c.default)(I.children,m);A&&A.dispatchEvent(new FocusEvent("focus")),Array.prototype.forEach.call(I.children,(E,D)=>{if(!E.classList.contains("inboxsdk__mole_view"))return;E!==this._element&&E.classList.remove("inboxsdk__mole_at_front");let P=(0,c.default)(E.children,j=>j.style.zIndex);P&&(P.style.zIndex=String(D>S?O-(D-S):O))}),d.default.merge([A?(0,b.default)(A,"focus"):null,(0,p.default)(I,{childList:!0}).filter(E=>E.some(D=>D.addedNodes.length>0))].concat(Array.prototype.map.call(I.children,E=>{let D=(0,c.default)(E.children,j=>j.style.zIndex);if(!D)return null;let P=D.style.zIndex;return(0,p.default)(D,{attributes:!0,attributeFilter:["style"]}).filter(()=>D.style.zIndex!==P)})).filter(Boolean)).takeUntilBy(this._stopper).take(1).onValue(()=>{this._element.classList.contains("inboxsdk__mole_at_front")&&(this._element.classList.remove("inboxsdk__mole_at_front"),Array.prototype.forEach.call(I.children,E=>{if(m(E))return;let D=(0,c.default)(E.children,P=>P.style.zIndex);D&&(D.style.zIndex="1")}))})}setTitle(I){this._title=String(I),this._render()}setMinimized(I){I?(this._element.classList.add("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"minimize"})):(this._element.classList.remove("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"restore"}))}getMinimized(){return this._element.classList.contains("inboxsdk__minimized")}getEventStream(){return this._eventStream}destroy(){o.default.unmountComponentAtNode(this._element),this._stopper.destroy(),this._eventStream.end(),this._element.remove()}});i.default=w;class C extends s.default.Component{render(){let S=null;if(this.props.chrome!==!1){let O;O=this.props.minimized&&this.props.minimizedTitleEl?s.default.createElement(_.default,{className:"inboxsdk__mole_view_title",el:this.props.minimizedTitleEl}):this.props.titleEl?s.default.createElement(_.default,{className:"inboxsdk__mole_view_title",el:this.props.titleEl}):s.default.createElement("div",{className:"inboxsdk__mole_view_title"},this.props.title);let A=(this.props.titleButtons||[]).map((E,D)=>s.default.createElement("button",{type:"button",key:D,title:E.title,className:"inboxsdk__mole_custom_title_button",onClick:P=>{P.stopPropagation(),E.onClick()}},s.default.createElement("img",{className:E.iconClass,src:E.iconUrl,alt:"","aria-hidden":"true"})));S=s.default.createElement("div",{className:"inboxsdk__mole_view_titlebar",onClick:()=>{this.props.minimized&&this.props.onSetMinimize(!1)}},O,s.default.createElement("div",{className:"inboxsdk__mole_title_buttons"},s.default.createElement("button",{type:"button",style:{display:this.props.minimized?"none":""},title:"Minimize",onClick:()=>this.props.onSetMinimize(!0)},s.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_minimize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_minimize_white_18dp.png"})),s.default.createElement("button",{type:"button",style:{display:this.props.minimized?"":"none"},title:"Expand",onClick:()=>this.props.onSetMinimize(!1)},s.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_maximize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_maximize_white_18dp.png"})),A,s.default.createElement("button",{type:"button",title:"Close",onClick:()=>this.props.onClose()},s.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_close_white_12dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_close_white_12dp.png"}))))}return s.default.createElement("div",{className:"inboxsdk__mole_view_mid"},s.default.createElement("div",{className:"inboxsdk__mole_view_inner"},S,s.default.createElement(_.default,{className:"inboxsdk__mole_view_content",el:this.props.el})))}}},{"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/reemitClickEventForReact":707,"../../../lib/from-event-target-capture":716,"../../../lib/react/ElementContainer":733,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/find":315,react:437,"react-dom":415,ud:455}],643:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("lodash/includes")),c=t(e("kefir")),s=t(e("kefir-stopper")),o=t(e("../../../lib/from-event-target-capture")),d=t(e("../../../widgets/buttons/dropdown-view")),a=t(e("./inbox-dropdown-view")),p=t(e("../../../lib/dom/insert-element-in-order"));let f=0;var b=(0,u.defn)(v,class{constructor(_,y,g){(0,n.default)(this,"_stopper",(0,s.default)());let m=this._buttonEl=document.createElement("li");m.setAttribute("role","button"),m.setAttribute("data-insertion-order-hint",String(f++)),m.setAttribute("data-group-order-hint",y),m.tabIndex=0,m.className="inboxsdk__button_icon";let w=document.createElement("img");w.className="inboxsdk__button_iconImg";let C=A=>{},I=!1,S=null;c.default.merge([c.default.fromEvents(m,"click"),(0,o.default)(m,"keyup").filter(A=>(0,r.default)([32,13],A.which))]).onValue(A=>{if(A.preventDefault(),A.stopPropagation(),I){if(S)return void S.close();this._buttonEl.classList.add("inboxsdk__active"),S=new d.default(new a.default,m),S.setPlacementOptions({position:"bottom",hAlign:"right",vAlign:"top",buffer:10}),S.on("destroy",()=>{this._buttonEl.classList.remove("inboxsdk__active"),S=null})}C({dropdown:S})});let O=null;{I=_.hasDropdown,m.title=_.title,m.className="inboxsdk__button_icon "+(_.iconClass||""),C=_.onClick,_.iconUrl?(w.src=_.iconUrl,m.appendChild(w)):w.remove();let A=_.orderHint||0;O!==A&&(O=A,m.setAttribute("data-order-hint",String(A)),(0,p.default)(g,m,void 0,!0))}this._stopper.onValue(()=>{m.remove(),S&&S.close()})}destroy(){this._stopper.destroy()}getStopper(){return this._stopper}});i.default=b},{"../../../lib/dom/insert-element-in-order":694,"../../../lib/from-event-target-capture":716,"../../../widgets/buttons/dropdown-view":782,"./inbox-dropdown-view":656,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,"lodash/includes":324,ud:455}],644:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=(t(e("kefir")),t(e("kefir-stopper"))),c=t(e("./InboxToolbarButtonView")),s=(0,u.defn)(v,class{constructor(o,d,a){(0,n.default)(this,"_stopper",(0,r.default)()),this._el=o,this._driver=d,this._inboxThreadView=a,this._el.classList.add("inboxsdk__list_toolbar")}getStopper(){return this._stopper}destroy(){this._stopper.destroy()}getThreadRowViewDrivers(){return this._driver.getThreadRowViewDriverLiveSet().values()}getRouteViewDriver(){return this._driver.getCurrentRouteViewDriver()}isForRowList(){return this._inboxThreadView==null}isForThread(){return this._inboxThreadView!=null}getThreadViewDriver(){if(!this._inboxThreadView)throw new Error("this toolbarview is not for a thread");return this._inboxThreadView}addButton(o,d){let a=new c.default(o,this._driver.getAppId(),this._el);return this._stopper.takeUntilBy(a.getStopper()).onValue(()=>{a.destroy()}),a}});i.default=s},{"./InboxToolbarButtonView":643,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,ud:455}],645:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/findIndex")),r=e("ud"),c=(t(e("auto-html")),t(e("kefir"))),s=t(e("kefir-stopper")),o=t(e("react")),d=t(e("react-dom")),a=(t(e("../../../lib/fake-window-resize")),t(e("../../../../common/find-parent"))),p=t(e("../getSidebarClassnames")),f=(t(e("../../../lib/delay-asap")),t(e("../waitForAnimationClickBlockerGone"))),b=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),_=t(e("../../../lib/from-event-target-capture")),y=t(e("order-manager")),g=t(e("../../../lib/idMap")),m=t(e("../../../lib/dom/querySelectorOrFail")),w=t(e("../../../lib/incrementName")),C=t(e("../../../driver-common/sidebar/AppSidebar")),I=t(e("../../../driver-common/sidebar/ContentPanelViewDriver")),S=(0,r.defn)(v,class{constructor(O){(0,n.default)(this,"_stopper",(0,s.default)()),this._driver=O;let A=document.querySelector("."+(0,g.default)("app_sidebar_container"));A?this._el=A:this._createElement();let E=(0,a.default)((0,m.default)(document,"[role=application]"),D=>D.parentElement===document.body);if(!E){let D=new Error("Failed to find main parent");throw this._driver.getLogger().errorSite(D),D}this._mainParent=E,this._openOrOpeningProp=(0,b.default)(this._el,{attributes:!0,attributeFilter:["data-open","data-is-opening"]}).toProperty(()=>null).map(()=>this._el.getAttribute("data-open")==="true"||this._el.getAttribute("data-is-opening")==="true").skipDuplicates()}destroy(){this._stopper.destroy()}open(){this._setShouldAppSidebarOpen(!0),this._setOpenedNow(!0)}close(){this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)}getOpenOrOpeningStream(){return this._openOrOpeningProp}_getShouldAppSidebarOpen(){return localStorage.getItem("inboxsdk__app_sidebar_should_open")==="true"}_setShouldAppSidebarOpen(O){try{localStorage.setItem("inboxsdk__app_sidebar_should_open",String(O))}catch{}}_createElement(){let O=this._el=document.createElement("div");if(O.className=(0,g.default)("app_sidebar_container"),O.setAttribute("data-open","false"),O.setAttribute("data-is-opening","false"),document.body.appendChild(O),!document.body.querySelector("."+(0,g.default)("app_sidebar_waiting_platform"))){let k=document.createElement("div");k.className=(0,g.default)("app_sidebar_waiting_platform"),document.body.appendChild(k)}(0,_.default)(this._driver.getChatSidebarButton(),"click").filter(()=>O.getAttribute("data-open")==="true"&&this._driver.getCurrentChatSidebarView().getMode()==="SIDEBAR").takeUntilBy(this._stopper).onValue(k=>{k.stopImmediatePropagation(),this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)}),this._driver.getCurrentChatSidebarView().getModeStream().changes().takeUntilBy(this._stopper).onValue(k=>{k==="SIDEBAR"?(this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)):O.getAttribute("data-open")==="true"&&this._setOpenedNow(!0)});let A=new Set,E=new y.default({get(){try{return JSON.parse(localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch{}},set(k){try{localStorage.setItem("inboxsdk__sidebar_ordering",JSON.stringify(k))}catch{}}}),D,P=k=>{k&&(D=k)},j=()=>{d.default.render(o.default.createElement(C.default,{ref:P,panels:E.getOrderedItems().map(k=>k.value),onClose:()=>{this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)},onOutsideClick:()=>{this._driver.closeOpenThread()},onMoveEnd:(k,M,R,V)=>{E.moveItem(R,V),j()}}),O)};j(),c.default.fromEvents(window,"storage").filter(k=>k.key==="inboxsdk__sidebar_ordering").takeUntilBy(this._stopper).onValue(()=>{E.reload(),j()}),this._stopper.onValue(()=>{d.default.unmountComponentAtNode(O),O.remove()}),c.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").takeUntilBy(this._stopper).onValue(k=>{let M=k.detail.id;for(;A.has(M);)M=(0,w.default)(M);A.add(M),E.addItem({groupId:k.detail.appId,id:M,orderHint:k.detail.orderHint,value:{id:M,appId:k.detail.appId,instanceId:k.detail.instanceId,title:k.detail.title,iconClass:k.detail.iconClass,iconUrl:k.detail.iconUrl,hideTitleBar:k.detail.hideTitleBar,el:k.target}}),j()}),c.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").takeUntilBy(this._stopper).onValue(k=>{let M=E.getOrderedItems(),R=(0,u.default)(M,V=>V.value.instanceId===k.detail.instanceId);if(R===-1)throw new Error("should not happen: failed to find orderItem");E.updateItemValueByIndex(R,{id:M[R].value.id,appId:k.detail.appId,instanceId:k.detail.instanceId,title:k.detail.title,iconClass:k.detail.iconClass,iconUrl:k.detail.iconUrl,hideTitleBar:k.detail.hideTitleBar,el:k.target}),j()}),c.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").takeUntilBy(this._stopper).onValue(k=>{let M=E.getOrderedItems(),R=(0,u.default)(M,V=>V.value.instanceId===k.detail.instanceId);if(R===-1)throw new Error("should not happen: failed to find orderItem");A.delete(M[R].id),E.removeItemByIndex(R),E.getOrderedItems().length===0&&this._setOpenedNow(!1),j()}),c.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(k=>{D.scrollPanelIntoView(k.detail.instanceId)})}_setOpenedNow(O){this._el.setAttribute("data-open",String(O));let{chat:A}=(0,p.default)();A&&(O?this._driver.getCurrentChatSidebarView().getMode()==="SIDEBAR"||this._mainParent.classList.contains(A)||(this._mainParent.classList.add(A),this._driver.getPageCommunicator().fakeWindowResize()):this._driver.getCurrentChatSidebarView().getMode()!=="SIDEBAR"&&this._mainParent.classList.contains(A)&&(this._mainParent.classList.remove(A),this._driver.getPageCommunicator().fakeWindowResize()))}_setOpenedAfterAnimation(O){this._el.setAttribute("data-is-opening","true"),(0,f.default)().takeUntilBy(this._stopper).takeUntilBy((0,b.default)(this._el,{attributes:!0,attributeFilter:["data-open"]})).onValue(()=>{this._setOpenedNow(O)}).onEnd(()=>{this._el.setAttribute("data-is-opening","false")})}addSidebarContentPanel(O){let A=new I.default(this._driver,O,"inbox");return(this._driver.getCurrentChatSidebarView().getMode()==="SIDEBAR"||this._getShouldAppSidebarOpen())&&this._setOpenedAfterAnimation(!0),this._stopper.takeUntilBy(A.getStopper()).onValue(()=>{A.remove()}),A}});i.default=S},{"../../../../common/find-parent":474,"../../../driver-common/sidebar/AppSidebar":678,"../../../driver-common/sidebar/ContentPanelViewDriver":679,"../../../lib/delay-asap":688,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/fake-window-resize":715,"../../../lib/from-event-target-capture":716,"../../../lib/idMap":720,"../../../lib/incrementName":722,"../getSidebarClassnames":630,"../waitForAnimationClickBlockerGone":665,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-stopper":157,"lodash/findIndex":316,"order-manager":368,react:437,"react-dom":415,ud:455}],646:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/find")),r=t(e("lodash/includes")),c=e("ud"),s=t(e("kefir")),o=t(e("kefir-stopper")),d=t(e("../../../widgets/buttons/dropdown-view")),a=t(e("./inbox-app-toolbar-tooltip-view")),p=t(e("../../../lib/toItemWithLifetimeStream")),f=t(e("../../../lib/dom/set-css")),b=(0,c.defn)(v,class{constructor(_,y,g){(0,n.default)(this,"_buttonDescriptor",null),(0,n.default)(this,"_buttonEl",null),(0,n.default)(this,"_activeDropdown",null),(0,n.default)(this,"_stopper",(0,o.default)()),(0,n.default)(this,"_ready",(0,o.default)()),this._buttonDescriptorStream=_.toProperty().takeUntilBy(this._stopper),s.default.combine([(0,p.default)(g).take(1),(0,p.default)(y).take(1)],[],m=>m).map(m=>{let{el:w}=m;return w.getValue()}).takeUntilBy(this._stopper).onValue(m=>this._adjustSearchBarMargin(m)),(0,p.default)(y).take(1).map(m=>{let{el:w}=m;return w.getValue()}).takeUntilBy(this._stopper).onValue(m=>this._setupButton(m))}_setupButton(_){let y=(0,u.default)(_.children,w=>w.classList.contains("inboxsdk__appButton_container"));y||(y=document.createElement("div"),y.className="inboxsdk__appButton_container",_.insertBefore(y,_.firstChild));let g=document.createElement("div");g.tabIndex=0,g.setAttribute("role","button"),g.className="inboxsdk__appButton inboxsdk__button_icon";let m=document.createElement("img");m.className="inboxsdk__button_iconImg",g.appendChild(m),this._buttonDescriptorStream.onValue(w=>{g.title=w.title,m.src=w.iconUrl,m.className=`inboxsdk__button_iconImg ${w.iconClass||""}`,this._buttonDescriptor=w}),s.default.merge([s.default.fromEvents(g,"click"),s.default.fromEvents(g,"keypress").filter(w=>(0,r.default)([32,13],w.which))]).takeUntilBy(this._stopper).onValue(w=>{w.preventDefault(),w.stopPropagation(),this._activeDropdown?this.close():this._buttonDescriptor&&this._buttonDescriptor.hasDropdown===!1?this._buttonDescriptor&&this._buttonDescriptor.onClick&&this._buttonDescriptor.onClick():this.open()}),y.insertBefore(g,y.firstChild),this._buttonEl=g,this._ready.destroy(),this._stopper.onValue(()=>{g.remove()})}_adjustSearchBarMargin(_){let g="data-inboxsdk-searchbar-min-margin-right",m=40+parseInt(document.documentElement.getAttribute(g)||"0"),w="inboxsdk__dynamic_resize_searchbar";function C(S){if(document.documentElement.setAttribute(g,String(S)),S<=0)return void(0,f.default)("dynamic_resize_searchbar","");let O=S>70?"!important":"",A=`
@media (max-width: ${1394+3.575*S}px) {
  .${w} {
    margin-right: ${S}px${O};
  }
}
.inboxsdk__appButton_container + * + * ~ *:not(.inboxsdk_escape_mod) {
  margin-right: ${S}px${O};
}
`;(0,f.default)("dynamic_resize_searchbar",A)}C(m),_.classList.add(w);let{nextElementSibling:I}=_;I&&I.classList.add(w),this._stopper.onValue(()=>{C(parseInt(document.documentElement.getAttribute(g)||"0")-40)})}open(){if(this._activeDropdown)return;let _=this._buttonEl;if(!_)throw new Error("should not happen");_.classList.add("inboxsdk__active");let{arrowColor:y}=this._buttonDescriptor||{},g=this._activeDropdown=new d.default(new a.default(_,y),_);g.once("destroy",()=>{this._activeDropdown=null,_.classList.remove("inboxsdk__active")});let m={dropdown:g};this._buttonDescriptor&&this._buttonDescriptor.onClick&&this._buttonDescriptor.onClick.call(null,m)}close(){this._activeDropdown&&this._activeDropdown.close()}waitForReady(){return this._ready.map(()=>this).merge(this._stopper.flatMap(()=>s.default.constantError(new Error("InboxAppToolbarButtonView was destroyed early")))).take(1).takeErrors(1).toPromise(Promise)}getStopper(){return this._stopper}destroy(){this._stopper.destroy()}});i.default=b},{"../../../lib/dom/set-css":708,"../../../lib/toItemWithLifetimeStream":740,"../../../widgets/buttons/dropdown-view":782,"./inbox-app-toolbar-tooltip-view":647,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,"lodash/find":315,"lodash/includes":324,ud:455}],647:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=(t(e("kefir")),t(e("kefir-stopper"))),c=(0,u.defn)(v,class{constructor(s,o){(0,n.default)(this,"_stopper",(0,r.default)()),this._anchorElement=s,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow inboxsdk__bottom",document.body.appendChild(this._arrowEl),o&&(this._arrowEl.style.borderColor=o),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__appButton_tooltip_container",this._el=document.createElement("div"),this._el.className="inboxsdk__appButton_tooltip",this._el.setAttribute("role","region"),this._containerEl.appendChild(this._el),document.body.appendChild(this._containerEl),this._reposition()}_reposition(){let s=this._anchorElement.getBoundingClientRect(),o=s.left+s.width/2;this._arrowEl.style.top=`${s.bottom+18}px`,this._arrowEl.style.right=window.innerWidth-s.right+s.width/2-this._arrowEl.offsetWidth/2-1+"px",this._containerEl.style.top=`${s.bottom+17}px`,this._containerEl.style.minWidth=2*(window.innerWidth-o-30)+"px"}getDropdownOptions(){return{manualPosition:!0,extraElementsToIgnore:[this._arrowEl]}}getContentElement(){return this._el}getContainerElement(){return this._containerEl}destroy(){this._containerEl.remove(),this._arrowEl.remove(),this._stopper.destroy()}});i.default=c},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,ud:455}],648:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=e("ud"),c=t(e("auto-html")),s=t(e("kefir")),o=(t(e("kefir-bus")),t(e("kefir-stopper"))),d=t(e("../../../../common/find-parent")),a=t(e("../../../lib/dom/querySelectorOrFail")),p=(0,r.defn)(v,class{constructor(f,b){(0,n.default)(this,"_stopper",(0,o.default)()),(0,n.default)(this,"_previewClicks",s.default.pool()),(0,n.default)(this,"_addedButtonDescriptors",[]),(0,n.default)(this,"_overlayView",null),this._driver=b,f.element?(this._element=f.element,this._p=f.parsed,this._type=f.parsed.attributes.type,s.default.merge([s.default.fromEvents(this._element,"click"),s.default.fromEvents(this._element,"keydown")]).takeUntilBy(this._stopper).onValue(()=>{this._driver.setLastInteractedAttachmentCardView(this)})):(this._type="CUSTOM",this._createNewElement(f)),this._messageViewDriver=this._findMessageView(),this._messageViewDriver&&this._messageViewDriver.addAttachmentCardViewDriver(this)}destroy(){this._p||this._element.remove(),this._stopper.destroy()}_findMessageView(){let f=this._driver.getMessageViewElementsMap(),b=(0,d.default)(this._element,_=>f.has(_));return b?f.get(b):null}_createNewElement(f){f.previewUrl?(this._element=document.createElement("a"),this._element.href=f.previewUrl):(this._element=document.createElement("div"),this._element.tabIndex=0),this._element.title=f.title;let b=_=>{_.previewThumbnailUrl?(this._element.className="inboxsdk__attachment_card inboxsdk__attachment_card_with_preview",this._element.innerHTML=c.default`
          <img alt="" aria-hidden="true"
            style="width: 100%"
            src="${_.previewThumbnailUrl}"
            >
          <div class="inboxsdk__attachment_card_hover_overlay">
            <div class="inboxsdk__attachment_card_title">${_.title}</div>
            <div class="inboxsdk__attachment_card_buttons"></div>
          </div>
        `,_.failoverPreviewIconUrl&&s.default.fromEvents((0,a.default)(this._element,"img"),"error").take(1).takeUntilBy(this._stopper).onValue(()=>{b({..._,previewThumbnailUrl:null,iconThumbnailUrl:_.failoverPreviewIconUrl})})):(this._element.className="inboxsdk__attachment_card",this._element.innerHTML=c.default`
          <div class="inboxsdk__attachment_card_nohover">
            <div class="inboxsdk__attachment_card_title">${_.title}</div>
            <div class="inboxsdk__attachment_card_description">
              <img alt="" aria-hidden="true" src="${_.fileIconImageUrl}">
              <span>${_.description||""}</span>
            </div>
          </div>
          <div class="inboxsdk__attachment_card_hover_overlay">
            <div class="inboxsdk__attachment_card_title">${_.title}</div>
            <div class="inboxsdk__attachment_card_buttons"></div>
          </div>
        `),_.buttons.forEach(y=>{this.addButton(y)})};b(f),this._previewClicks.plug(s.default.merge([s.default.fromEvents(this._element,"click"),s.default.fromEvents(this._element,"keypress").filter(_=>(0,u.default)([32,13],_.which))])),f.container.appendChild(this._element)}getElement(){return this._element}getMessageViewDriver(){return this._messageViewDriver}getStopper(){return this._stopper}getPreviewClicks(){return this._previewClicks.takeUntilBy(this._stopper)}getAttachmentType(){return this._type}getAddedButtonDescriptors(){return this._addedButtonDescriptors}addButton(f){if(this._addedButtonDescriptors.push(f),!this._p){let b=(0,a.default)(this._element,".inboxsdk__attachment_card_buttons"),_=document.createElement("button");_.className="inboxsdk__attachment_card_button",f.downloadUrl?(_.setAttribute("data-inboxsdk-download-url",f.downloadUrl),_.addEventListener("click",y=>{y.stopPropagation(),y.preventDefault();let g=!1;if(f.onClick&&f.onClick({preventDefault(){g=!0}}),g)return;let m=document.createElement("a");m.href=f.downloadUrl,f.downloadFilename&&(m.download=f.downloadFilename),m.addEventListener("click",function(w){w.stopPropagation()},!0),f.openInNewTab&&m.setAttribute("target","_blank"),document.body.appendChild(m),m.click(),m.remove()}),_.innerHTML=`
          <div style="background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVQ4y+2UMQ6AQAgEwfhQnnJP4adjc4UxB0ehhXqbULE7BRAUkLu1yQP6OXQveEab1DXTD0O9b53kIui+QReicnJ5lM2gArQA2LLcDCqAXYA2y1SgZ7BV/Lr+6TugB0K2GxxDXjEZAAAAAElFTkSuQmCC)"></div>
        `):(_.addEventListener("click",y=>{y.stopPropagation(),y.preventDefault(),f.onClick&&f.onClick({getDownloadURL(){throw new Error("not implemented for artificial sdk-added cardViews!")}})}),_.innerHTML=c.default`
          <img src="${f.iconUrl}">
        `,_.title=f.tooltip),b.appendChild(_)}}getTitle(){return this._element.title}async getDownloadURL(){let f=this._overlayView;if(!f)throw new Error("This method only works during a button onClick callback in Inbox");return f.getDownloadURL()}setOverlay(f){this._overlayView=f}});i.default=p},{"../../../../common/find-parent":474,"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/includes":324,ud:455}],649:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=(t(e("kefir")),t(e("kefir-stopper"))),c=t(e("auto-html")),s=t(e("../../../lib/shared-style")),o=t(e("../../../dom-driver/inbox/custom-style")),d=(e("../../../lib/dom/simulate-mouse-event"),t(e("../../../../common/ajax"))),a=(0,u.defn)(v,class{constructor(p,f,b,_){(0,n.default)(this,"_stopper",(0,r.default)()),this._driver=p,this._el=f,this._p=b,this._cardView=_,(0,s.default)(f.ownerDocument),(0,o.default)(f.ownerDocument),this._cardView.setOverlay(this),this._cardView.getAddedButtonDescriptors().forEach(y=>{this.addButton(y)})}destroy(){this._cardView.setOverlay(null),this._stopper.destroy()}getStopper(){return this._stopper}addButton(p){let{downloadButton:f,buttonContainer:b}=this._p.elements;if(!b)throw new Error("Missing buttonContainer, can not add button");let _=document.createElement("button");_.className="inboxsdk__attachment_overlay_button",_.addEventListener("click",y=>{y.stopPropagation(),y.preventDefault(),p.onClick&&p.onClick({getDownloadURL:()=>this.getDownloadURL()})}),_.innerHTML=c.default`
      <img src="${p.iconUrl}">
    `,_.setAttribute("data-tooltip-delay","500"),_.setAttribute("data-tooltip-unhoverable","true"),f&&(_.setAttribute("data-tooltip-class",f.getAttribute("data-tooltip-class")||""),_.setAttribute("data-tooltip-align",f.getAttribute("data-tooltip-align")||"")),_.setAttribute("aria-label",p.tooltip),_.setAttribute("data-tooltip",p.tooltip),b.insertBefore(_,b.lastElementChild),this._stopper.onValue(()=>{_.remove()})}async getDownloadURL(){let{downloadButton:p}=this._p.elements;if(!p)throw new Error("Could not find download button element");let f=await this._driver.getPageCommunicator().clickAndGetNewIframeSrc(p),{xhr:b}=await(0,d.default)({url:f,method:"HEAD"});return b.responseURL}});i.default=a},{"../../../../common/ajax":468,"../../../dom-driver/inbox/custom-style":617,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/shared-style":737,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-stopper":157,ud:455}],650:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("kefir")),c=t(e("kefir-bus")),s=t(e("kefir-stopper")),o=(0,u.defn)(v,class{constructor(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;(0,n.default)(this,"_preAutoCloseStream",(0,c.default)()),(0,n.default)(this,"_stopper",(0,s.default)());let p=this._el=document.createElement("div");if(p.className="inboxsdk__inbox_backdrop",p.style.zIndex=String(d),r.default.fromEvents(p,"click").filter(f=>{let b=!1,_={type:"outsideInteraction",cause:f,cancel:()=>{b=!0}};return this._preAutoCloseStream.emit(_),!b}).onValue(f=>{this.destroy()}),!a)throw new Error("no target");a.appendChild(p),this._stopper.onValue(()=>{p.classList.remove("inboxsdk__active"),r.default.fromEvents(p,"transitionend").merge(r.default.later(200)).take(1).onValue(()=>{p.remove()})}),p.offsetHeight,p.classList.add("inboxsdk__active")}getElement(){return this._el}getPreAutoCloseStream(){return this._preAutoCloseStream}getStopper(){return this._stopper}destroy(){this._preAutoCloseStream.end(),this._stopper.destroy()}});i.default=o},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157,ud:455}],651:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("lodash/once")),c=(t(e("kefir")),t(e("kefir-stopper"))),s=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),o=(0,u.defn)(v,class{constructor(d,a){(0,n.default)(this,"_stopper",(0,c.default)()),(0,n.default)(this,"getModeStream",(0,r.default)(()=>{let p=this._el.parentElement;return(0,s.default)(p,{attributes:!0,attributeFilter:["class"]}).toProperty(()=>null).map(()=>this.getMode()).skipDuplicates().takeUntilBy(this._stopper)})),this._el=d,this._p=a}getStopper(){return this._stopper}destroy(){this._stopper.destroy()}getMode(){let d=this._el.parentElement,a=window.getComputedStyle(d);return parseInt(a.bottom)===0?"SIDEBAR":parseInt(a.top)>0?"DROPDOWN":"HIDDEN"}});i.default=o},{"../../../lib/dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,"lodash/once":347,ud:455}],652:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/includes")),u=e("ud"),r=t(e("kefir")),c=t(e("../../../lib/from-event-target-capture")),s=t(e("../../../lib/dom/insert-element-in-order")),o=t(e("../../../widgets/buttons/dropdown-view")),d=t(e("./inbox-dropdown-view")),a=t(e("./inbox-tooltip-view"));let p=0;var f=(0,u.defn)(v,class{constructor(b,_,y,g){this._tooltip=null,this._composeView=b;let m=this._buttonEl=document.createElement("div");m.setAttribute("role","button"),m.setAttribute("data-insertion-order-hint",String(p++)),m.setAttribute("data-group-order-hint",y),m.tabIndex=0,m.className="inboxsdk__button_icon";let w=document.createElement("img");w.className="inboxsdk__button_iconImg";let C=A=>{},I=!1,S=null;r.default.merge([r.default.fromEvents(m,"click"),(0,c.default)(m,"keyup").filter(A=>(0,n.default)([32,13],A.which))]).onValue(A=>{if(A.preventDefault(),A.stopPropagation(),this.closeTooltip(),I){if(S)return void S.close();this._buttonEl.classList.add("inboxsdk__active"),S=new o.default(new d.default,m),S.setPlacementOptions({position:"top",hAlign:"left",vAlign:"bottom",buffer:5}),S.on("destroy",()=>{this._buttonEl.classList.remove("inboxsdk__active"),S=null})}C(Object.assign({dropdown:S},g))});let O=null;_.takeUntilBy(b.getStopper()).onValue(A=>{if(!A)return m.remove(),void(O=null);I=A.hasDropdown,m.title=A.title,m.className="inboxsdk__button_icon "+(A.iconClass||""),C=A.onClick,A.iconUrl?(w.src=A.iconUrl,m.appendChild(w)):w.remove();let E=A.orderHint||0;O!==E&&(O=E,m.setAttribute("data-order-hint",String(E)),(0,s.default)(b.getModifierButtonContainer(),m))}),b.getStopper().onValue(()=>{this.closeTooltip(),m.remove(),S&&S.close()})}showTooltip(b){this._composeView.isInlineReplyForm()&&this._composeView.getElement().focus(),this._tooltip&&this.closeTooltip();let _=this._tooltip=new a.default(this._buttonEl,b);_.getStopper().onValue(()=>{this._tooltip===_&&(this._tooltip=null)})}closeTooltip(){this._tooltip&&this._tooltip.destroy()}});i.default=f},{"../../../lib/dom/insert-element-in-order":694,"../../../lib/from-event-target-capture":716,"../../../widgets/buttons/dropdown-view":782,"./inbox-dropdown-view":656,"./inbox-tooltip-view":663,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/includes":324,ud:455}],653:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/escape")),r=t(e("lodash/find")),c=e("ud"),s=(t(e("closest-ng")),t(e("kefir"))),o=t(e("kefir-stopper")),d=t(e("kefir-bus")),a=t(e("auto-html")),p=(t(e("../../../../common/censorHTMLstring")),t(e("../../../lib/delay-asap"))),f=t(e("../../../lib/array-to-lifetimes")),b=t(e("../../../lib/dom/querySelectorOrFail")),_=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),y=e("../../../lib/dom/simulate-mouse-event"),g=t(e("../../../lib/dom/simulate-key")),m=t(e("../../../lib/dom/insert-html-at-cursor")),w=(t(e("../../../lib/dom/querySelectorOne")),t(e("../../../lib/ErrorCollector")),t(e("../../../lib/handle-compose-link-chips"))),C=t(e("../../../lib/insert-link-chip-into-body")),I=t(e("../../../driver-common/compose/getPresendingStream")),S=t(e("../../../driver-common/compose/getDiscardStream")),O=t(e("../addRecipientRow")),A=t(e("./inbox-compose-button-view")),E=e("../../../lib/dom/get-selection"),D=t(e("../../../driver-common/getGmailThreadIdForRfcMessageId"));let P=null;var j=(0,c.defn)(v,class{constructor(k,M,R){(0,n.default)(this,"_eventStream",(0,d.default)()),(0,n.default)(this,"_stopper",(0,o.default)()),(0,n.default)(this,"_isMinimized",!1),(0,n.default)(this,"_isFullscreenMode",!1),(0,n.default)(this,"_isPresending",!1),(0,n.default)(this,"_closedProgrammatically",!1),this._element=M,this._driver=k,this._modifierButtonContainer=null,this._lastBodySelectionRange=null,this._p=R,this._els=R.elements;let V=this._els.sendBtn&&this._els.sendBtn.parentElement&&this._els.sendBtn.parentElement.childElementCount;this._driver.getLogger().eventSite("compose open",{errorCount:this._p.errors.length,bottomAreaElementCount:V,isInline:this._p.attributes.isInline});let T=(0,d.default)();this._queueDraftSave=()=>{T.emit(null)};let U=this._els.body;U&&(T.bufferBy(T.flatMap(()=>(0,p.default)(null))).filter(oe=>oe.length>0).takeUntilBy(this._stopper).onValue(()=>{var oe=this._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,g.default)(U,13,0)}finally{oe()}}),s.default.merge([s.default.fromEvents(document.body,"mousedown"),s.default.fromEvents(document.body,"keydown")]).takeUntilBy(this.getStopper()).onValue(oe=>{let J=document.getSelection();J.rangeCount>0&&U.contains(J.anchorNode)&&(this._lastBodySelectionRange=J.getRangeAt(0))}),this._eventStream.plug((0,_.default)(U,{childList:!0,subtree:!0,characterData:!0}).map(()=>({eventName:"bodyChanged"})))),s.default.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(()=>{this._closedProgrammatically=!0}),this._draftID=this._driver.getPageCommunicator().getDraftIDForComposeView(this.getElement()),this._ajaxInterceptStream=this._driver.getPageCommunicator().ajaxInterceptStream.takeUntilBy(this._stopper).filter(oe=>{let{draftID:J}=oe;return J===this._draftID}),this._setupStreams(),this.getEventStream().takeUntilBy(this._stopper).onValue(oe=>{let{eventName:J}=oe;if(J==="presending"){this._isPresending=!0;let he=this.getEventStream().filter(ae=>{let{eventName:ue}=ae;return ue==="sendCanceled"});this._sendingStream=s.default.merge([s.default.combine([this.getEventStream().filter(ae=>{let{eventName:ue}=ae;return ue==="sending"}),this.getEventStream().filter(ae=>{let{eventName:ue}=ae;return ue==="sent"})]),this._ajaxInterceptStream.filter(ae=>{let{type:ue}=ae;return ue==="emailSendFailed"}),s.default.later(6e4).flatMap(()=>s.default.constantError(new Error("Timed out waiting for ComposeView send")))]).takeUntilBy(he).takeUntilBy(this._stopper).take(1).takeErrors(1),this._sendingStream.onValue(()=>{this._isPresending=!1}).onError(ae=>{this._driver.getLogger().error(ae)}),this._driver.getPageCommunicator().notifyEmailSending(),this._p.attributes.isInline||s.default.later(5e3).takeUntilBy(this.getEventStream().filter(ae=>{let{eventName:ue}=ae;return["sendCanceled","presending"].indexOf(ue)!==-1})).onValue(()=>{document.contains(this._element)&&this._eventStream.emit({eventName:"sendCanceled"})})}else J==="sendCanceled"&&(this._isPresending=!1,this._driver.getPageCommunicator().notifyEmailSendCanceled())}),(0,w.default)(this);let{fromPickerEmailSpan:W}=this._els;W&&this._eventStream.plug((0,_.default)(W,{childList:!0,subtree:!0,characterData:!0}).map(()=>({eventName:"fromContactChanged",data:{contact:this.getFromContact()}})));let{minimizeBtnImage:Q}=this._els;if(Q){let oe=()=>/_maximize_/.test(Q.src),J=(0,_.default)(Q,{attributes:!0});J.toProperty(()=>null).takeUntilBy(this._stopper).onValue(()=>{this._isMinimized=oe()}),this._eventStream.plug(J.map(()=>({eventName:oe()?"minimized":"restored"})))}let{toggleFullscreenButtonImage:X}=this._els;if(X){let oe=()=>!/_enter_full_screen/.test(X.src),J=(0,_.default)(X,{attributes:!0});J.toProperty(()=>null).takeUntilBy(this._stopper).onValue(()=>{this._isFullscreenMode=oe()}),this._eventStream.plug(J.map(()=>({eventName:"fullscreenChanged",data:{fullscreen:oe()}})))}}removedFromDOM(){this._element.removeAttribute("data-inboxsdk-draft-id");let k=()=>{this._eventStream.emit({eventName:"destroy",data:{closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._stopper.destroy()};this._isPresending?this._sendingStream&&this._sendingStream.onEnd(k):k()}getEventStream(){return this._eventStream}getStopper(){return this._stopper}getElement(){return this._element}_informBodyChanged(){this._els.bodyPlaceholder&&this._els.body&&this._els.body.textContent.length>0&&(this._els.bodyPlaceholder.style.display="none"),this._queueDraftSave()}_getAddressChangesStream(){let{toInput:k,ccInput:M,bccInput:R}=this._els;function V(T,U,W){if(!U)return s.default.never();let Q=(0,_.default)(U.parentElement,{childList:!0,attributes:!0,subtree:!0}).merge(s.default.later(0)).map(W);return(0,f.default)(Q,X=>X.emailAddress).flatMap(X=>{let{el:oe,removalStream:J}=X;return s.default.constant({eventName:T+"ContactAdded",data:{contact:oe}}).merge(J.map(()=>({eventName:T+"ContactRemoved",data:{contact:oe}})))})}return s.default.merge([V("to",k,()=>this.getToRecipients()),V("cc",M,()=>this.getCcRecipients()),V("bcc",R,()=>this.getBccRecipients())]).takeUntilBy(this._stopper)}_setupStreams(){this._eventStream.plug(this._getAddressChangesStream()),this._eventStream.plug((0,I.default)({element:this.getElement(),sendButton:this.getSendButton()})),this._eventStream.plug((0,S.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(s.default.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(()=>({eventName:"sendCanceled"}))),this._eventStream.plug(s.default.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(()=>({eventName:"discardCanceled"}))),this._eventStream.plug(this._ajaxInterceptStream.filter(k=>{let{type:M}=k;return M==="emailSending"}).map(()=>({eventName:"sending"}))),this._eventStream.plug(this._ajaxInterceptStream.filter(k=>{let{type:M}=k;return M==="emailSent"}).map(k=>{let M={getThreadID:()=>(0,D.default)(this._driver,k.rfcID),getMessageID:()=>this._driver.getGmailMessageIdForSyncMessageId(`msg-a:${k.draftID}`)};return["gmailThreadId","gmailMessageId","threadID","messageID"].forEach(R=>{Object.defineProperty(M,R,{get:()=>{throw this._driver.getLogger().deprecationWarning(`ComposeView sent event.${R}`,"ComposeView sent event.getThreadID() or event.getMessageID()"),new Error("Not supported")}})}),{eventName:"sent",data:M}}))}getFromContact(){let{fromPickerEmailSpan:k}=this._els;if(!k)return this._driver.getUserContact();let M=k.textContent,R=(0,r.default)(this.getFromContactChoices(),V=>V.emailAddress===M);if(!R)throw new Error("Failed to find from contact");return R}getFromContactChoices(){if(this._p.attributes.isInline)throw new Error("Can't get from values of inline compose");if(P)return P;let{fromPicker:k}=this._els;if(!k)return P=[this._driver.getUserContact()],P;let M=document.activeElement,R=this._element.parentElement.parentElement.firstElementChild,V=R.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),T=V.length===0;try{if(T&&((0,y.simulateClick)(k),V=R.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]')),V.length===0)return P=[this._driver.getUserContact()],P;P=Array.from(V).map(U=>({name:(0,b.default)(U,"span[title]").title,emailAddress:(0,b.default)(U,"span:not([title])").textContent}))}finally{T&&(0,y.simulateClick)(document.body),M&&M.focus()}return P}setFromEmail(k){if(this._p.attributes.isInline)throw new Error("Can't set from value of inline compose");if(this.getFromContact().emailAddress===k)return;let{fromPicker:M}=this._els;if(!M)throw new Error("from picker element not found");let R=document.activeElement,V=this._element.parentElement.parentElement.firstElementChild,T=V.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),U=T.length===0;try{U&&((0,y.simulateClick)(M),T=V.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'));let W=(0,r.default)(T,Q=>Q.querySelector("span:not([title])").textContent===k);if(!W)throw new Error("Failed to find from contact to set");(0,y.simulateClick)(W)}finally{U&&(0,y.simulateClick)(M),R&&R.focus()}}focus(){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.focus();let k=document.getSelection(),M=this._lastBodySelectionRange;M&&k&&(k.removeAllRanges(),k.addRange(M))}insertBodyTextAtCursor(k){return this.insertBodyHTMLAtCursor((0,u.default)(k).replace(/\n/g,"<br>"))}insertBodyHTMLAtCursor(k){var M=(0,m.default)(this.getBodyElement(),k,this._lastBodySelectionRange);return this._informBodyChanged(),M}insertLinkIntoBody(k,M){var R=a.default`<a href="${M}">${k}</a>`;return this.insertBodyHTMLAtCursor(R)}insertLinkChipIntoBody(k){var M=(0,C.default)(this,k);return this._informBodyChanged(),M}setBodyHTML(k){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.innerHTML=k,this._informBodyChanged()}setBodyText(k){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.textContent=k,this._informBodyChanged()}_setRecipients(k,M){let R=k.parentElement;if(!R)throw new Error("Should not happen");let V=document.activeElement,T=R.querySelectorAll('[role=button][jsaction*="remove_chip"]').length;for(let U=0;U<T;U++){let W=R.querySelector('[role=button][jsaction*="remove_chip"]');if(!W)break;(0,y.simulateClick)(W)}M.forEach(U=>{k.value=U,k.dispatchEvent(new window.FocusEvent("blur"))}),V&&V.focus()}setToRecipients(k){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");let{toInput:M}=this._els;if(!M)throw new Error("Compose View missing recipient input");this._setRecipients(M,k)}setCcRecipients(k){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");let{ccInput:M}=this._els;if(!M)throw new Error("Compose View missing recipient input");this._setRecipients(M,k);let{toggleCcBccButton:R}=this._els;k.length&&R&&R.style.display!=="none"&&(0,y.simulateClick)(R)}setBccRecipients(k){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");let{bccInput:M}=this._els;if(!M)throw new Error("Compose View missing recipient input");this._setRecipients(M,k);let{toggleCcBccButton:R}=this._els;k.length&&R&&R.style.display!=="none"&&(0,y.simulateClick)(R)}replaceSendButton(k){let{sendBtn:M}=this._p.elements;if(!M)throw new Error("Could not locate send button");M.style.display="none";let R=document.createElement("div");R.classList.add("inboxsdk__compose_customSendContainer"),R.appendChild(k),this._element.setAttribute("data-inboxsdk-send-replaced",""),M.insertAdjacentElement("afterend",R);let V=(0,o.default)();return()=>{V.destroy(),R.remove(),this._element.removeAttribute("data-inboxsdk-send-replaced"),M.style.display=""}}hideDiscardButton(){let{discardBtn:k}=this._p.elements;if(!k)throw new Error("Could not locate discard button");let M=k.previousElementSibling;if(!(M instanceof HTMLElement))throw new Error("Could not locate discard button divider");return k.style.display="none",M.style.display="none",()=>{k.style.display="",M.style.display=""}}close(){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose");let{closeBtn:k}=this._els;k&&(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),(0,y.simulateClick)(k))}send(k){let{sendAndArchive:M}=k;if(!this._els.sendBtn)throw new Error("Compose View missing send element");(0,y.simulateClick)(this._els.sendBtn)}discard(){(0,y.simulateClick)(this.getDiscardButton())}setMinimized(k){if(k!==this.isMinimized()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");let{minimizeBtn:M}=this._els;if(!M)throw new Error("Could not find minimize button");M.click()}}setFullscreen(k){if(k!==this.isFullscreen()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");let{toggleFullscreenButton:M}=this._els;if(!M)throw new Error("Could not find fullscreen button");M.click()}}setTitleBarColor(k){let{isInline:M}=this._p.attributes;if(M)throw new Error("Cannot set title bar of inline compose");let{titleBar:R}=this._p.elements;if(!R)throw new Error("Could not locate compose title bar");return R.style.backgroundColor=k,()=>{R.style.backgroundColor=""}}setTitleBarText(k){throw new Error("Not supported in Inbox")}addButton(k,M,R){var V=new A.default(this,k,M,R);return Promise.resolve({buttonViewController:V,buttonDescriptor:{}})}getModifierButtonContainer(){if(this._modifierButtonContainer)return this._modifierButtonContainer;if(this._modifierButtonContainer=this._element.querySelector(".inboxsdk__compose_actionToolbar"),this._modifierButtonContainer)return this._modifierButtonContainer;let k=document.createElement("div");if(k.className="inboxsdk__compose_actionToolbar",!this._p.attributes.isInline){let V=this._els.attachBtn?this._els.attachBtn.nextSibling:null;V instanceof HTMLElement&&V.style.position==="absolute"?V.style.display="none":this._driver.getLogger().error(new Error("Didn't find hiddenAttachBtn"))}let M=this._els.sendBtn;if(!M)throw new Error("Compose View missing send element");let R=M.parentElement;if(!R)throw new Error("Could not find send button parent");return R.insertBefore(k,M.nextSibling),this._modifierButtonContainer=k,k}addRecipientRow(k){if(this._p.attributes.isInline)throw new Error("Cannot add recipient rows to inline compose views");return(0,O.default)(this,k)}forceRecipientRowsOpen(){return()=>{}}hideNativeRecipientRows(){if(this._p.attributes.isInline)throw new Error("Cannot hide recipient rows on inline compose views");let k=[this.getToRow(),this.getCCRow(),this.getBCCRow()];return k.forEach(M=>{M.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),()=>{k.forEach(M=>{M.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}hideRecipientArea(){throw new Error("Not implemented")}addOuterSidebar(k){throw new Error("Not implemented")}addInnerSidebar(k){throw new Error("Not implemented")}addComposeNotice(k){throw new Error("Not implemented")}addStatusBar(k){throw new Error("Not implemented")}hideNativeStatusBar(){throw new Error("Not Implemented")}isForward(){throw new Error("Not Implemented")}isReply(){if(this._p.attributes.isInline)return!0;throw new Error("Not implemented")}isInlineReplyForm(){return this._p.attributes.isInline}popOut(){if(!this._p.attributes.isInline)throw new Error("Can only pop out inline reply compose views");if(!this._els.popOutBtn)throw new Error("Should not happen");(0,y.simulateClick)(this._els.popOutBtn)}registerRequestModifier(k){throw new Error("Not implemented")}attachFiles(k){throw new Error("Not implemented")}attachInlineFiles(k){throw new Error("Not implemented")}isFullscreen(){return this._isFullscreenMode}isMinimized(){return this._isMinimized}getSubjectInput(){return this._els.subject}getMetadataFormElement(){throw new Error("Not supported in Inbox.")}getToRow(){let{toRow:k}=this._els;if(!k)throw new Error("Could not locate To row");return k}getCCRow(){let{ccRow:k}=this._els;if(!k)throw new Error("Could not locate CC row");return k}getBCCRow(){let{bccRow:k}=this._els;if(!k)throw new Error("Could not locate BCC row");return k}getBodyElement(){if(!this._els.body)throw new Error("Compose View missing body element");return this._els.body}getHTMLContent(){return this.getBodyElement().innerHTML}getTextContent(){return this.getBodyElement().textContent}getSelectedBodyHTML(){return(0,E.getSelectedHTMLInElement)(this.getBodyElement(),this._lastBodySelectionRange)}getSelectedBodyText(){return(0,E.getSelectedTextInElement)(this.getBodyElement(),this._lastBodySelectionRange)}getSubject(){let{subject:k}=this._els;if(!k)throw new Error("InboxSDK: Could not locate subject field");return k.value}setSubject(k){if(this._p.attributes.isInline)throw new Error("setSubject is not supported for inline compose views");if(!this._els.subject)throw new Error("InboxSDK: Could not locate subject field");this._els.subject.value=k}_getRecipients(k){let M=k.parentElement;if(!M)throw new Error("Should not happen");return Array.from(M.children).filter(R=>R.nodeName==="DIV"&&R.hasAttribute("email")&&R.style.display!=="none").map(R=>({emailAddress:R.getAttribute("email")||"",name:R.textContent}))}getToRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");let{toInput:k}=this._els;if(!k)throw new Error("Compose View missing recipient input");return this._getRecipients(k)}getCcRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");let{ccInput:k}=this._els;if(!k)throw new Error("Compose View missing recipient input");return this._getRecipients(k)}getBccRecipients(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");let{bccInput:k}=this._els;if(!k)throw new Error("Compose View missing recipient input");return this._getRecipients(k)}getComposeID(){throw new Error("This method was discontinued")}getInitialMessageID(){throw new Error("composeView.getInitialMessageID is not implemented in Inbox")}getMessageID(){throw new Error("composeView.getMessageID is not implemented in Inbox")}getThreadID(){return null}getCurrentDraftID(){return Promise.resolve(this._draftID)}getDraftID(){return Promise.resolve(this._draftID)}addTooltipToButton(k,M,R){k.showTooltip(R)}closeButtonTooltip(k){k.closeTooltip()}getDiscardButton(){if(!this._els.discardBtn)throw new Error("Compose View missing discard button");return this._els.discardBtn}getSendButton(){if(!this._els.sendBtn)throw new Error("Compose View missing send button");return this._els.sendBtn}ensureAppButtonToolbarsAreClosed(){}ensureFormattingToolbarIsHidden(){}});i.default=j},{"../../../../common/censorHTMLstring":470,"../../../driver-common/compose/getDiscardStream":666,"../../../driver-common/compose/getPresendingStream":667,"../../../driver-common/getGmailThreadIdForRfcMessageId":670,"../../../lib/ErrorCollector":681,"../../../lib/array-to-lifetimes":684,"../../../lib/delay-asap":688,"../../../lib/dom/get-selection":693,"../../../lib/dom/insert-html-at-cursor":695,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOne":705,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/dom/simulate-key":711,"../../../lib/dom/simulate-mouse-event":712,"../../../lib/handle-compose-link-chips":718,"../../../lib/insert-link-chip-into-body":724,"../addRecipientRow":615,"./inbox-compose-button-view":652,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"closest-ng":57,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/escape":313,"lodash/find":315,ud:455}],654:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("kefir")),t(e("kefir-stopper"))),r=t(e("kefir-bus")),c=t(e("classnames")),s=t(e("../../../lib/idMap")),o=t(e("../../../lib/parseParamsFromRouteID")),d=t(e("../getSidebarClassnames"));i.default=class{constructor(a,p){(0,n.default)(this,"_eventStream",(0,r.default)()),(0,n.default)(this,"_stopper",(0,u.default)()),this._routeID=a,this._params=(0,o.default)(a,p),this._customViewElement=document.createElement("div"),this.setFullWidth(!0)}setFullWidth(a){let p=(0,d.default)().centerList||"UNKNOWN_centerList";this._customViewElement.className=(0,c.default)((0,s.default)("custom_view_container"),{[(0,s.default)("custom_view_min_margins")]:a,[p]:!a})}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy(),this._customViewElement.remove()}getElement(){throw new Error("should not happen")}getType(){return"CUSTOM"}getRouteType(){return"CUSTOM"}getRouteID(){return this._routeID}getParams(){return this._params}getEventStream(){return this._eventStream}getCustomViewElement(){return this._customViewElement}refresh(){throw new Error("should not happen")}getHash(){throw new Error("should not happen")}addCollapsibleSection(a,p){throw new Error("should not happen")}addSection(a,p){throw new Error("should not happen")}}},{"../../../lib/idMap":720,"../../../lib/parseParamsFromRouteID":730,"../getSidebarClassnames":630,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:158,"kefir-bus":155,"kefir-stopper":157}],655:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("kefir")),c=t(e("kefir-stopper")),s=t(e("kefir-bus")),o=t(e("./inbox-backdrop")),d=t(e("../../../lib/from-event-target-capture")),a=t(e("../../../../common/find-parent"));let p="inboxSDKdrawerViewTakingOver",f=500;var b=(0,u.defn)(v,class{constructor(_){(0,n.default)(this,"_backdrop",null),(0,n.default)(this,"_closing",(0,c.default)()),(0,n.default)(this,"_closed",(0,c.default)()),(0,n.default)(this,"_composeChanges",(0,s.default)()),(0,n.default)(this,"_preAutoCloseStream",(0,s.default)()),this._chrome=typeof _.chrome!="boolean"||_.chrome;let y=document.body,g=null,{composeView:m,closeWithCompose:w}=_;if(m){let I=this._setupComposeInsertionTarget(m,w);y=I.insertionTarget,g=I.composeRect}this._setupElement(_,y);let C=0;if(m){if(!g)throw new Error("should not happen");C=this._setupComposeAnimation(m,g,!0)}this._el.offsetHeight,this._el.classList.add("inboxsdk__active"),this._slideAnimationDone=r.default.fromEvents(this._el,"transitionend").take(1).takeUntilBy(this._closing).map(()=>null),m&&this._positionCompose(m,C),(0,d.default)(document,"keydown").filter(I=>I.key?I.key==="Escape":I.which===27).takeUntilBy(this._closing).onValue(I=>{let S=I.preventDefault;I.preventDefault=function(){return this._defaultPreventedInContext=!0,S.call(this)}}),r.default.fromEvents(document,"keydown").filter(I=>I.key?I.key==="Escape":I.which===27).filter(I=>!I._defaultPreventedInContext).filter(I=>{let S=!1,O={type:"escape",cause:I,cancel:()=>{S=!0}};return this._preAutoCloseStream.emit(O),!S}).takeUntilBy(this._closing).onValue(()=>{this.close()})}_setupComposeInsertionTarget(_,y){if(_.isMinimized())throw new Error("Can't attach DrawerView to minimized ComposeView");if(_.isInlineReplyForm())throw new Error("Can't attach DrawerView to inline ComposeView");_.isFullscreen()&&_.setFullscreen(!1);let g=[r.default.fromEvents(_,"restored"),r.default.later(10).flatMap(()=>r.default.fromEvents(_,"fullscreenChanged"))];y&&g.push(r.default.fromEvents(_,"destroy"),r.default.fromEvents(_,"minimized")),r.default.merge(g).takeUntilBy(this._closing.merge(this._composeChanges)).onValue(()=>this.close());let m=_.getElement(),w=m.getBoundingClientRect(),C=m.offsetParent;if(!(C instanceof HTMLElement))throw new Error("should not happen");let I=(0,a.default)(C,S=>window.getComputedStyle(S).getPropertyValue("z-index")!=="auto"&&S.getBoundingClientRect().left===0)||document.body;return m.dispatchEvent(new CustomEvent(p,{bubbles:!1,cancelable:!1,detail:null})),C.dispatchEvent(new CustomEvent(p,{bubbles:!1,cancelable:!1,detail:null})),I.dispatchEvent(new CustomEvent(p,{bubbles:!1,cancelable:!1,detail:null})),I.classList.add("inboxsdk__drawers_in_use"),I.style.zIndex=String(f),C.hasAttribute("data-drawer-old-zindex")||C.setAttribute("data-drawer-old-zindex",C.style.zIndex),C.style.zIndex=String(502),this._closed.takeUntilBy(r.default.fromEvents(I,p)).onValue(()=>{I.style.zIndex=""}),this._closed.merge(this._composeChanges).takeUntilBy(r.default.fromEvents(C,p)).onValue(()=>{C.style.zIndex=C.getAttribute("data-drawer-old-zindex")||"",C.removeAttribute("data-drawer-old-zindex")}),{composeRect:w,insertionTarget:I}}_setupElement(_,y){let g=this._backdrop=new o.default(f,y);if(this._preAutoCloseStream.plug(g.getPreAutoCloseStream()),g.getStopper().takeUntilBy(this._closing).onValue(()=>{this.close()}),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__drawer_view_container",this._containerEl.style.zIndex=String(501),this._el=document.createElement("div"),this._el.setAttribute("role","dialog"),this._el.tabIndex=0,this._el.className="inboxsdk__drawer_view",_.matchSidebarContentPanelWidth&&this._el.classList.add("inboxsdk__match_sidebar_content_panel_width"),this._containerEl.appendChild(this._el),this._chrome){let m=document.createElement("div");m.className="inboxsdk__drawer_title_bar";let w=document.createElement("button");w.type="button",w.title="Close",w.className="inboxsdk__close_button",w.addEventListener("click",I=>{this.close()}),m.appendChild(w);let C=document.createElement("div");C.className="inboxsdk__drawer_title",C.setAttribute("role","heading"),C.textContent=_.title||"",m.appendChild(C),this._el.appendChild(m)}this._el.appendChild(_.el),y.appendChild(this._containerEl),this._closing.onValue(()=>{this._backdrop&&this._backdrop.destroy(),this._el.classList.remove("inboxsdk__active"),r.default.fromEvents(this._el,"transitionend").merge(r.default.later(200)).take(1).onValue(()=>{this._closed.destroy(),this._containerEl.remove()})})}_setupComposeAnimation(_,y,g){let m=_.getElement().parentElement,w=this._el.getBoundingClientRect(),C=parseInt(m.style.left)||0,I=y.right-C-(window.innerWidth-w.width-24);return I>0&&(m.style.position="relative",m.style.transition="left 150ms cubic-bezier(.4,0,.2,1)",m.style.left="0",g&&m.offsetHeight),I}_positionCompose(_,y){if(y>0){let g=_.getElement(),m=g.parentElement;m.style.left=-y+"px",this._closing.takeUntilBy(this._composeChanges).takeUntilBy(r.default.fromEvents(g,p)).onValue(()=>{m.style.left="0"}).flatMap(()=>r.default.fromEvents(m,"transitionend").merge(r.default.later(200))).merge(this._composeChanges).take(1).takeUntilBy(r.default.fromEvents(g,p)).onValue(()=>{m.style.position="",m.style.left="",m.style.transition=""})}}associateComposeView(_,y){this._composeChanges.emit(null);let{insertionTarget:g,composeRect:m}=this._setupComposeInsertionTarget(_,y);this._backdrop&&g.appendChild(this._backdrop.getElement()),this._containerEl.parentElement!==g&&g.appendChild(this._containerEl);let w=this._setupComposeAnimation(_,m,!1);this._positionCompose(_,w)}disassociateComposeView(){this._composeChanges.emit(null)}getSlideAnimationDone(){return this._slideAnimationDone}getClosingStream(){return this._closing}getClosedStream(){return this._closed}getPreAutoCloseStream(){return this._preAutoCloseStream}close(){this._closing.destroy()}});i.default=b},{"../../../../common/find-parent":474,"../../../lib/from-event-target-capture":716,"./inbox-backdrop":650,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157,ud:455}],656:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=class{constructor(t){this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__dropdown "+(t||""),this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__dropdown_content",this._containerEl.appendChild(this._contentEl)}getContentElement(){return this._contentEl}getContainerElement(){return this._containerEl}destroy(){this._containerEl.remove()}}},{}],657:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("kefir")),t(e("kefir-stopper"))),r=t(e("kefir-bus"));i.default=class{constructor(c){(0,n.default)(this,"_eventStream",(0,r.default)()),(0,n.default)(this,"_stopper",(0,u.default)()),this._type=c}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}getElement(){throw new Error("Should not happen")}getType(){return this._type}getRouteType(){return"UNKNOWN"}getRouteID(){return"UNKNOWN"}getParams(){return{}}getEventStream(){return this._eventStream}getCustomViewElement(){return null}refresh(){}getHash(){throw new Error("should not happen")}addCollapsibleSection(c,s){throw new Error("should not happen")}addSection(c,s){throw new Error("should not happen")}setFullWidth(c){throw new Error("should not happen")}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157}],658:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=(t(e("asap")),t(e("kefir"))),c=t(e("kefir-bus")),s=t(e("bignumber.js")),o=t(e("../../../lib/delay-asap")),d=t(e("../../../../common/censorHTMLtree")),a=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),p=t(e("./inbox-attachment-card-view")),f=t(e("../../../../common/find-parent")),b=t(e("../detection/message/parser")),_=t(e("../../../lib/safe-event-emitter"));class y extends _.default{}var g=(0,u.defn)(v,class{constructor(m,w,C){(0,n.default)(this,"_eventStream",(0,c.default)()),(0,n.default)(this,"_attachmentCardViews",[]),this._element=m,this._driver=w,this._p=C,this._stopper=this._eventStream.ignoreValues().beforeEnd(()=>null),(0,a.default)(this._element,{attributes:!0,attributeFilter:["data-msg-id"]}).toProperty(()=>null).map(()=>this._element.getAttribute("data-msg-id")).skipDuplicates().changes().onValue(()=>{this.destroy()}),(0,a.default)(this._element,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(()=>null).map(()=>this._element.getAttribute("aria-expanded")==="true").skipDuplicates().changes().takeUntilBy(this._stopper).onValue(I=>{I?this._reparse():this.destroy()}),this._threadViewDriver=this._findThreadView(),this._threadViewDriver&&this._threadViewDriver.addMessageViewDriver(this),this._driver.getMessageViewElementsMap().set(this._element,this),this._monitorEmailAddressHovering()}_findThreadView(){let m=this._driver.getThreadViewElementsMap(),w=(0,f.default)(this._element,C=>m.has(C));return w?m.get(w):null}_reparse(){let m=this._p;this._p=(0,b.default)(this._element),this._p.errors.length>0&&this._driver.getLogger().errorSite(new Error("message reparse errors"),{score:this._p.score,errors:this._p.errors,html:(0,d.default)(this._element)}),!m.attributes.loaded&&this._p.attributes.loaded&&this._eventStream.emit({type:"internal",eventName:"messageLoad"}),m.attributes.viewState!==this._p.attributes.viewState&&this._eventStream.emit({eventName:"viewStateChange",oldValue:m.attributes.viewState,newValue:this._p.attributes.viewState})}_monitorEmailAddressHovering(){this._eventStream.plug(r.default.fromEvents(this._element,"mouseover").map(m=>m.target).filter(m=>m&&m.getAttribute("email")).map(m=>{let w={name:m.textContent,emailAddress:m.getAttribute("email")},C;if(this._p.elements.sender&&this._p.elements.sender.contains(m))C="sender";else{if(!this._p.attributes.recipientElements||!Array.from(this._p.attributes.recipientElements).some(I=>I.contains(m)))return null;C="recipient"}return{eventName:"contactHover",messageViewDriver:this,contact:w,contactType:C}}).filter())}addAttachmentCardViewDriver(m){this._attachmentCardViews.push(m),m.getStopper().takeUntilBy(this._stopper).onValue(()=>{this._attachmentCardViews=this._attachmentCardViews.filter(w=>w!==m)})}getStopper(){return this._stopper}getEventStream(){return this._eventStream}isLoaded(){return this._p.attributes.loaded}hasOpenReply(){return!1}getMessageID(){let{inboxMessageId:m}=this._p.attributes;if(!m)throw new Error("Failed to find message id");/^msg-a:/.test(m);let w=/\d+$/.exec(m);if(!w)throw new Error("Should not happen");return new s.default(w[0]).toString(16)}async getMessageIDAsync(){let{inboxMessageId:m}=this._p.attributes;if(!m)throw new Error("Failed to find message id");if(/^msg-a:/.test(m)){for(let w of this._driver.getComposeViewDriverLiveSet().values()){let C=await w.getDraftID();if(C&&`msg-a:${C}`===m){await w.getStopper().take(1).toPromise();break}}return await this._driver.getGmailMessageIdForSyncMessageId(m)}{let w=/\d+$/.exec(m);if(!w)throw new Error("Should not happen");return new s.default(w[0]).toString(16)}}getContentsElement(){if(!this._p.elements.body)throw new Error("Could not find body element");return this._p.elements.body}getLinks(){throw new Error("not implemented yet")}isElementInQuotedArea(m){return(0,f.default)(m,C=>C.classList.contains("gmail_extra"))!=null}addMoreMenuItem(m){throw new Error("not implemented yet")}addAttachmentIcon(m){return new y}getAttachmentCardViewDrivers(){return this._attachmentCardViews}addAttachmentCard(m){let{attachmentsArea:w}=this._p.elements;if(!w)throw new Error("Could not find attachments area");let C=w.lastElementChild;return C||(w.style.display="",w.style.margin="16px 0 0",w.style.paddingTop="16px",C=document.createElement("div"),w.appendChild(C)),new p.default({...m,element:null,container:C},this._driver)}addButtonToDownloadAllArea(m){}getViewState(){return this._p.attributes.viewState}getDateString(){throw new Error("not implemented yet")}getSender(){let{sender:m}=this._p.elements;if(!m)throw new Error("could not find sender element");let w=m.getAttribute("email");if(!w)throw new Error("could not find email address");return{emailAddress:w,name:m.textContent}}getRecipients(){let m=this._driver.getUserContact();return Array.prototype.map.call(this._p.attributes.recipientElements,w=>{let C=w.getAttribute("email");return C===m.emailAddress?m:{emailAddress:C,name:w.textContent}})}getRecipientEmailAddresses(){return this.getRecipients().map(m=>{let{emailAddress:w}=m;return w})}async getRecipientsFull(){return this.getRecipients()}getThreadViewDriver(){if(!this._threadViewDriver)throw new Error("failed to find threadView");return this._threadViewDriver}getReadyStream(){return r.default.repeat(m=>m>10?null:(0,o.default)(null)).ignoreValues().beforeEnd(()=>null)}destroy(){this._eventStream.end(),this._attachmentCardViews.slice().forEach(m=>{m.destroy()})}});i.default=g},{"../../../../common/censorHTMLtree":471,"../../../../common/find-parent":474,"../../../lib/delay-asap":688,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/safe-event-emitter":736,"../detection/message/parser":623,"./inbox-attachment-card-view":648,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"bignumber.js":43,kefir:158,"kefir-bus":155,ud:455}],659:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("lodash/sortBy")),c=(t(e("kefir")),t(e("kefir-bus"))),s=(t(e("../../../lib/dom/insert-element-in-order")),t(e("../../../lib/dom/querySelectorOrFail"))),o=(0,u.defn)(v,class{constructor(d){(0,n.default)(this,"_eventStream",(0,c.default)()),this._setupModalContainerElement(d),this._processOptions(d),(0,s.default)(this._modalContainerElement,".inboxsdk__close_button").addEventListener("click",a=>{this._eventStream.emit({eventName:"closeClick",domEvent:a})})}destroy(){this._modalContainerElement.remove(),this._eventStream.end()}getModalContainerElement(){return this._modalContainerElement}getEventStream(){return this._eventStream}_processOptions(d){this.setTitle(d.title),this.setContentElement(d.el),this.setButtons(d.buttons||[]),this.setChromeClasses(d.chrome,d.showCloseButton)}setTitle(d){let a=(0,s.default)(this._modalContainerElement,"[role=heading]");d?(a.style.display="",a.textContent=d):a.style.display="none"}setContentElement(d){let a=(0,s.default)(this._modalContainerElement,".inboxsdk__modal_content");a.innerHTML="",typeof d=="string"?a.innerHTML=d:d instanceof Element&&a.appendChild(d)}setButtons(d){let a=(0,s.default)(this._modalContainerElement,".inboxsdk__modal_buttons");d.length>0?this._modalContainerElement.classList.add("inboxsdk__modal_hasButtons"):this._modalContainerElement.classList.remove("inboxsdk__modal_hasButtons"),a.innerHTML="",(0,r.default)(d,[p=>p.type==="PRIMARY_ACTION"?0:1,p=>p.orderHint||0]).forEach(p=>{var f=document.createElement("input");f.className=p.type==="PRIMARY_ACTION"?"inboxsdk__primary":"",f.type="button",f.value=p.text,f.addEventListener("click",b=>{b.preventDefault(),p.onClick.call(null)}),a.appendChild(f)})}setChromeClasses(d,a){d===!1?this._modalContainerElement.classList.add("inboxsdk__modal_chromeless"):this._modalContainerElement.classList.remove("inboxsdk__modal_chromeless"),a?this._modalContainerElement.classList.add("inboxsdk__modal_showCloseButton"):this._modalContainerElement.classList.remove("inboxsdk__modal_showCloseButton")}_setupModalContainerElement(d){let a=d.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var p=`
    <div class="inboxsdk__modal_container" tabindex="0" role="alertdialog">
      <div class="inboxsdk__modal_toprow ${a}">
        <span role="heading"></span>
        <button title="Close" class="inboxsdk__close_button"></button>
      </div>
      <div class="inboxsdk__modal_content">
      </div>
      <div class="inboxsdk__modal_buttons"></div>
    </div>
    `;this._modalContainerElement.innerHTML=p}});i.default=o},{"../../../lib/dom/insert-element-in-order":694,"../../../lib/dom/querySelectorOrFail":706,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/sortBy":350,ud:455}],660:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/includes")),r=(t(e("kefir")),t(e("kefir-stopper"))),c=t(e("kefir-bus")),s=e("../../../constants/router");i.default=class{constructor(o,d){(0,n.default)(this,"_eventStream",(0,c.default)()),(0,n.default)(this,"_stopper",(0,r.default)()),this._element=o,this._type=d;let a=document.location.pathname.slice(1);this._routeID=function(p){return p===""?s.NATIVE_ROUTE_IDS.INBOX:(0,u.default)(["snoozed","reminders","done","spam","trash"],p)?s.NATIVE_ROUTE_IDS[p.toUpperCase()]:/search\//.test(p)?s.NATIVE_ROUTE_IDS.SEARCH:"UNKNOWN"}(a),this._params=function(p){let f=p.split("/");return f.length<2?{}:{query:decodeURIComponent(f[1])}}(a),this._routeType=this._routeID==="UNKNOWN"?"UNKNOWN":"LIST"}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}getElement(){return this._element}getType(){return this._type}getRouteType(){return this._routeType}getRouteID(){return this._routeID}getParams(){return this._params}getEventStream(){return this._eventStream}refresh(){}getHash(){throw new Error("should not happen")}getCustomViewElement(){throw new Error("should not happen")}addCollapsibleSection(o,d){throw new Error("not implemented yet")}addSection(o,d){throw new Error("not implemented yet")}setFullWidth(o){throw new Error("should not happen")}}},{"../../../constants/router":492,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/includes":324}],661:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("../../../driver-common/update-icon")),c=t(e("auto-html")),s=t(e("kefir")),o=t(e("kefir-bus")),d=(t(e("kefir-stopper")),t(e("kefir-cast"))),a=t(e("bignumber.js")),p=t(e("./InboxLabelView")),f=t(e("./InboxToolbarButtonView")),b=(0,u.defn)(v,class{constructor(_,y,g){(0,n.default)(this,"_eventStream",(0,o.default)()),(0,n.default)(this,"_isDestroyed",!1),this._element=_,this._driver=y,this._p=g,this._stopper=this._eventStream.ignoreValues().beforeEnd(()=>null).toProperty()}getEventStream(){return this._eventStream}getStopper(){return this._stopper}setUserView(_){this._userView=_}isSelected(){if(!this._p.elements.checkbox)throw new Error("Did not find checkbox element");return this._p.elements.checkbox.getAttribute("aria-checked")==="true"}addToolbarButton(_){let{toolbar:y}=this._p.elements;if(!y)throw new Error("could not find toolbar element");y.classList.add("inboxsdk__list_toolbar");let g=new f.default({..._,onClick:m=>{m.dropdown&&(y.classList.add("inboxsdk__thread_row_force_toolbar_visible"),m.dropdown.once("destroy",()=>{y.classList.remove("inboxsdk__thread_row_force_toolbar_visible")})),_.onClick&&_.onClick(m)}},this._driver.getAppId(),y);return this._stopper.takeUntilBy(g.getStopper()).onValue(()=>{g.destroy()}),g}addAttachmentIcon(_){throw new Error("Not supported in Inbox")}addButton(_){throw new Error("Not supported in Inbox")}addActionButton(_){throw new Error("not yet implemented")}addImage(_){if(this._isDestroyed)return;let{labelParent:y}=this._p.elements;if(!y)throw new Error("Could not find label parent element");let g=(0,d.default)(s.default,_).takeUntilBy(this._stopper).toProperty(),m=null;g.onValue(w=>{if(w){m||(m={iconSettings:{},iconWrapper:document.createElement("div"),remove(){this.iconWrapper.remove()}},m.iconWrapper.className="inboxsdk__thread_row_icon_wrapper");let{iconSettings:C,iconWrapper:I}=m;if((0,r.default)(C,I,!1,w.imageClass,w.imageUrl),w.tooltip&&I.setAttribute("title",w.tooltip),y!==I.parentElement){let S=y.querySelectorAll(".inboxsdk__inbox_thread_row_label"),O=S.length>0?S[S.length-1].nextElementSibling:y.firstChild;y.insertBefore(I,O)}}else m&&(m.remove(),m=null)}),this._stopper.onEnd(()=>{m&&m.remove()})}addLabel(_){if(this._isDestroyed)return;let y=this._p.elements.labelParent;if(!y)throw new Error("Could not find label parent element");let g=(0,d.default)(s.default,_).takeUntilBy(this._stopper).toProperty(),m=null;g.onValue(w=>{if(w){if(!m){let C=new p.default,I=C.getElement();m={inboxLabelView:C,remove:I.remove.bind(I)}}if(m.inboxLabelView.updateLabelDescriptor(w),y!==m.inboxLabelView.getElement().parentElement){let C=y.querySelectorAll(".inboxsdk__inbox_thread_row_label"),I=C.length>0?C[C.length-1].nextElementSibling:y.firstChild;y.insertBefore(m.inboxLabelView.getElement(),I)}}else m&&(m.remove(),m=null)}),this._stopper.onEnd(()=>{m&&m.remove()})}getDateString(){throw new Error("Not supported in Inbox")}getSubject(){if(!this._p.elements.subject)throw new Error("Failed to find subject");return this._p.elements.subject.textContent}getThreadID(){throw new Error("Not supported in Inbox. Please use getThreadIDAsync() instead")}async getThreadIDAsync(){let{inboxThreadId:_}=this._p.attributes;if(!_)throw new Error("Failed to find thread id");if(/^thread-a:/.test(_)){this._driver.trackThreadRowIdCall(!1,_);let y=await this._driver.getInboxMessageIdForInboxThreadId(_),g=await this._driver.getGmailMessageIdForSyncMessageId(y);return await this._driver.getThreadIdFromMessageId(g)}{this._driver.trackThreadRowIdCall(!0,_);let y=/\d+$/.exec(_);if(!y)throw new Error("Should not happen");return new a.default(y[0]).toString(16)}}async getDraftID(){let{isOnlyDraft:_,inboxThreadId:y}=this._p.attributes;if(_&&y){let g=/\d+$/.exec(y);if(!g)throw new Error("Should not happen");return g[0]}return null}getVisibleDraftCount(){let{visibleDraftCount:_}=this._p.attributes;if(typeof _!="number")throw new Error("Failed to find visible draft count");return _}getVisibleMessageCount(){let{visibleMessageCount:_}=this._p.attributes;if(typeof _!="number")throw new Error("Failed to find visible message count");return _}getContacts(){let{contacts:_}=this._p.attributes;if(!Array.isArray(_))throw new Error("Failed to find contacts");return _}replaceDate(_){throw new Error("Not supported in Inbox")}replaceDraftLabel(_){if(this._isDestroyed||this._p.attributes.visibleDraftCount===0)return;let{recipientParent:y,messageCountParent:g}=this._p.elements;if(!y||!g)throw new Error("Could not find necessary parent elements");let m=(0,d.default)(s.default,_).takeUntilBy(this._stopper).toProperty(),w=null;m.onValue(C=>{if(C){let{text:I,count:S}=C;w||(w={countEl:document.createElement("span"),draftEl:document.createElement("span"),remove(){this.countEl.remove(),this.draftEl.remove(),y.classList.remove("inboxsdk__thread_row_draft_label_replaced"),g.classList.remove("inboxsdk__thread_row_draft_count_replaced"),g.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)")||(g.style.display="none")}},w.draftEl.className="inboxsdk__thread_row_custom_draft_label",w.countEl.className="inboxsdk__thread_row_custom_draft_count",y.classList.add("inboxsdk__thread_row_draft_label_replaced")),w.draftEl.textContent=I,y!==w.draftEl.parentElement&&y.appendChild(w.draftEl);let O=g.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)");S&&S>1?(g.classList.add("inboxsdk__thread_row_draft_count_replaced"),g.style.display="inline",w.countEl.innerHTML=O?c.default`(${S})`:c.default`&nbsp;(${S})`,g!==w.countEl.parentElement&&g.appendChild(w.countEl)):(g.classList.remove("inboxsdk__thread_row_draft_count_replaced"),O||(g.style.display="none"),w.countEl.remove())}else w&&(w.remove(),w=null);this._stopper.onEnd(()=>{w&&w.remove()})})}destroy(){this._isDestroyed=!0,this._eventStream.end()}});i.default=b},{"../../../driver-common/update-icon":680,"./InboxLabelView":641,"./InboxToolbarButtonView":643,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"bignumber.js":43,kefir:158,"kefir-bus":155,"kefir-cast":156,"kefir-stopper":157,ud:455}],662:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/find")),r=e("ud"),c=t(e("auto-html")),s=t(e("kefir")),o=t(e("kefir-bus")),d=t(e("kefir-stopper")),a=t(e("bignumber.js")),p=t(e("../../../lib/delay-asap")),f=t(e("../../../lib/idMap")),b=t(e("../../../lib/dom/querySelectorOrFail")),_=t(e("../../../lib/dom/make-mutation-observer-chunked-stream")),y=t(e("../../../views/SimpleElementView")),g=(t(e("../../../views/conversations/custom-message-view")),t(e("../detection/thread/parser"))),m=(0,r.defn)(v,class{constructor(w,C,I){(0,n.default)(this,"_eventStream",(0,o.default)()),(0,n.default)(this,"_messageViews",[]),(0,n.default)(this,"_receivedMessageView",(0,d.default)()),(0,n.default)(this,"_sidebarPanels",new Set),this._element=w,this._driver=C,this._p=I,this._stopper=this._eventStream.ignoreValues().beforeEnd(()=>null).toProperty(),this._driver.getThreadViewElementsMap().set(this._element,this),this._ready=this._receivedMessageView.flatMap(()=>(0,p.default)()).onValue(()=>{this._p=(0,g.default)(this._element)}).toProperty(),this.isLoadingStub()&&(0,_.default)(this._element,{attributes:!0,attributeFilter:["aria-busy"]}).takeUntilBy(this._stopper).onValue(()=>{this.isLoadingStub()||this.destroy()})}isLoadingStub(){return this._element.getAttribute("aria-busy")==="true"}getEventStream(){return this._eventStream}getStopper(){return this._stopper}addMessageViewDriver(w){this._messageViews.push(w),this._eventStream.plug(w.getEventStream().filter(C=>C.eventName==="contactHover")),w.getStopper().takeUntilBy(this._stopper).onValue(()=>{this._messageViews=this._messageViews.filter(C=>C!==w)}),this._receivedMessageView.destroy()}getMessageViewDrivers(){return this._messageViews}getToolbarElement(){if(!this._p.elements.toolbar)throw new Error("Failed to find toolbar");return this._p.elements.toolbar}getSubject(){if(!this._p.elements.heading)throw new Error("Failed to find subject");return this._p.elements.heading.textContent}getThreadID(){let{inboxThreadId:w}=this._p.attributes;if(!w)throw new Error("Failed to find thread id");/^msg-a:/.test(w);let C=/\d+$/.exec(w);if(!C)throw new Error("Should not happen");return new a.default(C[0]).toString(16)}async getThreadIDAsync(){let{inboxThreadId:w}=this._p.attributes;if(!w)throw new Error("Failed to find message id");if(/^thread-a:/.test(w)){let C=this._messageViews[0];if(!C)throw new Error("Should not happen");let I=await C.getMessageIDAsync();return await this._driver.getThreadIdFromMessageId(I)}{let C=/\d+$/.exec(w);if(!C)throw new Error("Should not happen");return new a.default(C[0]).toString(16)}}registerHiddenCustomMessageNoticeProvider(w){throw new Error("not supported")}addCustomMessage(w){throw new Error("not supported")}addSidebarContentPanel(w){let C=this._driver.getAppSidebarView().addSidebarContentPanel(w);return this._sidebarPanels.add(C),C.getStopper().onValue(()=>{this._sidebarPanels.delete(C)}),this._stopper.takeUntilBy(C.getStopper()).onValue(()=>{C.remove()}),w.takeUntilBy(this._stopper).takeUntilBy(C.getStopper()).take(1).onValue(I=>{let{stickyHeading:S}=this._p.elements;if(!S)return;let O=S.querySelector("."+(0,f.default)("sidebar_iconArea"));if(!O){let j=O=document.createElement("div");O.className=(0,f.default)("sidebar_iconArea"),this._driver.getAppSidebarView().getOpenOrOpeningStream().takeUntilBy(this._stopper).onValue(k=>{j.style.display=k?"none":""}),S.appendChild(O)}let A=I.appName||this._driver.getOpts().appName||I.title,E=I.appIconUrl||this._driver.getOpts().appIconUrl||I.iconUrl,D=(0,u.default)(O.querySelectorAll("."+(0,f.default)("sidebar_button_container")),j=>{let k=j.querySelector("button");if(!k||k.title!==A)return!1;let M=k.querySelector("img");return!(!M||M.src!==E)}),P;if(D){let j=Number(D.getAttribute("data-count"))||1;D.setAttribute("data-count",j+1),P=D}else P=document.createElement("div"),P.className=(0,f.default)("sidebar_button_container"),P.innerHTML=c.default`
            <button class="inboxsdk__button_icon" type="button" title="${A}">
              <img class="inboxsdk__button_iconImg" src="${E}">
            </button>
          `,(0,b.default)(P,"button").addEventListener("click",j=>{j.stopPropagation(),this._driver.getAppSidebarView().open(),C.scrollIntoView()},!0),O.appendChild(P);C.getStopper().onValue(()=>{let j=Number(P.getAttribute("data-count"));j<=1?P.remove():j===2?P.removeAttribute("data-count"):P.setAttribute("data-count",String(j-1))})}),C}removePanels(){this._sidebarPanels.forEach(w=>{w.remove()})}addNoticeBar(){let w=document.createElement("div");w.className=(0,f.default)("thread_noticeBar");let{heading:C}=this._p.elements;if(!C)throw new Error("Failed to find subject");C.insertAdjacentElement("afterend",w);let I=new y.default(w);return this._stopper.takeUntilBy(s.default.fromEvents(I,"destroy")).onValue(()=>I.destroy()),I}addLabel(){throw new Error("not supported")}getReadyStream(){return this._ready}destroy(){this._driver.getThreadViewElementsMap().delete(this._element),this._eventStream.end()}});i.default=m},{"../../../lib/delay-asap":688,"../../../lib/dom/make-mutation-observer-chunked-stream":700,"../../../lib/dom/querySelectorOrFail":706,"../../../lib/idMap":720,"../../../views/SimpleElementView":759,"../../../views/conversations/custom-message-view":768,"../detection/thread/parser":627,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,"bignumber.js":43,kefir:158,"kefir-bus":155,"kefir-stopper":157,"lodash/find":315,ud:455}],663:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("kefir")),c=t(e("kefir-stopper")),s=t(e("contain-by-screen")),o=(0,u.defn)(v,class{constructor(d,a){if((0,n.default)(this,"_stopper",(0,c.default)()),this._target=d,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow",this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__tooltip_content",this._el=document.createElement("div"),this._el.style.position="fixed",this._el.className="inboxsdk__tooltip",this._el.appendChild(this._contentEl),a.el)this._contentEl.appendChild(a.el),this._el.classList.add("inboxsdk__tooltip_chromeless");else{{let p=document.createElement("button");p.type="button",p.title="Close",p.className="inboxsdk__close_button",p.addEventListener("click",f=>{this.destroy()}),this._el.appendChild(p)}if(a.imageUrl){let p=a.imageUrl,f=document.createElement("img");f.className="inboxsdk__tooltip_img",f.src=p,this._contentEl.appendChild(f)}if(a.title){let p=a.title,f=document.createElement("h1");f.textContent=p,this._contentEl.appendChild(f)}if(a.subtitle){let p=a.subtitle,f=document.createElement("div");f.className="inboxsdk__subtitle",f.textContent=p,this._contentEl.appendChild(f)}if(a.button){let p=a.button,f=document.createElement("input");f.type="button",f.value=p.title,f.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),p.onClick&&p.onClick.call(null)}),this._contentEl.appendChild(f)}}document.body.appendChild(this._el),document.body.appendChild(this._arrowEl),this._updatePosition(!0),this._el.addEventListener("load",p=>{this._updatePosition(!0)},!0),r.default.interval(200).takeUntilBy(this._stopper).map(()=>d.getBoundingClientRect()).skipDuplicates((p,f)=>p.top===f.top&&p.left===f.left&&p.right===f.right&&p.bottom===f.bottom).onValue(()=>{this._updatePosition()})}destroy(){this._el.remove(),this._arrowEl.remove(),this._stopper.destroy()}getStopper(){return this._stopper}_updatePosition(){let d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];d&&(this._el.classList.add("inboxsdk__notransition"),this._arrowEl.classList.add("inboxsdk__notransition"));let{position:a}=(0,s.default)(this._el,this._target,{position:"top",hAlign:"center",vAlign:"center",buffer:10});(0,s.default)(this._arrowEl,this._target,{position:a,forcePosition:!0,hAlign:"center",forceHAlign:!0,vAlign:"center",forceVAlign:!0,buffer:11}),["top","bottom","left","right"].forEach(p=>{this._arrowEl.classList.remove("inboxsdk__"+p)}),this._arrowEl.classList.add("inboxsdk__"+a),d&&(this._el.offsetHeight,this._arrowEl.offsetHeight,this._el.classList.remove("inboxsdk__notransition"),this._arrowEl.classList.remove("inboxsdk__notransition"))}});i.default=o},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"contain-by-screen":90,kefir:158,"kefir-stopper":157,ud:455}],664:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-bus")),c=t(e("kefir-stopper")),s=t(e("../../../lib/dom/insert-element-in-order")),o=t(e("../../../lib/dom/querySelectorOrFail")),d=t(e("../../../widgets/buttons/dropdown-view")),a=t(e("./inbox-dropdown-view")),p=t(e("../../../constants/nav-item-types")),f=t(e("../../../driver-common/update-icon"));class b{constructor(y,g){(0,n.default)(this,"_eventStream",(0,r.default)()),(0,n.default)(this,"_transitionResetter",(0,r.default)()),(0,n.default)(this,"_children",0),(0,n.default)(this,"_name",""),(0,n.default)(this,"_type",null),(0,n.default)(this,"_orderHint",Number.MAX_SAFE_INTEGER),(0,n.default)(this,"_disabled",!1),(0,n.default)(this,"_isCollapsed",!1),(0,n.default)(this,"_iconSettings",{}),(0,n.default)(this,"_accessory",null),(0,n.default)(this,"_accessoryView",null),this._level=g||0,this._elements={wrapper:document.createElement("div"),expander:document.createElement("div"),navItem:document.createElement("div"),name:document.createElement("span"),subNav:document.createElement("div"),subNavInner:document.createElement("div"),accessory:document.createElement("div")},this._level>2,this._stopper=this._eventStream.ignoreValues().beforeEnd(()=>null).toProperty(),this._setupElements(),y.takeUntilBy(this._stopper).onValue(m=>{this._update(m),this._navItemDescriptor=m})}addNavItem(y,g){let m=new b(g,this._level+1);return m.getEventStream().filter(w=>w.eventName==="orderChanged").onValue(()=>(0,s.default)(this._elements.subNavInner,m.getElement())),(0,s.default)(this._elements.subNavInner,m.getElement()),this._children+=1,m.getStopper().onValue(()=>{this._children-=1,this._updateChildrenClass(),this._updateDisabledState(this._navItemDescriptor||{}),this._updateAccessory(this._accessory,!0)}),this._updateChildrenClass(),this._updateDisabledState(this._navItemDescriptor||{}),this._updateAccessory(this._accessory,!0),m}setActive(y){this._elements.navItem.classList.toggle("inboxsdk__navItem_active",y)}toggleCollapse(){this._isCollapsed=!this._isCollapsed,this._isCollapsed?this._collapse():this._expand()}setCollapsed(y){this._isCollapsed!==y&&(this._isCollapsed=y,this._isCollapsed?this._collapse():this._expand())}isCollapsed(){return this._isCollapsed}getElement(){return this._elements.wrapper}getEventStream(){return this._eventStream}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._elements.wrapper.remove()}_setupElements(){let{wrapper:y,expander:g,navItem:m,name:w,subNav:C,subNavInner:I,accessory:S}=this._elements;y.className=`inboxsdk__navItem_wrapper inboxsdk__navItem_level${this._level}`,y.setAttribute("tabindex","-1"),y.setAttribute("data-order-hint",String(this._orderHint)),m.setAttribute("role","menuitem"),g.classList.add("inboxsdk__navItem_expander"),m.classList.add("inboxsdk__navItem"),w.classList.add("inboxsdk__navItem_name"),S.classList.add("inboxsdk__navItem_accessory"),C.classList.add("inboxsdk__navItem_subNav"),I.classList.add("inboxsdk__navItem_subNavInner"),g.innerHTML='<svg><polygon points="16.59 8.59 12 13.17 7.41 8.59 6 10 12 16 18 10"></polygon></svg>',m.appendChild(g),m.appendChild(w),m.appendChild(S),y.appendChild(m),C.appendChild(I),y.appendChild(C),this._eventStream.plug(u.default.fromEvents(m,"click").filter(()=>!this._disabled).map(O=>(O.stopPropagation(),O.preventDefault(),{eventName:"click",domEvent:O}))),u.default.fromEvents(g,"click").takeUntilBy(this._stopper).filter(()=>this._children>0).onValue(O=>{this.toggleCollapse(),O.stopPropagation()})}_collapse(){let{subNav:y,subNavInner:g}=this._elements;this._transitionResetter.emit(null),this._elements.wrapper.classList.add("inboxsdk__navItem_collapsed"),y.style.height=`${g.clientHeight}px`,y.clientHeight,y.style.height="0",u.default.merge([u.default.fromEvents(y,"transitionend"),u.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(()=>{y.style.display="none"}),this._eventStream.emit({eventName:"collapsed"})}_expand(){let{subNav:y,subNavInner:g}=this._elements;this._transitionResetter.emit(null),this._elements.wrapper.classList.remove("inboxsdk__navItem_collapsed"),y.style.display="",y.style.height=`${g.clientHeight}px`,u.default.merge([u.default.fromEvents(y,"transitionend"),u.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(()=>{y.style.height=""}),this._eventStream.emit({eventName:"expanded"})}_update(y){this._updateName(y.name),this._updateType(y.type),this._updateExpander(y),this._updateDisabledState(y),this._updateIcon(y),this._updateAccessory(y.accessory),this._updateOrder(y.orderHint||y.orderHint===0?y.orderHint:Number.MAX_SAFE_INTEGER)}_updateName(y){this._name!==y&&(this._elements.name.textContent=y,this._elements.name.setAttribute("title",y),this._name=y)}_updateType(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.NAVIGATION;this._type!==y&&(this._elements.navItem.classList.toggle("inboxsdk__navItem_link",y===p.default.LINK),this._type=y)}_updateExpander(y){let{backgroundColor:g,expanderForegroundColor:m}=y;this._elements.expander.style.backgroundColor=g||"",(0,o.default)(this._elements.expander,"polygon").style.fill=m||"",this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasColor",typeof g=="string")}_updateIcon(y){this._elements.navItem.classList.toggle("inboxsdk__navItem_hasIcon",(!this._disabled||this._level>0)&&Boolean(y.iconUrl||y.iconClass)),(0,f.default)(this._iconSettings,this._elements.navItem,!1,y.iconClass,y.iconUrl,this._elements.name)}_updateAccessory(y){(arguments.length>1&&arguments[1]!==void 0&&arguments[1]||this._accessory!==y)&&(this._accessoryView&&(this._accessoryView.destroy(),this._accessoryView=null),y&&!this._disabled&&(this._accessoryView=this._createAccessory(y)),this._accessory=y)}_updateDisabledState(y){this._disabled=!(y.routeID||y.onClick)||this._level===0&&this._children>0,this._elements.wrapper.classList.toggle("inboxsdk__navItem_disabled",this._disabled)}_updateOrder(y){this._orderHint!==y&&(this._elements.wrapper.setAttribute("data-order-hint",String(y)),this._orderHint=y,this._eventStream.emit({eventName:"orderChanged"}))}_updateChildrenClass(){this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasChildren",this._children>0)}_createAccessory(y){switch(y.type){case"CREATE":return this._createCreateAccessory(y);case"ICON_BUTTON":return this._createIconButtonAccessory(y);case"DROPDOWN_BUTTON":return this._createDropdownButtonAccessory(y);default:throw new Error("A type must be specified for NavItem accessories")}}_createCreateAccessory(y){let{onClick:g}=y;return this._createIconButtonAccessory({onClick:g,iconUrl:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/ic_add-cluster_24px_g60_r3_2x.png"})}_createDropdownButtonAccessory(y){let{onClick:g}=y;return this._createIconButtonAccessory({onClick:g,iconUrl:"//www.gstatic.com/images/icons/material/system/2x/settings_black_18dp.png"},!0)}_createIconButtonAccessory(y){let g=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!y.onClick)throw new Error("An onClick handler is required");this._elements.wrapper.classList.add("inboxsdk__navItem_hasAccessory"),(0,f.default)({},this._elements.accessory,!1,y.iconClass,y.iconUrl);let m=(0,o.default)(this._elements.accessory,".inboxsdk__button_icon");m.setAttribute("tabindex","-1");let w=(0,c.default)(),C=null;return u.default.fromEvents(this._elements.accessory,"click").takeUntilBy(this._stopper).takeUntilBy(w).onValue(I=>{if(I.preventDefault(),I.stopPropagation(),g){if(C)return void C.close();m.classList.add("inboxsdk__active"),C=new d.default(new a.default,this._elements.accessory),C.setPlacementOptions({position:"right",hAlign:"left",vAlign:"top",buffer:10}),C.on("destroy",()=>{m.classList.remove("inboxsdk__active"),C=null})}y.onClick({dropdown:C})}),u.default.merge([this._stopper,w]).take(1).onValue(()=>{C&&C.close()}),{destroy:()=>{this._elements.wrapper.classList.remove("inboxsdk__navItem_hasAccessory"),this._elements.accessory.innerHTML="",w.destroy()}}}}i.default=b},{"../../../constants/nav-item-types":491,"../../../driver-common/update-icon":680,"../../../lib/dom/insert-element-in-order":694,"../../../lib/dom/querySelectorOrFail":706,"../../../widgets/buttons/dropdown-view":782,"./inbox-dropdown-view":656,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157}],665:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let o=s();return(0,c.default)(o,{attributes:!0}).toProperty(()=>{}).filter(()=>window.getComputedStyle(o).display!=="none").merge(r.default.later(150)).take(1).flatMap(()=>(0,c.default)(o,{attributes:!0}).toProperty(()=>{})).filter(()=>window.getComputedStyle(o).display==="none").map(()=>{}).take(1)};var n=t(e("lodash/once")),u=t(e("lodash/find")),r=t(e("kefir")),c=t(e("../../lib/dom/make-mutation-observer-chunked-stream"));let s=(0,n.default)(()=>(0,u.default)(document.body.children,o=>{let d=window.getComputedStyle(o);return d.position==="fixed"&&parseFloat(d.top)===0&&parseFloat(d.bottom)===0&&parseFloat(d.left)===0&&parseFloat(d.right)===0}))},{"../../lib/dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/find":315,"lodash/once":347}],666:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){let{element:o,discardButton:d}=s;return u.default.merge([(0,r.default)(o,"keydown").filter(a=>[13,32].indexOf(a.which)>-1||[13,32].indexOf(a.keyCode)>-1).filter(a=>d&&d.contains(a.target)),(0,r.default)(o,"click").filter(a=>d&&d.contains(a.target))]).map(a=>({eventName:"discard",data:{cancel(){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),c(o)}}}))};var n=t(e("asap")),u=t(e("kefir")),r=t(e("../../lib/from-event-target-capture"));let c=s=>(0,n.default)(()=>s.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled",{bubbles:!1,cancelable:!1,detail:null})))},{"../../lib/from-event-target-capture":716,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158}],667:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){let{element:o,sendButton:d,sendAndArchive:a}=s;return u.default.merge([(0,r.default)(o,"keydown").filter(p=>p.ctrlKey||p.metaKey).filter(p=>p.which===13||p.keyCode===13),(0,r.default)(o,"keydown").filter(p=>[13,32].indexOf(p.which)>-1||[13,32].indexOf(p.keyCode)>-1).filter(p=>d&&d.contains(p.target)||a&&a.contains(p.target)),(0,r.default)(o,"click").filter(p=>d&&d.contains(p.target)||a&&a.contains(p.target))]).filter(p=>!o.hasAttribute("data-inboxsdk-send-replaced")||(p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation(),!1)).map(p=>({eventName:"presending",data:{cancel(){p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation(),c(o)}}}))};var n=t(e("asap")),u=t(e("kefir")),r=t(e("../../lib/from-event-target-capture"));let c=s=>(0,n.default)(()=>s.dispatchEvent(new CustomEvent("inboxSDKsendCanceled",{bubbles:!1,cancelable:!1,detail:null})))},{"../../lib/from-event-target-capture":716,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158}],668:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let t=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);if(t){let n=t[1];return`/u/${t[2]}/d/${n}`}{let n=document.location.pathname.match(/(\/u\/\d+)\//i);return n?n[1]:"/u/0"}}},{}],669:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./getOriginalMessagePage")),r=(0,n.defn)(v,async function(c,s){let o=(await(0,u.default)(c,{syncMessageID:s})).match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i);if(!o)throw new Error("Failed to find gmail message id for inbox message id");return o[1]});i.default=r},{"./getOriginalMessagePage":671,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],670:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=e("../dom-driver/gmail/gmail-response-processor"),r=t(e("./getSyncThreadsForSearch")),c=t(e("./gmailAjax")),s=t(e("./getAccountUrlPart")),o=(0,n.defn)(v,async function(d,a){if(d.isUsingSyncAPI&&d.isUsingSyncAPI()){let{threads:p}=await(0,r.default)(d,"rfc822msgid:"+a);return p[0].oldGmailThreadID}return async function(p,f){let b=await(0,c.default)({method:"POST",url:`https://mail.google.com/mail${(0,s.default)()}/`,data:{ik:p.getPageCommunicator().getIkValue(),at:await p.getGmailActionToken(),ui:"2",view:"tl",start:"0",num:"1",rt:"c",search:"query",q:`rfc822msgid:${f}`},xhrFields:{withCredentials:!0},canRetry:!0,headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"}}),_=(0,u.extractThreads)(b.text);if(_.length!==1)throw new Error("Failed to find gmail thread id for rfc message id. Message may not exist in user's account.");return _[0].gmailThreadId}(d,a)});i.default=o},{"../dom-driver/gmail/gmail-response-processor":536,"./getAccountUrlPart":668,"./getSyncThreadsForSearch":672,"./gmailAjax":674,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],671:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./gmailAjax")),r=(0,n.defn)(v,async function(c,s){let o={ik:c.getPageCommunicator().getIkValue(),view:"om"},d;if(s.oldGmailMessageID?o.th=s.oldGmailMessageID:s.syncMessageID&&(o.permmsgid=s.syncMessageID),document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/))d=document.location.origin+document.location.pathname;else{let p=document.location.pathname.match(/(\/u\/\d+)\//i);d=`https://mail.google.com/mail${p?p[1]:"/u/0"}`}let{text:a}=await(0,u.default)({url:d,method:"GET",canRetry:!0,data:o});return a});i.default=r},{"./gmailAjax":674,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],672:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=e("../dom-driver/gmail/gmail-sync-response-processor"),r=t(e("./gmailAjax")),c=t(e("./getAccountUrlPart")),s=(0,n.defn)(v,async function(o,d){let a=null;try{let{text:p}=await(0,r.default)({method:"POST",url:`https://mail.google.com/sync${(0,c.default)()}/i/bv`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":await o.getPageCommunicator().getXsrfToken(),"X-Gmail-BTAI":await o.getPageCommunicator().getBtaiHeader(),"X-Google-BTD":"1"},data:JSON.stringify({1:{2:1,4:d}})});a=p}catch{let{text:f}=await(0,r.default)({method:"POST",url:`https://mail.google.com/sync${(0,c.default)()}/i/bv?rt=r&pt=ji`,headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":await o.getPageCommunicator().getXsrfToken(),"X-Gmail-BTAI":await o.getPageCommunicator().getBtaiHeader(),"X-Google-BTD":"1"},data:JSON.stringify([[null,51,null,d]])});a=f}return{threads:(0,u.extractThreadsFromSearchResponse)(a),_text:a}});i.default=s},{"../dom-driver/gmail/gmail-sync-response-processor":537,"./getAccountUrlPart":668,"./gmailAjax":674,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],673:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./requestGmailThread")),r=e("../dom-driver/gmail/gmail-response-processor"),c=(0,n.defn)(v,async function(s,o){let d=s.getPageCommunicator().getIkValue(),a=await(0,u.default)(d,o),p=(0,r.extractGmailThreadIdFromMessageIdSearch)(a);if(!p)throw new Error("Failed to find thread id for given message id");return p});i.default=c},{"../dom-driver/gmail/gmail-response-processor":536,"./requestGmailThread":677,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],674:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("kefir")),r=t(e("../lib/imageRequest")),c=t(e("../../common/rate-limit-queuer")),s=t(e("../../common/ajax"));let o=6e4,d=(0,c.default)((0,c.default)(s.default,1e3,7),1e4,50);var a=(0,n.defn)(v,async function(p){if(!/^https:\/\/mail\.google\.com(?:$|\/)/.test(p.url))throw new Error("Should not happen: gmailAjax called with non-gmail url");if(document.location.origin==="https://mail.google.com")return await d(p);try{return await d({...p,canRetry:!1})}catch(f){if(f&&f.status===0){try{await u.default.fromPromise((0,r.default)("https://mail.google.com/mail/u/0/")).merge(u.default.later(o,void 0)).take(1).takeErrors(1).toPromise()}catch{}return await d(p)}if(f&&typeof f.status=="number"&&f.status>=500)return await d(p);throw f}});i.default=a},{"../../common/ajax":468,"../../common/rate-limit-queuer":483,"../lib/imageRequest":721,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],675:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../../common/rate-limit-queuer")),r=t(e("../../common/ajax")),c=(0,n.defn)(v,(0,u.default)(r.default,1e3,7));i.default=c},{"../../common/ajax":468,"../../common/rate-limit-queuer":483,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],676:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n,u,r){let c=t.querySelector(".inboxsdk__button_icon");c||(c=document.createElement("div"),c.classList.add("inboxsdk__button_icon"),c.appendChild(n)),u?t.appendChild(c):t.insertBefore(t,r||t.firstElementChild)}},{}],677:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("querystring")),r=t(e("./gmailAjax")),c=t(e("./getAccountUrlPart")),s=(0,n.defn)(v,async function(o,d){let a={ui:2,ik:o,view:"cv",th:d,pcd:1,mb:0,rt:"c",search:"inbox",type:d},{text:p}=await(0,r.default)({method:"POST",url:`https://mail.google.com/mail${(0,c.default)()}?${u.default.stringify(a)}`,canRetry:!0});return p});i.default=s},{"./getAccountUrlPart":668,"./gmailAjax":674,"@babel/runtime/helpers/interopRequireDefault":15,querystring:410,ud:455}],678:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/extends")),r=n(e("@babel/runtime/helpers/defineProperty")),c=n(e("lodash/flatMap")),s=n(e("lodash/sortBy")),o=n(e("classnames")),d=n(e("kefir")),a=n(e("kefir-stopper")),p=n(e("react")),f=n(e("react-draggable-list")),b=n(e("react-smooth-collapse")),_=(n(e("../../../common/get-or-fail")),n(e("../../lib/idMap"))),y=n(e("../../lib/react/ElementContainer"));let g={stiffness:400,damping:50};class m extends p.default.Component{constructor(I){super(I),(0,r.default)(this,"_stopper",(0,a.default)()),this.state={expansionSettings:this._readExpansionSettings()}}componentDidMount(){d.default.fromEvents(window,"storage").filter(I=>I.key==="inboxsdk__sidebar_expansion_settings").takeUntilBy(this._stopper).onValue(()=>{this.setState({expansionSettings:this._readExpansionSettings()})})}componentWillUnmount(){this._stopper.destroy()}scrollPanelIntoView(I){let S=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this._list.getItemInstance(I),A=this.props.container;O.scrollIntoView(S,A&&A())}closePanel(I){let S=this.props.panels.find(O=>O.instanceId===I);S&&this._expandedToggle(S.appId,S.id,!1)}openPanel(I){let S=this.props.panels.find(O=>O.instanceId===I);S&&this._expandedToggle(S.appId,S.id,!0)}shouldComponentUpdate(I,S){return this.props.panels!==I.panels||this.state.expansionSettings!==S.expansionSettings}_expandedToggle(I,S,O){let A=this._readExpansionSettings();Object.prototype.hasOwnProperty.call(A.apps,I)||(A.apps[I]={ids:{}}),A.apps[I].ids[S]={lastUse:Date.now(),expanded:O},this.setState({expansionSettings:A},this.props.onExpandedToggle),this._saveExpansionSettings(A)}_readExpansionSettings(){let I;try{I=JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_expansion_settings")||"null")}catch{}return I||{apps:{}}}_saveExpansionSettings(I){let S=(0,c.default)(Object.keys(I.apps),O=>Object.keys(I.apps[O].ids).map(A=>[O,A]));S.length>200&&(0,s.default)(S,O=>{let[A,E]=O;return I.apps[A].ids[E].lastUse}).slice(0,S.length-200).forEach(O=>{let[A,E]=O;delete I.apps[A].ids[E],Object.keys(I.apps[A].ids).length===0&&delete I.apps[A]});try{t.localStorage.setItem("inboxsdk__sidebar_expansion_settings",JSON.stringify(I))}catch{}}render(){let{expansionSettings:I}=this.state,{panels:S,onClose:O,onOutsideClick:A,onMoveEnd:E,container:D}=this.props,P=S.length>1,j=S.length===1&&S[0].hideTitleBar,k=S.map(M=>{let R=Object.prototype.hasOwnProperty.call(I.apps,M.appId)?I.apps[M.appId]:null,V=R?R.ids[M.id]:null,T=!V||V.expanded;return{panelDescriptor:M,showControls:P,expanded:T,onExpandedToggle:U=>{this._expandedToggle(M.appId,M.id,U)}}});return p.default.createElement("div",{className:(0,o.default)((0,_.default)("app_sidebar"),{[(0,_.default)("hideTitleBar")]:j})},p.default.createElement("div",{className:(0,_.default)("app_sidebar_main"),ref:M=>{M&&(this._main=M)}},p.default.createElement("div",{className:(0,_.default)("app_sidebar_content_area")},p.default.createElement(f.default,{padding:0,ref:M=>{M&&(this._list=M)},itemKey:M=>M.panelDescriptor.instanceId,template:w,list:k,onMoveEnd:(M,R,V,T)=>{E(M.map(U=>U.panelDescriptor),R.panelDescriptor,V,T)},springConfig:g,container:D||(()=>this._main)})),A&&p.default.createElement("div",{className:(0,_.default)("app_sidebar_content_area_padding"),onClick:M=>{M.preventDefault(),A()}})),O&&p.default.createElement("button",{className:"inboxsdk__close_button",type:"button",title:"Close",onClick:O}))}}i.default=m;class w extends p.default.Component{scrollIntoView(I,S){if(I&&S){let O=this._el.parentElement;O&&S.scrollTo({top:O.offsetTop,behavior:"smooth"})}else this._el.scrollIntoView({behavior:"smooth"})}getDragHeight(){return 40}componentDidMount(){(!this.props.item.showControls||this.props.item.expanded)&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}componentDidUpdate(I){let S=!I.item.showControls||I.item.expanded,O=!this.props.item.showControls||this.props.item.expanded;!S&&O?document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}})):S&&!O&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}shouldComponentUpdate(I){return this.props.itemSelected!==I.itemSelected||this.props.item.panelDescriptor!==I.item.panelDescriptor||this.props.item.showControls!==I.item.showControls||this.props.item.expanded!==I.item.expanded}render(){let{dragHandleProps:I,itemSelected:S,item:{panelDescriptor:{title:O,appName:A,iconClass:E,iconUrl:D,el:P},showControls:j,expanded:k,onExpandedToggle:M}}=this.props,R=.01*S+1,V=4*S;return p.default.createElement("div",{ref:T=>{T&&(this._el=T)},className:(0,o.default)((0,_.default)("app_sidebar_content_panel"),{[(0,_.default)("dragged")]:S>.2,[(0,_.default)("expanded")]:k,[(0,_.default)("showControls")]:j}),style:{transform:R===1?"none":`scale(${R})`,boxShadow:V===0?"none":`0px 0px ${V}px 0px rgba(0, 0, 0, 0.3)`}},p.default.createElement("div",{className:(0,_.default)("app_sidebar_content_panel_top_line"),"data-app-name":A},p.default.createElement("span",(0,u.default)({className:(0,_.default)("app_sidebar_content_panel_title")},j?I:null),p.default.createElement("div",{className:(0,_.default)("app_sidebar_content_panel_grip")}),p.default.createElement("span",{className:(0,_.default)("app_sidebar_content_panel_title_icon_container")},p.default.createElement("span",{className:(0,o.default)((0,_.default)("app_sidebar_content_panel_title_icon"),E)},D&&p.default.createElement("img",{src:D}))),p.default.createElement("span",{className:(0,_.default)("app_sidebar_content_panel_title_text")},O)),p.default.createElement("span",{className:(0,_.default)("app_sidebar_content_panel_toggle"),onClick:()=>M(!k)},p.default.createElement("button",{type:"button",className:(0,_.default)("app_sidebar_content_panel_toggle_button")}))),p.default.createElement(b.default,{expanded:!j||k,heightTransition:".15s ease"},p.default.createElement(y.default,{className:(0,_.default)("app_sidebar_content_panel_content"),el:P})))}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../../common/get-or-fail":476,"../../lib/idMap":720,"../../lib/react/ElementContainer":733,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/extends":12,"@babel/runtime/helpers/interopRequireDefault":15,classnames:56,kefir:158,"kefir-stopper":157,"lodash/flatMap":318,"lodash/sortBy":350,react:437,"react-draggable-list":419,"react-smooth-collapse":434}],679:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("@babel/runtime/helpers/defineProperty")),r=e("ud"),c=(n(e("auto-html")),n(e("kefir"))),s=n(e("kefir-bus")),o=(n(e("kefir-stopper")),n(e("../../lib/delay-asap"))),d=n(e("../../lib/idMap")),a=n(e("../../lib/dom/querySelectorOrFail")),p=(0,r.defn)(v,class{constructor(f,b,_,y){(0,u.default)(this,"_eventStream",(0,s.default)()),(0,u.default)(this,"_isActive",!1),(0,u.default)(this,"_instanceId",`${Date.now()}-${Math.random()}`),this._driver=f,this._sidebarId=_,this._isGlobal=Boolean(y),this._stopper=this._eventStream.ignoreValues().beforeEnd(()=>null).toProperty();let g=t.document;this._eventStream.plug(c.default.fromEvents(g.body,"inboxsdkSidebarPanelActivated").filter(S=>S.detail.instanceId===this._instanceId).map(()=>(this._isActive=!0,{eventName:"activate"}))),this._eventStream.plug(c.default.fromEvents(g.body,"inboxsdkSidebarPanelDeactivated").filter(S=>S.detail.instanceId===this._instanceId).map(()=>(this._isActive=!1,{eventName:"deactivate"})));let m=(0,o.default)().toProperty().onValue(()=>{}),w,C=!1,I=(0,a.default)(g.body,"."+(0,d.default)("app_sidebar_waiting_platform"));b.flatMap(S=>m.map(()=>S)).takeUntilBy(this._stopper).onValue(S=>{let{el:O,iconUrl:A,iconClass:E,title:D,orderHint:P,id:j,hideTitleBar:k,appIconUrl:M,primaryColor:R,secondaryColor:V}=S;w=S.appName||f.getOpts().appName||S.title,g.body.contains(O)||I.appendChild(O);let T=C?"inboxsdkUpdateSidebarPanel":"inboxsdkNewSidebarPanel";C=!0,O.dispatchEvent(new CustomEvent(T,{bubbles:!0,cancelable:!1,detail:{appIconUrl:M||this._driver.getOpts().appIconUrl||A,appId:this._driver.getAppId(),appName:w,hideTitleBar:Boolean(k),iconClass:E,iconUrl:A,id:String(j||D),instanceId:this._instanceId,isGlobal:y,orderHint:typeof P=="number"?P:0,primaryColor:R||this._driver.getOpts().primaryColor,secondaryColor:V||this._driver.getOpts().secondaryColor,sidebarId:this._sidebarId,title:D}}))}),this._stopper.onValue(()=>{C&&g.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel",{bubbles:!0,cancelable:!1,detail:{appName:w,sidebarId:this._sidebarId,instanceId:this._instanceId}}))})}getStopper(){return this._stopper}getEventStream(){return this._eventStream}scrollIntoView(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,sidebarId:this._sidebarId}}))}close(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}open(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}isActive(){return this._isActive}remove(){this._eventStream.end()}});i.default=p}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../lib/delay-asap":688,"../../lib/dom/querySelectorOrFail":706,"../../lib/idMap":720,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,kefir:158,"kefir-bus":155,"kefir-stopper":157,ud:455}],680:[function(e,v,i){"use strict";function t(n,u,r){let c=document.createElement("div");return c.classList.add("inboxsdk__button_icon"),c.innerHTML="&nbsp;",u?n.appendChild(c):n.insertBefore(c,r||n.firstElementChild),c}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n,u,r,c,s,o,d){if(r&&o)throw new Error("append and insertBeforeEl should not be used together");if(d&&(c||s))throw new Error("iconHtml can not be used together with iconClass or iconUrl");d?(n.iconHtmlElement||(n.iconHtmlElement=t(u,r,o)),n.iconHtmlElement.innerHTML=d,n.iconImgElement&&(n.iconImgElement.remove(),n.iconImgElement=null),n.iconElement&&(n.iconElement.remove(),n.iconElement=null)):s?(n.iconImgElement?n.iconImgElement.firstElementChild.src=s:n.iconImgElement=function(a,p,f,b){let _=t(p,f,b);_.innerHTML="";let y=document.createElement("img");return y.classList.add("inboxsdk__button_iconImg"),y.src=a,_.appendChild(y),_}(s,u,r,o),n.iconImgElement.setAttribute("class",`inboxsdk__button_icon ${c||""}`),n.iconHtmlElement&&(n.iconHtmlElement.remove(),n.iconHtmlElement=null),n.iconElement&&(n.iconElement.remove(),n.iconElement=null)):c?(n.iconElement||(n.iconElement=t(u,r,o)),n.iconElement.setAttribute("class","inboxsdk__button_icon "+c),n.iconHtmlElement&&(n.iconHtmlElement.remove(),n.iconHtmlElement=null),n.iconImgElement&&(n.iconImgElement.remove(),n.iconImgElement=null)):(n.iconElement&&(n.iconElement.remove(),n.iconElement=null),n.iconHtmlElement&&(n.iconHtmlElement.remove(),n.iconHtmlElement=null),n.iconImgElement&&(n.iconImgElement.remove(),n.iconImgElement=null))}},{}],681:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("./logger"));i.default=class{constructor(r){(0,n.default)(this,"_runCount",0),(0,n.default)(this,"_errorLogs",[]),(0,n.default)(this,"_hasReported",!1),this._name=r}run(r,c){if(this._hasReported)throw new Error("Has already reported");this._runCount++;try{return c()}catch(s){return this._errorLogs.push({name:r,message:s.message}),null}}report(r){if(this._hasReported)throw new Error("Has already reported");this._hasReported=!0,this._errorLogs.length&&u.default.error(new Error(`Error Collector: ${this._name}`),{errorLogs:this._errorLogs,extra:r()})}getErrorLogs(){return this._errorLogs}runCount(){return this._runCount}errorCount(){return this._errorLogs.length}}},{"./logger":729,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],682:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty"));i.default=class{constructor(u){(0,n.default)(this,"_map",new WeakMap),this._mappers=new Map(u)}get(u){let r=this._map.get(u);if(!r){let c=this._mappers.get(u.constructor);if(!c)throw new Error(`Unknown class ${u.constructor.name}`);r=c(u),this._map.set(u,r)}return r}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],683:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("contain-by-screen")),r=t(e("kefir")),c=t(e("kefir-bus")),s=t(e("kefir-stopper")),o=t(e("./fromEventsWithOptions"));i.default=class{constructor(d,a,p){(0,n.default)(this,"_manualRepositions",(0,c.default)()),(0,n.default)(this,"_stopper",(0,s.default)()),r.default.merge([this._manualRepositions,r.default.fromEvents(window,"resize"),(0,o.default)(window,"scroll",{capture:!0,passive:!0}).filter(f=>f.target.contains(a))]).toProperty(()=>null).takeUntilBy(this._stopper).onValue(()=>{(0,u.default)(d,a,p)})}reposition(){this._manualRepositions.emit(null)}destroy(){this._stopper.destroy()}}},{"./fromEventsWithOptions":717,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"contain-by-screen":90,kefir:158,"kefir-bus":155,"kefir-stopper":157}],684:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){return n.default.stream(s=>{let o=new Map;function d(a){switch(a.type){case"value":{let p=a.value,f=c?Array.prototype.map.call(p,c):p;o.forEach((b,_)=>{let{el:y,removalStream:g}=b;Array.prototype.indexOf.call(f,_)<0&&(o.delete(_),g.destroy())});for(let b=0,_=p.length;b<_;b++){let y=p[b],g=f[b];if(!o.has(g)){let m={el:y,removalStream:(0,u.default)()};o.set(g,m),s.emit(m)}}break}case"error":s.error(a.value);break;case"end":s.end()}}return r.onAny(d),()=>{o.forEach(a=>{let{removalStream:p}=a;p.destroy()}),r.offAny(d)}})};var n=t(e("kefir")),u=t(e("kefir-stopper"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157}],685:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("asap")),u=t(e("lodash/once")),r=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=s(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("kefir")),c=t(e("./logger"));function s(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(s=function(p){return p?a:d})(o)}i.default=class{constructor(){this.ajaxInterceptStream=r.fromEvents(document,"inboxSDKajaxIntercept").map(o=>o.detail)}getUserEmailAddress(){let o=document.head.getAttribute("data-inboxsdk-user-email-address");if(typeof o!="string")throw new Error("should not happen");return o}getUserLanguage(){let o=document.head.getAttribute("data-inboxsdk-user-language");if(typeof o!="string")throw new Error("should not happen");return o}getIkValue(){let o=document.head.getAttribute("data-inboxsdk-ik-value");if(o)return o;if(window.opener){let d=window.opener.document.head.getAttribute("data-inboxsdk-ik-value");if(d)return d;throw new Error("Failed to look up parent window 'ik' value")}throw new Error("Failed to look up 'ik' value")}isUsingSyncAPI(){return!1}async getXsrfToken(){let o=document.head.getAttribute("data-inboxsdk-xsrf-token");if(o)return o;{await this.ajaxInterceptStream.filter(a=>{let{type:p}=a;return p==="xsrfTokenHeaderReceived"}).take(1).toPromise();let d=document.head.getAttribute("data-inboxsdk-xsrf-token");if(!d)throw new Error("Failed to look up XSRF token");return d}}async getBtaiHeader(){let o=document.head.getAttribute("data-inboxsdk-btai-header");if(o)return o;{await this.ajaxInterceptStream.filter(a=>{let{type:p}=a;return p==="btaiHeaderReceived"}).take(1).toPromise();let d=document.head.getAttribute("data-inboxsdk-btai-header");if(!d)throw new Error("Failed to look up BTAI header");return d}}resolveUrlRedirects(o){return this.pageAjax({url:o,method:"HEAD"}).then(d=>d.responseURL)}pageAjax(o){let d=`${Date.now()}-${Math.random()}`,a=r.fromEvents(document,"inboxSDKpageAjaxDone").filter(p=>p.detail&&p.detail.id===d).take(1).flatMap(p=>{if(p.detail.error){let f=Object.assign(new Error(p.detail.message||"Connection error"),{status:p.detail.status});return p.detail.stack&&(f.stack=p.detail.stack),r.constantError(f)}return r.constant({text:p.detail.text,responseURL:p.detail.responseURL})}).toPromise();return document.dispatchEvent(new CustomEvent("inboxSDKpageAjax",{bubbles:!1,cancelable:!1,detail:Object.assign({},o,{id:d})})),a}silenceGmailErrorsForAMoment(){document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}));let o=new Error("Forgot to unsilence page errors"),d=!1,a=(0,u.default)(()=>{d=!0,document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}))});return(0,n.default)(()=>{d||(c.default.error(o),a())}),a}registerAllowedHashLinkStartTerm(o){document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm",{bubbles:!1,cancelable:!1,detail:{term:o}}))}}},{"./logger":729,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"lodash/once":347}],686:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){if(!Array.isArray(n))throw new Error("suggestions must be an array");return n.map(u=>{let r={...u};if(typeof r.name!="string"&&typeof r.nameHTML!="string")throw new Error("suggestion must have name or nameHTML property");if(typeof r.routeName!="string"&&typeof r.externalURL!="string"&&typeof r.searchTerm!="string"&&typeof r.onClick!="function")throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");if(typeof r.iconURL=="string"){let c=r.iconURL;t.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property',"AutocompleteSearchResult.iconUrl"),r.iconUrl||t.getOpts().REQUESTED_API_VERSION===1&&(r.iconUrl=c),delete r.iconURL}return r})}},{}],687:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){if(t.length===0||/^-?[0-9]/.test(t))throw new Error("Invalid CSS selector");return t.replace(/[^a-z0-9]/g,"\\$&")}},{}],688:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){return u.stream(s=>{(0,n.default)(()=>{s.emit(c),s.end()})})};var n=t(e("asap")),u=function(c,s){if(!s&&c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var o=r(s);if(o&&o.has(c))return o.get(c);var d={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(p!=="default"&&Object.prototype.hasOwnProperty.call(c,p)){var f=a?Object.getOwnPropertyDescriptor(c,p):null;f&&(f.get||f.set)?Object.defineProperty(d,p,f):d[p]=c[p]}return d.default=c,o&&o.set(c,d),d}(e("kefir"));function r(c){if(typeof WeakMap!="function")return null;var s=new WeakMap,o=new WeakMap;return(r=function(d){return d?o:s})(c)}},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158}],689:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){n.default.merge([n.default.fromEvents(u,"keypress"),n.default.fromEvents(u,"keydown"),n.default.fromEvents(u,"keyup")]).onValue(r=>{r.stopPropagation();let c=new KeyboardEvent(r.type,{bubbles:!0});Object.defineProperties(c,{cancelable:{value:r.cancelable},bubbles:{value:r.bubbles},target:{value:r.target},detail:{value:r.detail},key:{value:r.key},code:{value:r.code},location:{value:r.location},ctrlKey:{value:r.ctrlKey},shiftKey:{value:r.shiftKey},altKey:{value:r.altKey},metaKey:{value:r.metaKey},repeat:{value:r.repeat},isComposing:{value:r.isComposing},charCode:{value:r.charCode},keyCode:{value:r.keyCode},which:{value:r.which}}),document.dispatchEvent(c)})};var n=t(e("kefir"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],690:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return n=>{let u=t(n.el);return n.removalStream.take(1).onValue(()=>{u.destroy()}),u}}},{}],691:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=c(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("kefir")),r=t(e("kefir-bus"));function c(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(c=function(a){return a?d:o})(s)}i.default=class{constructor(s){(0,n.default)(this,"_eventStream",(0,r.default)()),this._element=s,this._setupEventStream()}destroy(){this._element.remove(),this._eventStream.end()}getElement(){return this._element}getEventStream(){return this._eventStream}activate(){}deactivate(){}_setupEventStream(){let s=u.fromEvents(this._element,"click");s.onValue(o=>{o.stopPropagation(),o.preventDefault()}),this._eventStream.plug(s.map(o=>({eventName:"click",domEvent:o})))}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155}],692:[function(e,v,i){"use strict";function t(u,r,c){for(let s=0;s<c.length;s++){let o=c[s],d=r.getAttribute(o),a=d==null?null:n(d)??d;if(a>u[o])return!0;if(a<u[o])return!1}return!1}function n(u){let r=parseFloat(u);return!isNaN(r)&&isFinite(r)?r:null}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r,c){let s={};c.forEach(function(o){let d=u.getAttribute(o);s[o]=d==null?null:n(d)??d});for(let o=0;o<r.length;o++){let d=r[o];if(t(s,d,c))return d}return null}},{}],693:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.getSelectedHTMLInElement=function(r,c){let s=document.getSelection();return n.default.toArray([s&&s.rangeCount?s.getRangeAt(0):null,c],n.default.compose(n.default.keep(),n.default.filter(o=>u(o,r)),n.default.map(o=>{let d=document.createElement("div");return d.appendChild(o.cloneContents()),d.innerHTML}),n.default.take(1)))[0]},i.getSelectedTextInElement=function(r,c){let s=document.getSelection();return n.default.toArray([s&&s.rangeCount?s.getRangeAt(0):null,c],n.default.compose(n.default.keep(),n.default.filter(o=>u(o,r)),n.default.map(o=>o.toString()),n.default.take(1)))[0]};var n=t(e("transducers.js"));function u(r,c){return!function(s){return s.startContainer===s.endContainer&&s.startOffset===s.endOffset}(r)&&function(s,o){return o.contains(s.startContainer)||o.contains(s.endContainer)}(r,c)}},{"@babel/runtime/helpers/interopRequireDefault":15,"transducers.js":453}],694:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u,o=arguments.length>3&&arguments[3]!==void 0&&arguments[3],d=n.default.toArray(Array.prototype.slice.call(r.children),n.default.compose(n.default.filter(a=>{let p=!1;for(let f of s){let b=c.getAttribute(f),_=a.getAttribute(f);if(b==null||_==null)continue;let y;if(p=!0,y=isNaN(parseFloat(b))||isNaN(parseFloat(_))?_.localeCompare(b):parseFloat(_)-parseFloat(b),y>0)return!0;if(y<0)return!1}return!!o&&!p}),n.default.take(1)))[0];r.insertBefore(c,d)};var n=t(e("transducers.js"));let u=["data-group-order-hint","data-order-hint","data-insertion-order-hint"]},{"@babel/runtime/helpers/interopRequireDefault":15,"transducers.js":453}],695:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=r(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("ud")),u=t(e("kefir"));function r(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(r=function(a){return a?d:o})(s)}var c=n.defn(v,function(s,o,d){if(s.focus(),s instanceof HTMLTextAreaElement){var a=s.selectionStart;s.selectionStart<s.selectionEnd&&(s.value=s.value.substring(0,s.selectionStart)+s.value.substring(s.selectionEnd)),s.value=s.value.substring(0,a)+o+s.value.substring(a),s.selectionStart=a+o.length,s.selectionEnd=a+o.length}else{var p=null;if(s.getSelection?p=s:s.ownerDocument&&s.ownerDocument.getSelection&&(p=s.ownerDocument),p){var f=p.getSelection();if(f.getRangeAt&&f.rangeCount){var b,_=d||f.getRangeAt(0);if(_.deleteContents(),o instanceof DocumentFragment)b=o;else if(b=document.createDocumentFragment(),o instanceof HTMLElement)b.appendChild(o);else{var y,g=document.createElement("div");for(g.innerHTML=o;y=g.firstChild;)b.appendChild(y)}var m=b.firstElementChild;_.insertNode(b);var w=document.createEvent("MouseEvents");w.initMouseEvent("mousedown",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),w.preventDefault(),s.dispatchEvent(w),_.collapse(!1),f.removeAllRanges(),f.addRange(_);var C=u.default.merge([u.default.fromEvents(s,"mousedown"),u.default.fromEvents(s,"keypress")]);return u.default.fromEvents(s,"focus").takeUntilBy(C).onValue(function(){f.removeAllRanges(),f.addRange(_)}),m}}}});i.default=c},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],696:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){return n.stream(o=>c&&c.bind(s,function(d){return o.emit(d),!1},"keydown"))};var n=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=r(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("kefir")),u=t(e("combokeys-capture"));function r(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(r=function(a){return a?d:o})(s)}let c=typeof document<"u"&&new u.default(document.body,!0)},{"@babel/runtime/helpers/interopRequireDefault":15,"combokeys-capture":89,kefir:158}],697:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(o){if(!o||!o.nodeType)throw new Error("Expected element, got "+String(o));return u.stream(d=>{let a=new Map,p=!1;function f(y){if(y.nodeType!==1)return;a.has(y)&&s(new Error("Already had removalStream for element with class "+y.className));let g=(0,r.default)();a.set(y,g);try{d.emit({el:y,removalStream:g})}catch(m){s(m)}}function b(y){if(y.nodeType!==1)return;let g=a.get(y);if(a.delete(y),g)try{g.destroy()}catch(m){s(m)}else s(new Error("Could not find removalStream for element with class "+y.className))}let _=new MutationObserver(function(y){y.forEach(g=>{Array.prototype.forEach.call(g.addedNodes,f),Array.prototype.forEach.call(g.removedNodes,b)})});return(0,n.default)(()=>{p||(_.observe(o,{childList:!0}),Array.prototype.slice.call(o.children).forEach(f))}),function(){p=!0,_.disconnect(),(0,n.default)(()=>{a.forEach(y=>{y.destroy()})})}})};var n=t(e("asap")),u=function(o,d){if(!d&&o&&o.__esModule)return o;if(o===null||typeof o!="object"&&typeof o!="function")return{default:o};var a=c(d);if(a&&a.has(o))return a.get(o);var p={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in o)if(b!=="default"&&Object.prototype.hasOwnProperty.call(o,b)){var _=f?Object.getOwnPropertyDescriptor(o,b):null;_&&(_.get||_.set)?Object.defineProperty(p,b,_):p[b]=o[b]}return p.default=o,a&&a.set(o,p),p}(e("kefir")),r=t(e("kefir-stopper"));function c(o){if(typeof WeakMap!="function")return null;var d=new WeakMap,a=new WeakMap;return(c=function(p){return p?a:d})(o)}function s(o){setTimeout(()=>{throw o},1)}},{"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158,"kefir-stopper":157}],698:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let s=new Map;return o=>{let d=s.get(o.el);return d?(d.getSize()>1,d.add(o.removalStream.flatMap(r.default)),n.never()):(d=new u.default(o.removalStream.flatMap(r.default)),d.stream.onValue(function(){s.delete(o.el)}),s.set(o.el,d),n.constant({el:o.el,removalStream:d.stream}))}};var n=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=c(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("kefir")),u=t(e("../stopper-pool")),r=t(e("../delay-asap"));function c(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(c=function(a){return a?d:o})(s)}},{"../delay-asap":688,"../stopper-pool":738,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],699:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return r=>{let c=u(r.el);return c?(r.removalStream.take(1).onValue(()=>{c.destroy()}),t.constant(c)):t.never()}};var t=function(u,r){if(!r&&u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var c=n(r);if(c&&c.has(u))return c.get(u);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var a=o?Object.getOwnPropertyDescriptor(u,d):null;a&&(a.get||a.set)?Object.defineProperty(s,d,a):s[d]=u[d]}return s.default=u,c&&c.set(u,s),s}(e("kefir"));function n(u){if(typeof WeakMap!="function")return null;var r=new WeakMap,c=new WeakMap;return(n=function(s){return s?c:r})(u)}},{kefir:158}],700:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return t.stream(c=>{let s=new MutationObserver(o=>{c.emit(o instanceof Array?o:Array.from(o))});return s.observe(u,r),()=>{s.disconnect()}})};var t=function(u,r){if(!r&&u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var c=n(r);if(c&&c.has(u))return c.get(u);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var a=o?Object.getOwnPropertyDescriptor(u,d):null;a&&(a.get||a.set)?Object.defineProperty(s,d,a):s[d]=u[d]}return s.default=u,c&&c.set(u,s),s}(e("kefir"));function n(u){if(typeof WeakMap!="function")return null;var r=new WeakMap,c=new WeakMap;return(n=function(s){return s?c:r})(u)}},{kefir:158}],701:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return(0,n.default)(u,r).flatten()};var n=t(e("./make-mutation-observer-chunked-stream"))},{"./make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15}],702:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../from-event-target-capture")),u=e("ud");e("kefir");let r=(0,n.default)(document.body,"mouseup");var c=(0,u.defn)(v,function(s){return(0,n.default)(s,"mousedown").flatMapLatest(()=>r.take(1).filter(o=>s.contains(o.target)))});i.default=c},{"../from-event-target-capture":716,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],703:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s){return n.merge([(0,u.default)(document,"click"),(0,u.default)(document.body,"focus")]).filter(o=>!o.shouldIgnore&&(o.isTrusted||!1)&&s.every(d=>{for(let a of(0,r.default)(o.target))if(a===d)return!1;return!0})).map(o=>({type:"outsideInteraction",cause:o})).merge(n.fromEvents(document,"keydown").filter(o=>o.key?o.key==="Escape":o.which===27).map(o=>(o.preventDefault(),o.stopPropagation(),{type:"escape",cause:o}))).map(o=>o)};var n=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=c(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("kefir")),u=t(e("../from-event-target-capture")),r=t(e("./parentNodes"));function c(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(c=function(a){return a?d:o})(s)}},{"../from-event-target-capture":716,"./parentNodes":704,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],704:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function*(t){do yield t;while(t=t.rfaAnchor||t._logicalParent||t.parentNode)}},{}],705:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){let u=t.querySelectorAll(n);if(u.length!==1)throw new Error(`Found ${u.length} elements when expecting 1 using selector ${JSON.stringify(n)}`);return u[0]}},{}],706:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){let u=t.querySelector(n);if(!u)throw new Error(`Failed to find element with selector: ${n}`);return u}},{}],707:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=new MouseEvent("click");Object.defineProperties(n,{target:{value:t.target},detail:{value:t.detail},screenX:{value:t.screenX},screenY:{value:t.screenY},clientX:{value:t.clientX},clientY:{value:t.clientY},button:{value:t.button},buttons:{value:t.buttons},ctrlKey:{value:t.ctrlKey},shiftKey:{value:t.shiftKey},altKey:{value:t.altKey},metaKey:{value:t.metaKey}}),document.dispatchEvent(n)}},{}],708:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){let u=`inboxsdk__${t}`,r=document.getElementById(u);if(!n)return void(r&&r.remove());if(!r){if(r=document.createElement("style"),r.className="inboxsdk__custom",r.id=u,!document.head)throw new Error("missing head");document.head.appendChild(r)}r.textContent=n}},{}],709:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n,u){t.value=n;let r=document.createEvent("Event");r.initEvent(u),t.dispatchEvent(r)}},{}],710:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.simulateDragEnd=function(r,c){let s=u(c),o={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,n.default)(r,{type:"dragleave",bubbles:!0,cancelable:!1,props:o,dataTransfer:s}),(0,n.default)(r,{type:"dragend",bubbles:!0,cancelable:!1,props:o,dataTransfer:s})},i.simulateDragOver=function(r,c){let s=u(c),o={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,n.default)(r,{type:"dragenter",bubbles:!0,cancelable:!1,props:o,dataTransfer:s}),(0,n.default)(r,{type:"dragover",bubbles:!0,cancelable:!1,props:o,dataTransfer:s})},i.simulateDrop=function(r,c){let s=u(c);(0,n.default)(r,{type:"drop",bubbles:!0,cancelable:!1,props:{screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0},dataTransfer:s})};var n=t(e("./trigger-relay-event"));function u(r){return{files:r,fileNames:Array.from(r).map(c=>typeof c.name=="string"?c.name:void 0)}}},{"./trigger-relay-event":713,"@babel/runtime/helpers/interopRequireDefault":15}],711:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r,c){(0,n.default)(u,{type:"keydown",bubbles:!0,cancelable:!0,props:{keyCode:r,charCode:c,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,n.default)(u,{type:"keypress",bubbles:!0,cancelable:!0,props:{keyCode:r,charCode:c,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,n.default)(u,{type:"keyup",bubbles:!0,cancelable:!0,props:{keyCode:r,charCode:c,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}})};var n=t(e("./trigger-relay-event"))},{"./trigger-relay-event":713,"@babel/runtime/helpers/interopRequireDefault":15}],712:[function(e,v,i){"use strict";function t(n,u){let r=document.createEvent("MouseEvents");r.initMouseEvent(u,!0,!0,window,0,n.offsetLeft,n.offsetTop,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=t,i.simulateClick=function(n){t(n,"mousedown"),t(n,"mouseup"),t(n,"click"),t(n,"mouseleave"),t(n,"mouseout"),n.blur()},i.simulateHover=function(n){t(n,"mouseover")}},{}],713:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=async function(t,n){t.dispatchEvent(new CustomEvent("inboxsdk_event_relay",{bubbles:!0,cancelable:!1,detail:n}))}},{}],714:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){let r=null,c=null,s=u.split("<"),o=s[0].replace(/\u202c/g,"").trim();if(s.length>1)r=o,c=s[1].split(">")[0].replace(/\u202c/g,"").trim();else{if(!(0,n.default)(o))throw Object.assign(new Error("Invalid email address"),{firstPartTrimmed:o});c=o}return{name:r,emailAddress:c}};var n=t(e("./is-valid-email"))},{"./is-valid-email":726,"@babel/runtime/helpers/interopRequireDefault":15}],715:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}},{}],716:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){return t.stream(c=>{function s(o){c.value(o)}return u.addEventListener(r,s,!0),()=>{u.removeEventListener(r,s,!0)}})};var t=function(u,r){if(!r&&u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var c=n(r);if(c&&c.has(u))return c.get(u);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var a=o?Object.getOwnPropertyDescriptor(u,d):null;a&&(a.get||a.set)?Object.defineProperty(s,d,a):s[d]=u[d]}return s.default=u,c&&c.set(u,s),s}(e("kefir"));function n(u){if(typeof WeakMap!="function")return null;var r=new WeakMap,c=new WeakMap;return(n=function(s){return s?c:r})(u)}},{kefir:158}],717:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r,c,s){return t.stream(o=>((0,n.addEventListener)(r,c,o.emit,s),()=>{(0,n.removeEventListener)(r,c,o.emit,s)}))};var t=function(r,c){if(!c&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var s=u(c);if(s&&s.has(r))return s.get(r);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var p=d?Object.getOwnPropertyDescriptor(r,a):null;p&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=r[a]}return o.default=r,s&&s.set(r,o),o}(e("kefir")),n=e("event-listener-with-options");function u(r){if(typeof WeakMap!="function")return null;var c=new WeakMap,s=new WeakMap;return(u=function(o){return o?s:c})(r)}},{"event-listener-with-options":135,kefir:158}],718:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t(e("lodash/once"));var n=t(e("kefir")),u=e("ud"),r=t(e("./dom/querySelectorOrFail")),c=t(e("./dom/make-mutation-observer-chunked-stream"));let s=""+Math.random(),o="https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png";var d=(0,u.defn)(v,function(g){try{g.getBodyElement()}catch{return}let m=g.getElement();var w;(w=m,n.default.later(0).merge((0,c.default)(w,{attributes:!0,attributeFilter:["class"]})).map(()=>!w.classList.contains("inboxsdk__ensure_link_active")).filter(Boolean).take(1)).takeUntilBy(g.getStopper()).onValue(()=>{m.classList.add("inboxsdk__ensure_link_active"),g.getStopper().onValue(()=>{m.classList.remove("inboxsdk__ensure_link_active")}),g.getEventStream().filter(C=>C.eventName==="bodyChanged").toProperty(()=>null).debounce(100,{immediate:!0}).takeUntilBy(g.getStopper()).onValue(()=>{a(g)}),g.getEventStream().filter(C=>C.eventName==="presending").onValue(()=>{p(g)})})});i.default=d;let a=(0,u.defn)(v,function(g){f(g.getBodyElement()).filter(b).forEach(y)},"doFixing"),p=(0,u.defn)(v,function(g){f(g.getBodyElement()).filter(_).forEach(m=>{let w=m.querySelector(`img[src="${o}"]`);w&&w.remove();let C=m.querySelector("a > span");C&&(C.style.textDecoration="none")})},"doPresendFixing");function f(g){let m=g.querySelectorAll("[hspace=inboxsdk__chip]");return[...Array.from(m).map(w=>w.parentElement),...Array.from(g.querySelectorAll("[hspace=inboxsdk__chip_main]"))]}function b(g){var m=g.getAttribute("data-sdk-linkchip-claimed");return s===m?!g._linkChipEnhancedByThisExtension:m==null}function _(g){return!!g._linkChipEnhancedByThisExtension}function y(g){let m=g.querySelector("a");m&&(m.addEventListener("mousedown",function(C){C.stopImmediatePropagation()},!0),m.addEventListener("click",function(C){C.stopImmediatePropagation()},!0));let w=document.createElement("img");w.src=o,w.setAttribute("style","opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;"),w.addEventListener("mousedown",function(C){g.remove()},!0),w.addEventListener("click",function(C){C.stopImmediatePropagation(),C.preventDefault()},!0),g.addEventListener("mouseenter",function(){g.appendChild(w),(0,r.default)(g,"a > span").style.textDecoration="underline"}),g.addEventListener("mouseleave",function(){w.remove(),(0,r.default)(g,"a > span").style.textDecoration="none"}),g.addEventListener("mousedown",function(C){C.preventDefault()}),g.contentEditable="false",g.setAttribute("data-sdk-linkchip-claimed",s),g._linkChipEnhancedByThisExtension=!0}},{"./dom/make-mutation-observer-chunked-stream":700,"./dom/querySelectorOrFail":706,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/once":347,ud:455}],719:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/remove")),r=t(e("asap")),c=t(e("./logger"));function s(o,d){try{o(d)}catch(a){c.default.error(a)}}i.default=class{constructor(){(0,n.default)(this,"_targets",[]),(0,n.default)(this,"_pendingHandlers",[]),(0,n.default)(this,"_handlers",[])}registerHandler(o){return this._pendingHandlers.indexOf(o)===-1&&(this._pendingHandlers.push(o),(0,r.default)(()=>{let d=this._pendingHandlers.slice();for(let a=d.length-1;a>=0;a--){let p=d[a];this._handlers.indexOf(p)===-1&&(this._handlers.push(p),this._informHandlerOfTargets(p))}this._pendingHandlers=[]})),()=>{(0,u.default)(this._pendingHandlers,d=>d===o),(0,u.default)(this._handlers,d=>d===o)}}addTarget(o){this._targets.push(o),o&&typeof o=="object"&&typeof o.on=="function"&&o.on("destroy",()=>{this.removeTarget(o)}),this._informHandlersOfTarget(o)}removeTarget(o){(0,u.default)(this._targets,d=>d===o)}dumpHandlers(){this._pendingHandlers=[],this._handlers=[]}_informHandlerOfTargets(o){let d=this._targets.slice();for(let a=0;a<d.length;a++)s(o,d[a])}_informHandlersOfTarget(o){let d=this._handlers.slice();for(let a=0;a<d.length;a++)s(d[a],o)}}},{"./logger":729,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,"lodash/remove":349}],720:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i._reset=function(){u.clear(),r=null},i.default=function(s){let o=u.get(s);if(o!=null)return o;if(r==null){if(r=document.documentElement.getAttribute("data-map-id"),r==null){let a=new n.default;a.update("PWVe"+Math.floor(Date.now()/36e5)+"PYiE0"),r=a.digest("hex").slice(0,16)+"",document.documentElement.setAttribute("data-map-id",r)}c=/x$/.test(r)}let d;if(c)d=`idm${String(r.charCodeAt(0)%10)}_${s}`;else{let a=new n.default;a.update("4iYi29W"+s+":"+r+"jn2mPvTG"),d=a.digest("hex").slice(0,16).replace(/[0-9]/g,p=>String.fromCharCode("A".charCodeAt(0)+Number(p)))}return u.set(s,d),d};var n=t(e("sha.js/sha256"));let u=new Map,r=null,c=!1},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha256":447}],721:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return new Promise((n,u)=>{let r=new Image;r.addEventListener("load",()=>n(r)),r.addEventListener("error",u),r.src=t})}},{}],722:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=/ (\d+)$/.exec(t);return n?t.slice(0,t.length-n[0].length)+" "+(Number(n[1])+1):t+" 2"}},{}],723:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.injectScript=void 0,i.setInjectScriptImplementation=function(o){c=o};var n=t(e("lodash/once")),u=t(e("kefir")),r=t(e("./dom/make-mutation-observer-chunked-stream"));let c=()=>{window.chrome.runtime.sendMessage({type:"inboxsdk__injectPageWorld"},o=>{if(!o){let d=document.createElement("script");d.type="text/javascript",d.src=window.chrome.runtime.getURL("pageWorld.js"),document.documentElement.appendChild(d)}})},s=(0,n.default)(()=>(document.head.hasAttribute("data-inboxsdk-script-injected")||(document.head.setAttribute("data-inboxsdk-script-injected","true"),c()),u.default.later(0,null).merge((0,r.default)(document.head,{attributes:!0})).filter(()=>document.head.hasAttribute("data-inboxsdk-user-email-address")).take(1).map(()=>null).toPromise()));i.injectScript=s},{"./dom/make-mutation-observer-chunked-stream":700,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/once":347}],724:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(s,o){if(!o&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var d=r(o);if(d&&d.has(s))return d.get(s);var a={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var b=p?Object.getOwnPropertyDescriptor(s,f):null;b&&(b.get||b.set)?Object.defineProperty(a,f,b):a[f]=s[f]}return a.default=s,d&&d.set(s,a),a}(e("ud")),u=t(e("auto-html"));function r(s){if(typeof WeakMap!="function")return null;var o=new WeakMap,d=new WeakMap;return(r=function(a){return a?d:o})(s)}var c=n.defn(v,function(s,o){s.focus();var d=function(p){var f=document.createElement("div"),b=p.iconUrl?u.default`
<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="${p.iconUrl}">&nbsp;
`:"",_=u.default`
<div contenteditable="false" class="inboxsdk__compose_linkChip"
style="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">
  <a href="${p.url}" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">
    ${{__html:b}}
    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">${p.text}</span>
  </a>
</div>
`;return f.innerHTML=_,f.children[0]}(o),a=document.createDocumentFragment();return a.appendChild(document.createTextNode("\u200B")),a.appendChild(d),a.appendChild(document.createTextNode("\u200B")),s.insertBodyHTMLAtCursor(a),s.isFullscreen()||s.isInlineReplyForm()||document.activeElement===s.getBodyElement()||(s.setMinimized(!0),s.setMinimized(!1)),s.focus(),d});i.default=c},{"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,ud:455}],725:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(c){if(u.has(function(p){let f=new n.default;return f.update("YlEHtGl72+c"+p),f.digest("hex")}(c)))return!0;let s=r.exec(c);if(!s)return!1;let o=s[1],d=s[2],a=new n.default;return a.update(o),a.digest("hex").slice(0,10)===d};var n=t(e("sha.js/sha1"));let u=new Set(["b540a2819e4b26823288046869e5577852178d69","1e9084cb394369dcdfd43cfcd84d17b78b0903dd","a9b816b86b6085eb0b80315da6b2297ff30cf7b6","5140e277522fd95ece3d540c94b97f443bcc3256","b56a2d6e6f650ed6eae78774d3b1f02d969d8485","bc6308648a588258f31f8f4b64f7c4652b6fcaac","4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"]),r=/^sdk_(.{5,15})_([0-9a-f]{10})$/},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha1":446}],726:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){return n==null?!1:t.test(n)};let t=/^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/},{}],727:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return t!=null}},{}],728:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return function(r){let c=new n.default;return c.update("bdnanNrDjv"+r),c.digest("hex").slice(0,32)}(u)==="f471fe7b7343b47a202437c3962cc335"};var n=t(e("sha.js/sha256"))},{"@babel/runtime/helpers/interopRequireDefault":15,"sha.js/sha256":447}],729:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.hashEmail=R;var u=n(e("sha.js/sha256")),r=n(e("../../common/ajax")),c=n(e("../../common/get-extension-id")),s=n(e("../../common/get-session-id")),o=n(e("../../common/log-error")),d=n(e("./persistent-queue")),a=n(e("./dom/make-mutation-observer-stream")),p=e("ext-corb-workaround"),f=n(e("./isStreakAppId"));let b=[],_,y,g,m,w=!1,C=(0,s.default)(),I=new Set,S=typeof document>"u"||!document.documentElement.hasAttribute("data-inboxsdk-master-claimed")&&(document.documentElement.setAttribute("data-inboxsdk-master-claimed","true"),!0);function O(){let Q=typeof document<"u"&&document.documentElement.getAttribute("data-inboxsdk-active-app-ids")||"[]";return JSON.parse(Q)}let A=new d.default("events"),E=Date.now();class D{constructor(X,oe,J,he){(function(ae,ue,ge,N){if(b.push(Object.freeze({appId:ae,version:ue.appVersion||void 0})),document.documentElement.setAttribute("data-inboxsdk-active-app-ids",JSON.stringify(O().concat([{appId:ae,version:ue.appVersion||void 0}]))),!_&&(_=ge,y=N,w=ue.eventTracking,ue.globalErrorLogging)){Error.stackTraceLimit<40&&(Error.stackTraceLimit=40),window.addEventListener("error",function(K){K.error&&D.error(K.error,"Uncaught exception")}),M(window,"setTimeout",function(K){return function(){for(var H=arguments.length,$=new Array(H),se=0;se<H;se++)$[se]=arguments[se];return typeof $[0]=="function"&&($[0]=k($[0],"setTimeout callback")),K.apply(this,$)}}),M(window,"setInterval",function(K){return function(){for(var H=arguments.length,$=new Array(H),se=0;se<H;se++)$[se]=arguments[se];return typeof $[0]=="function"&&($[0]=k($[0],"setInterval callback")),K.apply(this,$)}});let F=window.EventTarget&&window.EventTarget.prototype||window.Node.prototype;M(F,"addEventListener",function(K){return function(){for(var H=arguments.length,$=new Array(H),se=0;se<H;se++)$[se]=arguments[se];if(typeof $[1]=="function")try{let pe=$[1].__inboxsdk_logged;pe||(pe=k($[1],"event listener"),$[1].__inboxsdk_logged=pe),$[1]=pe}catch{}return K.apply(this,$)}}),M(F,"removeEventListener",function(K){return function(){for(var H=arguments.length,$=new Array(H),se=0;se<H;se++)$[se]=arguments[se];return typeof $[1]=="function"&&$[1].__inboxsdk_logged&&($[1]=$[1].__inboxsdk_logged),K.apply(this,$)}}),M(window,"MutationObserver",function(K){function H(){for(var $=arguments.length,se=new Array($),pe=0;pe<$;pe++)se[pe]=arguments[pe];return typeof se[0]=="function"&&(se[0]=k(se[0],"MutationObserver callback")),K.bind&&K.bind.apply?new(K.bind.apply(K,[null].concat(se))):new K(se[0])}return K=K||window.WebKitMutationObserver,H.prototype=K.prototype,H})}})(X,oe,J,he),this._appId=X,this._isMaster=!(!w||typeof document<"u"&&document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen")||(document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen","true"),0)),this._isMaster&&typeof document<"u"&&(document.addEventListener("inboxSDKinjectedError",ae=>{if(!(ae instanceof CustomEvent&&ae!=null&&ae.detail))return void this.error(new Error("Invalid inboxSDKinjectedError event"),ae);let ue=ae.detail;this.error(Object.assign(new Error(ue.message),{stack:ue.stack}),ue.details)}),document.addEventListener("inboxSDKinjectedEventSdkPassive",ae=>{let ue=ae.detail;this.eventSdkPassive(ue.name,ue.details,ue.sensitive)}))}setUserEmailAddress(X){g=R(X)}shouldTrackEverything(){return g==="ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785"}setIsUsingSyncAPI(X){m=X}static run(X,oe){try{return X()}catch(J){throw D.error(J,oe),J}}run(X,oe){try{return X()}catch(J){throw this.error(J,oe),J}}static error(X,oe){j(X,oe,void 0,!1)}error(X,oe){j(X,oe,this._appId,!1)}errorApp(X,oe){j(X,oe,this._appId,!0)}errorSite(X,oe){this._isMaster&&this.error(X,oe)}eventApp(X,oe){V(this._appId,"app",X,oe)}eventSdkActive(X,oe){w&&V(this._appId,"sdkActive",X,oe)}eventSdkPassive(X,oe,J){J&&!(0,f.default)(this._appId)||V(this._appId,"sdkPassive",X,oe)}eventSite(X,oe){this._isMaster&&V(this._appId,"gmail",X,oe)}deprecationWarning(X,oe){let J=X+(oe?":"+oe:"");I.has(J)||(this.eventSdkPassive(`deprecated.${X}`),I.add(J))}getAppLogger(){return{error:(X,oe)=>this.errorApp(X,oe),event:(X,oe)=>this.eventApp(X,oe)}}trackFunctionPerformance(X,oe,J){if(Math.random()<oe&&document.visibilityState==="visible"&&this._isMaster){let he=Date.now();X(),setTimeout(()=>{let ae=Date.now();this.eventSdkPassive("function performance result",{value:ae-he,timeSinceFirstLoad:ae-E,...J})},10)}else X()}}function P(Q){let X=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]?b:O();if(Q){let oe=X.slice(),J=!1;return oe.forEach((he,ae)=>{J||he.appId!==Q||(J=!0,oe[ae]={...he,causedBy:!0}),Object.freeze(oe[ae])}),Object.freeze(oe)}return X}function j(Q,X,oe,J){(0,o.default)(Q,X,{appId:oe,sentByApp:J,appIds:P(oe),loaderVersion:_,implVersion:y,userEmailHash:g,isUsingSyncAPI:m})}function k(Q,X){let oe=X?"Uncaught error in "+X:"Uncaught error";return function(){for(var J=arguments.length,he=new Array(J),ae=0;ae<J;ae++)he[ae]=arguments[ae];return D.run(()=>Q.apply(this,he),oe)}}function M(Q,X,oe){let J=oe(Q[X]);J.__original=Q[X],Q[X]=J}function R(Q){let X=new u.default;return X.update("inboxsdk:"+Q),X.digest("hex")}function V(Q,X,oe,J){if(J&&typeof J!="object")throw new Error("properties must be object or null: "+J);let he={type:X,event:oe,timestamp:1e3*Date.now(),origin:document.location.origin,sessionId:C,emailHash:g,loaderVersion:_,implementationVersion:y,isUsingSyncAPI:m,properties:J};X!="gmail"?Object.assign(he,{extensionId:(0,c.default)(),appIds:P(Q)}):Object.assign(he,{appIds:P(null,!1)}),typeof document<"u"&&(A.add(he),document.documentElement.setAttribute("data-inboxsdk-last-event",""+Date.now()))}i.default=D;let T=null;function U(Q){return Date.now()+6e5>Q}async function W(){let Q=T;return Q&&!U(Q.expirationDate)?Q:(T=await async function(){let{text:X}=await(0,r.default)({url:"https://api.inboxsdk.com/api/v2/events/oauth",XMLHttpRequest:(0,p.getXMLHttpRequest)()}),oe=JSON.parse(X);return U(oe.expirationDate)&&(oe.expirationDate=Date.now()+18e5),oe}(),T)}S&&typeof document<"u"&&typeof MutationObserver<"u"&&(0,a.default)(document.documentElement,{attributes:!0,attributeFilter:["data-inboxsdk-last-event"]}).map(()=>null).throttle(12e4).onValue(function(){let Q=A.removeAll();Q.length!==0&&async function(){let{oauthToken:X}=await W();await(0,r.default)({url:`https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=${encodeURIComponent("AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8")}`,method:"POST",headers:{Authorization:`Bearer ${X}`,"Content-Type":"application/json"},data:JSON.stringify({messages:[{data:t.from(JSON.stringify({data:Q,timestamp:1e3*Date.now()})).toString("base64")}]})})}().catch(X=>{D.error(X,{type:"Failed to log events"})})})}).call(this)}).call(this,e("buffer").Buffer)},{"../../common/ajax":468,"../../common/get-extension-id":475,"../../common/get-session-id":477,"../../common/log-error":482,"./dom/make-mutation-observer-stream":701,"./isStreakAppId":728,"./persistent-queue":731,"@babel/runtime/helpers/interopRequireDefault":15,buffer:46,"ext-corb-workaround":138,"sha.js/sha256":447}],730:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,r){let c=Object.create(null);return(0,n.default)(u.split("/"),r.split("/")).forEach((s,o)=>{let[d,a]=s;d[0]===":"&&(c[d.slice(1)]=decodeURIComponent(a.replace(/\+/g," ")))}),Object.freeze(c)};var n=t(e("lodash/zip"))},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/zip":363}],731:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty"));i.default=class{constructor(u){(0,n.default)(this,"_fallbackQueue",[]),this._sid="inboxsdk__persistentqueue_"+u}_getSavedQueue(){let u=JSON.parse(localStorage.getItem(this._sid));return u==null&&(u=[]),u}_putSavedQueue(u){localStorage.setItem(this._sid,JSON.stringify(u))}_clearSavedQueue(){localStorage.removeItem(this._sid)}add(u){let r=!1;if(typeof localStorage<"u")try{let c=this._getSavedQueue();c.push(u),this._putSavedQueue(c),r=!0}catch{}r||this._fallbackQueue.push(u)}remove(){let u;if(typeof localStorage<"u")try{let r=this._getSavedQueue(),c=r.shift();this._putSavedQueue(r),u=c}catch{}return u===void 0&&(u=this._fallbackQueue.shift()),u}removeAll(){let u;if(typeof localStorage<"u")try{let r=this._getSavedQueue();this._clearSavedQueue(),u=r}catch{}return u===void 0&&(u=[]),u=u.concat(this._fallbackQueue),this._fallbackQueue=[],u}peekAll(){let u;if(typeof localStorage<"u")try{u=this._getSavedQueue()}catch{}return u===void 0&&(u=[]),u=u.concat(this._fallbackQueue),u}clear(){if(typeof localStorage<"u")try{this._clearSavedQueue()}catch{}this._fallbackQueue.length=0}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],732:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,n){let u=n||{},r=new Set,c=t.replace(/:([^/]+)/g,(s,o)=>{if(o in u)return r.add(o),encodeURIComponent(String(u[o]));throw new Error(`Missing param: ${o}`)});if(Object.keys(u).length!==r.size)throw new Error("Extra parameters given");return c}},{}],733:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("react"));class r extends u.default.Component{constructor(){super(...arguments),(0,n.default)(this,"_contentRefCb",s=>{s&&(this._content=s)})}componentDidMount(){this._content.appendChild(this.props.el)}componentDidUpdate(s){if(s.el!==this.props.el){for(;this._content.lastElementChild;)this._content.lastElementChild.remove();this._content.appendChild(this.props.el)}}shouldComponentUpdate(s){return this.props.className!==s.className||this.props.el!==s.el}render(){return u.default.createElement("div",{className:this.props.className,ref:this._contentRefCb})}}i.default=r},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,react:437}],734:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return u.replace(/\.IDMAP_([-a-zA-Z0-9_]+)/g,(r,c)=>`.${(0,n.default)(c)}`)};var n=t(e("./idMap"))},{"./idMap":720,"@babel/runtime/helpers/interopRequireDefault":15}],735:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(s,o){let d=Array.isArray(s)?s:[s];return(0,u.default)(d,a=>o.match(c(a)))};var n=t(e("lodash/memoize")),u=t(e("lodash/find")),r=t(e("lodash/escapeRegExp"));let c=(0,n.default)(s=>new RegExp("^"+(0,r.default)(s).replace(/\/:[^/]+/g,"/([^/]+)")+"/?$"))},{"@babel/runtime/helpers/interopRequireDefault":15,"lodash/escapeRegExp":314,"lodash/find":315,"lodash/memoize":344}],736:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("events")),u=t(e("./logger"));class r extends n.default{emit(s){for(var o=arguments.length,d=new Array(o>1?o-1:0),a=1;a<o;a++)d[a-1]=arguments[a];try{return super.emit.apply(this,arguments)}catch(p){return u.default.error(p),!0}}}i.default=r},{"./logger":729,"@babel/runtime/helpers/interopRequireDefault":15,events:137}],737:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!c.getElementById("inboxsdk__shared_style")){let s=c.createElement("style");if(s.id="inboxsdk__shared_style",r.onValue(o=>{s.textContent=(0,u.default)(o)}),!c.head)throw new Error("missing head");c.head.appendChild(s)}};var n=t(e("ud-kefir")),u=t(e("./rewriteCssWithIdMap")),r=(0,n.default)(v,`.inboxsdk__notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  transition: none !important;
}

.inboxsdk__close_button {
  height: 24px;
  width: 24px;
  opacity: 0.7;
  position: relative;
  background: none;
  border: none;
  padding: 0;
  box-sizing: content-box;
  outline: none;
  cursor: pointer;
}
.inboxsdk__close_button:focus,
.inboxsdk__close_button:hover {
  opacity: 1;
}
.inboxsdk__close_button:focus::before {
  background-color: rgba(0, 0, 0, 0.12);
}
.inboxsdk__close_button::before {
  border-radius: 50%;
  position: absolute;
  top: -4px;
  bottom: -4px;
  left: -4px;
  right: -4px;
  padding: 4px;
  content: ' ';
}
.inboxsdk__close_button::after {
  content: ' ';
  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);
  position: absolute;
  height: 24px;
  width: 24px;
  top: 0;
  left: 0;
}

.IDMAP_app_sidebar_waiting_platform {
  display: none;
}

/* drawer */

.inboxsdk__drawer_view_container {
  visibility: visible;
  direction: initial;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 51;
  pointer-events: none;
}
.inboxsdk__drawer_view {
  position: absolute;
  pointer-events: auto;
  top: 0;
  bottom: 0;
  right: 0;
  width: 452px;
  font: normal normal normal normal 13px / normal 'Helvetica Neue', Helvetica,
    Arial, sans-serif;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column;
  flex-direction: column;
  background-color: #fff;
  outline: none;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.18), 0 8px 16px rgba(0, 0, 0, 0.36);
  -webkit-transform: translateX(100%);
  transform: translateX(100%);
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width {
  width: 300px;
}

.inboxsdk__drawer_view.inboxsdk__active {
  -webkit-transform: none;
  transform: none;
}
.inboxsdk__drawer_title_bar {
  background-color: #f5f5f5;
  border-bottom: 1px solid #e0e0e0;
  padding: 16px 20px;
  white-space: nowrap;
  display: -webkit-flex;
  display: flex;
  flex: 0 0 auto;
  -webkit-flex: 0 0 auto;
}
.inboxsdk__drawer_title_bar .inboxsdk__close_button {
  margin-right: 20px;
  -webkit-flex-shrink: 0;
  flex-shrink: 0;
}
.inboxsdk__drawer_title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font: normal normal normal normal 20px / 24px 'Helvetica Neue', Helvetica,
    Arial, sans-serif;
}

/* backdrop */

.inboxsdk__inbox_backdrop {
  visibility: visible;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 50;
  background-color: transparent;
  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);
}
.inboxsdk__inbox_backdrop.inboxsdk__active {
  background-color: rgba(10, 10, 10, 0.6);
  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);
}

.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {
  opacity: 0.6;
}

/* sidebar */

.IDMAP_app_sidebar_main {
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column;
  flex-direction: column;
}

.IDMAP_app_sidebar > .inboxsdk__close_button {
  position: absolute;
  bottom: 10px;
  right: 20px;
}

.IDMAP_app_sidebar_content_area {
  width: 216px;
}

.IDMAP_app_sidebar_content_panel {
  overflow: hidden;
  font: 12px Arial, sans-serif;
  max-height: 100%;
  box-sizing: border-box;
}

.IDMAP_app_sidebar_content_panel_top_line {
  white-space: nowrap;
  display: -webkit-flex;
  display: flex;
  -moz-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  cursor: default;
}

.IDMAP_app_sidebar_content_panel:not(.IDMAP_expanded)
  .IDMAP_app_sidebar_content_panel_top_line {
  border-bottom: 1px solid #ddd;
}

.IDMAP_app_sidebar_content_panel.IDMAP_showControls
  .IDMAP_app_sidebar_content_panel_top_line:hover,
.IDMAP_app_sidebar_content_panel.IDMAP_dragged
  .IDMAP_app_sidebar_content_panel_top_line {
  background: rgba(0, 0, 0, 0.03);
}

.IDMAP_app_sidebar_content_panel_title {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

.IDMAP_app_sidebar_content_panel.IDMAP_showControls
  .IDMAP_app_sidebar_content_panel_title {
  cursor: move;
}

.IDMAP_app_sidebar_content_panel_title_text {
  padding-left: 6px;
  vertical-align: middle;
  font: bold 13px / 40px 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: rgba(0, 0, 0, 0.87);
}

.IDMAP_app_sidebar.IDMAP_hideTitleBar
  .IDMAP_app_sidebar_content_panel_top_line {
  display: none;
}

.IDMAP_app_sidebar_content_panel.IDMAP_showControls
  .IDMAP_app_sidebar_content_panel_top_line:hover
  .IDMAP_app_sidebar_content_panel_grip {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 10px;
  height: 40px;
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)
    50% center no-repeat;
}

.IDMAP_app_sidebar_content_panel_title_icon_container {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  margin-left: 6px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin-top: -1px;
}

.IDMAP_app_sidebar_content_panel_title_icon,
.IDMAP_app_sidebar_content_panel_title_icon > img {
  width: 13px;
  height: 13px;
}

.IDMAP_app_sidebar_content_panel_toggle {
  -webkit-flex: 1;
  flex: 1;
  text-align: right;
  visibility: hidden;
}

.IDMAP_app_sidebar_content_panel.IDMAP_showControls
  .IDMAP_app_sidebar_content_panel_toggle {
  visibility: visible;
  cursor: pointer;
}

.IDMAP_app_sidebar_content_panel_toggle_button {
  margin-top: 12px;
  margin-right: 4px;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==)
    center / 20px no-repeat;
  border: none;
  width: 14px;
  height: 14px;
  -webkit-transform: rotate(-90deg);
  transform: rotate(-90deg);
  transition: -webkit-transform 0.15s, transform 0.15s;
  outline: none;
  opacity: 0.6;
  cursor: pointer;
}

.IDMAP_app_sidebar_content_panel_top_line:hover
  .IDMAP_app_sidebar_content_panel_toggle_button,
.IDMAP_app_sidebar_content_panel.IDMAP_dragged
  .IDMAP_app_sidebar_content_panel_top_line
  .IDMAP_app_sidebar_content_panel_toggle_button {
  opacity: 0.9;
}

.IDMAP_app_sidebar_content_panel.IDMAP_expanded
  .IDMAP_app_sidebar_content_panel_toggle_button {
  -webkit-transform: rotate(0);
  transform: rotate(0);
}

.IDMAP_app_sidebar_content_panel_content {
  margin-bottom: 25px;
}

.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {
  position: relative;
}

.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,
.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {
  outline: none;
}

/* end sidebar */

/* shared parts of app id warning */

.inboxsdk__appid_warning {
  margin: 0;
  padding: 9px;
  color: #4b4b4b;
  background: #ff6c6c;
  font-size: 10pt;
}

.inboxsdk__appid_warning_main {
  display: inline-block;
  vertical-align: middle;
}

.inboxsdk__appid_warning .topline {
  font-weight: bold;
  font-size: 11pt;
}

a.inboxsdk__appid_register {
  color: white;
  display: inline-block;
  background: #1989ff;
  border-radius: 3px;
  text-decoration: none;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
  padding: 7px;
  font-size: 10pt;
  vertical-align: middle;
  margin-left: 1em;
}

.inboxsdk__thread_row_icon_wrapper {
  display: inline-block;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  margin-top: 0px;
}

.IDMAP_thread_noticeBar {
  background: #f8ebc0;
  margin-bottom: 10px;
  padding: 12px 4px 6px 12px;
}
`)},{"./rewriteCssWithIdMap":734,"@babel/runtime/helpers/interopRequireDefault":15,"ud-kefir":454}],738:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=function(c,s){if(!s&&c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var o=r(s);if(o&&o.has(c))return o.get(c);var d={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in c)if(p!=="default"&&Object.prototype.hasOwnProperty.call(c,p)){var f=a?Object.getOwnPropertyDescriptor(c,p):null;f&&(f.get||f.set)?Object.defineProperty(d,p,f):d[p]=c[p]}return d.default=c,o&&o.set(c,d),d}(e("kefir"));function r(c){if(typeof WeakMap!="function")return null;var s=new WeakMap,o=new WeakMap;return(r=function(d){return d?o:s})(c)}i.default=class{constructor(c){(0,n.default)(this,"_streamCount",0),(0,n.default)(this,"_ended",!1),(0,n.default)(this,"_pool",u.pool()),this.stream=this._pool.filter(()=>(this._streamCount--,this._streamCount===0&&(this._ended=!0,!0))).take(1).toProperty(),this.stream.onValue(()=>{}),this.add(c)}add(c){if(this._ended)throw new Error("Tried to add a stream to a stopped StopperPool");let s=Array.isArray(c)?c:[c];this._streamCount+=s.length,this._pool.plug(u.merge(s.map(o=>o.take(1))))}getSize(){return this._streamCount}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],739:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6e4,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:250,s=new Error("waitFor timeout"),o=t.later(r,null).flatMap(()=>{let a=u();return a?t.constant(a):(setTimeout(()=>{throw s},0),t.constantError(s))}),d=Boolean;return t.later(0,null).merge(t.interval(c,null)).map(()=>u()).filter(d).merge(o).take(1).takeErrors(1)};var t=function(u,r){if(!r&&u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var c=n(r);if(c&&c.has(u))return c.get(u);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var a=o?Object.getOwnPropertyDescriptor(u,d):null;a&&(a.get||a.set)?Object.defineProperty(s,d,a):s[d]=u[d]}return s.default=u,c&&c.set(u,s),s}(e("kefir"));function n(u){if(typeof WeakMap!="function")return null;var r=new WeakMap,c=new WeakMap;return(n=function(s){return s?c:r})(u)}},{kefir:158}],740:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(r){return u.default.fromESObservable((0,n.default)(r).map(c=>{let s=c.removal,o=u.default.fromPromise(s);return{el:c.value,removalStream:o}}))};var n=t(e("live-set/toValueObservable")),u=t(e("kefir"))},{"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"live-set/toValueObservable":166}],741:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){return new n.default({read(){throw new Error("should not happen; liveset was inactive")},listen(r,c){r(new Set);let s=u.observe({value(o){let{el:d,removalStream:a}=o;c.add(d),a.take(1).onValue(()=>{c.remove(d)})}});return()=>{s.unsubscribe()}}})};var n=t(e("live-set"))},{"@babel/runtime/helpers/interopRequireDefault":15,"live-set":163}],742:[function(e,v,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12e4,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:250,r=new Error("waitFor timeout");return new Promise(function(c,s){let o=0;setTimeout(function d(){try{let a=t();a?c(a):o>=n?s(r):(o+=u,setTimeout(d,u))}catch(a){s(a)}},1)})}},{}],743:[function(e,v,i){(function(t){(function(){"use strict";if(!t.__InboxSDKImpLoader){var n,u=Date.now(),r=!!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');try{ht!==void 0&&ht&&ht.amd&&(n=ht,ht=null);var c=e("kefir"),s=new Promise((o,d)=>{document.readyState==="complete"||document.readyState==="interactive"?o():o(c.merge([c.fromEvents(document,"DOMContentLoaded"),c.fromEvents(window,"load")]).take(1).map(()=>null).toPromise())});t.__InboxSDKImpLoader={load:function(o,d,a){if(o!=="0.1")throw new Error("Unsupported InboxSDK version");if(d==="dropbox")throw new Error("No longer supported");var p=Date.now();return s.then(()=>{var f;try{ht!==void 0&&ht&&ht.amd&&(f=ht,ht=null);let{makePlatformImplementation:b}=e("./platform-implementation");return b(d,a,{piMainStarted:u,piLoadStarted:p,wasAccountSwitcherReadyAtStart:r})}finally{f&&(ht=f)}})}}}finally{n&&(ht=n)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./platform-implementation":758,kefir:158}],744:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/classPrivateFieldGet")),u=t(e("@babel/runtime/helpers/classPrivateFieldSet")),r=t(e("../dom-driver/gmail/gmail-element-getter")),c=e("../views/app-menu-item-view");function s(d,a,p){(function(f,b){if(b.has(f))throw new TypeError("Cannot initialize the same private elements twice on an object")})(d,a),a.set(d,p)}var o=new WeakMap;i.default=class{constructor(d){s(this,o,{writable:!0,value:void 0}),(0,u.default)(this,o,d)}addMenuItem(d){return new c.AppMenuItemView((0,n.default)(this,o),d)}async isShown(){return!!await r.default.getAppMenuAsync()}isCollapsiblePanelShown(d){}}},{"../dom-driver/gmail/gmail-element-getter":532,"../views/app-menu-item-view":760,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/interopRequireDefault":15}],745:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/defaults")),u=t(e("lodash/sortBy")),r=t(e("lodash/find")),c=t(e("kefir")),s=t(e("kefir-bus")),o=t(e("../../common/defer")),d=t(e("../../common/get-or-fail"));let a=Object.freeze({destroy:Object.freeze(function(){})}),p=new WeakMap;i.default=class{constructor(f,b){let _={driver:b,messagesByKey:new Map,queuedPackets:[]};p.set(this,_)}showMessage(f){(0,n.default)(f,{priority:0,time:15e3,hideOnViewChanged:!0,persistent:!1}),this.hideMessage(f.messageKey);let b=(0,d.default)(p,this),_=b.driver.getButterBarDriver(),y=Date.now()+"-"+Math.random();{let C=_.getSharedMessageQueue();if(C.unshift({messageId:y,priority:f.priority,persistent:f.persistent}),C=(0,u.default)(C,I=>-I.priority),C=C.filter((I,S)=>S===0||I.persistent),_.setSharedMessageQueue(C),!(0,r.default)(C,I=>I.messageId===y))return a}let g=(0,s.default)();f.hideOnViewChanged&&g.plug(c.default.later(0,null).flatMap(()=>b.driver.getRouteViewDriverStream().changes()).map(()=>null)),isFinite(f.time)&&g.plug(c.default.later(f.time,null));let m=new Error("Butter bar message timed out");g.plug(c.default.later(12e4,null).map(C=>(b.driver.getLogger().errorApp(m),C))),g.take(1).onValue(()=>{f.messageKey&&b.messagesByKey.delete(f.messageKey);let C=_.getSharedMessageQueue();_.setSharedMessageQueue(C.filter(I=>I.messageId!==y))}),_.getNoticeAvailableStream().toProperty(()=>null).takeUntilBy(g).filter(()=>{let C=_.getSharedMessageQueue();return C[0]||g.value(void 0),C[0]&&C[0].messageId===y}).onValue(()=>{let C=_.showMessage(f);g.take(1).onValue(()=>{C.destroy()})});let w={destroy(){g.value(void 0)}};return f.messageKey&&b.messagesByKey.set(f.messageKey,w),w}showLoading(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,n.default)(f,{text:"Loading...",priority:-3,time:1/0,persistent:!0,hideOnViewChanged:!0}),f.time=1/0,this.showMessage(f)}showError(f){return(0,n.default)(f,{priority:100,className:"inboxsdk__butterbar_error"}),this.showMessage(f)}showSaving(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,n.default)(f,{text:"Saving...",confirmationText:"Saved",confirmationTime:1e3,priority:-2,time:1/0,persistent:!0,hideOnViewChanged:!1,showConfirmation:!0});let b=this.showMessage(f),_=(0,o.default)();return _.promise.then(()=>{b.destroy(),f.showConfirmation&&this.showMessage({text:f.confirmationText,messageKey:f.messageKey,time:f.confirmationTime,priority:200})},()=>{b.destroy()}),_}hideMessage(f){if(f){let b=(0,d.default)(p,this).messagesByKey.get(f);b&&b.destroy()}}hideGmailMessage(){(0,d.default)(p,this).driver.getButterBarDriver().hideGmailMessage()}}},{"../../common/defer":473,"../../common/get-or-fail":476,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"lodash/defaults":310,"lodash/find":315,"lodash/sortBy":350}],746:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(a,p){if(!p&&a&&a.__esModule)return a;if(a===null||typeof a!="object"&&typeof a!="function")return{default:a};var f=s(p);if(f&&f.has(a))return f.get(a);var b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in a)if(y!=="default"&&Object.prototype.hasOwnProperty.call(a,y)){var g=_?Object.getOwnPropertyDescriptor(a,y):null;g&&(g.get||g.set)?Object.defineProperty(b,y,g):b[y]=a[y]}return b.default=a,f&&f.set(a,b),b}(e("ud")),u=t(e("kefir")),r=t(e("../../common/get-or-fail")),c=(t(e("../views/compose-view")),t(e("../lib/handler-registry")));function s(a){if(typeof WeakMap!="function")return null;var p=new WeakMap,f=new WeakMap;return(s=function(b){return b?f:p})(a)}let o=n.defonce(v,()=>new WeakMap);var d=n.defn(v,class{constructor(a,p){let f={driver:a,membrane:p,handlerRegistry:new c.default,composeViewStream:a.getComposeViewDriverStream().map(b=>p.get(b))};o.set(this,f),a.getStopper().onValue(()=>{f.handlerRegistry.dumpHandlers()}),f.composeViewStream.onValue(b=>{a.getLogger().trackFunctionPerformance(()=>{f.handlerRegistry.addTarget(b)},.01,{type:"composeViewHandler",isInlineReplyForm:b.isInlineReplyForm()})})}registerComposeViewHandler(a){return(0,r.default)(o,this).handlerRegistry.registerHandler(a)}async openNewComposeView(){let a=(0,r.default)(o,this),p=await a.driver.openNewComposeViewDriver();return a.membrane.get(p)}async openDraftByMessageID(a){let p=(0,r.default)(o,this),f=p.composeViewStream.take(1).toPromise();return await p.driver.openDraftByMessageID(a),u.default.fromPromise(f).merge(u.default.later(15e3,null).flatMap(()=>u.default.constantError(new Error("draft did not open in time")))).take(1).takeErrors(1).toPromise()}getComposeView(){let{driver:a}=(0,r.default)(o,this);if(a.getLogger().deprecationWarning("Compose.getComposeView","Compose.openNewComposeView"),a.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return this.openNewComposeView()}});i.default=d},{"../../common/get-or-fail":476,"../lib/handler-registry":719,"../views/compose-view":765,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,ud:455}],747:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.MessageViewViewStates=i.MessageViewToolbarSectionNames=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("../../common/get-or-fail")),c=t(e("../views/conversations/thread-view")),s=t(e("../views/conversations/message-view")),o=(t(e("../views/conversations/attachment-card-view")),t(e("../lib/handler-registry")));let d=new WeakMap,a=Object.freeze({HIDDEN:"HIDDEN",COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"});i.MessageViewViewStates=a;let p=Object.freeze({MORE:"MORE"});i.MessageViewToolbarSectionNames=p;function f(_,y,g,m,w,C,I){y.map(function(S){return{viewDriver:S,view:C.get(S)}}).flatMap(S=>S.viewDriver.getReadyStream().map(()=>S).takeUntilBy(u.default.fromEvents(S.view,"destroy"))).onValue(function(S){m.addTarget(S.view)})}var b=class{constructor(_,y,g){(0,n.default)(this,"MessageViewViewStates",a),(0,n.default)(this,"MessageViewToolbarSectionNames",p);let m={appId:_,driver:y,threadViewHandlerRegistry:new o.default,messageViewHandlerRegistries:{all:new o.default,loaded:new o.default},attachmentCardViewHandlerRegistry:new o.default};d.set(this,m),y.getStopper().onValue(()=>{m.threadViewHandlerRegistry.dumpHandlers(),m.messageViewHandlerRegistries.all.dumpHandlers(),m.messageViewHandlerRegistries.loaded.dumpHandlers()}),y.getAttachmentCardViewDriverStream().filter(w=>w.getAttachmentType()==="FILE").onValue(w=>{let C=g.get(w);m.attachmentCardViewHandlerRegistry.addTarget(C)}),f(_,y.getThreadViewDriverStream().filter(w=>!w.isLoadingStub()),c.default,m.threadViewHandlerRegistry,this,g,y),f(_,y.getMessageViewDriverStream(),s.default,m.messageViewHandlerRegistries.all,this,g,y),f(_,y.getMessageViewDriverStream().flatMap(w=>w.isLoaded()?u.default.constant(w):w.getEventStream().filter(C=>C.eventName==="messageLoad").map(()=>w).take(1)),s.default,m.messageViewHandlerRegistries.loaded,this,g,y)}registerThreadViewHandler(_){return(0,r.default)(d,this).threadViewHandlerRegistry.registerHandler(_)}registerMessageViewHandler(_){return(0,r.default)(d,this).messageViewHandlerRegistries.loaded.registerHandler(_)}registerMessageViewHandlerAll(_){return(0,r.default)(d,this).messageViewHandlerRegistries.all.registerHandler(_)}registerFileAttachmentCardViewHandler(_){return(0,r.default)(d,this).attachmentCardViewHandlerRegistry.registerHandler(_)}};i.default=b},{"../../common/get-or-fail":476,"../lib/handler-registry":719,"../views/conversations/attachment-card-view":767,"../views/conversations/message-view":769,"../views/conversations/thread-view":770,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],748:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("kefir")),u=t(e("kefir-cast")),r=t(e("../views/content-panel-view")),c=t(e("../../common/get-or-fail"));t(e("../dom-driver/gmail/views/gmail-support-item-view"));let s=new WeakMap;i.default=class{constructor(o,d,a){let p={appId:o,driver:d,piOpts:a};s.set(this,p)}async addSidebarContentPanel(o){let d=(0,u.default)(n.default,o).toProperty(),a=(0,c.default)(s,this);a.driver.getLogger().eventSdkPassive("global.addSidebarContentPanel");let p=await a.driver.addGlobalSidebarContentPanel(d);return p?new r.default(p):null}addSupportItem(o){let d=(0,c.default)(s,this);return d.driver.getLogger().eventSdkPassive("global.addSupportItem"),d.driver.addSupportItem(o)}}},{"../../common/get-or-fail":476,"../dom-driver/gmail/views/gmail-support-item-view":591,"../views/content-panel-view":766,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156}],749:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(d,a){if(!a&&d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var p=c(a);if(p&&p.has(d))return p.get(d);var f={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in d)if(_!=="default"&&Object.prototype.hasOwnProperty.call(d,_)){var y=b?Object.getOwnPropertyDescriptor(d,_):null;y&&(y.get||y.set)?Object.defineProperty(f,_,y):f[_]=d[_]}return f.default=d,p&&p.set(d,f),f}(e("ud")),u=t(e("../../common/get-or-fail")),r=t(e("../views/keyboard-shortcut-handle"));function c(d){if(typeof WeakMap!="function")return null;var a=new WeakMap,p=new WeakMap;return(c=function(f){return f?p:a})(d)}let s=n.defonce(v,()=>new WeakMap);var o=n.defn(v,class{constructor(d,a,p,f){let b={appId:d,appName:a,appIconUrl:p,driver:f};s.set(this,b)}createShortcutHandle(d){let a=(0,u.default)(s,this),{chord:p,description:f}=d;if(!p)throw new Error("Keyboard.createShortcutHandle chord missing");f==null&&(f="");let b=new r.default(p,f);return a.driver.activateShortcut(b,a.appName,a.appIconUrl),b}});i.default=o},{"../../common/get-or-fail":476,"../views/keyboard-shortcut-handle":771,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],750:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../../common/get-or-fail")),r=t(e("../lib/handler-registry"));t(e("../views/thread-row-view"));let c=new WeakMap;i.default=class{constructor(o,d,a){(0,n.default)(this,"ActionButtonTypes",s);let p={appId:o,driver:d,membrane:a,threadRowViewRegistry:new r.default};c.set(this,p),d.getStopper().onValue(()=>{p.threadRowViewRegistry.dumpHandlers()}),p.driver.getThreadRowViewDriverStream().onValue(f=>{let b=a.get(f);p.threadRowViewRegistry.addTarget(b)})}registerThreadRowViewHandler(o){return(0,u.default)(c,this).threadRowViewRegistry.registerHandler(o)}getSelectedThreadRowViews(){let o=(0,u.default)(c,this);return o.driver.getSelectedThreadRowViewDrivers().map(d=>o.membrane.get(d))}registerThreadRowViewSelectionHandler(o){return(0,u.default)(c,this).driver.registerThreadRowViewSelectionHandler(o)}};let s=Object.freeze({LINK:"LINK",DROPDOWN:"DROPDOWN",ACTION:"ACTION"})},{"../../common/get-or-fail":476,"../lib/handler-registry":719,"../views/thread-row-view":779,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],751:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../widgets/modal-view")),r=t(e("../../common/get-or-fail"));let c=(0,n.defonce)(v,()=>new WeakMap);var s=(0,n.defn)(v,class{constructor(o,d,a){let p={appId:o,driver:d,piOpts:a};c.set(this,p)}show(o){let d=(0,r.default)(c,this).driver;(0,r.default)(c,this).piOpts.inboxBeta&&d.getLogger().deprecationWarning("Modal.show","Widgets.showModalView");let a=d.createModalViewDriver(o),p=new u.default({driver:d,modalViewDriver:a});return p.show(),p}createModalView(o){let d=(0,r.default)(c,this).driver;d.getLogger().deprecationWarning("Modal.createModalView","Widgets.showModalView");let a=d.createModalViewDriver(o);return new u.default({driver:d,modalViewDriver:a})}});i.default=s},{"../../common/get-or-fail":476,"../widgets/modal-view":784,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],752:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-cast")),c=t(e("../../common/get-or-fail")),s=t(e("../views/nav-item-view")),o=t(e("../views/native-nav-item-view")),d=t(e("../constants/nav-item-types"));let a=new WeakMap;class p{constructor(b,_){(0,n.default)(this,"NavItemTypes",d.default);let y={appId:b,driver:_,navItemViews:[]};a.set(this,y),this.SENT_MAIL=function(g,m){return new o.default(g,m,"sent",m.getSentMailNativeNavItem())}(b,_)}addNavItem(b){let _=(0,c.default)(a,this),y=(0,r.default)(u.default,b).toProperty(),g=new s.default(_.appId,_.driver,y,_.driver.addNavItem(_.appId,y));return _.navItemViews.push(g),g}}i.default=p,(0,n.default)(p,"SENT_MAIL",null)},{"../../common/get-or-fail":476,"../constants/nav-item-types":491,"../views/native-nav-item-view":772,"../views/nav-item-view":773,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156}],753:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/find")),r=t(e("lodash/intersection")),c=e("ud"),s=t(e("../lib/handler-registry")),o=t(e("../../common/get-or-fail")),d=(t(e("../views/route-view/route-view")),t(e("../views/route-view/list-route-view"))),a=t(e("../views/route-view/custom-route-view")),p=t(e("../views/route-view/dummy-route-view-driver")),f=e("../constants/router");let b=(0,c.defonce)(v,()=>new WeakMap);var _=(0,c.defn)(v,class{constructor(y,g,m){(0,n.default)(this,"NativeRouteIDs",f.NATIVE_ROUTE_IDS),(0,n.default)(this,"NativeListRouteIDs",f.NATIVE_LIST_ROUTE_IDS),(0,n.default)(this,"RouteTypes",f.ROUTE_TYPES);let w={appId:y,driver:g,currentRouteViewDriver:new p.default,allRoutesHandlerRegistry:new s.default,customRoutes:[],membrane:m,listRouteHandlerRegistries:{}};Object.values(f.NATIVE_LIST_ROUTE_IDS).forEach(C=>{w.listRouteHandlerRegistries[C]=new s.default}),b.set(this,w),g.getRouteViewDriverStream().onValue(C=>{g.getLogger().trackFunctionPerformance(()=>function(I,S,O){S.currentRouteViewDriver instanceof p.default&&S.currentRouteViewDriver.destroy(),S.currentRouteViewDriver=O;let A=S.membrane.get(O);if(function(E,D){E.driver.setShowNativeNavMarker(D.getType()!==f.ROUTE_TYPES.CUSTOM),E.driver.setShowNativeAddonSidebar(D.getType()!==f.ROUTE_TYPES.CUSTOM)}(S,O),A.getRouteType()===f.ROUTE_TYPES.CUSTOM&&function(E,D,P){let j=P.getRouteID(),k=Array.isArray(j)?j:[j],M=(0,u.default)(E.customRoutes,R=>(0,r.default)(Array.isArray(R.routeID)?R.routeID:[R.routeID],k).length);if(M){let R=new a.default(D),V=D.getCustomViewElement();if(!V)throw new Error("should not happen");E.driver.showCustomRouteView(V);try{M.onActivate(R)}catch(T){E.driver.getLogger().error(T)}}}(S,O,A),S.allRoutesHandlerRegistry.addTarget(A),A.getRouteType()===f.ROUTE_TYPES.LIST){let E=new d.default(O,S.driver,S.appId),D=S.listRouteHandlerRegistries[A.getRouteID()];D&&D.addTarget(E),S.listRouteHandlerRegistries[f.NATIVE_ROUTE_IDS.ANY_LIST].addTarget(E)}}(0,w,C),.01,{type:"handleRouteViewChange",routeID:C.getRouteID()})}),g.getStopper().onValue(function(){w.allRoutesHandlerRegistry.dumpHandlers(),Object.values(w.listRouteHandlerRegistries).forEach(C=>{C.dumpHandlers()})})}createLink(y,g){return(0,o.default)(b,this).driver.createLink(y,g)}goto(y,g){if(typeof y!="string")throw new Error("routeID must be a string");let{driver:m}=(0,o.default)(b,this);return typeof g=="string"&&m.getLogger().deprecationWarning("Router.goto param string","param object (e.g. {param: value})"),m.goto(y,g)}handleCustomRoute(y,g){let m={routeID:y,onActivate:g},w=(0,o.default)(b,this).driver.addCustomRouteID(y),{customRoutes:C,driver:I}=(0,o.default)(b,this);return C.push(m),I.getLogger().eventSdkPassive("Router.handleCustomRoute"),function(){w();let S=C.indexOf(m);S>-1&&C.splice(S,1)}}handleAllRoutes(y){return(0,o.default)(b,this).allRoutesHandlerRegistry.registerHandler(y)}handleListRoute(y,g){let{listRouteHandlerRegistries:m}=(0,o.default)(b,this);if(!m[y])throw new Error("Invalid routeID specified");return m[y].registerHandler(g)}handleCustomListRoute(y,g){return(0,o.default)(b,this).driver.addCustomListRouteID(y,g)}getCurrentRouteView(){let y=(0,o.default)(b,this);return y.membrane.get(y.currentRouteViewDriver)}});i.default=_},{"../../common/get-or-fail":476,"../constants/router":492,"../lib/handler-registry":719,"../views/route-view/custom-route-view":774,"../views/route-view/dummy-route-view-driver":775,"../views/route-view/list-route-view":776,"../views/route-view/route-view":777,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":315,"lodash/intersection":325,ud:455}],754:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../common/get-or-fail"));let u=new WeakMap;i.default=class{constructor(r,c){let s={appId:r,driver:c};u.set(this,s)}registerSearchSuggestionsProvider(r){if(typeof r!="function")throw new Error("Incorrect arguments");(0,n.default)(u,this).driver.registerSearchSuggestionsProvider(r)}registerSearchQueryRewriter(r){if(typeof r.termReplacer!="function"||typeof r.term!="string")throw new Error("Incorrect arguments");if(!r.term.match(/^(app|has):/))throw new Error("Custom search term must begin with 'app:'");(0,n.default)(u,this).driver.registerSearchQueryRewriter(r)}}},{"../../common/get-or-fail":476,"@babel/runtime/helpers/interopRequireDefault":15}],755:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-cast")),c=t(e("kefir-stopper")),s=t(e("../lib/safe-event-emitter")),o=t(e("../../common/get-or-fail")),d=t(e("../views/app-toolbar-button-view")),a=e("../constants/toolbars");let p=new WeakMap;class f extends s.default{constructor(_,y,g,m){super(),(0,n.default)(this,"SectionNames",a.SECTION_NAMES);let w={appId:_,driver:y,membrane:g,piOpts:m};p.set(this,w)}registerThreadButton(_){let y=(0,o.default)(p,this);_.listSection!=="OTHER"&&_.threadSection!=="OTHER"||!_.hasDropdown||(y.driver.getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together")),_={..._,hasDropdown:!1});let{hideFor:g,...m}=_,w=()=>y.driver.registerThreadButton({...m,onClick:C=>{m.onClick&&m.onClick({position:C.position,dropdown:C.dropdown,selectedThreadViews:C.selectedThreadViewDrivers.map(I=>y.membrane.get(I)),selectedThreadRowViews:C.selectedThreadRowViewDrivers.map(I=>y.membrane.get(I))})}});if(g){let C=(0,c.default)(),I=null;return y.driver.getRouteViewDriverStream().takeUntilBy(C).onValue(S=>{let O=y.membrane.get(S);g(O)?I&&(I(),I=null):I||(I=w())}),()=>{C.destroy(),I&&(I(),I=null)}}return w()}registerToolbarButtonForList(_){let y=(0,o.default)(p,this);return this.registerThreadButton({positions:["LIST"],listSection:_.section,title:_.title,iconUrl:_.iconUrl,iconClass:_.iconClass,onClick:g=>{_.onClick&&_.onClick({dropdown:g.dropdown,selectedThreadRowViews:g.selectedThreadRowViews,get threadRowViews(){return y.driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews"),g.selectedThreadRowViews}})},hasDropdown:_.hasDropdown,orderHint:_.orderHint,hideFor:_.hideFor,keyboardShortcutHandle:_.keyboardShortcutHandle})}registerToolbarButtonForThreadView(_){return this.registerThreadButton({positions:["THREAD"],threadSection:_.section,title:_.title,iconUrl:_.iconUrl,iconClass:_.iconClass,onClick:y=>{if(y.selectedThreadViews.length!==1)throw new Error("should not happen");_.onClick&&_.onClick({dropdown:y.dropdown,threadView:y.selectedThreadViews[0]})},hasDropdown:_.hasDropdown,orderHint:_.orderHint,hideFor:_.hideFor,keyboardShortcutHandle:_.keyboardShortcutHandle})}setAppToolbarButton(_){let{driver:y,piOpts:g}=(0,o.default)(p,this);if(y.getLogger().deprecationWarning("Toolbars.setAppToolbarButton","Toolbars.addToolbarButtonForApp"),g.REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return this.addToolbarButtonForApp(_)}addToolbarButtonForApp(_){let y=(0,r.default)(u.default,_),g=(0,o.default)(p,this).driver.addToolbarButtonForApp(y);return new d.default((0,o.default)(p,this).driver,g)}}i.default=f},{"../../common/get-or-fail":476,"../constants/toolbars":493,"../lib/safe-event-emitter":736,"../views/app-toolbar-button-view":761,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,"kefir-stopper":157}],756:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("lodash/find")),u=function(d,a){if(!a&&d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var p=c(a);if(p&&p.has(d))return p.get(d);var f={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in d)if(_!=="default"&&Object.prototype.hasOwnProperty.call(d,_)){var y=b?Object.getOwnPropertyDescriptor(d,_):null;y&&(y.get||y.set)?Object.defineProperty(f,_,y):f[_]=d[_]}return f.default=d,p&&p.set(d,f),f}(e("ud")),r=t(e("../../common/get-or-fail"));function c(d){if(typeof WeakMap!="function")return null;var a=new WeakMap,p=new WeakMap;return(c=function(f){return f?p:a})(d)}let s=u.defonce(v,()=>new WeakMap);var o=u.defn(v,class{constructor(d,a){s.set(this,{driver:d,piOpts:a})}getEmailAddress(){return(0,r.default)(s,this).driver.getUserEmailAddress()}isConversationViewDisabled(){return(0,r.default)(s,this).driver.isConversationViewDisabled()}isUsingGmailMaterialUI(){return(0,r.default)(s,this).driver.getLogger().deprecationWarning("User.isUsingGmailMaterialUI"),!0}getLanguage(){return(0,r.default)(s,this).driver.getUserLanguage()}getUserContact(){let{driver:d,piOpts:a}=(0,r.default)(s,this);if(d.getLogger().deprecationWarning("User.getUserContact","User.getEmailAddress"),a.REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return d.getUserContact()}getAccountSwitcherContactList(){let{driver:d}=(0,r.default)(s,this);d.getLogger().deprecationWarning("User.getAccountSwitcherContactList","User.getEmailAddress");let a=d.getAccountSwitcherContactList(),p=this.getEmailAddress();return(0,n.default)(a,f=>f.emailAddress===p)||(a=a.concat([{name:p,emailAddress:p}])),a}});i.default=o},{"../../common/get-or-fail":476,"@babel/runtime/helpers/interopRequireDefault":15,"lodash/find":315,ud:455}],757:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("kefir")),u=t(e("kefir-cast")),r=e("ud"),c=t(e("../widgets/modal-view")),s=t(e("../widgets/mole-view")),o=t(e("../widgets/drawer-view")),d=t(e("../widgets/top-message-bar-view")),a=t(e("../views/compose-view")),p=t(e("../../common/get-or-fail")),f=t(e("../dom-driver/gmail/is-compose-titlebar-light-color"));let b=new Map;var _=(0,r.defn)(v,class{constructor(y,g){let m={driver:g};b.set(this,m)}showModalView(y){y.buttons&&(y.buttons=y.buttons.map(C=>{if(C.onClick){let I=C.onClick;return{...C,onClick(){I({modalView:w})}}}return C}));let{driver:g}=(0,p.default)(b,this),m=g.createModalViewDriver(y),w=new c.default({driver:g,modalViewDriver:m});return w.show(),w}showMoleView(y){let g=(0,p.default)(b,this).driver.createMoleViewDriver(y),m=new s.default({moleViewDriver:g});return g.show(),m}showTopMessageBarView(y){let g=(0,p.default)(b,this).driver.createTopMessageBarDriver((0,u.default)(n.default,y));return new d.default({topMessageBarViewDriver:g})}showDrawerView(y){if((0,p.default)(b,this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used",{keys:Object.keys(y)}),y.composeView&&!(y.composeView instanceof a.default))throw new Error("composeView option was not a ComposeView");let g=(0,p.default)(b,this).driver.createDrawerViewDriver(y);return new o.default(g)}isMoleViewTitleBarLightColor(){return(0,f.default)()}});i.default=_},{"../../common/get-or-fail":476,"../dom-driver/gmail/is-compose-titlebar-light-color":538,"../views/compose-view":765,"../widgets/drawer-view":783,"../widgets/modal-view":784,"../widgets/mole-view":785,"../widgets/top-message-bar-view":786,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,ud:455}],758:[function(e,v,i){(function(t){(function(){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.PlatformImplementation=void 0,i.makePlatformImplementation=function($e,He,re){if(typeof $e!="string")throw new Error("appId must be a string");let le={globalErrorLogging:!0,eventTracking:!0,inboxBeta:!1,...He};switch(le.REQUESTED_API_VERSION=+le.REQUESTED_API_VERSION,le.REQUESTED_API_VERSION){case 2:le.inboxBeta=!0;break;case 1:break;default:throw new Error("InboxSDK: Unsupported API version "+le.REQUESTED_API_VERSION)}let ve={"https://mail.google.com":F.default,"https://inbox.google.com":K.default},De=le.VERSION,xe=r.BUILD_VERSION,Se=new H.default($e,le,De,xe),Ee=document.location.origin,ye=ve[Ee];if(!ye)return new Promise((Ue,de)=>{});(0,s.default)();let Ne=new ye($e,De,xe,Se,le,re);return Ne.onready.then(()=>{(0,$.default)($e)||Ne.showAppIdWarning(),Ne.isRunningInPageContext(),Se.eventSdkPassive("instantiate");let Ue=new Te(Ne,$e,le);return Ee!=="https://inbox.google.com"||le.inboxBeta?(se.has($e)||(se.add($e),Se.eventSdkPassive("load")),Ue):(se.has($e)||(se.add($e),Se.eventSdkPassive("not load")),new Promise((de,qe)=>{}))})};var u=n(e("./lib/safe-event-emitter")),r=e("../common/version"),c=n(e("../common/get-or-fail")),s=n(e("./lib/shared-style")),o=n(e("./lib/Membrane")),d=n(e("./views/conversations/attachment-card-view")),a=n(e("./dom-driver/gmail/views/gmail-attachment-card-view")),p=n(e("./dom-driver/inbox/views/inbox-attachment-card-view")),f=n(e("./views/conversations/message-view")),b=n(e("./dom-driver/gmail/views/gmail-message-view")),_=n(e("./dom-driver/inbox/views/inbox-message-view")),y=n(e("./views/conversations/thread-view")),g=n(e("./dom-driver/gmail/views/gmail-thread-view")),m=n(e("./dom-driver/inbox/views/inbox-thread-view")),w=n(e("./views/thread-row-view")),C=n(e("./dom-driver/gmail/views/gmail-thread-row-view")),I=n(e("./dom-driver/inbox/views/inbox-thread-row-view")),S=n(e("./views/compose-view")),O=n(e("./dom-driver/gmail/views/gmail-compose-view")),A=n(e("./dom-driver/inbox/views/inbox-compose-view")),E=n(e("./views/route-view/dummy-route-view-driver")),D=n(e("./views/route-view/route-view")),P=n(e("./dom-driver/gmail/views/gmail-route-view/gmail-route-view")),j=n(e("./dom-driver/inbox/views/inbox-route-view")),k=n(e("./dom-driver/inbox/views/inbox-dummy-route-view")),M=n(e("./dom-driver/inbox/views/inbox-custom-route-view")),R=n(e("./namespaces/butter-bar")),V=n(e("./namespaces/compose")),T=n(e("./namespaces/conversations")),U=n(e("./namespaces/keyboard")),W=n(e("./namespaces/widgets")),Q=n(e("./namespaces/modal")),X=n(e("./namespaces/lists")),oe=n(e("./namespaces/nav-menu")),J=n(e("./namespaces/app-menu")),he=n(e("./namespaces/router")),ae=n(e("./namespaces/search")),ue=n(e("./namespaces/toolbars")),ge=n(e("./namespaces/user")),N=n(e("./namespaces/global")),F=n(e("./dom-driver/gmail/gmail-driver")),K=n(e("./dom-driver/inbox/inbox-driver")),H=n(e("./lib/logger")),$=n(e("./lib/is-valid-app-id"));let se=new Set,pe=new WeakMap;class Te extends u.default{constructor(He,re,le){super();let{appName:ve,appIconUrl:De,VERSION:xe}=le,Se={driver:He};pe.set(this,Se);let Ee=new o.default([[O.default,ye=>new S.default(He,ye,Ee)],[A.default,ye=>new S.default(He,ye,Ee)],[a.default,ye=>new d.default(ye,He,Ee)],[p.default,ye=>new d.default(ye,He,Ee)],[b.default,ye=>new f.default(ye,re,Ee,this.Conversations,He)],[_.default,ye=>new f.default(ye,re,Ee,this.Conversations,He)],[g.default,ye=>new y.default(ye,re,He,Ee)],[m.default,ye=>new y.default(ye,re,He,Ee)],[C.default,ye=>new w.default(ye)],[I.default,ye=>new w.default(ye)],[P.default,ye=>new D.default(ye)],[j.default,ye=>new D.default(ye)],[k.default,ye=>new D.default(ye)],[M.default,ye=>new D.default(ye)],[E.default,ye=>new D.default(ye)]]);this.destroyed=!1,this.LOADER_VERSION=xe,this.IMPL_VERSION=r.BUILD_VERSION,this.ButterBar=new R.default(re,He),He.setButterBar(this.ButterBar),this.Compose=new V.default(He,Ee),this.Conversations=new T.default(re,He,Ee),this.Keyboard=new U.default(re,ve,De,He),this.User=new ge.default(He,le),this.Lists=new X.default(re,He,Ee),this.NavMenu=new oe.default(re,He),this.AppMenu=new J.default(He),this.Router=new he.default(re,He,Ee),this.Search=new ae.default(re,He),this.Toolbars=new ue.default(re,He,Ee,le),this.Widgets=new W.default(re,He),le.REQUESTED_API_VERSION===1&&(this.Modal=new Q.default(re,He,le)),le.REQUESTED_API_VERSION>=2&&(this.Global=new N.default(re,He,le)),this.Logger=He.getLogger().getAppLogger()}destroy(){this.destroyed||(this.destroyed=!0,(0,c.default)(pe,this).driver.destroy(),this.emit("destroy"))}}i.PlatformImplementation=Te}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../common/get-or-fail":476,"../common/version":485,"./dom-driver/gmail/gmail-driver":496,"./dom-driver/gmail/views/gmail-attachment-card-view":551,"./dom-driver/gmail/views/gmail-compose-view":554,"./dom-driver/gmail/views/gmail-message-view":584,"./dom-driver/gmail/views/gmail-route-view/gmail-route-view":589,"./dom-driver/gmail/views/gmail-thread-row-view":592,"./dom-driver/gmail/views/gmail-thread-view":595,"./dom-driver/inbox/inbox-driver":633,"./dom-driver/inbox/views/inbox-attachment-card-view":648,"./dom-driver/inbox/views/inbox-compose-view":653,"./dom-driver/inbox/views/inbox-custom-route-view":654,"./dom-driver/inbox/views/inbox-dummy-route-view":657,"./dom-driver/inbox/views/inbox-message-view":658,"./dom-driver/inbox/views/inbox-route-view":660,"./dom-driver/inbox/views/inbox-thread-row-view":661,"./dom-driver/inbox/views/inbox-thread-view":662,"./lib/Membrane":682,"./lib/is-valid-app-id":725,"./lib/logger":729,"./lib/safe-event-emitter":736,"./lib/shared-style":737,"./namespaces/app-menu":744,"./namespaces/butter-bar":745,"./namespaces/compose":746,"./namespaces/conversations":747,"./namespaces/global":748,"./namespaces/keyboard":749,"./namespaces/lists":750,"./namespaces/modal":751,"./namespaces/nav-menu":752,"./namespaces/router":753,"./namespaces/search":754,"./namespaces/toolbars":755,"./namespaces/user":756,"./namespaces/widgets":757,"./views/compose-view":765,"./views/conversations/attachment-card-view":767,"./views/conversations/message-view":769,"./views/conversations/thread-view":770,"./views/route-view/dummy-route-view-driver":775,"./views/route-view/route-view":777,"./views/thread-row-view":779,"@babel/runtime/helpers/interopRequireDefault":15}],759:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../lib/safe-event-emitter"));class r extends u.default{constructor(s){super(),(0,n.default)(this,"destroyed",!1),this.el=s}destroy(){this.destroyed||(this.destroyed=!0,this.emit("destroy"),this.el.remove())}}i.default=r},{"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],760:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.AppMenuItemView=void 0;var n=t(e("@babel/runtime/helpers/classPrivateFieldGet")),u=t(e("@babel/runtime/helpers/classPrivateFieldSet")),r=t(e("lodash/isEqual")),c=t(e("kefir")),s=t(e("../lib/safe-event-emitter")),o=e("../dom-driver/gmail/views/gmail-app-menu-item-view"),d=e("./collapsible-panel-view"),a=e("../dom-driver/gmail/gmail-driver/add-collapsible-panel"),p=t(e("../dom-driver/gmail/gmail-element-getter"));function f(ue,ge){_(ue,ge),ge.add(ue)}function b(ue,ge,N){_(ue,ge),ge.set(ue,N)}function _(ue,ge){if(ge.has(ue))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(ue,ge,N){if(!ge.has(ue))throw new TypeError("attempted to get private field on non-instance");return N}function g(ue,ge,N){return I(ue,ge),w(N,"get"),function(F,K){return K.get?K.get.call(F):K.value}(ue,N)}function m(ue,ge,N,F){return I(ue,ge),w(N,"set"),function(K,H,$){if(H.set)H.set.call(K,$);else{if(!H.writable)throw new TypeError("attempted to set read only private field");H.value=$}}(ue,N,F),F}function w(ue,ge){if(ue===void 0)throw new TypeError("attempted to "+ge+" private static field before its declaration")}function C(ue,ge,N){return I(ue,ge),N}function I(ue,ge){if(ue!==ge)throw new TypeError("Private static access of wrong provenance")}let S={menuItem:null,panel:null,route:null};var O=new WeakMap,A=new WeakMap,E=new WeakMap,D=new WeakMap,P=new WeakMap,j=new WeakSet,k=new WeakSet,M=new WeakMap,R=new WeakSet,V=new WeakMap,T=new WeakMap;class U extends s.default{constructor(ge,N){super(),f(this,R),f(this,k),f(this,j),b(this,O,{writable:!0,value:void 0}),b(this,A,{writable:!0,value:!1}),b(this,E,{writable:!0,value:void 0}),b(this,D,{writable:!0,value:void 0}),b(this,P,{writable:!0,value:!1}),b(this,M,{writable:!0,value:async K=>{var H,$,se,pe;let Te=await(0,n.default)(this,E),{relatedTarget:$e}=K,He=$e instanceof Node&&((H=Te.element)===null||H===void 0?void 0:H.contains($e)),re=$e instanceof Node&&(($=(0,n.default)(this,D))===null||$===void 0||(se=$.element)===null||se===void 0?void 0:se.contains($e));if(He||re)return;(0,u.default)(this,P,!1),Te.blur();let le=y(this,R,oe).call(this);var ve;(pe=(0,n.default)(this,D))===null||pe===void 0||pe.blur(le),le||(g(U,U,J)instanceof d.CollapsiblePanelView?(ve=g(U,U,J))===null||ve===void 0||ve.activate():g(U,U,J)instanceof HTMLElement&&g(U,U,J).classList.add(d.CollapsiblePanelView.elementCss.ACTIVE)),this.emit("blur")}}),b(this,V,{writable:!0,value:async K=>{var H;if((0,n.default)(this,P))return;(0,u.default)(this,P,!0),(await(0,n.default)(this,E)).hover();let $=y(this,R,oe).call(this);var se;$||(g(U,U,J)instanceof d.CollapsiblePanelView?(se=g(U,U,J))===null||se===void 0||se.deactivate():g(U,U,J)instanceof HTMLElement&&g(U,U,J).classList.remove(d.CollapsiblePanelView.elementCss.ACTIVE)),(H=(0,n.default)(this,D))===null||H===void 0||H.hover($),this.emit("hover")}}),b(this,T,{writable:!0,value:()=>{y(this,k,X).call(this),this.emit("click")}}),(0,u.default)(this,O,ge);let F=(0,n.default)(this,O).addAppMenuItem(N);(0,u.default)(this,E,F),F.then(K=>{!(0,n.default)(this,A)&&K&&(K.on("click",(0,n.default)(this,T)),K.on("destroy",()=>this.remove()),K.on("blur",(0,n.default)(this,M)),K.on("hover",(0,n.default)(this,V)),ge.getRouteViewDriverStream().onValue(H=>{let $=H.getRouteID(),se=H.getParams(),pe=H.getRouteType();pe==="UNKNOWN"&&$===null||pe!=="CUSTOM"&&(S.route,document.location.hash);let{activeRouteID:Te,routeID:$e,routeParams:He,activeRouteParams:re}=K.menuItemDescriptor??{},le=(0,r.default)(Te||$e,$);le&&(re?le=(0,r.default)(re,se):He&&(le=(0,r.default)(He,se))),le&&y(this,k,X).call(this)}))}),g(U,U,ae).add(this)}async addCollapsiblePanel(ge){let N=await(0,a.addCollapsiblePanel)((0,n.default)(this,O),ge);return N&&(N.on("blur",(0,n.default)(this,M)),N.on("hover",(0,n.default)(this,V))),(0,u.default)(this,D,N),N}async update(ge){(await(0,n.default)(this,E)).setMenuItemDescriptor(ge)}remove(){var ge;(0,n.default)(this,A)||((0,u.default)(this,A,!0),g(U,U,ae).delete(this),this.emit("destroy"),(ge=(0,n.default)(this,D))===null||ge===void 0||ge.remove(),(0,n.default)(this,E).then(N=>N.remove()))}}function W(){let ue=p.default.getAppMenuContainer(),{ACTIVE:ge,HOVER:N}=d.CollapsiblePanelView.elementCss;return ue?.querySelector(`${d.CollapsiblePanelView.elementSelectors.NATIVE}.${ge}:not(.${N}):not(${d.CollapsiblePanelView.elementSelectors.CUSTOM})`)}async function Q(){var ue;(await(0,n.default)(this,E)).deactivate(),(ue=(0,n.default)(this,D))===null||ue===void 0||ue.deactivate()}async function X(){var ue;m(U,U,J,(0,n.default)(this,D));let ge=await(0,n.default)(this,E),N=p.default.getAppMenuContainer(),{ACTIVE:F}=o.GmailAppMenuItemView.elementCss;for(let K of N?.querySelectorAll(`.${F}`)??[])K.classList.remove(F);ge.activate(),(ue=(0,n.default)(this,D))===null||ue===void 0||ue.activate()}function oe(){return(0,n.default)(this,D)!=null&&g(U,U,J)===(0,n.default)(this,D)}i.AppMenuItemView=U;var J={writable:!0,value:void 0},he={writable:!0,value:c.default.stream(ue=>{let ge=new MutationObserver(N=>{for(let F of N){let{target:K}=F;F.type==="attributes"&&K instanceof HTMLElement&&K.classList.contains(o.NATIVE_CLASS)&&!K.classList.contains(o.INBOXSDK_CLASS)&&(K.classList.contains(o.GmailAppMenuItemView.elementCss.ACTIVE)?ue.emit(["activated",K]):K.classList.contains(o.GmailAppMenuItemView.elementCss.HOVER)&&ue.emit(["hovered",K]))}});(async()=>{let N=await p.default.getAppMenuAsync();if(!N)return;let{ACTIVE:F}=o.GmailAppMenuItemView.elementCss,K=`.${o.NATIVE_CLASS}.${F}:not(.${o.INBOXSDK_CLASS})`,H=C(U,U,W).call(U);var $;$={menuItem:N.querySelector(K),panel:H},S={...S,...$},m(U,U,J,H),document.addEventListener("mousedown",se=>{let{target:pe}=se;if(!(pe instanceof Element)||!N.contains(pe))return;let Te=pe.closest(`.${o.NATIVE_CLASS}:not(.${o.INBOXSDK_CLASS})`);Te&&ue.emit(["mousedown-on-native-el",Te,se])}),ge.observe(N,{attributes:!0,childList:!0,subtree:!0})})()})},ae={writable:!0,value:new Set};g(U,U,he).onValue(async ue=>{let[ge,N]=ue;if(ge==="activated"&&(m(U,U,J,C(U,U,W).call(U)),await Promise.all(Array.from(g(U,U,ae)).map(async F=>{await y(F,j,Q).call(F)}))),ge==="mousedown-on-native-el"){if(S.menuItem!==N)return void(S.menuItem=N);{let{menuItem:F,panel:K,route:H}=S;S.menuItem=N,H&&(document.location.hash=H),F?.classList.add(o.GmailAppMenuItemView.elementCss.ACTIVE),F.classList.remove(o.GmailAppMenuItemView.elementCss.HOVER),K?.classList.add(d.CollapsiblePanelView.elementCss.ACTIVE),K?.classList.remove(d.CollapsiblePanelView.elementCss.HOVER)}}})},{"../dom-driver/gmail/gmail-driver/add-collapsible-panel":498,"../dom-driver/gmail/gmail-element-getter":532,"../dom-driver/gmail/views/gmail-app-menu-item-view":542,"../lib/safe-event-emitter":736,"./collapsible-panel-view":762,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"lodash/isEqual":332}],761:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../lib/safe-event-emitter")),u=t(e("../../common/get-or-fail"));let r=new WeakMap;class c extends n.default{constructor(o,d){super();let a={appToolbarButtonViewDriverPromise:d,appToolbarButtonViewDriver:null};r.set(this,a),this.destroyed=!1,a.appToolbarButtonViewDriverPromise.then(p=>{a.appToolbarButtonViewDriver=p,p.getStopper().onValue(()=>{this.destroyed=!0,this.emit("destroy")})}),o.getStopper().onValue(()=>{this.remove()})}open(){(0,u.default)(r,this).appToolbarButtonViewDriverPromise.then(function(o){o.open()})}close(){(0,u.default)(r,this).appToolbarButtonViewDriverPromise.then(function(o){o.close()})}remove(){(0,u.default)(r,this).appToolbarButtonViewDriverPromise.then(function(o){o.destroy()})}}i.default=c},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15}],762:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.CollapsiblePanelView=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("@babel/runtime/helpers/classPrivateFieldSet")),r=t(e("@babel/runtime/helpers/classPrivateFieldGet")),c=t(e("classnames")),s=function(ae,ue){if(!ue&&ae&&ae.__esModule)return ae;if(ae===null||typeof ae!="object"&&typeof ae!="function")return{default:ae};var ge=_(ue);if(ge&&ge.has(ae))return ge.get(ae);var N={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in ae)if(K!=="default"&&Object.prototype.hasOwnProperty.call(ae,K)){var H=F?Object.getOwnPropertyDescriptor(ae,K):null;H&&(H.get||H.set)?Object.defineProperty(N,K,H):N[K]=ae[K]}return N.default=ae,ge&&ge.set(ae,N),N}(e("kefir")),o=t(e("kefir-cast")),d=t(e("../lib/safe-event-emitter")),a=t(e("auto-html")),p=t(e("../lib/dom/querySelectorOrFail")),f=t(e("../dom-driver/gmail/gmail-element-getter")),b=t(e("./nav-item-view"));function _(ae){if(typeof WeakMap!="function")return null;var ue=new WeakMap,ge=new WeakMap;return(_=function(N){return N?ge:ue})(ae)}function y(ae,ue){m(ae,ue),ue.add(ae)}function g(ae,ue,ge){m(ae,ue),ue.set(ae,ge)}function m(ae,ue){if(ue.has(ae))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(ae,ue,ge){if(!ue.has(ae))throw new TypeError("attempted to get private field on non-instance");return ge}let C="aqn oy8Mbf inboxsdk__collapsiblePanel",I="T-I T-I-KE L3",S=".T-I.T-I-KE.L3";var O=new WeakMap,A=new WeakMap,E=new WeakMap,D=new WeakMap,P=new WeakMap,j=new WeakMap,k=new WeakSet,M=new WeakMap,R=new WeakSet,V=new WeakSet,T=new WeakSet,U=new WeakMap,W=new WeakMap;class Q extends d.default{get element(){return(0,r.default)(this,A)}set panelDescriptor(ue){(0,u.default)(this,O,ue),w(this,R,oe).call(this)}constructor(ue){super(),y(this,T),y(this,V),y(this,R),y(this,k),g(this,O,{writable:!0,value:void 0}),g(this,A,{writable:!0,value:void 0}),g(this,E,{writable:!0,value:!1}),g(this,D,{writable:!0,value:Math.random().toFixed(3)}),g(this,P,{writable:!0,value:Math.random().toFixed(3)}),g(this,j,{writable:!0,value:void 0}),g(this,M,{writable:!0,value:ge=>{var N,F,K;(N=(0,r.default)(this,O))===null||N===void 0||(F=N.primaryButton)===null||F===void 0||(K=F.onClick)===null||K===void 0||K.call(F,ge)}}),g(this,U,{writable:!0,value:ge=>{this.emit("blur",ge)}}),g(this,W,{writable:!0,value:ge=>{this.emit("hover",ge)}}),(0,u.default)(this,j,ue),(0,u.default)(this,A,w(this,k,X).call(this)),(0,r.default)(this,A).addEventListener("mouseover",(0,r.default)(this,W)),(0,r.default)(this,A).addEventListener("mouseout",(0,r.default)(this,U))}toggleCollapse(ue){let ge=this.element;if(!ge)return;let{COLLAPSED:N}=Q.elementCss;ue?ge.classList.add(N):ge.classList.remove(N),this.emit("toggle",ue)}blur(ue){let{element:ge}=this;ge&&(ge.classList.remove(Q.elementCss.HOVER),ue||ge.classList.remove(Q.elementCss.ACTIVE),ge.style.removeProperty("height"))}hover(ue){let{element:ge}=this,{ACTIVE:N,HOVER:F}=Q.elementCss;ge&&!ge.classList.contains(N)&&(ge.classList.add(F),ue||ge.classList.add(Q.elementCss.ACTIVE),ge.style.cssText="height: 785px;")}activate(){let ue=this.element;ue&&(ue?.classList.remove(Q.elementCss.HOVER),ue.classList.add(Q.elementCss.ACTIVE))}deactivate(){let ue=this.element;ue&&ue.classList.remove(Q.elementCss.ACTIVE)}remove(){var ue;(0,r.default)(this,E)||((0,u.default)(this,E,!0),(ue=this.element)===null||ue===void 0||ue.remove(),this.emit("destroy"))}addNavItem(ue){let ge=this.element;if(!ge)return;let N=(0,p.default)(ge,".at9 .n3 .TK"),F=`collapsible-panel-${(0,r.default)(this,D)}`,K=(0,o.default)(s,ue).toProperty(),H=(0,r.default)(this,j).addNavItem(F,K,N);return new b.default(F,(0,r.default)(this,j),K,H)}}function X(){var ae;let{iconUrl:ue,className:ge,name:N=""}=((ae=(0,r.default)(this,O))===null||ae===void 0?void 0:ae.primaryButton)??{},F=document.createElement("div");F.className=C;let K=(0,c.default)(I,ge),H;ue&&(H=f.default.isDarkTheme()?ue.darkTheme:ue.lightTheme),F.innerHTML=a.default`
      <div class="aBO">
        <div class="aic">
          <div class="z0">
            <div class="${K}" style="user-select: none" role="button" tabindex="0">
              ${N}
            </div>
          </div>
        </div>
        <div class="at9">
          <div class="Ls77Lb aZ6">
            <div class="pp" style="user-select: none;">
              <div>
                <div class="nM">
                  <div class="aic"></div>
                  <div class="yJ">
                    <div class="ajl aib aZ6" aria-labelledby="${(0,r.default)(this,P)}">
                      <h2 class="aWk" id="${(0,r.default)(this,P)}">Labels</h2>
                      <div class="wT">
                        <div class="n3">
                          <div class="byl">
                            <div class="TK"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="aTV" style="top: 27px;"></div>
    `.trim();let $=(0,p.default)(F,S);return $.style.setProperty("--background-image",H?`url(${H})`:"unset"),$.addEventListener("click",(0,r.default)(this,M)),F}function oe(){var ae;let ue=this.element;if(!ue)return;let{ACTIVE:ge,COLLAPSED:N}=Q.elementCss,F=ue.classList.contains(ge),K=ue.classList.contains(N);ue.className=(0,c.default)(C,(ae=(0,r.default)(this,O))===null||ae===void 0?void 0:ae.className,{[ge]:F,[N]:K}),w(this,T,he).call(this,ue),w(this,V,J).call(this,ue)}function J(ae){var ue;let ge=(0,p.default)(ae,S),{iconUrl:N,className:F}=((ue=(0,r.default)(this,O))===null||ue===void 0?void 0:ue.primaryButton)??{};if(N){let K=`url(${f.default.isDarkTheme()?N.darkTheme:N.lightTheme})`;ge.style.setProperty("--background-image",K)}else ge.style.setProperty("--background-image","unset");ge.className=(0,c.default)(I,F)}function he(ae){var ue,ge;let N=ae.querySelector(S);N&&(N.textContent=((ue=(0,r.default)(this,O))===null||ue===void 0||(ge=ue.primaryButton)===null||ge===void 0?void 0:ge.name)??"")}i.CollapsiblePanelView=Q,(0,n.default)(Q,"elementSelectors",{NATIVE:".aqn.oy8Mbf",CUSTOM:".inboxsdk__collapsiblePanel"}),(0,n.default)(Q,"elementCss",{ACTIVE:"apV",COLLAPSED:"aBa",HOVER:"aJu"})},{"../dom-driver/gmail/gmail-element-getter":532,"../lib/dom/querySelectorOrFail":706,"../lib/safe-event-emitter":736,"./nav-item-view":773,"@babel/runtime/helpers/classPrivateFieldGet":8,"@babel/runtime/helpers/classPrivateFieldSet":9,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"auto-html":34,classnames:56,kefir:158,"kefir-cast":156}],763:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../lib/safe-event-emitter")),r=t(e("../../common/get-or-fail"));let c=new WeakMap;class s extends u.default{constructor(a,p){super();let f={collapsibleSectionViewDriver:a};c.set(this,f),this.destroyed=!1,function(b,_,y){_.getEventStream().onValue(g=>{let{eventName:m}=g;b.emit(m)}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="rowClicked"}).onValue(g=>{let{rowDescriptor:m}=g;m.routeID&&y.goto(m.routeID,m.routeParams),typeof m.onClick=="function"&&m.onClick()}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="titleLinkClicked"}).onValue(g=>{let{sectionDescriptor:m}=g;m.onTitleLinkClick&&m.onTitleLinkClick(b)}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="footerClicked"}).onValue(g=>{let{sectionDescriptor:m}=g;m.onFooterLinkClick&&m.onFooterLinkClick(b)}),_.getEventStream().onEnd(()=>{b.destroyed=!0,b.emit("destroy")})}(this,a,p)}setCollapsed(a){(0,r.default)(c,this).collapsibleSectionViewDriver.setCollapsed(a)}remove(){this.destroy()}destroy(){(0,r.default)(c,this).collapsibleSectionViewDriver.destroy(),this.removeAllListeners()}}var o=(0,n.defn)(v,s);i.default=o},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],764:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../lib/safe-event-emitter")),r=t(e("../../common/get-or-fail"));let c=new WeakMap;class s extends u.default{constructor(a,p,f){super(),(0,n.default)(this,"destroyed",!1);let b={optionsPromise:a,composeViewDriver:p,driver:f};c.set(this,b),b.optionsPromise.then(_=>{_?b.composeViewDriver.getStopper().onValue(()=>{o(this)}):o(this)})}showTooltip(a){let p=(0,r.default)(c,this);p.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip",{keys:Object.keys(a)}),p.optionsPromise.then(f=>{f&&p.composeViewDriver.addTooltipToButton(f.buttonViewController,f.buttonDescriptor,a)})}closeTooltip(){let a=(0,r.default)(c,this);a.optionsPromise.then(p=>{p&&a.composeViewDriver.closeButtonTooltip(p.buttonViewController)})}}function o(d){d.destroyed=!0,d.emit("destroy")}i.default=s},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],765:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../lib/safe-event-emitter")),r=t(e("kefir")),c=t(e("kefir-cast")),s=function(b,_){if(!_&&b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var y=a(_);if(y&&y.has(b))return y.get(b);var g={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in b)if(w!=="default"&&Object.prototype.hasOwnProperty.call(b,w)){var C=m?Object.getOwnPropertyDescriptor(b,w):null;C&&(C.get||C.set)?Object.defineProperty(g,w,C):g[w]=b[w]}return g.default=b,y&&y.set(b,g),g}(e("ud")),o=t(e("../../common/get-or-fail")),d=t(e("./compose-button-view"));function a(b){if(typeof WeakMap!="function")return null;var _=new WeakMap,y=new WeakMap;return(a=function(g){return g?y:_})(b)}let p=s.defonce(v,()=>new WeakMap);class f extends u.default{constructor(_,y,g){super(),(0,n.default)(this,"destroyed",!1);let m={driver:_,membrane:g,composeViewImplementation:y};p.set(this,m),this.on("newListener",w=>{w==="close"?(_.getLogger().deprecationWarning("composeView close event","composeView destroy event"),_.getOpts().REQUESTED_API_VERSION):w==="messageIDChange"?(_.getLogger().deprecationWarning("composeView messageIDChange event","composeView.getDraftID"),_.getOpts().REQUESTED_API_VERSION):w==="linkPopOver"&&y.setupLinkPopOvers()}),m.composeViewImplementation.getEventStream().onValue(w=>{if(w.eventName==="destroy")this.destroyed=!0,_.getOpts().REQUESTED_API_VERSION===1&&this.emit("close");else if(w.eventName==="messageIDChange"&&_.getOpts().REQUESTED_API_VERSION!==1)return;this.emit(w.eventName,w.data)})}addButton(_){let y=(0,o.default)(p,this),g=(0,c.default)(r.default,_),m=y.composeViewImplementation.addButton(g,y.driver.getAppId(),{composeView:this});return new d.default(m,y.composeViewImplementation,y.driver)}addComposeNotice(_){return(0,o.default)(p,this).composeViewImplementation.addComposeNotice(_)}addStatusBar(_){return(0,o.default)(p,this).composeViewImplementation.addStatusBar(_)}hideNativeStatusBar(){return(0,o.default)(p,this).composeViewImplementation.hideNativeStatusBar()}addRecipientRow(_){return{destroy:(0,o.default)(p,this).composeViewImplementation.addRecipientRow((0,c.default)(r.default,_))}}forceRecipientRowsOpen(){return(0,o.default)(p,this).composeViewImplementation.forceRecipientRowsOpen()}hideNativeRecipientRows(){return(0,o.default)(p,this).composeViewImplementation.hideNativeRecipientRows()}hideRecipientArea(){return(0,o.default)(p,this).composeViewImplementation.hideRecipientArea()}close(){(0,o.default)(p,this).composeViewImplementation.close()}send(){let{sendAndArchive:_}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{sendAndArchive:!1};(0,o.default)(p,this).composeViewImplementation.send({sendAndArchive:_})}discard(){(0,o.default)(p,this).composeViewImplementation.discard()}getMetadataForm(){return(0,o.default)(p,this).composeViewImplementation.getMetadataFormElement()}getSubjectInput(){return(0,o.default)(p,this).composeViewImplementation.getSubjectInput()}getBodyElement(){return(0,o.default)(p,this).composeViewImplementation.getBodyElement()}getComposeID(){let{driver:_,composeViewImplementation:y}=(0,o.default)(p,this);if(_.getLogger().deprecationWarning("composeView.getComposeID"),_.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return y.getComposeID()}getInitialMessageID(){return(0,o.default)(p,this).composeViewImplementation.getInitialMessageID()}getMessageID(){let{driver:_,composeViewImplementation:y}=(0,o.default)(p,this);if(_.getLogger().deprecationWarning("composeView.getMessageID","composeView.getDraftID"),_.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return y.getMessageID()}getThreadID(){return(0,o.default)(p,this).composeViewImplementation.getThreadID()}getDraftID(){return(0,o.default)(p,this).composeViewImplementation.getDraftID()}getCurrentDraftID(){return(0,o.default)(p,this).composeViewImplementation.getCurrentDraftID()}getHTMLContent(){return(0,o.default)(p,this).composeViewImplementation.getHTMLContent()}getSelectedBodyHTML(){return(0,o.default)(p,this).composeViewImplementation.getSelectedBodyHTML()||""}getSelectedBodyText(){return(0,o.default)(p,this).composeViewImplementation.getSelectedBodyText()||""}getSubject(){return(0,o.default)(p,this).composeViewImplementation.getSubject()}getTextContent(){return(0,o.default)(p,this).composeViewImplementation.getTextContent()}getToRecipients(){return(0,o.default)(p,this).composeViewImplementation.getToRecipients()}getCcRecipients(){return(0,o.default)(p,this).composeViewImplementation.getCcRecipients()}getBccRecipients(){return(0,o.default)(p,this).composeViewImplementation.getBccRecipients()}insertTextIntoBodyAtCursor(_){return(0,o.default)(p,this).composeViewImplementation.insertBodyTextAtCursor(_)}insertHTMLIntoBodyAtCursor(_){return(0,o.default)(p,this).composeViewImplementation.insertBodyHTMLAtCursor(_)}insertLinkChipIntoBodyAtCursor(_,y,g){if(g&&typeof g=="string"&&g.indexOf("http")===0)return(0,o.default)(p,this).composeViewImplementation.insertLinkChipIntoBody({text:_,url:y,iconUrl:g})}insertLinkIntoBodyAtCursor(_,y){return(0,o.default)(p,this).composeViewImplementation.insertLinkIntoBody(_,y)}isForward(){return(0,o.default)(p,this).composeViewImplementation.isForward()}isInlineReplyForm(){return(0,o.default)(p,this).composeViewImplementation.isInlineReplyForm()}isFullscreen(){return(0,o.default)(p,this).composeViewImplementation.isFullscreen()}setFullscreen(_){(0,o.default)(p,this).composeViewImplementation.setFullscreen(_)}isMinimized(){return(0,o.default)(p,this).composeViewImplementation.isMinimized()}setMinimized(_){(0,o.default)(p,this).composeViewImplementation.setMinimized(_)}setTitleBarColor(_){return(0,o.default)(p,this).composeViewImplementation.setTitleBarColor(_)}setTitleBarText(_){return(0,o.default)(p,this).composeViewImplementation.setTitleBarText(_)}async popOut(){let _=(0,o.default)(p,this).driver.getNextComposeViewDriver();(0,o.default)(p,this).composeViewImplementation.popOut();let y=await _;return(0,o.default)(p,this).membrane.get(y)}isReply(){return(0,o.default)(p,this).composeViewImplementation.isReply()}setToRecipients(_){(0,o.default)(p,this).composeViewImplementation.setToRecipients(_)}setCcRecipients(_){(0,o.default)(p,this).composeViewImplementation.setCcRecipients(_)}setBccRecipients(_){(0,o.default)(p,this).composeViewImplementation.setBccRecipients(_)}getFromContact(){return(0,o.default)(p,this).composeViewImplementation.getFromContact()}getFromContactChoices(){return(0,o.default)(p,this).composeViewImplementation.getFromContactChoices()}setFromEmail(_){(0,o.default)(p,this).composeViewImplementation.setFromEmail(_)}setSubject(_){(0,o.default)(p,this).composeViewImplementation.setSubject(_)}setBodyHTML(_){(0,o.default)(p,this).composeViewImplementation.setBodyHTML(_)}setBodyText(_){(0,o.default)(p,this).composeViewImplementation.setBodyText(_)}async attachFiles(_){if(_.length!==0){if(!(_[0]instanceof Blob))throw new Error("parameter must be an array of Blob objects");return(0,o.default)(p,this).composeViewImplementation.attachFiles(Array.from(_))}}async attachInlineFiles(_){if(_.length!==0){if(!(_[0]instanceof Blob))throw new Error("parameter must be an array of Blob objects");return(0,o.default)(p,this).composeViewImplementation.attachInlineFiles(Array.from(_))}}dragFilesIntoCompose(_){let{driver:y}=(0,o.default)(p,this);if(y.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose","ComposeView.attachInlineFiles"),y.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return this.attachInlineFiles(_)}getElement(){return(0,o.default)(p,this).composeViewImplementation.getElement()}registerRequestModifier(_){(0,o.default)(p,this).composeViewImplementation.registerRequestModifier(_)}replaceSendButton(_){let{el:y}=_;return(0,o.default)(p,this).composeViewImplementation.replaceSendButton(y)}hideDiscardButton(){return(0,o.default)(p,this).composeViewImplementation.hideDiscardButton()}ensureFormattingToolbarIsHidden(){(0,o.default)(p,this).composeViewImplementation.ensureFormattingToolbarIsHidden()}ensureAppButtonToolbarsAreClosed(){(0,o.default)(p,this).composeViewImplementation.ensureAppButtonToolbarsAreClosed()}overrideEditSubject(){let{driver:_,composeViewImplementation:y}=(0,o.default)(p,this);if(_.getLogger().deprecationWarning("composeView.overrideEditSubject"),_.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");typeof y.overrideEditSubject=="function"&&y.overrideEditSubject()}}i.default=f},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"./compose-button-view":764,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,ud:455}],766:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("kefir")),t(e("../lib/safe-event-emitter"))),r=t(e("../../common/get-or-fail"));let c=new WeakMap;class s extends u.default{constructor(d){super(),(0,n.default)(this,"destroyed",!1);let a={contentPanelViewImplementation:d};c.set(this,a),this._bindToStreamEvents()}remove(){(0,r.default)(c,this).contentPanelViewImplementation.remove()}close(){(0,r.default)(c,this).contentPanelViewImplementation.close()}open(){(0,r.default)(c,this).contentPanelViewImplementation.open()}isActive(){return(0,r.default)(c,this).contentPanelViewImplementation.isActive()}_bindToStreamEvents(){let d=(0,r.default)(c,this).contentPanelViewImplementation.getEventStream();d.onValue(a=>{let{eventName:p}=a;this.emit(p)}),d.onEnd(()=>{this.destroyed=!0,this.emit("destroy")})}}i.default=s},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158}],767:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=(t(e("util")),t(e("../../lib/safe-event-emitter")));class r extends u.default{constructor(o,d,a){super(),this.destroyed=!1,this._driver=d,this._membrane=a,this._attachmentCardImplementation=o,this._attachmentCardImplementation.getStopper().onValue(()=>{this.destroyed=!0,this.emit("destroy")})}getAttachmentType(){return this._attachmentCardImplementation.getAttachmentType()}addButton(o){this._attachmentCardImplementation.addButton(o)}getTitle(){return this._attachmentCardImplementation.getTitle()}getDownloadURL(){if(this._driver.getLogger().deprecationWarning("AttachmentCardView.getDownloadURL","AttachmentCardView.addButton -> onClick -> AttachmentCardClickEvent"),this._driver.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return this._attachmentCardImplementation.getDownloadURL()}getMessageView(){let o=this._attachmentCardImplementation.getMessageViewDriver();return o?this._membrane.get(o):null}}var c=(0,n.defn)(v,r);i.default=c},{"../../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15,ud:455,util:52}],768:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("kefir")),t(e("kefir-stopper"))),r=(t(e("lodash/once")),t(e("../../lib/safe-event-emitter")));class c extends r.default{constructor(o,d){super(),(0,n.default)(this,"_destroyed",!1),(0,n.default)(this,"_stopper",(0,u.default)()),(0,n.default)(this,"_isCollapsed",!0),this._setupElement(),o.takeUntilBy(this._stopper).onValue(a=>{this._el.setAttribute("data-inboxsdk-sortdate",String(a.sortDate.getTime()));let p=this._lastDescriptor;if(this._lastDescriptor=a,!p||p.iconUrl!==a.iconUrl){let f=document.createElement("img");f.src=a.iconUrl,this._iconEl.innerHTML="",this._iconEl.appendChild(f)}p&&p.collapsedEl===a.collapsedEl||!this._isCollapsed||(p&&p.collapsedEl.remove(),this._contentEl.appendChild(a.collapsedEl)),p&&p.headerEl===a.headerEl||(p&&p.headerEl.remove(),this._contentHeaderEl.appendChild(a.headerEl)),p&&p.bodyEl===a.bodyEl||(p&&p.bodyEl.remove(),this._contentBodyEl.appendChild(a.bodyEl))}).take(1).onValue(d)}destroy(){this._destroyed||(this._destroyed=!0,this._stopper.destroy(),this.emit("destroy"),this._el.remove())}expand(){this._isCollapsed=!1;let o=this._lastDescriptor;o&&o.collapsedEl.remove(),this._contentEl.appendChild(this._contentHeaderEl),this._contentEl.appendChild(this._contentBodyEl),this._el.classList.remove("inboxsdk__custom_message_view_collapsed"),this.emit("expanded")}collapse(){this._isCollapsed=!0,this._contentHeaderEl.remove(),this._contentBodyEl.remove();let o=this._lastDescriptor;o&&this._contentEl.appendChild(o.collapsedEl),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this.emit("collapsed")}getElement(){return this._el}getSortDate(){return this._lastDescriptor?this._lastDescriptor.sortDate:null}_setupElement(){this._el=document.createElement("div"),this._el.classList.add("inboxsdk__custom_message_view"),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this._iconEl=document.createElement("div"),this._iconEl.classList.add("inboxsdk__custom_message_view_icon"),this._contentEl=document.createElement("div"),this._contentEl.classList.add("inboxsdk__custom_message_view_content"),this._contentHeaderEl=document.createElement("div"),this._contentHeaderEl.classList.add("inboxsdk__custom_message_view_header"),this._contentBodyEl=document.createElement("div"),this._contentBodyEl.classList.add("inboxsdk__custom_message_view_body"),this._el.appendChild(this._iconEl),this._el.appendChild(this._contentEl),this._el.addEventListener("click",o=>{this._isCollapsed&&(this.expand(),o.preventDefault(),o.stopPropagation())}),this._contentHeaderEl.addEventListener("click",o=>{this.collapse(),o.preventDefault(),o.stopPropagation()})}}i.default=c},{"../../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-stopper":157,"lodash/once":347}],769:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("asap")),c=t(e("../../lib/safe-event-emitter")),s=t(e("../../../common/get-or-fail")),o=(t(e("./attachment-card-view")),e("../../namespaces/conversations"));let d=(0,u.defonce)(v,()=>new WeakMap);class a extends c.default{constructor(b,_,y,g,m){super(),(0,n.default)(this,"destroyed",!1);let w={messageViewImplementation:b,membrane:y,Conversations:g,driver:m,linksInBody:null};d.set(this,w),function(C,I,S){S.onEnd(function(){C.destroyed=!0,C.emit("destroy"),C.removeAllListeners()}),S.filter(function(O){return O.type!=="internal"&&O.eventName==="contactHover"}).onValue(function(O){C.emit(O.eventName,{contactType:O.contactType,contact:O.contact,messageView:C,threadView:C.getThreadView()})}),C.isLoaded()?(0,r.default)(()=>{C.emit("load",{messageView:C})}):S.filter(O=>O.eventName==="messageLoad").onValue(O=>{C.emit("load",{messageView:C})}),S.filter(function(O){return O.eventName==="viewStateChange"}).onValue(function(O){C.emit("viewStateChange",{oldViewState:I.Conversations.MessageViewViewStates[O.oldValue],newViewState:I.Conversations.MessageViewViewStates[O.newValue],messageView:C})})}(this,w,b.getEventStream())}addAttachmentCardView(b){let{messageViewImplementation:_,membrane:y}=(0,s.default)(d,this),g=_.addAttachmentCard(b),m=y.get(g);return g.getPreviewClicks().onValue(w=>{b.previewOnClick&&b.previewOnClick({attachmentCardView:m,preventDefault:()=>w.preventDefault()})}),m}addAttachmentCardViewNoPreview(b){return this.addAttachmentCardView(b)}addAttachmentsToolbarButton(b){let{messageViewImplementation:_,membrane:y}=(0,s.default)(d,this);_.addButtonToDownloadAllArea({tooltip:b.tooltip,iconUrl:b.iconUrl,onClick:()=>{let g=_.getAttachmentCardViewDrivers().map(m=>y.get(m));b.onClick({attachmentCardViews:g})}})}addToolbarButton(b){if(typeof b.onClick!="function"||typeof b.title!="string"||!Object.prototype.hasOwnProperty.call(o.MessageViewToolbarSectionNames,b.section))throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");let{messageViewImplementation:_}=(0,s.default)(d,this);_.addMoreMenuItem(b)}getBodyElement(){return(0,s.default)(d,this).messageViewImplementation.getContentsElement()}getMessageID(){return(0,s.default)(d,this).driver.getLogger().deprecationWarning("messageView.getMessageID","messageView.getMessageIDAsync"),(0,s.default)(d,this).messageViewImplementation.getMessageID()}getMessageIDAsync(){return(0,s.default)(d,this).messageViewImplementation.getMessageIDAsync()}getFileAttachmentCardViews(){let{messageViewImplementation:b,membrane:_}=(0,s.default)(d,this);return b.getAttachmentCardViewDrivers().filter(y=>y.getAttachmentType()==="FILE").map(y=>_.get(y))}getAttachmentCardViews(){let{driver:b}=(0,s.default)(d,this);if(b.getLogger().deprecationWarning("MessageView.getAttachmentCardViews","MessageView.getFileAttachmentCardViews"),b.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return this.getFileAttachmentCardViews()}isElementInQuotedArea(b){return(0,s.default)(d,this).messageViewImplementation.isElementInQuotedArea(b)}isLoaded(){return(0,s.default)(d,this).messageViewImplementation.isLoaded()}getLinksInBody(){let b=(0,s.default)(d,this);if(!b.linksInBody){let _=this.getBodyElement().querySelectorAll("a");b.linksInBody=Array.from(_).map(y=>({text:y.textContent,html:y.innerHTML,href:y.href,element:y,isInQuotedArea:this.isElementInQuotedArea(y)}))}return b.linksInBody}getSender(){return(0,s.default)(d,this).messageViewImplementation.getSender()}getRecipients(){return(0,s.default)(d,this).driver.getLogger().deprecationWarning("MessageView.getRecipients","MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()"),this.getRecipientEmailAddresses().map(b=>({emailAddress:b,name:null}))}getRecipientEmailAddresses(){return(0,s.default)(d,this).messageViewImplementation.getRecipientEmailAddresses()}getRecipientsFull(){return(0,s.default)(d,this).messageViewImplementation.getRecipientsFull()}getThreadView(){let{messageViewImplementation:b,membrane:_}=(0,s.default)(d,this);return _.get(b.getThreadViewDriver())}getDateString(){return(0,s.default)(d,this).messageViewImplementation.getDateString()}addAttachmentIcon(b){return(0,s.default)(d,this).messageViewImplementation.addAttachmentIcon(b)}getViewState(){let b=(0,s.default)(d,this);return b.Conversations.MessageViewViewStates[b.messageViewImplementation.getViewState()]}hasOpenReply(){let{driver:b,messageViewImplementation:_}=(0,s.default)(d,this);if(b.getLogger().deprecationWarning("MessageView.hasOpenReply"),b.getOpts().REQUESTED_API_VERSION!==1)throw new Error("This method was discontinued after API version 1");return(0,s.default)(d,this).messageViewImplementation.hasOpenReply()}}var p=(0,u.defn)(v,a);i.default=p},{"../../../common/get-or-fail":476,"../../lib/safe-event-emitter":736,"../../namespaces/conversations":747,"./attachment-card-view":767,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,ud:455}],770:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=e("ud"),r=t(e("../../lib/safe-event-emitter")),c=t(e("kefir-cast")),s=t(e("kefir")),o=t(e("../content-panel-view")),d=t(e("../../../common/get-or-fail"));let a=(0,u.defonce)(v,()=>new WeakMap);class p extends r.default{constructor(_,y,g,m){super(),(0,n.default)(this,"destroyed",!1);let w={threadViewImplementation:_,appId:y,driver:g,membrane:m};a.set(this,w),function(C,I){I.getEventStream().onEnd(function(){C.destroyed=!0,C.emit("destroy"),C.removeAllListeners()}),I.getEventStream().filter(function(S){return S.type!=="internal"&&S.eventName==="contactHover"}).onValue(function(S){let{membrane:O}=(0,d.default)(a,C);C.emit(S.eventName,{contactType:S.contactType,messageView:O.get(S.messageViewDriver),contact:S.contact,threadView:C})})}(this,_)}addSidebarContentPanel(_){let y=(0,c.default)(s.default,_).toProperty(),g=(0,d.default)(a,this);g.driver.getLogger().eventSdkPassive("threadView.addSidebarContentPanel");let m=g.threadViewImplementation.addSidebarContentPanel(y);return m?new o.default(m):null}addNoticeBar(){return(0,d.default)(a,this).threadViewImplementation.addNoticeBar()}registerHiddenCustomMessageNoticeProvider(_){return(0,d.default)(a,this).threadViewImplementation.registerHiddenCustomMessageNoticeProvider(_)}addCustomMessage(_){let y=(0,c.default)(s.default,_).toProperty(),g=(0,d.default)(a,this);return g.driver.getLogger().eventSdkPassive("threadView.addCustomMessage"),g.threadViewImplementation.addCustomMessage(y)}getMessageViews(){let{threadViewImplementation:_,membrane:y}=(0,d.default)(a,this);return _.getMessageViewDrivers().filter(g=>g.isLoaded()).map(g=>y.get(g))}getMessageViewsAll(){let{threadViewImplementation:_,membrane:y}=(0,d.default)(a,this);return _.getMessageViewDrivers().map(g=>y.get(g))}getSubject(){return(0,d.default)(a,this).threadViewImplementation.getSubject()}getThreadID(){return(0,d.default)(a,this).driver.getLogger().deprecationWarning("threadView.getThreadID","threadView.getThreadIDAsync"),(0,d.default)(a,this).threadViewImplementation.getThreadID()}getThreadIDAsync(){return(0,d.default)(a,this).threadViewImplementation.getThreadIDAsync()}addLabel(){return(0,d.default)(a,this).threadViewImplementation.addLabel()}}var f=(0,u.defn)(v,p);i.default=f},{"../../../common/get-or-fail":476,"../../lib/safe-event-emitter":736,"../content-panel-view":766,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,ud:455}],771:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../lib/safe-event-emitter"));class u extends n.default{constructor(c,s){super(),this.chord=c,this.description=s}remove(){this.emit("destroy")}}i.default=u},{"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15}],772:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../lib/safe-event-emitter")),u=t(e("kefir")),r=t(e("kefir-cast")),c=(t(e("../../common/defer")),t(e("../../common/get-or-fail"))),s=t(e("./nav-item-view"));let o=new WeakMap;class d extends n.default{constructor(p,f,b,_){super();let y={appId:p,driver:f,labelName:b,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:_};o.set(this,y),_.then(g=>{g&&(y.navItemViewDriver=g,g.getEventStream().onValue(m=>function(w,C){switch(C.eventName){case"expanded":case"collapsed":w.emit(C.eventName)}}(this,m)))})}addNavItem(p){let f=(0,c.default)(o,this),b=(0,r.default)(u.default,p).toProperty(),_=new s.default(f.appId,f.driver,b,f.navItemViewDriverPromise.then(y=>y.addNavItem(f.appId,b)));return f.navItemViews.push(_),_}isCollapsed(){return localStorage.getItem("inboxsdk__nativeNavItem__state_"+(0,c.default)(o,this).labelName)==="collapsed"}setCollapsed(p){let f=(0,c.default)(o,this);f.navItemViewDriver?f.navItemViewDriver.setCollapsed(p):localStorage.setItem("inboxsdk__nativeNavItem__state_"+f.labelName,p?"collapsed":"expanded")}}i.default=d},{"../../common/defer":473,"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"./nav-item-view":773,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156}],773:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("lodash/isEqual")),r=t(e("kefir")),c=t(e("kefir-cast")),s=(t(e("../../common/defer")),t(e("../../common/get-or-fail"))),o=t(e("../lib/safe-event-emitter")),d=t(e("../constants/nav-item-types"));let a=new WeakMap;class p extends o.default{constructor(b,_,y,g){super(),(0,n.default)(this,"destroyed",!1);let m={appId:b,driver:_,navItemDescriptorPropertyStream:y,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:g};a.set(this,m),_.getStopper().onValue(this.remove.bind(this)),g.then(w=>{if(this.destroyed||!w)return;let C=m.driver;m.navItemViewDriver=w,m.navItemDescriptorPropertyStream.sampledBy(w.getEventStream(),(I,S)=>[I,S]).onValue(I=>function(S,O,A,E){let[D,P]=E;switch(P.eventName){case"click":if(D.type===d.default.GROUPER)return;if(typeof D.onClick=="function"){let j=!1,k={preventDefault(){j=!0}};if(D.onClick(k),j)break}D.routeID?A.goto(D.routeID,D.routeParams):O.toggleCollapse();break;case"expanded":case"collapsed":S.emit(P.eventName)}}(this,w,C,I)),r.default.combine([m.navItemDescriptorPropertyStream,C.getRouteViewDriverStream()]).takeUntilBy(w.getEventStream().filter(()=>!1).beforeEnd(()=>null)).onValue(I=>{(function(S,O){let[A,E]=O;S.setActive(A&&E.getRouteID()===A.routeID&&(0,u.default)(A.routeParams||{},E.getParams()))})(w,I)})})}addNavItem(b){if(this.destroyed)throw new Error("this nav item view does not exist");let _=(0,s.default)(a,this),y=_.driver,g=_.appId,m=_.navItemViews,w=(0,c.default)(r.default,b).toProperty(),C=new p(g,y,w,_.navItemViewDriverPromise.then(I=>I.addNavItem(_.appId,w)));return m.push(C),C}remove(){if(this.destroyed)return;let b=(0,s.default)(a,this),{navItemViews:_}=b;this.destroyed=!0,this.emit("destroy"),_.forEach(function(y){y.remove()}),b.navItemViewDriverPromise.then(y=>{y.destroy()})}isCollapsed(){let b=(0,s.default)(a,this).navItemViewDriver;return!!b&&b.isCollapsed()}setCollapsed(b){(0,s.default)(a,this).navItemViewDriverPromise.then(_=>{_.setCollapsed(b)})}}i.default=p},{"../../common/defer":473,"../../common/get-or-fail":476,"../constants/nav-item-types":491,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,"lodash/isEqual":332}],774:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./route-view")),r=t(e("../../../common/get-or-fail"));class c extends u.default{constructor(a){super(a);let p={routeViewDriver:a};s.set(this,p)}setFullWidth(a){let{routeViewDriver:p}=(0,r.default)(s,this);p.setFullWidth(a)}getElement(){let{routeViewDriver:a}=(0,r.default)(s,this),p=a.getCustomViewElement();if(!p)throw new Error("Should not happen");return p}}let s=(0,n.defonce)(v,()=>new WeakMap);var o=(0,n.defn)(v,c);i.default=o},{"../../../common/get-or-fail":476,"./route-view":777,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],775:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=(t(e("kefir")),t(e("kefir-bus"))),r=t(e("kefir-stopper")),c=e("ud"),s=(0,c.defn)(v,class{constructor(){(0,n.default)(this,"_eventStream",(0,u.default)()),(0,n.default)(this,"_stopper",(0,r.default)())}getRouteType(){return"UNKNOWN"}getRouteID(){return"UNKNOWN"}getParams(){return{}}getEventStream(){return this._eventStream}getStopper(){return this._stopper}destroy(){this._eventStream.end(),this._stopper.destroy()}});i.default=s},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,"kefir-stopper":157,ud:455}],776:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("./route-view")),r=t(e("kefir")),c=t(e("kefir-cast")),s=t(e("../collapsible-section-view")),o=t(e("../section-view")),d=t(e("../../../common/get-or-fail"));class a extends u.default{constructor(_,y,g){super(_);let m={routeViewDriver:_,driver:y,appId:g,sectionViews:[]};p.set(this,m),function(w,C){w.getEventStream().onEnd(()=>{(0,d.default)(p,C).sectionViews.forEach(I=>{I.destroy()})})}(_,this)}addCollapsibleSection(_){let y=(0,d.default)(p,this),g=y.routeViewDriver.addCollapsibleSection((0,c.default)(r.default,_).toProperty(),y.appId),m=new s.default(g,y.driver);return y.sectionViews.push(m),m}addSection(_){let y=(0,d.default)(p,this),g=y.routeViewDriver.addSection((0,c.default)(r.default,_).toProperty(),y.appId),m=new o.default(g,y.driver);return y.sectionViews.push(m),m}refresh(){(0,d.default)(p,this).routeViewDriver.refresh()}}let p=new WeakMap;var f=(0,n.defn)(v,a);i.default=f},{"../../../common/get-or-fail":476,"../collapsible-section-view":763,"../section-view":778,"./route-view":777,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-cast":156,ud:455}],777:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../lib/safe-event-emitter")),u=e("ud"),r=t(e("../../../common/get-or-fail"));let c=new WeakMap;class s extends n.default{constructor(a){super();let p={routeID:null,routeType:null,params:null,routeViewDriver:a};c.set(this,p),this.destroyed=!1,function(f,b){f.getEventStream().onEnd(()=>{b.destroyed=!0,b.emit("destroy"),b.removeAllListeners()})}(a,this)}getRouteID(){let a=(0,r.default)(c,this);return a.routeID||(a.routeID=a.routeViewDriver.getRouteID()),a.routeID}getRouteType(){let a=(0,r.default)(c,this);return a.routeType||(a.routeType=a.routeViewDriver.getRouteType()),a.routeType}getParams(){let a=(0,r.default)(c,this);return a.params||(a.params=a.routeViewDriver.getParams()),a.params}}var o=(0,u.defn)(v,s);i.default=o},{"../../../common/get-or-fail":476,"../../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],778:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("ud"),u=t(e("../lib/safe-event-emitter")),r=t(e("../../common/get-or-fail"));let c=new WeakMap;class s extends u.default{constructor(a,p){super();let f={sectionViewDriver:a};c.set(this,f),this.destroyed=!1,function(b,_,y){_.getEventStream().onValue(g=>{b.emit(g.eventName)}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="rowClicked"}).onValue(g=>{let{rowDescriptor:m}=g;m.routeID&&y.goto(m.routeID,m.routeParams),typeof m.onClick=="function"&&m.onClick()}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="summaryClicked"}).onValue(g=>{let{sectionDescriptor:m}=g;m.onTitleLinkClick&&m.onTitleLinkClick(b)}),_.getEventStream().filter(g=>{let{eventName:m}=g;return m==="footerClicked"}).onValue(g=>{let{sectionDescriptor:m}=g;m.onFooterLinkClick&&m.onFooterLinkClick(b)}),_.getEventStream().onEnd(()=>{b.destroyed=!0,b.emit("destroy")})}(this,a,p)}remove(){this.destroy()}destroy(){(0,r.default)(c,this).sectionViewDriver.destroy(),this.removeAllListeners()}}var o=(0,n.defn)(v,s);i.default=o},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15,ud:455}],779:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../lib/safe-event-emitter")),u=t(e("../../common/get-or-fail"));let r=new WeakMap;class c extends n.default{constructor(o){super();let d={threadRowViewDriver:o};r.set(this,d),this.destroyed=!1,o.getEventStream().onEnd(()=>{this.destroyed=!0,this.emit("destroy")}),o.setUserView(this)}addLabel(o){(0,u.default)(r,this).threadRowViewDriver.addLabel(o)}addImage(o){(0,u.default)(r,this).threadRowViewDriver.addImage(o)}addButton(o){(0,u.default)(r,this).threadRowViewDriver.addButton(o)}addActionButton(o){(0,u.default)(r,this).threadRowViewDriver.addActionButton(o)}addAttachmentIcon(o){(0,u.default)(r,this).threadRowViewDriver.addAttachmentIcon(o)}replaceDate(o){(0,u.default)(r,this).threadRowViewDriver.replaceDate(o)}replaceDraftLabel(o){(0,u.default)(r,this).threadRowViewDriver.replaceDraftLabel(o)}getElement(){return(0,u.default)(r,this).threadRowViewDriver.getElement()}getSubject(){return(0,u.default)(r,this).threadRowViewDriver.getSubject()}getDateString(){return(0,u.default)(r,this).threadRowViewDriver.getDateString()}getThreadID(){return(0,u.default)(r,this).threadRowViewDriver.getThreadID()}getThreadIDAsync(){return(0,u.default)(r,this).threadRowViewDriver.getThreadIDAsync()}getThreadIDIfStable(){return this.getVisibleMessageCount()>0?this.getThreadID():null}getThreadIDIfStableAsync(){return this.getVisibleMessageCount()>0?this.getThreadIDAsync():Promise.resolve(null)}getDraftID(){return(0,u.default)(r,this).threadRowViewDriver.getDraftID()}getVisibleDraftCount(){return(0,u.default)(r,this).threadRowViewDriver.getVisibleDraftCount()}getVisibleMessageCount(){return(0,u.default)(r,this).threadRowViewDriver.getVisibleMessageCount()}getContacts(){return(0,u.default)(r,this).threadRowViewDriver.getContacts()}}i.default=c},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15}],780:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir-stopper"));i.default=class{constructor(r){(0,n.default)(this,"_stopper",(0,u.default)()),this._activateFunction=r.activateFunction||r.onClick,this._view=r.buttonView,this._view.getEventStream().filter(c=>c.eventName==="click").onValue(()=>{this.activate()})}getStopper(){return this._stopper}destroy(){this._activateFunction=null,this._view.destroy(),this._stopper.destroy()}update(r){this.getView().update(r),this.setActivateFunction(r&&(r.activateFunction||r.onClick))}getView(){return this._view}setActivateFunction(r){this._activateFunction=r}activate(){this._activateFunction&&this._activateFunction({})}}},{"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":157}],781:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir-stopper")),r=t(e("./dropdown-view"));i.default=class{constructor(c){(0,n.default)(this,"_dropdownView",null),(0,n.default)(this,"_stopper",(0,u.default)()),this._dropdownShowFunction=c.dropdownShowFunction,this._DropdownViewDriverClass=c.dropdownViewDriverClass;let s=this._view=c.buttonView;this._dropdownPositionOptions=c.dropdownPositionOptions,s.getElement().setAttribute("aria-haspopup","true"),s.getElement().setAttribute("aria-pressed","false"),s.getElement().setAttribute("aria-expanded","false"),this._bindToViewEvents()}getStopper(){return this._stopper}destroy(){this._view&&(this._view.destroy(),this._view=null),this._dropdownView&&(this._dropdownView.close(),this._dropdownView=null),this._stopper.destroy()}update(c){this.getView().update(c),this.setDropdownShowFunction(c&&c.dropdownShowFunction)}getView(){if(!this._view)throw new Error("Already destroyed");return this._view}setDropdownShowFunction(c){this._dropdownShowFunction=c}showDropdown(){this.hideDropdown();let c=this._view;if(!c)throw new Error("Already destroyed");c.activate();let s=this._dropdownView=new r.default(new this._DropdownViewDriverClass,c.getElement(),void 0);this._dropdownPositionOptions&&s.setPlacementOptions(this._dropdownPositionOptions),s.on("destroy",this._dropdownClosed.bind(this)),this._dropdownShowFunction&&this._dropdownShowFunction({dropdown:this._dropdownView}),c.getElement().setAttribute("aria-pressed","true"),c.getElement().setAttribute("aria-expanded","true")}hideDropdown(){this._dropdownView&&this._dropdownView.close()}isDropdownVisible(){return!!this._dropdownView}_bindToViewEvents(){if(!this._view)throw new Error("Already destroyed");this._view.getEventStream().filter(c=>c.eventName==="click").onValue(()=>{this._toggleDropdownState()})}_toggleDropdownState(){this._dropdownView?this._dropdownView.close():this.showDropdown()}_dropdownClosed(){let c=this._view;c&&(c.deactivate(),this._dropdownView=null,c.getElement().setAttribute("aria-pressed","false"),c.getElement().setAttribute("aria-expanded","false"))}}},{"./dropdown-view":782,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,"kefir-stopper":157}],782:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("asap")),r=t(e("../../lib/safe-event-emitter")),c=t(e("kefir")),s=t(e("../../lib/dom/make-mutation-observer-chunked-stream")),o=t(e("../../lib/ScrollableContainByScreen")),d=t(e("../../lib/dom/outsideClicksAndEscape"));class a extends r.default{constructor(f,b,_){super(),(0,n.default)(this,"destroyed",!1),(0,n.default)(this,"closed",!1),(0,n.default)(this,"_userPlacementOptions",{hAlign:"left"}),(0,n.default)(this,"_scrollableContainByScreen",null),this._dropdownViewDriver=f,this._options={...f.getDropdownOptions&&f.getDropdownOptions(),..._},this.el=f.getContentElement();let y=f.getContainerElement();document.contains(y)?this._didInsertContainerEl=!1:(document.body.insertBefore(y,document.body.firstElementChild),this._didInsertContainerEl=!0),y.hasAttribute("tabindex")||y.setAttribute("tabindex","-1");let g=c.default.fromEvents(this,"destroy"),m=[b,y];this._options.extraElementsToIgnore&&m.push(...this._options.extraElementsToIgnore),(0,d.default)(m).takeUntilBy(g).filter(C=>{let I=!1,S={type:C.type,cause:C.cause,cancel:()=>{I=!0}};return this.emit("preautoclose",S),!I}).onValue(()=>{this.close()}),this._options.manualPosition||(y.style.position="fixed",(0,u.default)(()=>{this.closed||(c.default.fromEvents(this,"_placementOptionsUpdated").toProperty(()=>null).takeUntilBy(g).onValue(()=>{this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this._scrollableContainByScreen=new o.default(y,b,this._userPlacementOptions)}),(0,s.default)(f.getContentElement(),{childList:!0,attributes:!0,characterData:!0,subtree:!0}).throttle(200).takeUntilBy(g).onValue(()=>this.reposition()))}));let w=document.activeElement;(0,u.default)(()=>{this.closed||document.activeElement===w&&y.focus()})}setPlacementOptions(f){this._options.manualPosition||(this._userPlacementOptions={...this._userPlacementOptions,...f},this.emit("_placementOptionsUpdated"))}close(){this.destroyed||(this.destroyed=this.closed=!0,this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this.emit("destroy"),this._didInsertContainerEl&&this._dropdownViewDriver.getContainerElement().remove(),this._dropdownViewDriver.destroy())}reposition(){this._scrollableContainByScreen&&this._scrollableContainByScreen.reposition()}}i.default=a},{"../../lib/ScrollableContainByScreen":683,"../../lib/dom/make-mutation-observer-chunked-stream":700,"../../lib/dom/outsideClicksAndEscape":703,"../../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,asap:31,kefir:158}],783:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=(t(e("kefir-bus")),e("ud")),c=t(e("../lib/safe-event-emitter")),s=t(e("../views/compose-view"));class o extends c.default{constructor(p){super(),(0,n.default)(this,"destroyed",!1),this._driver=p,this._driver.getSlideAnimationDone().onValue(()=>{this.emit("slideAnimationDone")}),this._driver.getClosingStream().onValue(()=>{this.emit("closing")}),this._driver.getClosedStream().onValue(()=>{this.destroyed=!0,this.emit("destroy")}),this._driver.getPreAutoCloseStream().onValue(f=>{this.emit("preautoclose",f)}),document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers",{bubbles:!1,cancelable:!1,detail:null})),u.default.fromEvents(document,"inboxSDKcloseDrawers").takeUntilBy(u.default.fromEvents(this,"closing")).onValue(()=>{this.close()})}close(){this._driver.close()}associateComposeView(p,f){if(!(p instanceof s.default))throw new Error("argument was not a ComposeView");this._driver.associateComposeView(p,f)}disassociateComposeView(){this._driver.disassociateComposeView()}}var d=(0,r.defn)(v,o);i.default=d},{"../lib/safe-event-emitter":736,"../views/compose-view":765,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,ud:455}],784:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("kefir")),r=t(e("kefir-bus")),c=e("ud"),s=t(e("../lib/safe-event-emitter"));class o extends s.default{constructor(y){super(),(0,n.default)(this,"destroyed",!1),this._driver=y.driver,this._modalViewDriver=y.modalViewDriver,y.modalViewDriver.getEventStream().filter(g=>g.eventName==="closeClick").onValue(()=>{this.close()}),y.modalViewDriver.getEventStream().onEnd(()=>{var g;this._modalViewDriver=null,this.destroyed=!0,g=this,a&&a.modalView===g?(a=null,f.length>0?f.pop().show():d&&d.destroy()):f.indexOf(g)>-1&&f.splice(f.indexOf(g),1),this.emit("destroy")})}show(){let y=this._modalViewDriver;if(!y)throw new Error("Modal can not be shown after being hidden");let g=u.default.merge([u.default.fromEvents(this,"destroy"),p.filter(m=>m===this)]);document.body.appendChild(y.getModalContainerElement()),y.getModalContainerElement().focus(),u.default.fromEvents(document.body,"keydown").filter(m=>m.keyCode===27).takeUntilBy(g).onValue(m=>{m.stopImmediatePropagation(),m.stopPropagation(),m.preventDefault(),this.close()}),function(m,w){a?(p.emit(a.modalView),f.push(a.modalView),a.modalViewDriver.getModalContainerElement().remove()):d||(d=m._driver.createBackdrop(502),d.getStopper().onValue(()=>{d=null,f.slice().forEach(C=>{C.close()}),a&&a.modalView.close()})),a={modalView:m,modalViewDriver:w}}(this,y)}setTitle(y){if(!this._modalViewDriver)throw new Error("Modal can not be shown after being hidden");this._modalViewDriver.setTitle(y)}close(){this._modalViewDriver&&this._modalViewDriver.destroy()}addButton(y){throw new Error("not implemented")}}let d=null,a=null,p=(0,r.default)(),f=[];var b=(0,c.defn)(v,o);i.default=b},{"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15,kefir:158,"kefir-bus":155,ud:455}],785:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("@babel/runtime/helpers/defineProperty")),u=t(e("../../common/get-or-fail")),r=t(e("../lib/safe-event-emitter"));let c=new WeakMap;class s extends r.default{constructor(d){super(),(0,n.default)(this,"destroyed",!1);let a={driver:d.moleViewDriver};c.set(this,a),a.driver.getEventStream().onValue(p=>{this.emit(p.eventName,p.detail)}),a.driver.getEventStream().onEnd(()=>{this.destroyed=!0,this.emit("destroy")})}close(){(0,u.default)(c,this).driver.destroy()}setTitle(d){(0,u.default)(c,this).driver.setTitle(d)}setMinimized(d){(0,u.default)(c,this).driver.setMinimized(d)}getMinimized(){return(0,u.default)(c,this).driver.getMinimized()}}i.default=s},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/defineProperty":11,"@babel/runtime/helpers/interopRequireDefault":15}],786:[function(e,v,i){"use strict";var t=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t(e("../../common/get-or-fail")),u=t(e("../lib/safe-event-emitter"));let r=new WeakMap;class c extends u.default{constructor(o){super();let d={driver:o.topMessageBarViewDriver};r.set(this,d)}remove(){(0,n.default)(r,this).driver.remove()}}i.default=c},{"../../common/get-or-fail":476,"../lib/safe-event-emitter":736,"@babel/runtime/helpers/interopRequireDefault":15}]},{},[487])(487)})});var As=Es(pu());var Ji=Es(pu()),Pu=Es(Ou());var vd=()=>{document.querySelectorAll(".usechatgpt-ai__gmail-toolbar-button--cta").forEach(ht=>{var e,v;(e=ht.parentElement)==null||e.classList.add("usechatgpt-ai__gmail-toolbar-button-wrapper--cta"),(v=ht==null?void 0:ht.parentElement)!=null&&v.parentElement&&ht.parentElement.parentElement.classList.add("usechatgpt-ai__gmail-toolbar-button-group")}),document.querySelectorAll(".usechatgpt-ai__gmail-toolbar-button--dropdown").forEach(ht=>{var e;(e=ht.parentElement)==null||e.classList.add("usechatgpt-ai__gmail-toolbar-button-wrapper--dropdown")})},yd=()=>{let[ht,e]=hu(Eu),v=Qo(Su),i=Qo(Cu),t=Qo(ku),n=(0,Ji.useRef)(!1);xu(async()=>{let r=await Cs("gmailButton"),c=(r==null?void 0:r.visibility.whitelist.includes("mail.google.com"))||!1,s=c!==n.current;n.current=c,s&&window.confirm("MaxAI.me - Refresh this page to activate the updated settings for the 'Gmail assistant' button.")});let u=(0,Ji.useRef)(!1);Du(()=>{Cs("gmailButton").then(r=>{let c=(r==null?void 0:r.visibility.whitelist.includes("mail.google.com"))||!1;n.current=c,n.current&&(0,Pu.load)(2,"sdk_UseChatGPT_AI_e063b66682",{}).then(async s=>{e({sdk:s,loading:!1,initialized:!1})})})}),(0,Ji.useEffect)(()=>{!ht.initialized&&!ht.loading&&ht.sdk&&(ht.sdk.Conversations.registerThreadViewHandler(r=>{r.getThreadIDAsync().then(c=>{v({getInstance:()=>r,currentThreadId:c})}),r.on("destroy",()=>{v({getInstance:void 0,currentThreadId:void 0}),t({currentMessageId:void 0,currentDraftId:void 0}),Ss()})}),ht.sdk.Compose.registerComposeViewHandler(async r=>{if(!n.current)return;let c=Xo(),s=Zo(r.getElement());u.current=!0,r.addButton({title:"MaxAI.me",iconUrl:wu,iconClass:"usechatgpt-ai__gmail-toolbar-button--dropdown",tooltip:"More Gmail assistant options",orderHint:2,onClick:async d=>{var f,b,_;let a=Zo(r.getElement());t(a?y=>({...y,currentDraftId:c,currentMessageId:a}):{currentDraftId:c,currentMessageId:`newDraft_${Xo()}`});let p=(_=(b=(f=d==null?void 0:d.composeView)==null?void 0:f.getElement())==null?void 0:b.querySelector(".usechatgpt-ai__gmail-toolbar-button--dropdown"))==null?void 0:_.getBoundingClientRect();if(p){let g=(await vu("gmailButton")).filter(I=>I.id!==mu&&I.id!==_u),m=Math.max(Au(g)||0,0),{x:w,y:C}=Iu({top:p.top,left:p.left,bottom:p.bottom,right:p.right},200,m+12+33+6+6,{offset:8,directions:["top","right","left","bottom"]});try{Tu.show({id:bu,position:{x:w,y:C},event:new MouseEvent("click")})}catch(I){}}}}),r.addButton({title:"MaxAI.me",iconUrl:yu,iconClass:"usechatgpt-ai__gmail-toolbar-button--cta",tooltip:s?"Click this button to generate email reply":"Click this button to generate an entire email",orderHint:1,onClick:async d=>{gu();let a=Zo(r.getElement());t(a?_=>({currentDraftId:c,currentMessageId:a,step:(_.step||0)+1}):{currentDraftId:c,currentMessageId:`newDraft_${Xo()}`});let f=r.getElement().querySelector('[contenteditable="true"]'),b=document.createRange();b.selectNodeContents(f),setTimeout(()=>{window.dispatchEvent(new CustomEvent("ctaButtonClick",{detail:{range:b.cloneRange(),emailElement:f}}))},100)}}),vd();let o={getInstance:()=>r};i(d=>({...d,[c]:o})),r.on("discard",()=>{setTimeout(()=>{t(d=>d.currentDraftId===c?{currentMessageId:void 0,currentDraftId:void 0}:{...d}),i(d=>{let{[c]:a,...p}=d;return p}),Ss()},0)})}))},[ht])},Ru=yd;var wd=()=>(Ru(),As.default.createElement(As.default.Fragment,null)),mf=wd;export{mf as default};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
 * InboxSDK
 * https://www.inboxsdk.com/
 *
 * The use of InboxSDK is governed by the Terms of Services located at
 * https://www.inboxsdk.com/terms


 *  __    __            _     _          _                _                      ___                 _ _ ___
 * / / /\ \ \__ _ _ __ | |_  | |_ ___   | |__   __ _  ___| | __   ___  _ __     / _ \_ __ ___   __ _(_) / _ \
 * \ \/  \/ / _` | '_ \| __| | __/ _ \  | '_ \ / _` |/ __| |/ /  / _ \| '_ \   / /_\/ '_ ` _ \ / _` | | \// /
 *  \  /\  / (_| | | | | |_  | || (_) | | | | | (_| | (__|   <  | (_) | | | | / /_\\| | | | | | (_| | | | \/
 *   \/  \/ \__,_|_| |_|\__|  \__\___/  |_| |_|\__,_|\___|_|\_\  \___/|_| |_| \____/|_| |_| |_|\__,_|_|_| ()
 *
 * Like complex reverse engineering? Want to make Gmail and Inbox a hackable platform?
 *
 * Join us at: www.streak.com/careers?source=sdk
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! Kefir.js v3.8.8
 *  https://github.com/kefirjs/kefir
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/** @license React v0.20.2
 * scheduler-tracing.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v0.20.2
 * scheduler-tracing.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v0.20.2
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
