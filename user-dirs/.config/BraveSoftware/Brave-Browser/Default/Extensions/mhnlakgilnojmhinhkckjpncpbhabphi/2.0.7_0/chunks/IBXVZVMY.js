import{a as A}from"./MP5TUTVV.js";import{a as oe}from"./OMDQAR7O.js";import{ja as Y,k as Z,q as fe,r as xe,ta as ee,x as K}from"./36BQJYSV.js";import{d as P,e as y,f as X}from"./EF5GRFCD.js";import"./I2XYMP7X.js";import"./VV54QQJA.js";import{i as R}from"./WZUFDNVB.js";import"./5T4V74FX.js";import{a as W,j as Q}from"./KSWBD2TZ.js";import"./RF7QDMRO.js";import"./ABULMT32.js";import{d as T}from"./MKFZQTYG.js";import{b as J}from"./4SC7XEKB.js";import{a as i}from"./23DIE7BK.js";import{a as q,i as V}from"./ON4Q5ESC.js";import"./REMB6LXX.js";import"./BK6QTIUI.js";import{Z as w}from"./VYGUKUEK.js";import{d as j,i as G}from"./X6PP3PBE.js";import"./JS22TWPO.js";import{I as U,g as k}from"./BR2YNKDZ.js";import{a as I}from"./BIAB2ZEP.js";import{b as $,e as m}from"./O5NYTI7P.js";var te=$(B=>{"use strict";var Ce=q();Object.defineProperty(B,"__esModule",{value:!0});B.default=void 0;var be=Ce(J()),ge=V(),he=(0,be.default)((0,ge.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");B.default=he});var me=$(E=>{"use strict";var we=q();Object.defineProperty(E,"__esModule",{value:!0});E.default=void 0;var Me=we(J()),ke=V(),Ae=(0,Me.default)((0,ke.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}),"Code");E.default=Ae});var o=m(I());var d=m(I());var re=m(te()),ae=m(fe());var ye=["www.linkedin.com"],Se=a=>{let{onEdit:e,onSave:x,editAble:c,message:u}=a,[C,g]=(0,d.useState)("done");return d.default.createElement(i,{direction:"row",alignItems:"center",width:"100%",justifyContent:"flex-end"},d.default.createElement(y,{copyText:u.text,onCopy:()=>{var b;(b=a.onCopy)==null||b.call(a),ye.includes(window.location.host)&&setTimeout(w,1)}}),C==="done"&&c&&d.default.createElement(P,{title:"edit",onClick:()=>{e(),g("edit")}},d.default.createElement(re.default,{sx:{fontSize:16}})),C==="edit"&&c&&d.default.createElement(P,{title:"save",onClick:()=>{x(),g("done")}},d.default.createElement(ae.default,{sx:{fontSize:16}})))},ie=Se;var p=m(I());var ne=m(xe());var ve=["www.linkedin.com"],Ie=a=>{let{currentComposeView:e}=ee(),{replaceSelectionRangeText:x,currentSelection:c}=K(),{message:u,insertAble:C,replaceAble:g}=a,b=(0,p.useMemo)(()=>e&&C,[C]),S=p.default.useRef(null);return p.default.createElement(i,{direction:"row",alignItems:"center",spacing:1,ref:S},b&&p.default.createElement(T,{disableElevation:!0,size:"small",variant:"contained",title:"insert to draft",startIcon:p.default.createElement(ne.default,null),onClick:()=>{var h;let n=e&&((h=e.getInstance)==null?void 0:h.call(e));if(n){let M=n.getBodyElement();M?(Z(M,u.text),w()):n.setBodyText(u.text)}}},"Insert"),!1,p.default.createElement(y,{copyText:u.text,onCopy:()=>{var n;(n=a.onCopy)==null||n.call(a),ve.includes(window.location.host)&&setTimeout(w,1)}}),a.useChatGPTAble&&p.default.createElement(oe,{iconButton:!0,onBeforeShowContextMenu:()=>{var n;return{template:u.text,target:(n=S.current)==null?void 0:n.parentElement}}}))},se=Ie;var _=m(I());var Te=a=>{let{onRetry:e,message:x}=a,c=x.extra.systemMessageType||"normal";return _.default.createElement(i,{direction:"row",alignItems:"center"},c==="normal"&&x.parentMessageId&&_.default.createElement(T,{size:"small",variant:"outlined",color:"error",onClick:e,sx:{border:"1px solid rgba(244, 67, 54, 0.5)",color:"#f44336"}},"Retry"),c==="dailyUsageLimited"&&_.default.createElement(T,{variant:"contained",color:"primary",target:"_blank",href:`${U}/pricing`},"Upgrade to Pro"))},le=Te;var s=m(I());var de=m(me());var Be=({message:a})=>{let e=(0,s.useMemo)(()=>JSON.stringify(a,null,2),[a]);return s.default.createElement(A,null,s.default.createElement(W,{position:"absolute",top:16,left:16},s.default.createElement(Q,{title:s.default.createElement(i,null,s.default.createElement("pre",{style:{fontSize:"12px"}},e),s.default.createElement(y,{copyText:e}))},s.default.createElement(de.default,null))))},pe=Be;var ce=o.default.lazy(()=>import("./OBU7RG26.js")),_e=a=>{var H;let{message:e,editAble:x,insertAble:c,replaceAble:u,useChatGPTAble:C,onSave:g,onCopy:b,onRetry:S,className:n}=a,[h,M]=(0,o.useState)(e.text||""),{userSettings:t}=j(G),[D,L]=(0,o.useState)(!1),[N,z]=(0,o.useState)(!1),v=(0,o.useRef)(null),ue=(0,o.useMemo)(()=>{var l;let r=N?{"& *":{userSelect:"text!important"}}:{"& *":{userSelect:"none!important"}};if(e.type==="ai")return{borderRadius:"8px",borderBottomLeftRadius:0,color:(t==null?void 0:t.colorSchema)==="dark"?"#FFFFFFDE":"rgba(0,0,0,0.87)",border:"1px solid",borderColor:(t==null?void 0:t.colorSchema)==="dark"?"customColor.borderColor":"transparent",bgcolor:F=>F.palette.mode==="dark"?"rgba(255, 255, 255, 0.04)":"rgb(233,233,235)!important",...r};if(e.type==="user"||e.type==="third")return{flexDirection:"row",justifyContent:"flex-start",bgcolor:()=>String("USE_CHAT_GPT_AI")==="EZ_MAIL_AI"?"#FEE6E1 !important":(t==null?void 0:t.colorSchema)==="dark"?"#6B23C259 !important":"#F1E2FD !important",border:"1px solid",borderColor:(t==null?void 0:t.colorSchema)==="dark"?"customColor.borderColor":"transparent",color:(t==null?void 0:t.colorSchema)==="dark"?"#FFFFFFDE":"rgba(0,0,0,0.87)!important",maxWidth:"100%",width:"auto",borderRadius:"8px",borderBottomRightRadius:0,flexWrap:"wrap",ml:"auto",mr:"0",overflow:"hidden",p:1,...r};let f={info:"1px solid #03a9f4!important",error:"1px solid rgb(239, 83, 80)!important",success:"1px solid #34A853!important"}[(l=e==null?void 0:e.extra)==null?void 0:l.status]||"1px solid #03a9f4!important";return{borderRadius:"8px",border:f,bgcolor:"background.paper",...r}},[e.type,t,N]);(0,o.useEffect)(()=>{M(e.text||"")},[e.text]);let O=(0,o.useMemo)(()=>{var r,f;if(e.type==="user"){let l=(f=(r=e==null?void 0:e.extra)==null?void 0:r.meta)==null?void 0:f.attachments;if(l&&l.length)return l.filter(F=>F.uploadStatus==="success")}return[]},[e]);return o.default.createElement(i,{className:n,sx:{width:"100%",p:1,color:"text.primary",position:"relative","& .chat-message--text":{textAlign:"left",fontSize:"16px",lineHeight:1.4}},onCopy:r=>{r.preventDefault(),r.stopPropagation();let f=window.getSelection();if(f&&f.toString().trim()){let l=f.toString().trim();l&&navigator.clipboard.writeText(l)}},onMouseEnter:()=>{v.current&&clearTimeout(v.current),z(!0)},onMouseLeave:()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{z(!1);let r=window.getSelection();r&&r.toString().trim()&&r.focusNode&&r.focusNode.isSameNode(document.body)&&r.removeAllRanges()},500)},spacing:1,key:e.messageId},o.default.createElement(A,null,o.default.createElement(pe,{message:e})),o.default.createElement(i,{className:"chat-message--text",whiteSpace:"pre-wrap",width:"100%",spacing:1,p:1,sx:{wordBreak:"break-word",...ue}},o.default.createElement(X,null,e.type==="system"?o.default.createElement(R,{severity:((H=e==null?void 0:e.extra)==null?void 0:H.status)||"info",sx:{p:1,"& .MuiAlert-message":{p:0},"& > div:first-child":{display:"none"},"& .markdown-body":{"& > p:first-child":{mt:0}}},icon:o.default.createElement(o.default.Fragment,null)},o.default.createElement("div",{className:`markdown-body ${(t==null?void 0:t.colorSchema)==="dark"?"markdown-body-dark":""}`},o.default.createElement(ce,null,h.replace(/^\s+/,"")))):o.default.createElement(i,{className:"chat-message--text",id:`${k}_chat_message_${e.messageId}`,contentEditable:D,whiteSpace:"pre-wrap",sx:{wordBreak:"break-word",borderColor:"primary.main",borderStyle:"solid",borderWidth:D?1:0}},e.type==="user"&&O.length>0&&o.default.createElement(Y,{size:"small",direction:"row",disabledRemove:!0,sx:{mb:1},files:O}),e.type!=="user"?o.default.createElement("div",{className:`markdown-body ${(t==null?void 0:t.colorSchema)==="dark"?"markdown-body-dark":""}`},o.default.createElement(ce,null,h.replace(/^\s+/,""))):h.replace(/^\s+/,""))),e.type==="user"&&o.default.createElement(ie,{editAble:x,onCopy:b,message:e,onSave:()=>{L(!1);let r=document.getElementById(`${k}_chat_message_${e.messageId}`);g&&g((r==null?void 0:r.innerText)||e.text||"")},onEdit:()=>{L(!0),setTimeout(()=>{let r=document.getElementById(`${k}_chat_message_${e.messageId}`);r&&r.focus()},0)}}),e.type==="ai"&&o.default.createElement(se,{insertAble:c,replaceAble:u,useChatGPTAble:C,onCopy:b,message:e}),e.type==="system"&&o.default.createElement(le,{onRetry:()=>{e.parentMessageId&&S&&S(e.parentMessageId)},message:e})))},So=_e;export{So as default};
