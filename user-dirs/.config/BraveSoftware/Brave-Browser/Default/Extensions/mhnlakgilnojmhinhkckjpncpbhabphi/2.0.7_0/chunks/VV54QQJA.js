import{a as Mt,aa as xn,m as Nt,n as Lt,p as Pt,u as Rn,y as En}from"./BK6QTIUI.js";import{L as yn,W as wn,X as Tn,fa as pe,l as vn}from"./VYGUKUEK.js";import{e as mn,i as bn}from"./X6PP3PBE.js";import{a as dn,j as tt,k as pn,l as gn,m as hn}from"./BR2YNKDZ.js";import{a as Se}from"./BIAB2ZEP.js";import{e as me}from"./O5NYTI7P.js";var Re=me(Se());var qr=()=>{let[e,t]=(0,Re.useState)(!1),[n,r]=(0,Re.useState)(void 0),[o,i]=(0,Re.useState)(void 0),[a,l]=(0,Re.useState)([]);return(0,Re.useEffect)(()=>{let c=!1,d=async()=>{if(c)return;let s=await xn(),u,f;vn(s)&&s.length>0?(s.forEach(m=>{m.name==="_execute_action"?u=m.shortcut:m.name==="show-floating-menu"&&(f=m.shortcut)}),l(s)):l([]),r(u),i(f)};return window.addEventListener("focus",d),d().then(()=>{c||t(!0)}),()=>{c=!0,window.removeEventListener("focus",d)}},[]),{loaded:e,chatBoxShortCutKey:n,floatingMenuShortCutKey:o,commands:a}},Sn=qr;var v=me(Se(),1),Le=me(Se(),1);function He(e){return e.split("-")[1]}function An(e){return e==="y"?"height":"width"}function ge(e){return e.split("-")[0]}function Be(e){return["top","bottom"].includes(ge(e))?"x":"y"}function Cn(e,t,n){let{reference:r,floating:o}=e,i=r.x+r.width/2-o.width/2,a=r.y+r.height/2-o.height/2,l=Be(t),c=An(l),d=r[c]/2-o[c]/2,s=l==="x",u;switch(ge(t)){case"top":u={x:i,y:r.y-o.height};break;case"bottom":u={x:i,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:a};break;case"left":u={x:r.x-o.width,y:a};break;default:u={x:r.x,y:r.y}}switch(He(t)){case"start":u[l]-=d*(n&&s?-1:1);break;case"end":u[l]+=d*(n&&s?-1:1)}return u}var On=async(e,t,n)=>{let{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t)),d=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:s,y:u}=Cn(d,r,c),f=r,m={},b=0;for(let g=0;g<l.length;g++){let{name:h,fn:y}=l[g],{x:E,y:R,data:C,reset:x}=await y({x:s,y:u,initialPlacement:r,placement:f,strategy:o,middlewareData:m,rects:d,platform:a,elements:{reference:e,floating:t}});s=E??s,u=R??u,m={...m,[h]:{...m[h],...C}},x&&b<=50&&(b++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(d=x.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):x.rects),{x:s,y:u}=Cn(d,f,c)),g=-1)}return{x:s,y:u,placement:f,strategy:o,middlewareData:m}};function $r(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Fe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function xe(e,t){var n;t===void 0&&(t={});let{x:r,y:o,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:s="viewport",elementContext:u="floating",altBoundary:f=!1,padding:m=0}=t,b=$r(m),g=l[f?u==="floating"?"reference":"floating":u],h=Fe(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:s,strategy:c})),y=u==="floating"?{...a.floating,x:r,y:o}:a.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(E))&&await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1},C=Fe(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:E,strategy:c}):y);return{top:(h.top-C.top+b.top)/R.y,bottom:(C.bottom-h.bottom+b.bottom)/R.y,left:(h.left-C.left+b.left)/R.x,right:(C.right-h.right+b.right)/R.x}}var Dt=Math.min,Ee=Math.max;function In(e,t,n){return Ee(e,Dt(t,n))}var jr=["top","right","bottom","left"],Ii=jr.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),Gr={left:"right",right:"left",bottom:"top",top:"bottom"};function nt(e){return e.replace(/left|right|bottom|top/g,t=>Gr[t])}function Xr(e,t,n){n===void 0&&(n=!1);let r=He(e),o=Be(e),i=An(o),a=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=nt(a)),{main:a,cross:nt(a)}}var Yr={start:"end",end:"start"};function kt(e){return e.replace(/start|end/g,t=>Yr[t])}var We=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;let{placement:r,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:s=!0,fallbackPlacements:u,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:b=!0,...g}=e,h=ge(r),y=ge(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=u||(y||!b?[nt(a)]:function(p){let D=nt(p);return[kt(p),D,kt(D)]}(a));u||m==="none"||R.push(...function(p,D,M,w){let I=He(p),N=function(V,T,k){let S=["left","right"],L=["right","left"],K=["top","bottom"],_=["bottom","top"];switch(V){case"top":case"bottom":return k?T?L:S:T?S:L;case"left":case"right":return T?K:_;default:return[]}}(ge(p),M==="start",w);return I&&(N=N.map(V=>V+"-"+I),D&&(N=N.concat(N.map(kt)))),N}(a,b,m,E));let C=[a,...R],x=await xe(t,g),O=[],F=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&O.push(x[h]),s){let{main:p,cross:D}=Xr(r,i,E);O.push(x[p],x[D])}if(F=[...F,{placement:r,overflows:O}],!O.every(p=>p<=0)){var W,P;let p=(((W=o.flip)==null?void 0:W.index)||0)+1,D=C[p];if(D)return{data:{index:p,overflows:F},reset:{placement:D}};let M=(P=F.filter(w=>w.overflows[0]<=0).sort((w,I)=>w.overflows[1]-I.overflows[1])[0])==null?void 0:P.placement;if(!M)switch(f){case"bestFit":{var A;let w=(A=F.map(I=>[I.placement,I.overflows.filter(N=>N>0).reduce((N,V)=>N+V,0)]).sort((I,N)=>I[1]-N[1])[0])==null?void 0:A[0];w&&(M=w);break}case"initialPlacement":M=a}if(r!==M)return{reset:{placement:M}}}return{}}}};var Ce=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:n,y:r}=t,o=await async function(i,a){let{placement:l,platform:c,elements:d}=i,s=await(c.isRTL==null?void 0:c.isRTL(d.floating)),u=ge(l),f=He(l),m=Be(l)==="x",b=["left","top"].includes(u)?-1:1,g=s&&m?-1:1,h=typeof a=="function"?a(i):a,{mainAxis:y,crossAxis:E,alignmentAxis:R}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return f&&typeof R=="number"&&(E=f==="end"?-1*R:R),m?{x:E*g,y:y*b}:{x:y*b,y:E*g}}(t,e);return{x:n+o.x,y:r+o.y,data:o}}}};function Zr(e){return e==="x"?"y":"x"}var _e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:h=>{let{x:y,y:E}=h;return{x:y,y:E}}},...c}=e,d={x:n,y:r},s=await xe(t,c),u=Be(ge(o)),f=Zr(u),m=d[u],b=d[f];if(i){let h=u==="y"?"bottom":"right";m=In(m+s[u==="y"?"top":"left"],m,m-s[h])}if(a){let h=f==="y"?"bottom":"right";b=In(b+s[f==="y"?"top":"left"],b,b-s[h])}let g=l.fn({...t,[u]:m,[f]:b});return{...g,data:{x:g.x-n,y:g.y-r}}}}};var Ve=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){let{placement:n,rects:r,platform:o,elements:i}=t,{apply:a=()=>{},...l}=e,c=await xe(t,l),d=ge(n),s=He(n),u=Be(n)==="x",{width:f,height:m}=r.floating,b,g;d==="top"||d==="bottom"?(b=d,g=s===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(g=d,b=s==="end"?"top":"bottom");let h=m-c[b],y=f-c[g],E=h,R=y;if(u?R=Dt(f-c.right-c.left,y):E=Dt(m-c.bottom-c.top,h),!t.middlewareData.shift&&!s){let x=Ee(c.left,0),O=Ee(c.right,0),F=Ee(c.top,0),W=Ee(c.bottom,0);u?R=f-2*(x!==0||O!==0?x+O:Ee(c.left,c.right)):E=m-2*(F!==0||W!==0?F+W:Ee(c.top,c.bottom))}await a({...t,availableWidth:R,availableHeight:E});let C=await o.getDimensions(i.floating);return f!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function J(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ue(e){return J(e).getComputedStyle(e)}var Mn=Math.min,Ke=Math.max,ot=Math.round;function Wn(e){let t=ue(e),n=parseFloat(t.width),r=parseFloat(t.height),o=e.offsetWidth,i=e.offsetHeight,a=ot(n)!==o||ot(r)!==i;return a&&(n=o,r=i),{width:n,height:r,fallback:a}}function be(e){return Vn(e)?(e.nodeName||"").toLowerCase():""}var rt;function _n(){if(rt)return rt;let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(rt=e.brands.map(t=>t.brand+"/"+t.version).join(" "),rt):navigator.userAgent}function ie(e){return e instanceof J(e).HTMLElement}function ae(e){return e instanceof J(e).Element}function Vn(e){return e instanceof J(e).Node}function Nn(e){return typeof ShadowRoot>"u"?!1:e instanceof J(e).ShadowRoot||e instanceof ShadowRoot}function it(e){let{overflow:t,overflowX:n,overflowY:r,display:o}=ue(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function Jr(e){return["table","td","th"].includes(be(e))}function Ft(e){let t=/firefox/i.test(_n()),n=ue(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{let i=n.contain;return i!=null&&i.includes(o)})}function Ht(){return/^((?!chrome|android).)*safari/i.test(_n())}function Bt(e){return["html","body","#document"].includes(be(e))}function Kn(e){return ae(e)?e:e.contextElement}var Un={x:1,y:1};function Ie(e){let t=Kn(e);if(!ie(t))return Un;let n=t.getBoundingClientRect(),{width:r,height:o,fallback:i}=Wn(t),a=(i?ot(n.width):n.width)/r,l=(i?ot(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function we(e,t,n,r){var o,i;t===void 0&&(t=!1),n===void 0&&(n=!1);let a=e.getBoundingClientRect(),l=Kn(e),c=Un;t&&(r?ae(r)&&(c=Ie(r)):c=Ie(e));let d=l?J(l):window,s=Ht()&&n,u=(a.left+(s&&((o=d.visualViewport)==null?void 0:o.offsetLeft)||0))/c.x,f=(a.top+(s&&((i=d.visualViewport)==null?void 0:i.offsetTop)||0))/c.y,m=a.width/c.x,b=a.height/c.y;if(l){let g=J(l),h=r&&ae(r)?J(r):r,y=g.frameElement;for(;y&&r&&h!==g;){let E=Ie(y),R=y.getBoundingClientRect(),C=getComputedStyle(y);R.x+=(y.clientLeft+parseFloat(C.paddingLeft))*E.x,R.y+=(y.clientTop+parseFloat(C.paddingTop))*E.y,u*=E.x,f*=E.y,m*=E.x,b*=E.y,u+=R.x,f+=R.y,y=J(y).frameElement}}return Fe({width:m,height:b,x:u,y:f})}function he(e){return((Vn(e)?e.ownerDocument:e.document)||window.document).documentElement}function at(e){return ae(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function zn(e){return we(he(e)).left+at(e).scrollLeft}function Ue(e){if(be(e)==="html")return e;let t=e.assignedSlot||e.parentNode||Nn(e)&&e.host||he(e);return Nn(t)?t.host:t}function qn(e){let t=Ue(e);return Bt(t)?t.ownerDocument.body:ie(t)&&it(t)?t:qn(t)}function se(e,t){var n;t===void 0&&(t=[]);let r=qn(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=J(r);return o?t.concat(i,i.visualViewport||[],it(r)?r:[]):t.concat(r,se(r))}function Ln(e,t,n){let r;if(t==="viewport")r=function(a,l){let c=J(a),d=he(a),s=c.visualViewport,u=d.clientWidth,f=d.clientHeight,m=0,b=0;if(s){u=s.width,f=s.height;let g=Ht();(!g||g&&l==="fixed")&&(m=s.offsetLeft,b=s.offsetTop)}return{width:u,height:f,x:m,y:b}}(e,n);else if(t==="document")r=function(a){let l=he(a),c=at(a),d=a.ownerDocument.body,s=Ke(l.scrollWidth,l.clientWidth,d.scrollWidth,d.clientWidth),u=Ke(l.scrollHeight,l.clientHeight,d.scrollHeight,d.clientHeight),f=-c.scrollLeft+zn(a),m=-c.scrollTop;return ue(d).direction==="rtl"&&(f+=Ke(l.clientWidth,d.clientWidth)-s),{width:s,height:u,x:f,y:m}}(he(e));else if(ae(t))r=function(a,l){let c=we(a,!0,l==="fixed"),d=c.top+a.clientTop,s=c.left+a.clientLeft,u=ie(a)?Ie(a):{x:1,y:1};return{width:a.clientWidth*u.x,height:a.clientHeight*u.y,x:s*u.x,y:d*u.y}}(t,n);else{let a={...t};if(Ht()){var o,i;let l=J(e);a.x-=((o=l.visualViewport)==null?void 0:o.offsetLeft)||0,a.y-=((i=l.visualViewport)==null?void 0:i.offsetTop)||0}r=a}return Fe(r)}function Pn(e,t){return ie(e)&&ue(e).position!=="fixed"?t?t(e):e.offsetParent:null}function kn(e,t){let n=J(e);if(!ie(e))return n;let r=Pn(e,t);for(;r&&Jr(r)&&ue(r).position==="static";)r=Pn(r,t);return r&&(be(r)==="html"||be(r)==="body"&&ue(r).position==="static"&&!Ft(r))?n:r||function(o){let i=Ue(o);for(;ie(i)&&!Bt(i);){if(Ft(i))return i;i=Ue(i)}return null}(e)||n}function eo(e,t,n){let r=ie(t),o=he(t),i=we(e,!0,n==="fixed",t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(r||!r&&n!=="fixed")if((be(t)!=="body"||it(o))&&(a=at(t)),ie(t)){let c=we(t,!0);l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}else o&&(l.x=zn(o));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}var st={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e,i=n==="clippingAncestors"?function(d,s){let u=s.get(d);if(u)return u;let f=se(d).filter(h=>ae(h)&&be(h)!=="body"),m=null,b=ue(d).position==="fixed",g=b?Ue(d):d;for(;ae(g)&&!Bt(g);){let h=ue(g),y=Ft(g);h.position==="fixed"?m=null:(b?y||m:y||h.position!=="static"||!m||!["absolute","fixed"].includes(m.position))?m=h:f=f.filter(E=>E!==g),g=Ue(g)}return s.set(d,f),f}(t,this._c):[].concat(n),a=[...i,r],l=a[0],c=a.reduce((d,s)=>{let u=Ln(t,s,o);return d.top=Ke(u.top,d.top),d.right=Mn(u.right,d.right),d.bottom=Mn(u.bottom,d.bottom),d.left=Ke(u.left,d.left),d},Ln(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e,o=ie(n),i=he(n);if(n===i)return t;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1},c={x:0,y:0};if((o||!o&&r!=="fixed")&&((be(n)!=="body"||it(i))&&(a=at(n)),ie(n))){let d=we(n);l=Ie(n),c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-a.scrollLeft*l.x+c.x,y:t.y*l.y-a.scrollTop*l.y+c.y}},isElement:ae,getDimensions:function(e){return ie(e)?Wn(e):e.getBoundingClientRect()},getOffsetParent:kn,getDocumentElement:he,getScale:Ie,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e,o=this.getOffsetParent||kn,i=this.getDimensions;return{reference:eo(t,await o(n),r),floating:{x:0,y:0,...await i(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>ue(e).direction==="rtl"};function $n(e,t,n,r){r===void 0&&(r={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:l=!1}=r,c=o&&!l,d=c||i?[...ae(e)?se(e):e.contextElement?se(e.contextElement):[],...se(t)]:[];d.forEach(m=>{c&&m.addEventListener("scroll",n,{passive:!0}),i&&m.addEventListener("resize",n)});let s,u=null;if(a){let m=!0;u=new ResizeObserver(()=>{m||n(),m=!1}),ae(e)&&!l&&u.observe(e),ae(e)||!e.contextElement||l||u.observe(e.contextElement),u.observe(t)}let f=l?we(e):null;return l&&function m(){let b=we(e);!f||b.x===f.x&&b.y===f.y&&b.width===f.width&&b.height===f.height||n(),f=b,s=requestAnimationFrame(m)}(),n(),()=>{var m;d.forEach(b=>{c&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),(m=u)==null||m.disconnect(),u=null,l&&cancelAnimationFrame(s)}}var lt=(e,t,n)=>{let r=new Map,o={platform:st,...n},i={...o.platform,_c:r};return On(e,t,{...o,platform:i})};var G=me(Se(),1),ft=me(Se(),1),Gn=me(dn(),1);var ct=typeof document<"u"?ft.useLayoutEffect:ft.useEffect;function ut(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ut(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){let i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!ut(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function jn(e){let t=G.useRef(e);return ct(()=>{t.current=e}),t}function Xn(e){e===void 0&&(e={});let{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,whileElementsMounted:i,open:a}=e,[l,c]=G.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,s]=G.useState(r);ut(d,r)||s(r);let u=G.useRef(null),f=G.useRef(null),m=G.useRef(l),b=jn(i),g=jn(o),[h,y]=G.useState(null),[E,R]=G.useState(null),C=G.useCallback(A=>{u.current!==A&&(u.current=A,y(A))},[]),x=G.useCallback(A=>{f.current!==A&&(f.current=A,R(A))},[]),O=G.useCallback(()=>{if(!u.current||!f.current)return;let A={placement:t,strategy:n,middleware:d};g.current&&(A.platform=g.current),lt(u.current,f.current,A).then(p=>{let D={...p,isPositioned:!0};F.current&&!ut(m.current,D)&&(m.current=D,Gn.flushSync(()=>{c(D)}))})},[d,t,n,g]);ct(()=>{a===!1&&m.current.isPositioned&&(m.current.isPositioned=!1,c(A=>({...A,isPositioned:!1})))},[a]);let F=G.useRef(!1);ct(()=>(F.current=!0,()=>{F.current=!1}),[]),ct(()=>{if(h&&E){if(b.current)return b.current(h,E,O);O()}},[h,E,O,b]);let W=G.useMemo(()=>({reference:u,floating:f,setReference:C,setFloating:x}),[C,x]),P=G.useMemo(()=>({reference:h,floating:E}),[h,E]);return G.useMemo(()=>({...l,update:O,refs:W,elements:P,reference:C,floating:x}),[l,O,W,P,C,x])}var to=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ae=new WeakMap,dt=new WeakMap,mt={},Wt=0,Yn=function(e){return e&&(e.host||Yn(e.parentNode))},no=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Yn(n);return r&&e.contains(r)?r:null}).filter(function(n){return Boolean(n)})},ro=function(e,t,n,r){var o=no(t,Array.isArray(e)?e:[e]);mt[n]||(mt[n]=new WeakMap);var i=mt[n],a=[],l=new Set,c=new Set(o),d=function(u){!u||l.has(u)||(l.add(u),d(u.parentNode))};o.forEach(d);var s=function(u){!u||c.has(u)||Array.prototype.forEach.call(u.children,function(f){if(l.has(f))s(f);else{var m=f.getAttribute(r),b=m!==null&&m!=="false",g=(Ae.get(f)||0)+1,h=(i.get(f)||0)+1;Ae.set(f,g),i.set(f,h),a.push(f),g===1&&b&&dt.set(f,!0),h===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}})};return s(t),l.clear(),Wt++,function(){a.forEach(function(u){var f=Ae.get(u)-1,m=i.get(u)-1;Ae.set(u,f),i.set(u,m),f||(dt.has(u)||u.removeAttribute(r),dt.delete(u)),m||u.removeAttribute(n)}),Wt--,Wt||(Ae=new WeakMap,Ae=new WeakMap,dt=new WeakMap,mt={})}},Zn=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||to(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),ro(r,o,n,"aria-hidden")):function(){return null}};var oo=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_t=oo.join(","),er=typeof Element>"u",ze=er?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,pt=!er&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},gt=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",a=i||n&&t&&e(t.parentNode);return a},io=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},ao=function(t,n,r){if(gt(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(_t));return n&&ze.call(t,_t)&&o.unshift(t),o=o.filter(r),o},so=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!gt(a,!1))if(a.tagName==="SLOT"){var l=a.assignedElements(),c=l.length?l:a.children,d=e(c,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else{var s=ze.call(a,_t);s&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var u=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),f=!gt(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(u&&f){var m=e(u===!0?a.children:u.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:a,candidates:m})}else i.unshift.apply(i,a.children)}}return o},tr=function(t,n){return t.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||io(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},lo=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},nr=function(t){return t.tagName==="INPUT"},co=function(t){return nr(t)&&t.type==="hidden"},uo=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},fo=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},mo=function(t){if(!t.name)return!0;var n=t.form||pt(t),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch{return!1}var i=fo(o,t.form);return!i||i===t},po=function(t){return nr(t)&&t.type==="radio"},go=function(t){return po(t)&&!mo(t)},ho=function(t){var n,r=t&&pt(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var a,l,c;for(i=!!((a=o)!==null&&a!==void 0&&(l=a.ownerDocument)!==null&&l!==void 0&&l.contains(o)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!i&&o;){var d,s,u;r=pt(o),o=(d=r)===null||d===void 0?void 0:d.host,i=!!((s=o)!==null&&s!==void 0&&(u=s.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return i},Qn=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},bo=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=ze.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(ze.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var c=t.parentElement,d=pt(t);if(c&&!c.shadowRoot&&o(c)===!0)return Qn(t);t.assignedSlot?t=t.assignedSlot:!c&&d!==t.ownerDocument?t=d.host:t=c}t=l}if(ho(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Qn(t);return!1},vo=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ze.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},yo=function(t,n){return!(n.disabled||gt(n)||co(n)||bo(n,t)||uo(n)||vo(n))},Jn=function(t,n){return!(go(n)||tr(n)<0||!yo(t,n))},Ro=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Eo=function e(t){var n=[],r=[];return t.forEach(function(o,i){var a=!!o.scopeParent,l=a?o.scopeParent:o,c=tr(l,a),d=a?e(o.candidates):l;c===0?a?n.push.apply(n,d):n.push(l):r.push({documentOrder:i,tabIndex:c,item:o,isScope:a,content:d})}),r.sort(lo).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},qe=function(t,n){n=n||{};var r;return n.getShadowRoot?r=so([t],n.includeContainer,{filter:Jn.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ro}):r=ao(t,n.includeContainer,Jn.bind(null,n)),Eo(r)};var Xe=me(dn(),1);function bt(){return bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bt.apply(this,arguments)}var X=typeof document<"u"?Le.useLayoutEffect:Le.useEffect,Vt=!1,xo=0,rr=()=>"floating-ui-"+xo++;function wo(){let[e,t]=v.useState(()=>Vt?rr():void 0);return X(()=>{e==null&&t(rr())},[]),v.useEffect(()=>{Vt||(Vt=!0)},[]),e}var To=v["useId".toString()],vt=To||wo;function dr(){let e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}var mr=v.createContext(null),pr=v.createContext(null),Ye=()=>{var e;return((e=v.useContext(mr))==null?void 0:e.id)||null},Pe=()=>v.useContext(pr),Vi=e=>{let t=vt(),n=Pe(),r=Ye(),o=e||r;return X(()=>{let i={id:t,parentId:o};return n?.addNode(i),()=>{n?.removeNode(i)}},[n,t,o]),t},Ki=e=>{let{children:t,id:n}=e,r=Ye();return v.createElement(mr.Provider,{value:v.useMemo(()=>({id:n,parentId:r}),[n,r])},t)},Ui=e=>{let{children:t}=e,n=v.useRef([]),r=v.useCallback(a=>{n.current=[...n.current,a]},[]),o=v.useCallback(a=>{n.current=n.current.filter(l=>l!==a)},[]),i=v.useState(()=>dr())[0];return v.createElement(pr.Provider,{value:v.useMemo(()=>({nodesRef:n,addNode:r,removeNode:o,events:i}),[n,r,o,i])},t)};function re(e){return e?.ownerDocument||document}function gr(){let e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function So(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Xt(e){return re(e).defaultView||window}function le(e){return e?e instanceof Xt(e).Element:!1}function Oe(e){return e?e instanceof Xt(e).HTMLElement:!1}function Co(e){if(typeof ShadowRoot>"u")return!1;let t=Xt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function hr(e){if(e.mozInputSource===0&&e.isTrusted)return!0;let t=/Android/i;return(t.test(gr())||t.test(So()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function br(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function jt(){return/apple/i.test(navigator.vendor)}function vr(){return gr().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function yt(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function ye(e){let t=(0,Le.useRef)(e);return X(()=>{t.current=e}),t}var or="data-floating-ui-safe-polygon";function Kt(e,t,n){return n&&!yt(n)?0:typeof e=="number"?e:e?.[t]}var zi=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:o=null,mouseOnly:i=!1,restMs:a=0,move:l=!0}=t===void 0?{}:t,{open:c,onOpenChange:d,dataRef:s,events:u,elements:{domReference:f,floating:m},refs:b}=e,g=Pe(),h=Ye(),y=ye(o),E=ye(r),R=v.useRef(),C=v.useRef(),x=v.useRef(),O=v.useRef(),F=v.useRef(!0),W=v.useRef(!1),P=v.useRef(()=>{}),A=v.useCallback(()=>{var w;let I=(w=s.current.openEvent)==null?void 0:w.type;return I?.includes("mouse")&&I!=="mousedown"},[s]);v.useEffect(()=>{if(!n)return;function w(){clearTimeout(C.current),clearTimeout(O.current),F.current=!0}return u.on("dismiss",w),()=>{u.off("dismiss",w)}},[n,u]),v.useEffect(()=>{if(!n||!y.current||!c)return;function w(){A()&&d(!1)}let I=re(m).documentElement;return I.addEventListener("mouseleave",w),()=>{I.removeEventListener("mouseleave",w)}},[m,c,d,n,y,s,A]);let p=v.useCallback(function(w){w===void 0&&(w=!0);let I=Kt(E.current,"close",R.current);I&&!x.current?(clearTimeout(C.current),C.current=setTimeout(()=>d(!1),I)):w&&(clearTimeout(C.current),d(!1))},[E,d]),D=v.useCallback(()=>{P.current(),x.current=void 0},[]),M=v.useCallback(()=>{if(W.current){let w=re(b.floating.current).body;w.style.pointerEvents="",w.removeAttribute(or),W.current=!1}},[b]);return v.useEffect(()=>{if(!n)return;function w(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function I(T){if(clearTimeout(C.current),F.current=!1,i&&!yt(R.current)||a>0&&Kt(E.current,"open")===0)return;s.current.openEvent=T;let k=Kt(E.current,"open",R.current);k?C.current=setTimeout(()=>{d(!0)},k):d(!0)}function N(T){if(w())return;P.current();let k=re(m);if(clearTimeout(O.current),y.current){c||clearTimeout(C.current),x.current=y.current({...e,tree:g,x:T.clientX,y:T.clientY,onClose(){M(),D(),p()}});let S=x.current;k.addEventListener("mousemove",S),P.current=()=>{k.removeEventListener("mousemove",S)};return}p()}function V(T){w()||y.current==null||y.current({...e,tree:g,x:T.clientX,y:T.clientY,onClose(){M(),D(),p()}})(T)}if(le(f)){let T=f;return c&&T.addEventListener("mouseleave",V),m?.addEventListener("mouseleave",V),l&&T.addEventListener("mousemove",I,{once:!0}),T.addEventListener("mouseenter",I),T.addEventListener("mouseleave",N),()=>{c&&T.removeEventListener("mouseleave",V),m?.removeEventListener("mouseleave",V),l&&T.removeEventListener("mousemove",I),T.removeEventListener("mouseenter",I),T.removeEventListener("mouseleave",N)}}},[f,m,n,e,i,a,l,p,D,M,d,c,g,E,y,s]),X(()=>{var w;if(!!n&&c&&(w=y.current)!=null&&w.__options.blockPointerEvents&&A()){let V=re(m).body;if(V.setAttribute(or,""),V.style.pointerEvents="none",W.current=!0,le(f)&&m){var I,N;let T=f,k=g==null||(I=g.nodesRef.current.find(S=>S.id===h))==null||(N=I.context)==null?void 0:N.elements.floating;return k&&(k.style.pointerEvents=""),T.style.pointerEvents="auto",m.style.pointerEvents="auto",()=>{T.style.pointerEvents="",m.style.pointerEvents=""}}}},[n,c,h,m,f,g,y,s,A]),X(()=>{c||(R.current=void 0,D(),M())},[c,D,M]),v.useEffect(()=>()=>{D(),clearTimeout(C.current),clearTimeout(O.current),M()},[n,D,M]),v.useMemo(()=>{if(!n)return{};function w(I){R.current=I.pointerType}return{reference:{onPointerDown:w,onPointerEnter:w,onMouseMove(){c||a===0||(clearTimeout(O.current),O.current=setTimeout(()=>{F.current||d(!0)},a))}},floating:{onMouseEnter(){clearTimeout(C.current)},onMouseLeave(){u.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),p(!1)}}}},[u,n,a,c,d,p])};function Me(e){let t=e.activeElement;for(;((n=t)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;t=t.shadowRoot.activeElement}return t}function ne(e,t){if(!e||!t)return!1;let n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Co(n)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}var ir=0;function ve(e,t){t===void 0&&(t={});let{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(ir);let i=()=>e?.focus({preventScroll:n});o?i():ir=requestAnimationFrame(i)}function Io(e,t){var n;let r=[],o=(n=e.find(i=>i.id===t))==null?void 0:n.parentId;for(;o;){let i=e.find(a=>a.id===o);o=i?.parentId,i&&(r=r.concat(i))}return r}function je(e,t){let n=e.filter(o=>{var i;return o.parentId===t&&((i=o.context)==null?void 0:i.open)})||[],r=n;for(;r.length;)r=e.filter(o=>{var i;return(i=r)==null?void 0:i.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})})||[],n=n.concat(r);return n}function xt(e){return"composedPath"in e?e.composedPath()[0]:e.target}var Ao="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function yr(e){return Oe(e)&&e.matches(Ao)}function te(e){e.preventDefault(),e.stopPropagation()}var Rt=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Rr(e,t){let n=qe(e,Rt());t==="prev"&&n.reverse();let r=n.indexOf(Me(re(e)));return n.slice(r+1)[0]}function Er(){return Rr(document.body,"next")}function xr(){return Rr(document.body,"prev")}function Ge(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!ne(n,r)}function Oo(e){qe(e,Rt()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Mo(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{let r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var No=v["useInsertionEffect".toString()],Lo=No||(e=>e());function Ze(e){let t=v.useRef(()=>{});return Lo(()=>{t.current=e}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}var Yt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Gt,Zt;function ar(e){e.key==="Tab"&&(Gt=e.target,clearTimeout(Zt))}function Po(e){let t=Gt===e.relatedTarget;return Gt=e.relatedTarget,clearTimeout(Zt),t}var Et=v.forwardRef(function(t,n){let r=Ze(t.onFocus),[o,i]=v.useState();return X(()=>(jt()&&i("button"),document.addEventListener("keydown",ar),()=>{document.removeEventListener("keydown",ar)}),[]),v.createElement("span",bt({},t,{ref:n,tabIndex:0,role:o,"aria-hidden":o?void 0:!0,"data-floating-ui-focus-guard":"",style:Yt,onFocus:a=>{jt()&&vr()&&!Po(a)?(a.persist(),Zt=window.setTimeout(()=>{r(a)},50)):r(a)}}))}),wr=v.createContext(null),ko=function(e){let{id:t,enabled:n=!0}=e===void 0?{}:e,[r,o]=v.useState(null),i=vt(),a=Tr();return X(()=>{if(!n)return;let l=t?document.getElementById(t):null;if(l)l.setAttribute("data-floating-ui-portal",""),o(l);else{let c=document.createElement("div");t!==""&&(c.id=t||i),c.setAttribute("data-floating-ui-portal",""),o(c);let d=a?.portalNode||document.body;return d.appendChild(c),()=>{d.removeChild(c)}}},[t,a,i,n]),r},qi=e=>{let{children:t,id:n,root:r=null,preserveTabOrder:o=!0}=e,i=ko({id:n,enabled:!r}),[a,l]=v.useState(null),c=v.useRef(null),d=v.useRef(null),s=v.useRef(null),u=v.useRef(null),f=!!a&&!a.modal&&!!(r||i)&&o;return v.useEffect(()=>{if(!i||!o||a!=null&&a.modal)return;function m(b){i&&Ge(b)&&(b.type==="focusin"?Mo:Oo)(i)}return i.addEventListener("focusin",m,!0),i.addEventListener("focusout",m,!0),()=>{i.removeEventListener("focusin",m,!0),i.removeEventListener("focusout",m,!0)}},[i,o,a?.modal]),v.createElement(wr.Provider,{value:v.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:c,afterOutsideRef:d,beforeInsideRef:s,afterInsideRef:u,portalNode:i,setFocusManagerState:l}),[o,i])},f&&i&&v.createElement(Et,{"data-type":"outside",ref:c,onFocus:m=>{if(Ge(m,i)){var b;(b=s.current)==null||b.focus()}else{let g=xr()||a?.refs.domReference.current;g?.focus()}}}),f&&i&&v.createElement("span",{"aria-owns":i.id,style:Yt}),r?(0,Xe.createPortal)(t,r):i?(0,Xe.createPortal)(t,i):null,f&&i&&v.createElement(Et,{"data-type":"outside",ref:d,onFocus:m=>{if(Ge(m,i)){var b;(b=u.current)==null||b.focus()}else{let g=Er()||a?.refs.domReference.current;g?.focus(),a?.closeOnFocusOut&&a?.onOpenChange(!1)}}}))},Tr=()=>v.useContext(wr),Do=v.forwardRef(function(t,n){return v.createElement("button",bt({},t,{type:"button",ref:n,tabIndex:-1,style:Yt}))});function $i(e){let{context:t,children:n,order:r=["content"],guards:o=!0,initialFocus:i=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=e,{refs:s,nodeId:u,onOpenChange:f,events:m,dataRef:b,elements:{domReference:g,floating:h}}=t,y=ye(r),E=Pe(),R=Tr(),[C,x]=v.useState(null),O=typeof i=="number"&&i<0,F=v.useRef(null),W=v.useRef(null),P=v.useRef(!1),A=v.useRef(null),p=v.useRef(!1),D=R!=null,M=g&&g.getAttribute("role")==="combobox"&&yr(g),w=v.useCallback(function(T){return T===void 0&&(T=h),T?qe(T,Rt()):[]},[h]),I=v.useCallback(T=>{let k=w(T);return y.current.map(S=>g&&S==="reference"?g:h&&S==="floating"?h:k).filter(Boolean).flat()},[g,h,y,w]);v.useEffect(()=>{if(!l)return;function T(S){if(S.key==="Tab"){w().length===0&&!M&&te(S);let L=I(),K=xt(S);y.current[0]==="reference"&&K===g&&(te(S),S.shiftKey?ve(L[L.length-1]):ve(L[1])),y.current[1]==="floating"&&K===h&&S.shiftKey&&(te(S),ve(L[0]))}}let k=re(h);return k.addEventListener("keydown",T),()=>{k.removeEventListener("keydown",T)}},[g,h,l,y,s,M,w,I]),v.useEffect(()=>{if(!d)return;function T(){p.current=!0,setTimeout(()=>{p.current=!1})}function k(S){let L=S.relatedTarget,K=!(ne(g,L)||ne(h,L)||ne(L,h)||ne(R?.portalNode,L)||L!=null&&L.hasAttribute("data-floating-ui-focus-guard")||E&&(je(E.nodesRef.current,u).find(_=>{var z,q;return ne((z=_.context)==null?void 0:z.elements.floating,L)||ne((q=_.context)==null?void 0:q.elements.domReference,L)})||Io(E.nodesRef.current,u).find(_=>{var z,q;return((z=_.context)==null?void 0:z.elements.floating)===L||((q=_.context)==null?void 0:q.elements.domReference)===L})));L&&K&&!p.current&&L!==A.current&&(P.current=!0,setTimeout(()=>f(!1)))}if(h&&Oe(g))return g.addEventListener("focusout",k),g.addEventListener("pointerdown",T),!l&&h.addEventListener("focusout",k),()=>{g.removeEventListener("focusout",k),g.removeEventListener("pointerdown",T),!l&&h.removeEventListener("focusout",k)}},[g,h,l,u,E,R,f,d]),v.useEffect(()=>{var T;let k=Array.from((R==null||(T=R.portalNode)==null?void 0:T.querySelectorAll("[data-floating-ui-portal]"))||[]);function S(){return[F.current,W.current].filter(Boolean)}if(h&&l){let L=[h,...k,...S()],K=Zn(y.current.includes("reference")||M?L.concat(g||[]):L);return()=>{K()}}},[g,h,l,y,R,M]),v.useEffect(()=>{if(l&&!o&&h){let T=[],k=Rt(),S=qe(re(h).body,k),L=I(),K=S.filter(_=>!L.includes(_));return K.forEach((_,z)=>{T[z]=_.getAttribute("tabindex"),_.setAttribute("tabindex","-1")}),()=>{K.forEach((_,z)=>{let q=T[z];q==null?_.removeAttribute("tabindex"):_.setAttribute("tabindex",q)})}}},[h,l,o,I]),X(()=>{if(!h)return;let T=re(h),k=a,S=!1,L=Me(T),K=b.current;A.current=L;let _=I(h),z=(typeof i=="number"?_[i]:i.current)||h;!O&&ve(z,{preventScroll:z===h});function q(H){if(H.type==="escapeKey"&&s.domReference.current&&(A.current=s.domReference.current),["referencePress","escapeKey"].includes(H.type))return;let Q=H.data.returnFocus;typeof Q=="object"?(k=!0,S=Q.preventScroll):k=Q}return m.on("dismiss",q),()=>{if(m.off("dismiss",q),ne(h,Me(T))&&s.domReference.current&&(A.current=s.domReference.current),k&&Oe(A.current)&&!P.current)if(!s.domReference.current||p.current)ve(A.current,{cancelPrevious:!1,preventScroll:S});else{var H;K.__syncReturnFocus=!0,(H=A.current)==null||H.focus({preventScroll:S}),setTimeout(()=>{delete K.__syncReturnFocus})}}},[h,I,i,a,b,s,m,O]),X(()=>{if(!!R)return R.setFocusManagerState({...t,modal:l,closeOnFocusOut:d}),()=>{R.setFocusManagerState(null)}},[R,l,d,t]),X(()=>{if(O||!h)return;function T(){x(w().length)}if(T(),typeof MutationObserver=="function"){let k=new MutationObserver(T);return k.observe(h,{childList:!0,subtree:!0}),()=>{k.disconnect()}}},[h,w,O,s]);let N=o&&(D||l)&&!M;function V(T){return c&&l?v.createElement(Do,{ref:T==="start"?F:W,onClick:()=>f(!1)},typeof c=="string"?c:"Dismiss"):null}return v.createElement(v.Fragment,null,N&&v.createElement(Et,{"data-type":"inside",ref:R?.beforeInsideRef,onFocus:T=>{if(l){let S=I();ve(r[0]==="reference"?S[0]:S[S.length-1])}else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(P.current=!1,Ge(T,R.portalNode)){let S=Er()||g;S?.focus()}else{var k;(k=R.beforeOutsideRef.current)==null||k.focus()}}}),M?null:V("start"),v.cloneElement(n,C===0||r.includes("floating")?{tabIndex:0}:{}),V("end"),N&&v.createElement(Et,{"data-type":"inside",ref:R?.afterInsideRef,onFocus:T=>{if(l)ve(I()[0]);else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(P.current=!0,Ge(T,R.portalNode)){let S=xr()||g;S?.focus()}else{var k;(k=R.afterOutsideRef.current)==null||k.focus()}}}))}function sr(e){return Oe(e.target)&&e.target.tagName==="BUTTON"}function lr(e){return yr(e)}var ji=function(e,t){let{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:a=!0,event:l="click",toggle:c=!0,ignoreMouse:d=!1,keyboardHandlers:s=!0}=t===void 0?{}:t,u=v.useRef();return v.useMemo(()=>a?{reference:{onPointerDown(f){u.current=f.pointerType},onMouseDown(f){f.button===0&&(yt(u.current,!0)&&d||l!=="click"&&(n?c&&(o.current.openEvent?o.current.openEvent.type==="mousedown":!0)&&r(!1):(f.preventDefault(),r(!0)),o.current.openEvent=f.nativeEvent))},onClick(f){if(!o.current.__syncReturnFocus){if(l==="mousedown"&&u.current){u.current=void 0;return}yt(u.current,!0)&&d||(n?c&&(o.current.openEvent?o.current.openEvent.type==="click":!0)&&r(!1):r(!0),o.current.openEvent=f.nativeEvent)}},onKeyDown(f){u.current=void 0,s&&(sr(f)||(f.key===" "&&!lr(i)&&f.preventDefault(),f.key==="Enter"&&(n?c&&r(!1):r(!0))))},onKeyUp(f){!s||sr(f)||lr(i)||f.key===" "&&(n?c&&r(!1):r(!0))}}}:{},[a,o,l,d,s,i,c,n,r])};function Ut(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);let n=e;return n.target!=null&&t.contains(n.target)}var Fo={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ho={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Bo=function(e){var t,n;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(n=e.outsidePress)!=null?n:!0}},Gi=function(e,t){let{open:n,onOpenChange:r,events:o,nodeId:i,elements:{reference:a,domReference:l,floating:c},dataRef:d}=e,{enabled:s=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:m="pointerdown",referencePress:b=!1,referencePressEvent:g="pointerdown",ancestorScroll:h=!1,bubbles:y=!0}=t===void 0?{}:t,E=Pe(),R=Ye()!=null,C=Ze(typeof f=="function"?f:()=>!1),x=typeof f=="function"?C:f,O=v.useRef(!1),{escapeKeyBubbles:F,outsidePressBubbles:W}=Bo(y);return v.useEffect(()=>{if(!n||!s)return;d.current.__escapeKeyBubbles=F,d.current.__outsidePressBubbles=W;function P(w){if(w.key==="Escape"){let I=E?je(E.nodesRef.current,i):[];if(I.length>0){let N=!0;if(I.forEach(V=>{var T;if((T=V.context)!=null&&T.open&&!V.context.dataRef.current.__escapeKeyBubbles){N=!1;return}}),!N)return}o.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1)}}function A(w){let I=O.current;if(O.current=!1,I||typeof x=="function"&&!x(w))return;let N=xt(w);if(Oe(N)&&c){let k=c.ownerDocument.defaultView||window,S=N.scrollWidth>N.clientWidth,L=N.scrollHeight>N.clientHeight,K=L&&w.offsetX>N.clientWidth;if(L&&k.getComputedStyle(N).direction==="rtl"&&(K=w.offsetX<=N.offsetWidth-N.clientWidth),K||S&&w.offsetY>N.clientHeight)return}let V=E&&je(E.nodesRef.current,i).some(k=>{var S;return Ut(w,(S=k.context)==null?void 0:S.elements.floating)});if(Ut(w,c)||Ut(w,l)||V)return;let T=E?je(E.nodesRef.current,i):[];if(T.length>0){let k=!0;if(T.forEach(S=>{var L;if((L=S.context)!=null&&L.open&&!S.context.dataRef.current.__outsidePressBubbles){k=!1;return}}),!k)return}o.emit("dismiss",{type:"outsidePress",data:{returnFocus:R?{preventScroll:!0}:hr(w)||br(w)}}),r(!1)}function p(){r(!1)}let D=re(c);u&&D.addEventListener("keydown",P),x&&D.addEventListener(m,A);let M=[];return h&&(le(l)&&(M=se(l)),le(c)&&(M=M.concat(se(c))),!le(a)&&a&&a.contextElement&&(M=M.concat(se(a.contextElement)))),M=M.filter(w=>{var I;return w!==((I=D.defaultView)==null?void 0:I.visualViewport)}),M.forEach(w=>{w.addEventListener("scroll",p,{passive:!0})}),()=>{u&&D.removeEventListener("keydown",P),x&&D.removeEventListener(m,A),M.forEach(w=>{w.removeEventListener("scroll",p)})}},[d,c,l,a,u,x,m,o,E,i,n,r,h,s,F,W,R]),v.useEffect(()=>{O.current=!1},[x,m]),v.useMemo(()=>s?{reference:{[Fo[g]]:()=>{b&&(o.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1))}},floating:{[Ho[m]]:()=>{O.current=!0}}}:{},[s,o,b,m,g,r])};var cr=!1,Qt="ArrowUp",wt="ArrowDown",Ne="ArrowLeft",Qe="ArrowRight";function ht(e,t,n){return Math.floor(e/t)!==n}function $e(e,t){return t<0||t>=e.current.length}function Y(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:i=1}=t===void 0?{}:t,a=e.current,l=n;do{var c,d;l=l+(r?-i:i)}while(l>=0&&l<=a.length-1&&(o?o.includes(l):a[l]==null||((c=a[l])==null?void 0:c.hasAttribute("disabled"))||((d=a[l])==null?void 0:d.getAttribute("aria-disabled"))==="true"));return l}function Tt(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function ur(e,t){return Tt(t,e===Qt||e===wt,e===Ne||e===Qe)}function zt(e,t,n){return Tt(t,e===wt,n?e===Ne:e===Qe)||e==="Enter"||e==" "||e===""}function Wo(e,t,n){return Tt(t,n?e===Ne:e===Qe,e===wt)}function _o(e,t,n){return Tt(t,n?e===Qe:e===Ne,e===Qt)}function qt(e,t){return Y(e,{disabledIndices:t})}function fr(e,t){return Y(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}var Xi=function(e,t){let{open:n,onOpenChange:r,refs:o,elements:{domReference:i}}=e,{listRef:a,activeIndex:l,onNavigate:c=()=>{},enabled:d=!0,selectedIndex:s=null,allowEscape:u=!1,loop:f=!1,nested:m=!1,rtl:b=!1,virtual:g=!1,focusItemOnOpen:h="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:E=!0,disabledIndices:R=void 0,orientation:C="vertical",cols:x=1,scrollItemIntoView:O=!0}=t===void 0?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:t,F=Ye(),W=Pe(),P=Ze(c),A=v.useRef(h),p=v.useRef(s??-1),D=v.useRef(null),M=v.useRef(!0),w=v.useRef(P),I=v.useRef(n),N=v.useRef(!1),V=v.useRef(!1),T=ye(R),k=ye(n),S=ye(O),[L,K]=v.useState(),_=v.useCallback(function(H,Q,$){$===void 0&&($=!1);let j=H.current[Q.current];g?K(j?.id):ve(j,{preventScroll:!0,sync:vr()&&jt()?cr||N.current:!1}),requestAnimationFrame(()=>{let Te=S.current;Te&&j&&($||!M.current)&&(j.scrollIntoView==null||j.scrollIntoView(typeof Te=="boolean"?{block:"nearest",inline:"nearest"}:Te))})},[g,S]);X(()=>{document.createElement("div").focus({get preventScroll(){return cr=!0,!1}})},[]),X(()=>{!d||(n?A.current&&s!=null&&(V.current=!0,P(s)):I.current&&(p.current=-1,w.current(null)))},[d,n,s,P]),X(()=>{if(!!d&&n)if(l==null){if(N.current=!1,s!=null)return;I.current&&(p.current=-1,_(a,p)),!I.current&&A.current&&(D.current!=null||A.current===!0&&D.current==null)&&(p.current=D.current==null||zt(D.current,C,b)||m?qt(a,T.current):fr(a,T.current),P(p.current))}else $e(a,l)||(p.current=l,_(a,p,V.current),V.current=!1)},[d,n,l,s,m,a,C,b,P,_,T]),X(()=>{if(!!d&&I.current&&!n){var H,Q;let $=W==null||(H=W.nodesRef.current.find(j=>j.id===F))==null||(Q=H.context)==null?void 0:Q.elements.floating;$&&!ne($,Me(re($)))&&$.focus({preventScroll:!0})}},[d,n,W,F]),X(()=>{D.current=null,w.current=P,I.current=n});let z=l!=null,q=v.useMemo(()=>{function H($){if(!n)return;let j=a.current.indexOf($);j!==-1&&P(j)}return{onFocus($){let{currentTarget:j}=$;H(j)},onClick:$=>{let{currentTarget:j}=$;return j.focus({preventScroll:!0})},...y&&{onMouseMove($){let{currentTarget:j}=$;H(j)},onPointerLeave(){if(!!M.current&&(p.current=-1,_(a,p),(0,Xe.flushSync)(()=>P(null)),!g)){var $;($=o.floating.current)==null||$.focus({preventScroll:!0})}}}}},[n,o,_,y,a,P,g]);return v.useMemo(()=>{if(!d)return{};let H=T.current;function Q(B){if(M.current=!1,N.current=!0,!k.current&&B.currentTarget===o.floating.current)return;if(m&&_o(B.key,C,b)){te(B),r(!1),Oe(i)&&i.focus();return}let oe=p.current,de=qt(a,H),ee=fr(a,H);if(B.key==="Home"&&(p.current=de,P(p.current)),B.key==="End"&&(p.current=ee,P(p.current)),x>1){let U=p.current;if(B.key===Qt){if(te(B),U===-1)p.current=ee;else if(p.current=Y(a,{startingIndex:U,amount:x,decrement:!0,disabledIndices:H}),f&&(U-x<de||p.current<0)){let fe=U%x,De=ee%x,fn=ee-(De-fe);De===fe?p.current=ee:p.current=De>fe?fn:fn-x}$e(a,p.current)&&(p.current=U),P(p.current)}if(B.key===wt&&(te(B),U===-1?p.current=de:(p.current=Y(a,{startingIndex:U,amount:x,disabledIndices:H}),f&&U+x>ee&&(p.current=Y(a,{startingIndex:U%x-x,amount:x,disabledIndices:H}))),$e(a,p.current)&&(p.current=U),P(p.current)),C==="both"){let fe=Math.floor(U/x);B.key===Qe&&(te(B),U%x!==x-1?(p.current=Y(a,{startingIndex:U,disabledIndices:H}),f&&ht(p.current,x,fe)&&(p.current=Y(a,{startingIndex:U-U%x-1,disabledIndices:H}))):f&&(p.current=Y(a,{startingIndex:U-U%x-1,disabledIndices:H})),ht(p.current,x,fe)&&(p.current=U)),B.key===Ne&&(te(B),U%x!==0?(p.current=Y(a,{startingIndex:U,disabledIndices:H,decrement:!0}),f&&ht(p.current,x,fe)&&(p.current=Y(a,{startingIndex:U+(x-U%x),decrement:!0,disabledIndices:H}))):f&&(p.current=Y(a,{startingIndex:U+(x-U%x),decrement:!0,disabledIndices:H})),ht(p.current,x,fe)&&(p.current=U));let De=Math.floor(ee/x)===fe;$e(a,p.current)&&(f&&De?p.current=B.key===Ne?ee:Y(a,{startingIndex:U-U%x-1,disabledIndices:H}):p.current=U),P(p.current);return}}if(ur(B.key,C)){if(te(B),n&&!g&&Me(B.currentTarget.ownerDocument)===B.currentTarget){p.current=zt(B.key,C,b)?de:ee,P(p.current);return}zt(B.key,C,b)?f?p.current=oe>=ee?u&&oe!==a.current.length?-1:de:Y(a,{startingIndex:oe,disabledIndices:H}):p.current=Math.min(ee,Y(a,{startingIndex:oe,disabledIndices:H})):f?p.current=oe<=de?u&&oe!==-1?a.current.length:ee:Y(a,{startingIndex:oe,decrement:!0,disabledIndices:H}):p.current=Math.max(de,Y(a,{startingIndex:oe,decrement:!0,disabledIndices:H})),$e(a,p.current)?P(null):P(p.current)}}function $(B){h==="auto"&&hr(B.nativeEvent)&&(A.current=!0)}function j(B){A.current=h,h==="auto"&&br(B.nativeEvent)&&(A.current=!0)}let Te=g&&n&&z&&{"aria-activedescendant":L};return{reference:{...Te,onKeyDown(B){M.current=!1;let oe=B.key.indexOf("Arrow")===0;if(g&&n)return Q(B);if(!n&&!E&&oe)return;if((oe||B.key==="Enter"||B.key===" "||B.key==="")&&(D.current=B.key),m){Wo(B.key,C,b)&&(te(B),n?(p.current=qt(a,H),P(p.current)):r(!0));return}ur(B.key,C)&&(s!=null&&(p.current=s),te(B),!n&&E?r(!0):Q(B),n&&P(p.current))},onFocus(){n&&P(null)},onPointerDown:j,onMouseDown:$,onClick:$},floating:{"aria-orientation":C==="both"?void 0:C,...Te,onKeyDown:Q,onPointerMove(){M.current=!0}},item:q}},[i,o,L,T,k,a,d,C,b,g,n,z,m,s,E,u,x,f,h,P,r,q])};function Yi(e){return v.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}var Zi=function(e,t){let{open:n}=e,{enabled:r=!0,role:o="dialog"}=t===void 0?{}:t,i=vt(),a=vt();return v.useMemo(()=>{let l={id:i,role:o};return r?o==="tooltip"?{reference:{"aria-describedby":n?i:void 0},floating:l}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":o==="alertdialog"?"dialog":o,"aria-controls":n?i:void 0,...o==="listbox"&&{role:"combobox"},...o==="menu"&&{id:a}},floating:{...l,...o==="menu"&&{"aria-labelledby":a}}}:{}},[r,o,n,i,a])};var Qi=function(e,t){var n;let{open:r,dataRef:o,refs:i}=e,{listRef:a,activeIndex:l,onMatch:c=()=>{},enabled:d=!0,findMatch:s=null,resetMs:u=1e3,ignoreKeys:f=[],selectedIndex:m=null}=t===void 0?{listRef:{current:[]},activeIndex:null}:t,b=v.useRef(),g=v.useRef(""),h=v.useRef((n=m??l)!=null?n:-1),y=v.useRef(null),E=Ze(c),R=ye(s),C=ye(f);return X(()=>{r&&(clearTimeout(b.current),y.current=null,g.current="")},[r]),X(()=>{if(r&&g.current===""){var x;h.current=(x=m??l)!=null?x:-1}},[r,m,l]),v.useMemo(()=>{if(!d)return{};function x(O){var F;let W=xt(O.nativeEvent);if(le(W)&&(Me(re(W))!==O.currentTarget?(F=i.floating.current)!=null&&F.contains(W)?W.closest('[role="dialog"],[role="menu"],[role="listbox"],[role="tree"],[role="grid"]')!==O.currentTarget:!1:!O.currentTarget.contains(W)))return;g.current.length>0&&g.current[0]!==" "&&(o.current.typing=!0,O.key===" "&&te(O));let P=a.current;if(P==null||C.current.includes(O.key)||O.key.length!==1||O.ctrlKey||O.metaKey||O.altKey)return;P.every(I=>{var N,V;return I?((N=I[0])==null?void 0:N.toLocaleLowerCase())!==((V=I[1])==null?void 0:V.toLocaleLowerCase()):!0})&&g.current===O.key&&(g.current="",h.current=y.current),g.current+=O.key,clearTimeout(b.current),b.current=setTimeout(()=>{g.current="",h.current=y.current,o.current.typing=!1},u);let p=h.current,D=[...P.slice((p||0)+1),...P.slice(0,(p||0)+1)],M=R.current?R.current(D,g.current):D.find(I=>I?.toLocaleLowerCase().indexOf(g.current.toLocaleLowerCase())===0),w=M?P.indexOf(M):-1;w!==-1&&(E(w),y.current=w)}return{reference:{onKeyDown:x},floating:{onKeyDown:x}}},[d,o,a,u,C,R,E,i])};function Vo(e,t){let[n,r]=e,o=!1,i=t.length;for(let a=0,l=i-1;a<i;l=a++){let[c,d]=t[a]||[0,0],[s,u]=t[l]||[0,0];d>=r!=u>=r&&n<=(s-c)*(r-d)/(u-d)+c&&(o=!o)}return o}function Ko(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function Ji(e){let{restMs:t=0,buffer:n=.5,blockPointerEvents:r=!1}=e===void 0?{}:e,o,i=!1,a=!1,l=c=>{let{x:d,y:s,placement:u,elements:f,onClose:m,nodeId:b,tree:g}=c;return function(y){function E(){clearTimeout(o),m()}if(clearTimeout(o),!f.domReference||!f.floating||u==null||d==null||s==null)return;let{clientX:R,clientY:C}=y,x=[R,C],O=xt(y),F=y.type==="mouseleave",W=ne(f.floating,O),P=ne(f.domReference,O),A=f.domReference.getBoundingClientRect(),p=f.floating.getBoundingClientRect(),D=u.split("-")[0],M=d>p.right-p.width/2,w=s>p.bottom-p.height/2,I=Ko(x,A);if(W&&(a=!0,!F))return;if(P&&(a=!1),P&&!F){a=!0;return}if(F&&le(y.relatedTarget)&&ne(f.floating,y.relatedTarget)||g&&je(g.nodesRef.current,b).some(k=>{let{context:S}=k;return S?.open}))return;if(D==="top"&&s>=A.bottom-1||D==="bottom"&&s<=A.top+1||D==="left"&&d>=A.right-1||D==="right"&&d<=A.left+1)return E();let N=[];switch(D){case"top":N=[[p.left,A.top+1],[p.left,p.bottom-1],[p.right,p.bottom-1],[p.right,A.top+1]],i=R>=p.left&&R<=p.right&&C>=p.top&&C<=A.top+1;break;case"bottom":N=[[p.left,p.top+1],[p.left,A.bottom-1],[p.right,A.bottom-1],[p.right,p.top+1]],i=R>=p.left&&R<=p.right&&C>=A.bottom-1&&C<=p.bottom;break;case"left":N=[[p.right-1,p.bottom],[p.right-1,p.top],[A.left+1,p.top],[A.left+1,p.bottom]],i=R>=p.left&&R<=A.left+1&&C>=p.top&&C<=p.bottom;break;case"right":N=[[A.right-1,p.bottom],[A.right-1,p.top],[p.left+1,p.top],[p.left+1,p.bottom]],i=R>=A.right-1&&R<=p.right&&C>=p.top&&C<=p.bottom;break}function V(k){let[S,L]=k,K=p.width>A.width,_=p.height>A.height;switch(D){case"top":{let z=[K?S+n/2:M?S+n*4:S-n*4,L+n+1],q=[K?S-n/2:M?S+n*4:S-n*4,L+n+1],H=[[p.left,M||K?p.bottom-n:p.top],[p.right,M?K?p.bottom-n:p.top:p.bottom-n]];return[z,q,...H]}case"bottom":{let z=[K?S+n/2:M?S+n*4:S-n*4,L-n],q=[K?S-n/2:M?S+n*4:S-n*4,L-n],H=[[p.left,M||K?p.top+n:p.bottom],[p.right,M?K?p.top+n:p.bottom:p.top+n]];return[z,q,...H]}case"left":{let z=[S+n+1,_?L+n/2:w?L+n*4:L-n*4],q=[S+n+1,_?L-n/2:w?L+n*4:L-n*4];return[...[[w||_?p.right-n:p.left,p.top],[w?_?p.right-n:p.left:p.right-n,p.bottom]],z,q]}case"right":{let z=[S-n,_?L+n/2:w?L+n*4:L-n*4],q=[S-n,_?L-n/2:w?L+n*4:L-n*4],H=[[w||_?p.left+n:p.right,p.top],[w?_?p.left+n:p.right:p.left+n,p.bottom]];return[z,q,...H]}}}let T=i?N:V([d,s]);if(!i){if(a&&!I)return E();Vo([R,C],T)?t&&!a&&(o=setTimeout(E,t)):E()}}};return l.__options={blockPointerEvents:r},l}function ea(e){e===void 0&&(e={});let{open:t=!1,onOpenChange:n,nodeId:r}=e,o=Xn(e),i=Pe(),a=v.useRef(null),l=v.useRef({}),c=v.useState(()=>dr())[0],[d,s]=v.useState(null),u=v.useCallback(y=>{let E=le(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;o.refs.setReference(E)},[o.refs]),f=v.useCallback(y=>{(le(y)||y===null)&&(a.current=y,s(y)),(le(o.refs.reference.current)||o.refs.reference.current===null||y!==null&&!le(y))&&o.refs.setReference(y)},[o.refs]),m=v.useMemo(()=>({...o.refs,setReference:f,setPositionReference:u,domReference:a}),[o.refs,f,u]),b=v.useMemo(()=>({...o.elements,domReference:d}),[o.elements,d]),g=Ze(n),h=v.useMemo(()=>({...o,refs:m,elements:b,dataRef:l,nodeId:r,events:c,open:t,onOpenChange:g}),[o,r,c,t,g,m,b]);return X(()=>{let y=i?.nodesRef.current.find(E=>E.id===r);y&&(y.context=h)}),v.useMemo(()=>({...o,context:h,refs:m,reference:f,positionReference:u}),[o,m,h,f,u])}function $t(e,t,n){let r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(o=>o?o[n]:null).concat(e).reduce((o,i)=>(i&&Object.entries(i).forEach(a=>{let[l,c]=a;if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var d;(d=r.get(l))==null||d.push(c),o[l]=function(){for(var s,u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];(s=r.get(l))==null||s.forEach(b=>b(...f))}}}else o[l]=c}),o),{})}}var ta=function(e){e===void 0&&(e=[]);let t=e,n=v.useCallback(i=>$t(i,e,"reference"),t),r=v.useCallback(i=>$t(i,e,"floating"),t),o=v.useCallback(i=>$t(i,e,"item"),e.map(i=>i?.item));return v.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:o}),[n,r,o])};var ce={REPLACE_SELECTION:"397f0c89-596c-4433-be95-02faeccee083",INSERT_BELOW:"d0b0b2a0-0b7e-4b1e-9b0e-5b7b6b2b4b2b",INSERT:"5fd6256c-f03c-4520-8df4-64b248247216",CONTINUE_WRITING:"207d0f63-7905-479f-9962-1e3ebd0b65ee",INSERT_ABOVE:"1f755cfe-cc56-4a73-9cc4-d2baf2c39624",TRY_AGAIN:"6b9f9cb4-b1b1-4897-9156-903dbc52b2a1",DISCARD:"82dc6fe3-da3d-437c-aa0e-268e4f602787",MAKE_LONGER:"2bd23d4b-6f6b-491c-a42f-f6c24a3b075d",MAKE_SHORTER:"44ea14bf-e81d-4e24-9627-b2ce9b1546dd",COPY:"8fcccd1e-eb6e-419e-8c79-d8bc7c10e72c"},Sr=[{id:ce.REPLACE_SELECTION,text:"Replace selection",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"Done"},children:[]},{id:ce.INSERT,text:"Insert",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"NoteRight"},children:[]},{id:ce.INSERT_BELOW,text:"Insert below",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"NoteDown"},children:[]},{id:ce.CONTINUE_WRITING,text:"Continue writing",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"DefaultIcon",actions:[{type:"RENDER_CHATGPT_PROMPT",parameters:{template:`I have an unfinished text and I hope you can help me continue with the next paragraph. You don't need to complete all the content. Please continue the text from the following points that match the tone, writing style, structure, target audience, and direction that my text should take.
Write in {{AI_RESPONSE_LANGUAGE}}.
Here is the text:
"""
{{LAST_AI_OUTPUT}}
"""`}},{type:"ASK_CHATGPT",parameters:{template:"{{LAST_ACTION_OUTPUT}}"}}]},children:[]},{id:ce.COPY,text:"Copy",parent:"root",droppable:!1,data:{type:"shortcuts",editable:!1,icon:"Copy"},children:[]},{id:ce.TRY_AGAIN,text:"Try again",parent:"root",droppable:!1,data:{icon:"Replay",type:"shortcuts",editable:!1},children:[]},{id:ce.DISCARD,text:"Discard",parent:"root",droppable:!1,data:{icon:"Delete",type:"shortcuts",editable:!1},children:[]}];var Cr=new En("ChatBoxInputMediator"),Jt=class{constructor(){this.inputValue="";this.subscribers=[]}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(n=>n!==t)}updateInputValue(t,n){Cr.info("updateInputValue",t),this.inputValue=t,this.notifySubscribers(n)}getInputValue(){return this.inputValue}notifySubscribers(t){this.subscribers.forEach(n=>{n(this.inputValue,t)})}},en=class{constructor(){this.inputValue="";this.subscribers=[]}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers=this.subscribers.filter(n=>n!==t)}updateInputValue(t,n){Cr.info("updateInputValue",t),this.inputValue=t,this.notifySubscribers(n)}getInputValue(){return this.inputValue}notifySubscribers(t){this.subscribers.forEach(n=>{n(this.inputValue,t)})}},nn=class{static getMediator(t){return nn.mediators[t]}},St=nn;St.mediators={chatBoxInputMediator:new Jt,floatingMenuInputMediator:new en};var tn=e=>St.getMediator(e);var ga=e=>{let t=[],n=Lt(e,"parent"),r=o=>{o.children=n[o.id]||[],o.children.length>0&&Nt(o.children,r)};return Nt(n.root,o=>{r(o),t.push(o)}),t},Ir=(e,t)=>!(e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom),Uo=(e,t)=>e.left<=t.right&&e.right>=t.left&&e.top<=t.bottom&&e.bottom>=t.top,zo=(e,t,n)=>!Uo(e,t)&&Ir(t,n),ha=(e,t=220,n=400,r={offset:8,directions:["bottom","top","right","left"]})=>{let{offset:o=16,directions:i}=r,a={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight},l=i||["bottom","top","right","left"],c=[];l.map(s=>{switch(s){case"bottom":c.push({left:e.left,right:e.left+t,top:e.bottom+o,bottom:e.bottom+o+n,direction:s});break;case"top":c.push({left:e.left,right:e.left+t,top:e.top-o-n,bottom:e.top-o,direction:s});break;case"left":c.push({left:e.left-o-t,right:e.left-o,top:e.top,bottom:e.top+n,direction:s}),c.push({left:e.left-o-t,right:e.left-o,top:a.bottom-n-o,bottom:a.bottom-o,direction:s});break;case"right":c.push({left:e.right+o,right:e.right+o+t,top:e.top,bottom:e.top+n,direction:s}),c.push({left:e.right+o,right:e.right+o+t,top:a.bottom-n-o,bottom:a.bottom-o,direction:s});break;default:break}});let d=c.find((s,u)=>!zo(e,s,a));return d?{x:d.left-62,y:d.top}:{x:o,y:o}},Ct=e=>({left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top,x:e.x||e.left,y:e.y||e.top}),ba=(e,t=.8)=>{let{width:n,height:r}=e,o={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight,x:0,y:0};return n*r>o.width*o.height*t?{x:o.width/2,y:o.height/2,left:o.width/2,right:o.width/2,top:o.height/2,bottom:o.height/2,width:0,height:0}:e},va=(e,t)=>{let r=t.toLowerCase().trim().split(/\s+/).filter(Boolean),o=yn(e.filter(l=>{let{data:{searchText:c}}=l;if(!c)return!1;let d=c.split(/\s/),s=!0;for(let u of r){let f=d.findIndex(m=>m.includes(u));if(f===-1){s=!1;break}d.splice(f,1)}return s})),i=[],a=Lt(o,"parent");return Object.keys(a).forEach(l=>{let c=a[l].filter(d=>d.data.type!=="group");if(c.length>0)if(l==="root"){i.push(...c);return}else{let d=e.find(s=>s.id===l);d&&i.push({...d,children:c})}}),i},ya=(e=[])=>{let r=0,o=e.filter(i=>i.parent==="root").map(i=>(i.data.type==="group"?r+=18:r+=33,i.id));for(let i=0;i<e.length;i++){let a=e[i];a.parent!=="root"&&o.includes(a.parent)&&(r+=33)}return r},Ra=[We({fallbackPlacements:["top-start","right","left"]}),Ve(),_e({crossAxis:!0,padding:16}),Ce(e=>{if(e.placement.indexOf("bottom")>-1){let t={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight+window.scrollY};return Ir({top:e.y,left:e.x,bottom:e.y+e.rects.floating.height+50,right:e.rects.floating.width+e.x},t)?e.rects.reference.y-e.y-e.rects.floating.height-8:8}else return 8})];var Ea=()=>{var t;let e=(t=Tn())==null?void 0:t.querySelector(`#${gn}`);return e&&e.getAttribute("aria-hidden")==="false"},xa=e=>Object.values(ce).find(t=>t===e)!==void 0,wa=e=>Object.values(Sr).find(t=>t.id===e),Ta=e=>{let t;return Object.keys(ce).forEach(n=>{ce[n]===e&&(t=n)}),t},Sa=()=>{let e=tn("floatingMenuInputMediator").getInputValue();if(!e)return;let t=3*1e3,n=setInterval(()=>{let r=wn(),o=r==null?void 0:r.querySelector(`#${tt}`);o&&(clearInterval(n),tn("chatBoxInputMediator").updateInputValue(e),setTimeout(()=>{o==null||o.focus()},100))},50);setTimeout(()=>{clearInterval(n)},t)};function qo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function sn(e,t){return Array(t+1).join(e)}function $o(e){return e.replace(/^\n*/,"")}function jo(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var Go=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function ln(e){return cn(e,Go)}var Mr=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Nr(e){return cn(e,Mr)}function Xo(e){return Pr(e,Mr)}var Lr=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Yo(e){return cn(e,Lr)}function Zo(e){return Pr(e,Lr)}function cn(e,t){return t.indexOf(e.nodeName)>=0}function Pr(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var Z={};Z.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Z.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}};Z.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var o=sn(r===1?"=":"-",e.length);return`

`+e+`
`+o+`

`}else return`

`+sn("#",r)+" "+e+`

`}};Z.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Z.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}};Z.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",o=t.parentNode;if(o.nodeName==="OL"){var i=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,t);r=(i?Number(i)+a:a+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Z.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Z.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",o=(r.match(/language-(\S+)/)||[null,""])[1],i=t.firstChild.textContent,a=n.fence.charAt(0),l=3,c=new RegExp("^"+a+"{3,}","gm"),d;d=c.exec(i);)d[0].length>=l&&(l=d[0].length+1);var s=sn(a,l);return`

`+s+o+`
`+i.replace(/\n$/,"")+`
`+s+`

`}};Z.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}};Z.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),r=It(t.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+e+"]("+n+r+")"}};Z.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),o=It(t.getAttribute("title"));o&&(o=' "'+o+'"');var i,a;switch(n.linkReferenceStyle){case"collapsed":i="["+e+"][]",a="["+e+"]: "+r+o;break;case"shortcut":i="["+e+"]",a="["+e+"]: "+r+o;break;default:var l=this.references.length+1;i="["+e+"]["+l+"]",a="["+l+"]: "+r+o}return this.references.push(a),i},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Z.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}};Z.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}};Z.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}};Z.image={filter:"img",replacement:function(e,t){var n=It(t.getAttribute("alt")),r=t.getAttribute("src")||"",o=It(t.getAttribute("title")),i=o?' "'+o+'"':"";return r?"!["+n+"]("+r+i+")":""}};function It(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function kr(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}kr.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=rn(this.array,e,this.options))||(t=rn(this._keep,e,this.options))||(t=rn(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function rn(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];if(Qo(o,t,n))return o}}function Qo(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Jo(e){var t=e.element,n=e.isBlock,r=e.isVoid,o=e.isPre||function(u){return u.nodeName==="PRE"};if(!(!t.firstChild||o(t))){for(var i=null,a=!1,l=null,c=Ar(l,t,o);c!==t;){if(c.nodeType===3||c.nodeType===4){var d=c.data.replace(/[ \r\n\t]+/g," ");if((!i||/ $/.test(i.data))&&!a&&d[0]===" "&&(d=d.substr(1)),!d){c=on(c);continue}c.data=d,i=c}else if(c.nodeType===1)n(c)||c.nodeName==="BR"?(i&&(i.data=i.data.replace(/ $/,"")),i=null,a=!1):r(c)||o(c)?(i=null,a=!0):i&&(a=!1);else{c=on(c);continue}var s=Ar(l,c,o);l=c,c=s}i&&(i.data=i.data.replace(/ $/,""),i.data||on(i))}}function on(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function Ar(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var Dr=typeof window<"u"?window:{};function ei(){var e=Dr.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function ti(){var e=function(){};return ni()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function ni(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(e=!0)}return e}var ri=ei()?Dr.DOMParser:ti();function oi(e,t){var n;if(typeof e=="string"){var r=ii().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return Jo({element:n,isBlock:ln,isVoid:Nr,isPre:t.preformattedCode?ai:null}),n}var an;function ii(){return an=an||new ri,an}function ai(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function si(e,t){return e.isBlock=ln(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=li(e),e.flankingWhitespace=ci(e,t),e}function li(e){return!Nr(e)&&!Yo(e)&&/^\s*$/i.test(e.textContent)&&!Xo(e)&&!Zo(e)}function ci(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=ui(e.textContent);return n.leadingAscii&&Or("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&Or("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function ui(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function Or(e,t,n){var r,o,i;return e==="left"?(r=t.previousSibling,o=/ $/):(r=t.nextSibling,o=/^ /),r&&(r.nodeType===3?i=o.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?i=!1:r.nodeType===1&&!ln(r)&&(i=o.test(r.textContent))),i}var fi=Array.prototype.reduce,di=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function At(e){if(!(this instanceof At))return new At(e);var t={rules:Z,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=qo({},t,e),this.rules=new kr(this.options)}At.prototype={turndown:function(e){if(!gi(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=Fr.call(this,new oi(e,this.options));return mi.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return di.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function Fr(e){var t=this;return fi.call(e.childNodes,function(n,r){r=new si(r,t.options);var o="";return r.nodeType===3?o=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(o=pi.call(t,r)),Hr(n,o)},"")}function mi(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=Hr(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function pi(e){var t=this.rules.forNode(e),n=Fr.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function Hr(e,t){var n=jo(e),r=$o(t),o=Math.max(e.length-n.length,t.length-r.length),i=`

`.substring(0,o);return n+i+r}function gi(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}var Br=At;var Kr=me(Se());var hi=()=>{let e=window.location.href,t=pe();if(t){if(t==="mail.google.com")return!0;if(t==="outlook.live.com")return!/mail\/\d+\/notes/.test(e)}return!1},Je=class{static setRange(t,n){n&&Je.rangeMap.set(t,n)}static getRange(t){return Je.rangeMap.get(t)}static removeAllRange(){Je.rangeMap.clear()}},ke=Je;ke.rangeMap=new Map;var Wr=(e,t)=>{ke.setRange(e,t)},_r=e=>ke.getRange(e)||null,bi=()=>{ke.removeAllRange()},Ur=async()=>(await navigator.permissions.query({name:"clipboard-write"})).state==="granted",vi=e=>{let t=0,n=e.ownerDocument||e.document,r=n.defaultView||n.parentWindow,o;if(typeof r.getSelection!="undefined"&&(o=r.getSelection(),o.rangeCount>0)){let i=r.getSelection().getRangeAt(0),a=i.cloneRange();a.selectNodeContents(e),a.setEnd(i.endContainer,i.endOffset),t=a.toString().length}return t},yi=e=>{let t=0,n=0,r,o,i,a,l,c=e.ownerDocument||e.document;return typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"?(t=e.selectionStart,n=e.selectionEnd):(o=c.selection.createRange(),o&&o.parentElement()==e&&(a=e.value.length,r=e.value.replace(/\r\n/g,`
`),i=e.createTextRange(),i.moveToBookmark(o.getBookmark()),l=e.createTextRange(),l.collapse(!1),i.compareEndPoints("StartToEnd",l)>-1?t=n=a:(t=-i.moveStart("character",-a),t+=r.slice(0,t).split(`
`).length-1,i.compareEndPoints("EndToEnd",l)>-1?n=a:(n=-i.moveEnd("character",-a),n+=r.slice(0,n).split(`
`).length-1)))),{start:t,end:n}},Ri=()=>{var e,t,n;if(document){if(document.getSelection)return(e=String(document.getSelection()))==null?void 0:e.replace(/\u200B/g,"");if(document.selection)return(t=document.selection.createRange().text)==null?void 0:t.replace(/\u200B/g,"");if(window.getSelection)return(n=String(window.getSelection()))==null?void 0:n.replace(/\u200B/g,"")}return""},Ba=e=>{var t,n,r;try{if(e){let o=e.ownerDocument||e.document,i=o.defaultView||o.parentWindow,a,l=`usechatgpt-start-marker-${Mt()}`,c=`usechatgpt-end-marker-${Mt()}`,d="";if(typeof o.getSelection!="undefined"&&(a=o.getSelection()||i.getSelection(),a.rangeCount>0)){zr();let s=i.getSelection().getRangeAt(0).cloneRange();if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"){let u=e,{start:f,end:m}=yi(u);e.setAttribute("data-usechatgpt-start-offset",f.toString()),e.setAttribute("data-usechatgpt-end-offset",m.toString()),e.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),e.setAttribute("data-usechatgpt-marker-start-id",l),e.setAttribute("data-usechatgpt-marker-end-id",c);let b=u.value.substring(f,m).trim().replace(/\u200B/g,""),g=(b||u.value.substring(0,f).trim()||u.value.trim()||"").replace(/\u200B/g,"");return{startMarkerId:l,endMarkerId:c,selectionText:g,editableElementSelectionText:b}}else{let u=(a.toString()||s.toString()).trim().replace(/\u200B/g,""),f=s.cloneRange();f.selectNodeContents(e),f.setEnd(s.endContainer,s.endOffset);let m=f.toString().trim().replace(/\u200B/g,""),b=(u||m||e.innerText.trim()||"").replace(/\u200B/g,"");((t=document.activeElement)==null?void 0:t.tagName)!=="IFRAME"&&((n=s.startContainer)==null?void 0:n.tagName)==="BODY"&&((r=s.startContainer)==null?void 0:r.isSameNode(s.endContainer))&&(b="");let g=pe();if(!hi())return Wr(l,s.cloneRange()),Wr(c,s.cloneRange()),{startMarkerId:l,endMarkerId:c,selectionText:b,editableElementSelectionText:u};let h=s.cloneRange();h.collapse(!0);let y=o.createElement("span");y.id=l,y.style.lineHeight="0",y.style.display="none",y.textContent=d,y.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),y.setAttribute("contenteditable","false"),y.setAttribute("data-usechatgpt-marker-start-id",l),h.insertNode(y),h=s.cloneRange(),h.collapse(!1);let E=o.createElement("span");return E.id=c,E.style.lineHeight="0",E.style.display="none",E.textContent=d,E.setAttribute("data-usechatgpt-marker","usechatgpt-marker"),E.setAttribute("contenteditable","false"),E.setAttribute("data-usechatgpt-marker-end-id",c),h.insertNode(E),{startMarkerId:l,endMarkerId:c,selectionText:b,editableElementSelectionText:u}}}}}catch(o){}return{startMarkerId:"",endMarkerId:"",selectionText:"",editableElementSelectionText:""}},Wa=e=>{var o,i,a,l,c,d;let t=pe(),n="",r="";try{if(e){let s=e.ownerDocument||e.document,u=s.defaultView||s.parentWindow,f;if(typeof u.getSelection!="undefined"&&(f=u.getSelection(),f.rangeCount>0)){let m=null;switch(t){case"notion.so":m=s.querySelector(".notion-page-content")||s.querySelector('[data-content-editable-root="true"]');break;case"larksuite.com":m=s.querySelector(".page-block-children")||s.querySelector(".page-block")||s.querySelector(".root-block");break;case"writer.zoho.com":if(m=document.querySelector("#editorpane"),m){let b=m.querySelectorAll(".overlay"),g=[];if(b.length>0){b.forEach(y=>{var R;let E=(R=y.parentElement)==null?void 0:R.querySelector(".zw-line-content");E&&(g.find(C=>C===E)||g.push(E))});let h=g.map(y=>y.innerText).join("").trim().replace(/\u200B/g,"");h&&(n=h)}else{let h=m.querySelector(".cursor");if(h){let y=document.createRange();y.selectNode(m);let E=y.cloneRange();E.setEndBefore(h),(o=u.getSelection())==null||o.removeAllRanges(),(i=u.getSelection())==null||i.addRange(E);let R=(a=u.getSelection())==null?void 0:a.toString().trim().replace(/\u200B/g,"");if(R)return r=R,{editableElementSelectionText:n,selectionText:r}}}}break;default:{let b=3,g=e.parentElement;for(;b>0&&g;){let h=et(g);if(h.isEditableElement&&h.editableElement)if((l=h.editableElement)!=null&&l.innerText){m=h.editableElement;break}else(c=h.editableElement)!=null&&c.parentElement&&(g=h.editableElement.parentElement,b--);else break}}break}return m?(document.createRange().selectNode(m),r=((d=u.getSelection())==null?void 0:d.toString().trim().replace(/\u200B/g,""))||m.innerText,{selectionText:r,editableElementSelectionText:n}):{selectionText:r,editableElementSelectionText:n}}}}catch(s){}return{selectionText:r,editableElementSelectionText:n}},Ei=(e,t,n)=>{var o;let r=e.ownerDocument||document;if(e.focus(),e.setSelectionRange(t,n),e.tagName==="TEXTAREA"){let i=e,a=getComputedStyle(i),l=((o=i.value.match(/\w/))==null?void 0:o[0])||"M",c=a.fontSize,d=a.fontFamily,s=r.createElement("span");s.style.fontSize=c,s.style.fontFamily=d,s.style.position="absolute",s.style.top="-9999px",s.style.left="-9999px",s.innerText=l,r.body.appendChild(s);let u=s.offsetWidth;s.remove();let f=Math.floor(i.getBoundingClientRect().width/u)||30,m=i.value.substring(0,n),b=Rn(m.split(/\n/).map(h=>{let y=Math.ceil(h.length/f);return Math.max(y,1)})),g=i.clientHeight/i.rows;i.scrollTop=g*b}else if(e.tagName==="INPUT"){let i=e;i.scrollLeft=i.scrollWidth}},_a=async(e,t,n,r)=>{var c,d;let o=null,i=document.querySelector(`[data-usechatgpt-marker-start-id="${e}"`),a=document.querySelector(`[data-usechatgpt-marker-end-id="${t}"`),l=null;if(!(!i&&!a&&(l=_r(e)||_r(t),!l))){if(i&&(i.tagName==="INPUT"||i.tagName==="TEXTAREA")){let s=i;o=s;let u=(s==null?void 0:s.ownerDocument)||document,f=Number(s.getAttribute("data-usechatgpt-start-offset")),m=Number(s.getAttribute("data-usechatgpt-end-offset"));if(Pt(f)&&Pt(m)){s.tagName==="TEXTAREA"?n=n.replace(/\n+/,`
`):(n=n.replace(/\n+/," "),n=n.replace(/\s+/," "));let b="",g="",h="";r==="REPLACE_SELECTION"?(g=s.value.substring(0,f),h=s.value.substring(m,s.value.length)):r==="INSERT_BELOW"?(g=s.value.substring(0,m),h=s.value.substring(m,s.value.length),!g.endsWith(`
`)&&s.tagName==="TEXTAREA"?n=`
`+n:!g.endsWith(" ")&&s.tagName==="INPUT"&&(n=" "+n)):r==="INSERT_ABOVE"?(g=s.value.substring(0,f),h=s.value.substring(f,s.value.length),!h.startsWith(`
`)&&s.tagName==="TEXTAREA"?n=n+`
`:!h.startsWith(" ")&&s.tagName==="INPUT"&&(n=n+" ")):r==="INSERT"&&(g=s.value.substring(0,m),h=s.value.substring(m,s.value.length)),b=g+n+h;try{await Ur()?(await navigator.clipboard.writeText(b),s.focus(),s.select(),u.execCommand("paste",!1,"")):(s.focus(),s.select(),u.execCommand("insertText",!1,b))}catch(y){s.focus(),s.select(),u.execCommand("insertText",!1,b)}Ei(s,g.length,g.length+n.length)}}else if(l){r==="INSERT_BELOW"?n=(`
`+n).replace(/^\n+/,`
`):r==="INSERT_ABOVE"&&(n=(n+`
`).replace(/\n+$/,`
`));try{let s=l.cloneRange();r==="REPLACE_SELECTION"||(r==="INSERT"||r==="INSERT_BELOW"?(s.setStart(l.endContainer,l.endOffset),s.setEnd(l.endContainer,l.endOffset)):r==="INSERT_ABOVE"&&(s.setStart(l.startContainer,l.startOffset),s.setEnd(l.startContainer,l.startOffset))),await Vr(s,n)}catch(s){}}else if(i&&a){let{editableElement:s}=et(i);if(!s)return;o=s;let u=s.ownerDocument||document,f=u.createRange();if(f.selectNode(s),f.setStartAfter(i),f.setEndBefore(a),r==="INSERT_BELOW"?(n=(`
`+n).replace(/^\n+/,`
`),f.setStart(f.endContainer,f.endOffset)):r==="INSERT_ABOVE"?(n=(n+`
`).replace(/\n+$/,`
`),f.setEnd(f.startContainer,f.startOffset)):r==="REPLACE_SELECTION"||r==="INSERT"&&(n=n.replace(/^\n+/,""),f.setStart(f.endContainer,f.endOffset)),i.parentElement&&a.parentElement&&i.parentElement.isSameNode(a.parentElement)){let y=f.startOffset,E=f.endOffset,R=i.parentElement;i.remove(),a.remove();let C=!0;for(let x=0;x<R.childNodes.length;x++)if(R.childNodes[x].nodeType!==Node.TEXT_NODE){C=!1;break}if(C){let x=f.toString(),O=u.createTextNode(R.innerText);if(R.innerHTML="",R.appendChild(O),x.length>0){let F=Math.max(R.innerText.indexOf(x),0),W=F+x.length;f.setStart(R.childNodes[0],F),f.setEnd(R.childNodes[0],W)}else if(y===E){let F=R.childNodes[0];if(!F)return;E===0?(f.setStart(F,0),f.setEnd(F,0)):(f.setStart(F,((c=F.nodeValue)==null?void 0:c.length)||0),f.setEnd(F,((d=F.nodeValue)==null?void 0:d.length)||0))}}}let m=()=>{var y,E;(y=u.getSelection())==null||y.removeAllRanges(),r==="INSERT_BELOW"||r==="INSERT"?(f.setStart(f.endContainer,f.endOffset),f.setEnd(f.endContainer,f.endOffset)):r==="INSERT_ABOVE"&&(f.setStart(f.startContainer,f.startOffset),f.setEnd(f.startContainer,f.startOffset)),(E=u.getSelection())==null||E.addRange(f)},b=()=>{s&&s.focus()},g=(y,E)=>{var P,A,p,D;let R=f.cloneRange();r==="REPLACE_SELECTION"&&R.deleteContents(),(P=u.getSelection())==null||P.removeAllRanges(),(A=u.getSelection())==null||A.addRange(R);let{separator:C=`

`,tagName:x="div",className:O="",cssText:F="",onSeparator:W}=E||{};y.split(C).reverse().forEach((M,w,I)=>{let N=u.createElement(x);if(O&&(N.className=O),F&&(N.style.cssText=F),N.innerText=M,R.insertNode(N),W&&I[w+1]){let V=W(M);R.insertNode(V)}}),(p=u.getSelection())==null||p.removeAllRanges(),(D=u.getSelection())==null||D.addRange(R)};switch(pe()){case"mail.google.com":b(),m(),g(n,{cssText:"white-space: pre-wrap;",onSeparator:()=>{let y=u.createElement("div"),E=u.createElement("br");return y.appendChild(E),y}});break;case"outlook.live.com":b(),m(),g(n,{className:"elementToProof ContentPasted0",onSeparator:()=>{let y=u.createElement("div");y.className="elementToProof ContentPasted0";let E=u.createElement("br");return y.appendChild(E),y}});break;default:b(),m(),await Vr(f,n)}if(o){let y=new KeyboardEvent("keyup",{bubbles:!0,cancelable:!0});i.dispatchEvent(y)}}zr(),bi()}},zr=()=>{typeof document!="undefined"&&document.querySelectorAll("[data-usechatgpt-marker]").forEach(e=>{if(e.tagName==="SPAN"||(e==null?void 0:e.id.includes("usechatgpt-marker"))){e.remove();return}e.removeAttribute("data-usechatgpt-marker"),e.removeAttribute("data-usechatgpt-start-offset"),e.removeAttribute("data-usechatgpt-end-offset"),e.removeAttribute("data-usechatgpt-marker-start-id"),e.removeAttribute("data-usechatgpt-marker-end-id")})},Va=()=>{var e;typeof document!="undefined"&&((e=document.getSelection())==null||e.removeAllRanges())},et=(e,t=10)=>{if(!e)return{isEditableElement:!1,editableElement:null};let n=e,r=null,o=t;for(;n&&o>0;){if(Ot(n)){r=n;break}n=n.parentElement,o--}return r?{isEditableElement:!0,editableElement:r}:{isEditableElement:!1,editableElement:null}},Ka=(e,t)=>{var m,b;let n=e,r=Ri(),o="",{isEditableElement:i,editableElement:a}=et(n),l="",c="",d=0;i&&a&&(d=vi(a));let s=Ct(n.getBoundingClientRect()),u=null;try{let g=(b=(m=window.getSelection())==null?void 0:m.getRangeAt(0))==null?void 0:b.getBoundingClientRect();g&&(u=Ct(g),i&&g.width+g.height===0&&(u=Ct(e.getBoundingClientRect())))}catch(g){}if(!u){let g={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight,x:0,y:0};u={x:g.width/2,y:g.height/2,left:g.width/2,right:g.width/2,top:g.height/2,bottom:g.height/2,width:0,height:0}}return{isEmbedPage:!1,virtual:!1,tagName:n.tagName,eventType:"mouseup",target:n,isEditableElement:i,selectionText:r,selectionHTML:r,selectionRect:u,caretOffset:d,startMarkerId:l,endMarkerId:c,editableElementSelectionText:o,editableElementSelectionHTML:o,targetRect:s,...t}},Ua=(e=!0)=>{let t,n;if(document.selection)return t=document.selection.createRange(),t.collapse(e),t.parentElement();{let r=window.getSelection();if(r!=null&&r.getRangeAt?(r==null?void 0:r.rangeCount)>0&&(t=r.getRangeAt(0)):(t=document.createRange(),t.setStart(r==null?void 0:r.anchorNode,r==null?void 0:r.anchorOffset),t.setEnd(r==null?void 0:r.focusNode,r==null?void 0:r.focusOffset),t.collapsed!==(r==null?void 0:r.isCollapsed)&&(t.setStart(r==null?void 0:r.focusNode,r==null?void 0:r.focusOffset),t.setEnd(r==null?void 0:r.anchorNode,r==null?void 0:r.anchorOffset))),t){n=t[e?"startContainer":"endContainer"];let o=n.nodeType===3?n.parentNode:n;if(o.tagName==="BODY"||o.tagName==="HTML"||o.tagName==="IFRAME")return;if(Ot(o))return o;if(o.querySelector){let l=o.querySelector('[contenteditable="true"]');if(l&&Ot(l))return l;let c=o.querySelector("input,textarea");if(c&&Ot(c))return c}let{editableElement:i,isEditableElement:a}=et(o);return a?i:void 0}}};var Ot=e=>{var t;if(!(e!=null&&e.tagName))return!1;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||((t=e.getAttribute)==null?void 0:t.call(e,"contenteditable"))==="true"){let n=e.getAttribute("type"),r=e.getAttribute("readonly"),o=e.getAttribute("aria-readonly"),i=e.getAttribute("disabled"),a=e.getAttribute("aria-disabled");return!(n&&["password","file","checkbox","radio","submit","reset","button","image","hidden"].includes(n)||r==="true"||i==="true"||o==="true"||a==="true"||r===""||i===""||e.id===tt||e.id===pn)}return!1},Vr=async(e,t)=>{var o;let n=e.cloneRange(),r=((o=e.startContainer||e.endContainer)==null?void 0:o.ownerDocument)||document;if(!!r)try{let i=r.getSelection(),a=r.createElement("div");a.id=hn,a.setAttribute("contenteditable","true"),a.style.cssText="width: 1px;height: 1px;position: fixed;top: 0px;left:0px;overflow: hidden; z-index: -1;",r.body.appendChild(a),a.addEventListener("paste",u=>{u.stopPropagation()},!0),a.addEventListener("copy",u=>{u.stopPropagation()},!0),a.focus();let l=r.createRange();l.selectNodeContents(a),i==null||i.removeAllRanges(),i==null||i.addRange(l),a.focus(),["evernote.com"].includes(pe())||r.execCommand("paste",!1,"");let{editableElement:c}=et(n.startContainer||n.endContainer),d=u=>new Promise(f=>setTimeout(f,u));await Ur()?(await navigator.clipboard.writeText(t),c&&c.focus(),i==null||i.removeAllRanges(),i==null||i.addRange(n),await d(0),r.execCommand("paste",!1,"")):(c&&c.focus(),i==null||i.removeAllRanges(),i==null||i.addRange(n),r.execCommand("insertText",!1,t)),await d(0);let s=r.getSelection();s&&(s==null?void 0:s.rangeCount)>0?n=(s==null?void 0:s.getRangeAt(0).cloneRange())||n:n=null;try{let u=r.createRange();u.selectNodeContents(a),i==null||i.removeAllRanges(),i==null||i.addRange(u),a.focus(),r.execCommand("copy",!1,"")}catch(u){let f=a.innerText.trim();try{let m=new Br;m.addRule("pre",{filter:"pre",replacement:function(g,h){return"```\n"+h.textContent+"\n```"}});let b=m.turndown(a);await navigator.clipboard.writeText(b||f)}catch(m){await navigator.clipboard.writeText(f)}}finally{a.remove()}}catch(i){}finally{let i=r.getSelection();i&&n&&(i.removeAllRanges(),i.addRange(n),n.collapse(!1),i.collapseToEnd())}},xi=e=>{var t,n,r,o,i;try{let a=e.target,c=(a.ownerDocument||a.document).getSelection();if(c&&c.rangeCount>0){let d=c.getRangeAt(0),s=d.startContainer||d.endContainer;if(s&&s.nodeType===3)s=s.parentNode;else if(s.childNodes.length>0&&d.startOffset===d.endOffset&&d.startOffset>=0){let b=d.startContainer,g=d.startOffset,h=b.childNodes[g];h.isSameNode(document.getElementById("max-ai-rich-text-editor-placeholder"))?h.nextSibling&&(s=h.nextSibling):h&&(s=h)}let u=(t=s==null?void 0:s.tagName)==null?void 0:t.toLowerCase(),f=pe();f="";let m="1";switch(f){case"notion.so":break;case"larksuite.com":if(u==="span"&&s.getAttribute("data-string")==="true"){if((r=(n=s==null?void 0:s.parentElement)==null?void 0:n.parentElement)!=null&&r.getAttribute("data-placeholder"))break;m=s.innerText}break;case"mail.google.com":break;case"outlook.live.com":{let b=!1,g=s;if(location.href.startsWith("https://outlook.live.com/mail/")){u==="br"&&(b=!0,(o=s==null?void 0:s.parentElement)!=null&&o.parentElement&&(g=s.parentElement.parentElement)),(u==="span"||u==="div")&&s.childNodes.length===1&&s.childNodes[0].nodeName.toLowerCase()==="br"&&(b=!0,g=s.parentElement);let h=g.getAttribute("role"),y=g.getAttribute("contenteditable");h==="textbox"&&y==="true"&&(b?m="":m=s.innerText)}}break;case"writer.zoho.com":{let b=(i=document.querySelector("#editorpane"))==null?void 0:i.querySelector(".cursor");if(!b)break;s=b.parentElement,b!=null&&b.previousElementSibling&&(s=b.previousElementSibling,m=s.innerText)}break;default:break}return{richTextEditorLineText:m.trim().replace(/\u200B/g,""),richTextEditorLineTextElement:s}}return{richTextEditorLineText:"1",richTextEditorLineTextElement:null}}catch(a){return{richTextEditorLineText:"1",richTextEditorLineTextElement:null}}},wi=(e,t)=>{var s,u,f;if(!t){un();return}let n=window.getComputedStyle(e),r=n.getPropertyValue("font-size"),o=n.getPropertyValue("color"),i=n.getPropertyValue("font-family"),a=n.getPropertyValue("font-weight"),l=n.getPropertyValue("font-style");un();let c=document.createElement("span");c.id="max-ai-rich-text-editor-placeholder",c.style.fontSize=r,c.style.color=o,c.style.fontFamily=i,c.style.fontWeight=a,c.style.fontStyle=l,c.style.zIndex="999999999",c.style.pointerEvents="none",c.style.opacity="0.5",c.style.position="relative",c.style.display="inline",c.style.whiteSpace="nowrap",c.setAttribute("data-placeholder",t);let d=pe();if(d==="larksuite.com")c.style.lineHeight="18px";else if(d==="writer.zoho.com"){let m=(u=(s=e==null?void 0:e.parentElement)==null?void 0:s.parentElement)==null?void 0:u.getAttribute("data-textformat");try{let b=JSON.parse(m||"{}").size||12;c.style.fontSize=`${Number(b)}pt`}catch(b){c.style.fontSize="12pt"}e.insertBefore(c,e.firstChild);return}e.tagName.toLowerCase()==="br"?(f=e.parentElement)==null||f.insertBefore(c,e):e.appendChild(c)},un=()=>{var e;(e=document.getElementById("max-ai-rich-text-editor-placeholder"))==null||e.remove()},za=()=>{var r;let{chatBoxShortCutKey:e,floatingMenuShortCutKey:t}=Sn(),[n]=mn(bn);(0,Kr.useEffect)(()=>{let o=d=>{var f;let{richTextEditorLineText:s,richTextEditorLineTextElement:u}=xi(d);if(!s&&u){let m=t&&((f=n.userSettings)==null?void 0:f.shortcutHintEnable)?`Press '${t}' for AI`:"";wi(u,m)}else un()},i=d=>{o(d)},a=d=>{},l=d=>{o(d)},c=d=>{o(d)};return document.addEventListener("focus",c,!0),document.addEventListener("keyup",i,!0),document.addEventListener("keydown",a,!0),document.addEventListener("mouseup",l,!0),()=>{document.removeEventListener("focus",c,!0),document.removeEventListener("keyup",i,!0),document.removeEventListener("keydown",a,!0),document.removeEventListener("mouseup",l,!0)}},[e,t,(r=n.userSettings)==null?void 0:r.shortcutHintEnable])};export{We as a,Ce as b,_e as c,$n as d,Ye as e,Pe as f,Vi as g,Ki as h,Ui as i,zi as j,qi as k,$i as l,ji as m,Gi as n,Xi as o,Yi as p,Zi as q,Qi as r,Ji as s,ea as t,ta as u,ce as v,Sr as w,tn as x,ga as y,Ir as z,ha as A,Ct as B,ba as C,va as D,ya as E,Ra as F,Ea as G,xa as H,wa as I,Ta as J,Sa as K,Sn as L,vi as M,Ri as N,Ba as O,Wa as P,_a as Q,zr as R,Va as S,et as T,Ka as U,Ua as V,za as W};
/*!
* tabbable 6.1.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
