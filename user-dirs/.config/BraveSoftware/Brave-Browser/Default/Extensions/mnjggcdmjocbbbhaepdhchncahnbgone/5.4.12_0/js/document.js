(()=>{"use strict";var e={156:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YT_DOMAINS=void 0,t.YT_DOMAINS=["m.youtube.com","www.youtube.com","www.youtube-nocookie.com","music.youtube.com","www.youtubekids.com"]},740:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function d(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,d)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const o=n(841),r=n(584),s=n(156);let d,a="";const c=["ytd-thumbnail","ytd-playlist-thumbnail"],l=["/youtubei/v1/search","/youtubei/v1/guide","/youtubei/v1/browse","/youtubei/v1/next","/youtubei/v1/player"],u=["videoDetails","videoPrimaryInfoRenderer","videoSecondaryInfoRenderer","currentVideoEndpoint"],v=e=>{window.postMessage(Object.assign({source:"sponsorblock"},e),"/")};function w(e){const t=d;d=e.detail,y(),t||(e.detail.addEventListener("onAdStart",(()=>v({type:"ad",playing:!0}))),e.detail.addEventListener("onAdFinish",(()=>v({type:"ad",playing:!1}))))}function f(e){const t=e.detail.pageType;if(t){const n={type:"navigation",pageType:t,videoID:null};if("shorts"===t||"watch"===t){const i=e.detail.endpoint;if(!i)return null;n.videoID=("shorts"===t?i.reelWatchEndpoint:i.watchEndpoint).videoId}return n}return null}function p(e){const t=f(e);t&&v(t)}function m(e){var t,n,i;y();const o=null===(i=null===(n=null===(t=e.detail)||void 0===t?void 0:t.response)||void 0===n?void 0:n.playerResponse)||void 0===i?void 0:i.videoDetails;if(o)v(Object.assign({channelID:o.channelId,channelTitle:o.author},f(e)));else{const t=f(e);t&&v(t)}}function y(){if(!d)return;const e=d.getVideoData();e&&e.video_id!==a&&(a=e.video_id,v({type:"data",videoID:e.video_id,isLive:e.isLive,isPremiere:e.isPremiere}))}function h(e){v({type:"videoIDsLoaded",videoIDs:Array.from(b(e))})}function b(e){const t=new Set;for(const n in e)"videoId"===n?t.add(e[n]):"object"!=typeof e[n]||u.includes(n)||b(e[n]).forEach((e=>t.add(e)));return t}const g={browserFetch:null,customElementDefine:null,waitingInterval:null};function I(){document.removeEventListener("yt-player-updated",w),document.removeEventListener("yt-navigate-start",p),document.removeEventListener("yt-navigate-finish",m),g.browserFetch&&(window.fetch=g.browserFetch),g.customElementDefine&&(window.customElements.define=g.customElementDefine),g.waitingInterval&&clearInterval(g.waitingInterval),window.teardownCB=null}t.init=function(){var e,t,n;const d="true"===(null===(t=null===(e=document.querySelector("#sponsorblock-document-script"))||void 0===e?void 0:e.getAttribute)||void 0===t?void 0:t.call(e,"teardown")),a=window.versionCB&&(!window.versionCB||(0,o.versionHigher)(r.version,window.versionCB));if(d||a)null===(n=window.teardownCB)||void 0===n||n.call(window);else if(window.versionCB&&!(0,o.versionHigher)(r.version,window.versionCB))return;window.versionCB=r.version,window.teardownCB=I;const u=document.createElement("div");if(u.id="sponsorblock-document-script",u.setAttribute("version",r.version),(document.head||document.documentElement).appendChild(u),document.addEventListener("yt-player-updated",w),document.addEventListener("yt-navigate-start",p),document.addEventListener("yt-navigate-finish",m),s.YT_DOMAINS.includes(window.location.host)){const e=-1!==window.customElements.define.toString().indexOf("[native code]"),t=window.customElements.define.bind(window.customElements);g.customElementDefine=t,window.customElements.define=(n,i,o)=>{let r=i;if(c.includes(n))if(e){class e extends i{constructor(){super(),v({type:"newElement",name:n})}}r=e}else r=function(){i.call(this),v({type:"newElement",name:n})},Object.setPrototypeOf(r.prototype,i.prototype),Object.setPrototypeOf(r,i);t(n,r,o)}}const f=window.fetch;if(g.browserFetch=f,window.fetch=(e,t)=>e instanceof Request&&l.some((t=>e.url.includes(t)))?new Promise(((n,o)=>i(this,void 0,void 0,(function*(){try{const i=yield f(e,t),o=yield i.json();n(new Response(JSON.stringify(o),i)),h(o)}catch(e){o(e)}})))):f(e,t),"undefined"!=typeof ytInitialData)h(ytInitialData);else{const e=setInterval((()=>{"undefined"!=typeof ytInitialData&&(h(ytInitialData),clearInterval(e))}),1);g.waitingInterval=e}setTimeout((()=>{setInterval.toString().includes("console.log(SCRIPTID, 'original interval:', interval, location.href)")&&alert('Warning: You hae the user script "YouTube CPU Tamer". This causes performance issues with SponsorBlock, and does not actually improve CPU performance. Please uninstall this user script.')}),1e3)}},841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.versionHigher=void 0,t.versionHigher=function(e,t){const n=e.split("."),i=t.split(".");if(n.length!==i.length)return!0;for(let e=0;e<n.length;e++){const t=parseInt(n[e]),o=parseInt(i[e]);if(t>o)return!0;if(t<o)return!1}return!1}},584:e=>{e.exports={version:"1.1.38"}}},t={};(0,function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(740).init)()})();