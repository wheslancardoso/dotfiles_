const GA_ENDPOINT="https://www.google-analytics.com/mp/collect",GA_DEBUG_ENDPOINT="https://www.google-analytics.com/debug/mp/collect",MEASUREMENT_ID="G-ET3T731TEF",API_SECRET="lJMuoWydQXKIT3blFpRHoA",DEFAULT_ENGAGEMENT_TIME_MSEC=100,SESSION_EXPIRATION_IN_MIN=30;function setStorage(e){return new Promise(((t,s)=>{chrome.storage.local.set(e,(function(){t()}))}))}function getStorage(e){return new Promise(((t,s)=>{chrome.storage.local.get(e,(function(e){t(e)}))}))}class Analytics{constructor(e=!1){this.debug=e}async getOrCreateClientId(){let{clientId:e}=await getStorage("clientId");return e||(e=self.crypto.randomUUID(),await setStorage({clientId:e})),e}async getOrCreateSessionId(){let{sessionData:e}=await getStorage(["sessionData"]);const t=Date.now();if(e&&e.timestamp){(t-e.timestamp)/6e4>30?e=null:(e.timestamp=t,await setStorage({sessionData:e}))}return e||(e={session_id:t.toString(),timestamp:t.toString()},await setStorage({sessionData:e})),e.session_id}async fireEvent(e,t={}){t.session_id||(t.session_id=await this.getOrCreateSessionId()),t.engagement_time_msec||(t.engagement_time_msec=100);try{await fetch(`${this.debug?GA_DEBUG_ENDPOINT:GA_ENDPOINT}?measurement_id=G-ET3T731TEF&api_secret=${API_SECRET}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e.replace(/\s/g,"_"),params:t}]})});if(!this.debug)return}catch(e){}}async firePageViewEvent(e,t,s={}){return this.fireEvent("page_view",{page_title:e,page_location:t,...s})}async fireErrorEvent(e,t={}){return this.fireEvent("extension_error",{...e,...t})}}var googleAnalytics=new Analytics;